(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function Kg(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Su={exports:{}},Zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xx;function Ew(){if(xx)return Zl;xx=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,o){var d=null;if(o!==void 0&&(d=""+o),r.key!==void 0&&(d=""+r.key),"key"in r){o={};for(var u in r)u!=="key"&&(o[u]=r[u])}else o=r;return r=o.ref,{$$typeof:s,type:i,key:d,ref:r!==void 0?r:null,props:o}}return Zl.Fragment=e,Zl.jsx=n,Zl.jsxs=n,Zl}var gx;function Aw(){return gx||(gx=1,Su.exports=Ew()),Su.exports}var t=Aw(),_u={exports:{}},rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bx;function Iw(){if(bx)return rt;bx=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),y=Symbol.iterator;function N(P){return P===null||typeof P!="object"?null:(P=y&&P[y]||P["@@iterator"],typeof P=="function"?P:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,S={};function R(P,W,X){this.props=P,this.context=W,this.refs=S,this.updater=X||k}R.prototype.isReactComponent={},R.prototype.setState=function(P,W){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,W,"setState")},R.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function A(){}A.prototype=R.prototype;function I(P,W,X){this.props=P,this.context=W,this.refs=S,this.updater=X||k}var j=I.prototype=new A;j.constructor=I,T(j,R.prototype),j.isPureReactComponent=!0;var E=Array.isArray;function D(){}var L={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function Y(P,W,X){var we=X.ref;return{$$typeof:s,type:P,key:W,ref:we!==void 0?we:null,props:X}}function q(P,W){return Y(P.type,W,P.props)}function ce(P){return typeof P=="object"&&P!==null&&P.$$typeof===s}function Q(P){var W={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(X){return W[X]})}var ne=/\/+/g;function ee(P,W){return typeof P=="object"&&P!==null&&P.key!=null?Q(""+P.key):W.toString(36)}function se(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(D,D):(P.status="pending",P.then(function(W){P.status==="pending"&&(P.status="fulfilled",P.value=W)},function(W){P.status==="pending"&&(P.status="rejected",P.reason=W)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function M(P,W,X,we,te){var _e=typeof P;(_e==="undefined"||_e==="boolean")&&(P=null);var re=!1;if(P===null)re=!0;else switch(_e){case"bigint":case"string":case"number":re=!0;break;case"object":switch(P.$$typeof){case s:case e:re=!0;break;case f:return re=P._init,M(re(P._payload),W,X,we,te)}}if(re)return te=te(P),re=we===""?"."+ee(P,0):we,E(te)?(X="",re!=null&&(X=re.replace(ne,"$&/")+"/"),M(te,W,X,"",function(ue){return ue})):te!=null&&(ce(te)&&(te=q(te,X+(te.key==null||P&&P.key===te.key?"":(""+te.key).replace(ne,"$&/")+"/")+re)),W.push(te)),1;re=0;var Re=we===""?".":we+":";if(E(P))for(var $e=0;$e<P.length;$e++)we=P[$e],_e=Re+ee(we,$e),re+=M(we,W,X,_e,te);else if($e=N(P),typeof $e=="function")for(P=$e.call(P),$e=0;!(we=P.next()).done;)we=we.value,_e=Re+ee(we,$e++),re+=M(we,W,X,_e,te);else if(_e==="object"){if(typeof P.then=="function")return M(se(P),W,X,we,te);throw W=String(P),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return re}function B(P,W,X){if(P==null)return P;var we=[],te=0;return M(P,we,"","",function(_e){return W.call(X,_e,te++)}),we}function Z(P){if(P._status===-1){var W=P._result;W=W(),W.then(function(X){(P._status===0||P._status===-1)&&(P._status=1,P._result=X)},function(X){(P._status===0||P._status===-1)&&(P._status=2,P._result=X)}),P._status===-1&&(P._status=0,P._result=W)}if(P._status===1)return P._result.default;throw P._result}var Ne=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)},ae={map:B,forEach:function(P,W,X){B(P,function(){W.apply(this,arguments)},X)},count:function(P){var W=0;return B(P,function(){W++}),W},toArray:function(P){return B(P,function(W){return W})||[]},only:function(P){if(!ce(P))throw Error("React.Children.only expected to receive a single React element child.");return P}};return rt.Activity=b,rt.Children=ae,rt.Component=R,rt.Fragment=n,rt.Profiler=r,rt.PureComponent=I,rt.StrictMode=i,rt.Suspense=p,rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,rt.__COMPILER_RUNTIME={__proto__:null,c:function(P){return L.H.useMemoCache(P)}},rt.cache=function(P){return function(){return P.apply(null,arguments)}},rt.cacheSignal=function(){return null},rt.cloneElement=function(P,W,X){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var we=T({},P.props),te=P.key;if(W!=null)for(_e in W.key!==void 0&&(te=""+W.key),W)!G.call(W,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&W.ref===void 0||(we[_e]=W[_e]);var _e=arguments.length-2;if(_e===1)we.children=X;else if(1<_e){for(var re=Array(_e),Re=0;Re<_e;Re++)re[Re]=arguments[Re+2];we.children=re}return Y(P.type,te,we)},rt.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:o,_context:P},P},rt.createElement=function(P,W,X){var we,te={},_e=null;if(W!=null)for(we in W.key!==void 0&&(_e=""+W.key),W)G.call(W,we)&&we!=="key"&&we!=="__self"&&we!=="__source"&&(te[we]=W[we]);var re=arguments.length-2;if(re===1)te.children=X;else if(1<re){for(var Re=Array(re),$e=0;$e<re;$e++)Re[$e]=arguments[$e+2];te.children=Re}if(P&&P.defaultProps)for(we in re=P.defaultProps,re)te[we]===void 0&&(te[we]=re[we]);return Y(P,_e,te)},rt.createRef=function(){return{current:null}},rt.forwardRef=function(P){return{$$typeof:u,render:P}},rt.isValidElement=ce,rt.lazy=function(P){return{$$typeof:f,_payload:{_status:-1,_result:P},_init:Z}},rt.memo=function(P,W){return{$$typeof:m,type:P,compare:W===void 0?null:W}},rt.startTransition=function(P){var W=L.T,X={};L.T=X;try{var we=P(),te=L.S;te!==null&&te(X,we),typeof we=="object"&&we!==null&&typeof we.then=="function"&&we.then(D,Ne)}catch(_e){Ne(_e)}finally{W!==null&&X.types!==null&&(W.types=X.types),L.T=W}},rt.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},rt.use=function(P){return L.H.use(P)},rt.useActionState=function(P,W,X){return L.H.useActionState(P,W,X)},rt.useCallback=function(P,W){return L.H.useCallback(P,W)},rt.useContext=function(P){return L.H.useContext(P)},rt.useDebugValue=function(){},rt.useDeferredValue=function(P,W){return L.H.useDeferredValue(P,W)},rt.useEffect=function(P,W){return L.H.useEffect(P,W)},rt.useEffectEvent=function(P){return L.H.useEffectEvent(P)},rt.useId=function(){return L.H.useId()},rt.useImperativeHandle=function(P,W,X){return L.H.useImperativeHandle(P,W,X)},rt.useInsertionEffect=function(P,W){return L.H.useInsertionEffect(P,W)},rt.useLayoutEffect=function(P,W){return L.H.useLayoutEffect(P,W)},rt.useMemo=function(P,W){return L.H.useMemo(P,W)},rt.useOptimistic=function(P,W){return L.H.useOptimistic(P,W)},rt.useReducer=function(P,W,X){return L.H.useReducer(P,W,X)},rt.useRef=function(P){return L.H.useRef(P)},rt.useState=function(P){return L.H.useState(P)},rt.useSyncExternalStore=function(P,W,X){return L.H.useSyncExternalStore(P,W,X)},rt.useTransition=function(){return L.H.useTransition()},rt.version="19.2.4",rt}var vx;function wh(){return vx||(vx=1,_u.exports=Iw()),_u.exports}var _=wh();const Fn=Kg(_);var Tu={exports:{}},er={},Cu={exports:{}},Eu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx;function Rw(){return yx||(yx=1,(function(s){function e(M,B){var Z=M.length;M.push(B);e:for(;0<Z;){var Ne=Z-1>>>1,ae=M[Ne];if(0<r(ae,B))M[Ne]=B,M[Z]=ae,Z=Ne;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var B=M[0],Z=M.pop();if(Z!==B){M[0]=Z;e:for(var Ne=0,ae=M.length,P=ae>>>1;Ne<P;){var W=2*(Ne+1)-1,X=M[W],we=W+1,te=M[we];if(0>r(X,Z))we<ae&&0>r(te,X)?(M[Ne]=te,M[we]=Z,Ne=we):(M[Ne]=X,M[W]=Z,Ne=W);else if(we<ae&&0>r(te,Z))M[Ne]=te,M[we]=Z,Ne=we;else break e}}return B}function r(M,B){var Z=M.sortIndex-B.sortIndex;return Z!==0?Z:M.id-B.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var d=Date,u=d.now();s.unstable_now=function(){return d.now()-u}}var p=[],m=[],f=1,b=null,y=3,N=!1,k=!1,T=!1,S=!1,R=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function j(M){for(var B=n(m);B!==null;){if(B.callback===null)i(m);else if(B.startTime<=M)i(m),B.sortIndex=B.expirationTime,e(p,B);else break;B=n(m)}}function E(M){if(T=!1,j(M),!k)if(n(p)!==null)k=!0,D||(D=!0,Q());else{var B=n(m);B!==null&&se(E,B.startTime-M)}}var D=!1,L=-1,G=5,Y=-1;function q(){return S?!0:!(s.unstable_now()-Y<G)}function ce(){if(S=!1,D){var M=s.unstable_now();Y=M;var B=!0;try{e:{k=!1,T&&(T=!1,A(L),L=-1),N=!0;var Z=y;try{t:{for(j(M),b=n(p);b!==null&&!(b.expirationTime>M&&q());){var Ne=b.callback;if(typeof Ne=="function"){b.callback=null,y=b.priorityLevel;var ae=Ne(b.expirationTime<=M);if(M=s.unstable_now(),typeof ae=="function"){b.callback=ae,j(M),B=!0;break t}b===n(p)&&i(p),j(M)}else i(p);b=n(p)}if(b!==null)B=!0;else{var P=n(m);P!==null&&se(E,P.startTime-M),B=!1}}break e}finally{b=null,y=Z,N=!1}B=void 0}}finally{B?Q():D=!1}}}var Q;if(typeof I=="function")Q=function(){I(ce)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ee=ne.port2;ne.port1.onmessage=ce,Q=function(){ee.postMessage(null)}}else Q=function(){R(ce,0)};function se(M,B){L=R(function(){M(s.unstable_now())},B)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(M){M.callback=null},s.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<M?Math.floor(1e3/M):5},s.unstable_getCurrentPriorityLevel=function(){return y},s.unstable_next=function(M){switch(y){case 1:case 2:case 3:var B=3;break;default:B=y}var Z=y;y=B;try{return M()}finally{y=Z}},s.unstable_requestPaint=function(){S=!0},s.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var Z=y;y=M;try{return B()}finally{y=Z}},s.unstable_scheduleCallback=function(M,B,Z){var Ne=s.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Ne+Z:Ne):Z=Ne,M){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Z+ae,M={id:f++,callback:B,priorityLevel:M,startTime:Z,expirationTime:ae,sortIndex:-1},Z>Ne?(M.sortIndex=Z,e(m,M),n(p)===null&&M===n(m)&&(T?(A(L),L=-1):T=!0,se(E,Z-Ne))):(M.sortIndex=ae,e(p,M),k||N||(k=!0,D||(D=!0,Q()))),M},s.unstable_shouldYield=q,s.unstable_wrapCallback=function(M){var B=y;return function(){var Z=y;y=B;try{return M.apply(this,arguments)}finally{y=Z}}}})(Eu)),Eu}var wx;function Mw(){return wx||(wx=1,Cu.exports=Rw()),Cu.exports}var Au={exports:{}},Us={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nx;function Dw(){if(Nx)return Us;Nx=1;var s=wh();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)m+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(p,m,f){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:p,containerInfo:m,implementation:f}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Us.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Us.createPortal=function(p,m){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(p,m,null,f)},Us.flushSync=function(p){var m=d.T,f=i.p;try{if(d.T=null,i.p=2,p)return p()}finally{d.T=m,i.p=f,i.d.f()}},Us.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},Us.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Us.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var f=m.as,b=u(f,m.crossOrigin),y=typeof m.integrity=="string"?m.integrity:void 0,N=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;f==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:y,fetchPriority:N}):f==="script"&&i.d.X(p,{crossOrigin:b,integrity:y,fetchPriority:N,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Us.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var f=u(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:f,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},Us.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var f=m.as,b=u(f,m.crossOrigin);i.d.L(p,f,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Us.preloadModule=function(p,m){if(typeof p=="string")if(m){var f=u(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:f,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},Us.requestFormReset=function(p){i.d.r(p)},Us.unstable_batchedUpdates=function(p,m){return p(m)},Us.useFormState=function(p,m,f){return d.H.useFormState(p,m,f)},Us.useFormStatus=function(){return d.H.useHostTransitionStatus()},Us.version="19.2.4",Us}var jx;function Ow(){if(jx)return Au.exports;jx=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Au.exports=Dw(),Au.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kx;function Uw(){if(kx)return er;kx=1;var s=Mw(),e=wh(),n=Ow();function i(a){var l="https://react.dev/errors/"+a;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)l+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function o(a){var l=a,c=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(c=l.return),a=l.return;while(a)}return l.tag===3?c:null}function d(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function u(a){if(a.tag===31){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function p(a){if(o(a)!==a)throw Error(i(188))}function m(a){var l=a.alternate;if(!l){if(l=o(a),l===null)throw Error(i(188));return l!==a?null:a}for(var c=a,h=l;;){var v=c.return;if(v===null)break;var w=v.alternate;if(w===null){if(h=v.return,h!==null){c=h;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===c)return p(v),a;if(w===h)return p(v),l;w=w.sibling}throw Error(i(188))}if(c.return!==h.return)c=v,h=w;else{for(var C=!1,O=v.child;O;){if(O===c){C=!0,c=v,h=w;break}if(O===h){C=!0,h=v,c=w;break}O=O.sibling}if(!C){for(O=w.child;O;){if(O===c){C=!0,c=w,h=v;break}if(O===h){C=!0,h=w,c=v;break}O=O.sibling}if(!C)throw Error(i(189))}}if(c.alternate!==h)throw Error(i(190))}if(c.tag!==3)throw Error(i(188));return c.stateNode.current===c?a:l}function f(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a;for(a=a.child;a!==null;){if(l=f(a),l!==null)return l;a=a.sibling}return null}var b=Object.assign,y=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),I=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),q=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function Q(a){return a===null||typeof a!="object"?null:(a=ce&&a[ce]||a["@@iterator"],typeof a=="function"?a:null)}var ne=Symbol.for("react.client.reference");function ee(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ne?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case T:return"Fragment";case R:return"Profiler";case S:return"StrictMode";case E:return"Suspense";case D:return"SuspenseList";case Y:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case k:return"Portal";case I:return a.displayName||"Context";case A:return(a._context.displayName||"Context")+".Consumer";case j:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case L:return l=a.displayName||null,l!==null?l:ee(a.type)||"Memo";case G:l=a._payload,a=a._init;try{return ee(a(l))}catch{}}return null}var se=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},Ne=[],ae=-1;function P(a){return{current:a}}function W(a){0>ae||(a.current=Ne[ae],Ne[ae]=null,ae--)}function X(a,l){ae++,Ne[ae]=a.current,a.current=l}var we=P(null),te=P(null),_e=P(null),re=P(null);function Re(a,l){switch(X(_e,l),X(te,a),X(we,null),l.nodeType){case 9:case 11:a=(a=l.documentElement)&&(a=a.namespaceURI)?Pp(a):0;break;default:if(a=l.tagName,l=l.namespaceURI)l=Pp(l),a=Gp(l,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}W(we),X(we,a)}function $e(){W(we),W(te),W(_e)}function ue(a){a.memoizedState!==null&&X(re,a);var l=we.current,c=Gp(l,a.type);l!==c&&(X(te,a),X(we,c))}function be(a){te.current===a&&(W(we),W(te)),re.current===a&&(W(re),Yl._currentValue=Z)}var Te,$;function oe(a){if(Te===void 0)try{throw Error()}catch(c){var l=c.stack.trim().match(/\n( *(at )?)/);Te=l&&l[1]||"",$=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Te+a+$}var Ae=!1;function De(a,l){if(!a||Ae)return"";Ae=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(l){var ke=function(){throw Error()};if(Object.defineProperty(ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ke,[])}catch(ge){var fe=ge}Reflect.construct(a,[],ke)}else{try{ke.call()}catch(ge){fe=ge}a.call(ke.prototype)}}else{try{throw Error()}catch(ge){fe=ge}(ke=a())&&typeof ke.catch=="function"&&ke.catch(function(){})}}catch(ge){if(ge&&fe&&typeof ge.stack=="string")return[ge.stack,fe.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),C=w[0],O=w[1];if(C&&O){var V=C.split(`
`),me=O.split(`
`);for(v=h=0;h<V.length&&!V[h].includes("DetermineComponentFrameRoot");)h++;for(;v<me.length&&!me[v].includes("DetermineComponentFrameRoot");)v++;if(h===V.length||v===me.length)for(h=V.length-1,v=me.length-1;1<=h&&0<=v&&V[h]!==me[v];)v--;for(;1<=h&&0<=v;h--,v--)if(V[h]!==me[v]){if(h!==1||v!==1)do if(h--,v--,0>v||V[h]!==me[v]){var ye=`
`+V[h].replace(" at new "," at ");return a.displayName&&ye.includes("<anonymous>")&&(ye=ye.replace("<anonymous>",a.displayName)),ye}while(1<=h&&0<=v);break}}}finally{Ae=!1,Error.prepareStackTrace=c}return(c=a?a.displayName||a.name:"")?oe(c):""}function Me(a,l){switch(a.tag){case 26:case 27:case 5:return oe(a.type);case 16:return oe("Lazy");case 13:return a.child!==l&&l!==null?oe("Suspense Fallback"):oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return De(a.type,!1);case 11:return De(a.type.render,!1);case 1:return De(a.type,!0);case 31:return oe("Activity");default:return""}}function Be(a){try{var l="",c=null;do l+=Me(a,c),c=a,a=a.return;while(a);return l}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var ze=Object.prototype.hasOwnProperty,Ke=s.unstable_scheduleCallback,Ce=s.unstable_cancelCallback,St=s.unstable_shouldYield,Ee=s.unstable_requestPaint,Ue=s.unstable_now,qe=s.unstable_getCurrentPriorityLevel,mt=s.unstable_ImmediatePriority,ft=s.unstable_UserBlockingPriority,ot=s.unstable_NormalPriority,pt=s.unstable_LowPriority,Ze=s.unstable_IdlePriority,He=s.log,bt=s.unstable_setDisableYieldValue,_t=null,tt=null;function Tt(a){if(typeof He=="function"&&bt(a),tt&&typeof tt.setStrictMode=="function")try{tt.setStrictMode(_t,a)}catch{}}var Ct=Math.clz32?Math.clz32:We,Ns=Math.log,fs=Math.LN2;function We(a){return a>>>=0,a===0?32:31-(Ns(a)/fs|0)|0}var Bt=256,Pt=262144,xt=4194304;function Ot(a){var l=a&42;if(l!==0)return l;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function js(a,l,c){var h=a.pendingLanes;if(h===0)return 0;var v=0,w=a.suspendedLanes,C=a.pingedLanes;a=a.warmLanes;var O=h&134217727;return O!==0?(h=O&~w,h!==0?v=Ot(h):(C&=O,C!==0?v=Ot(C):c||(c=O&~a,c!==0&&(v=Ot(c))))):(O=h&~w,O!==0?v=Ot(O):C!==0?v=Ot(C):c||(c=h&~a,c!==0&&(v=Ot(c)))),v===0?0:l!==0&&l!==v&&(l&w)===0&&(w=v&-v,c=l&-l,w>=c||w===32&&(c&4194048)!==0)?l:v}function ps(a,l){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&l)===0}function Ms(a,l){switch(a){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ks(){var a=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),a}function it(a){for(var l=[],c=0;31>c;c++)l.push(a);return l}function Yt(a,l){a.pendingLanes|=l,l!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Ds(a,l,c,h,v,w){var C=a.pendingLanes;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=c,a.entangledLanes&=c,a.errorRecoveryDisabledLanes&=c,a.shellSuspendCounter=0;var O=a.entanglements,V=a.expirationTimes,me=a.hiddenUpdates;for(c=C&~c;0<c;){var ye=31-Ct(c),ke=1<<ye;O[ye]=0,V[ye]=-1;var fe=me[ye];if(fe!==null)for(me[ye]=null,ye=0;ye<fe.length;ye++){var ge=fe[ye];ge!==null&&(ge.lane&=-536870913)}c&=~ke}h!==0&&on(a,h,0),w!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=w&~(C&~l))}function on(a,l,c){a.pendingLanes|=l,a.suspendedLanes&=~l;var h=31-Ct(l);a.entangledLanes|=l,a.entanglements[h]=a.entanglements[h]|1073741824|c&261930}function cn(a,l){var c=a.entangledLanes|=l;for(a=a.entanglements;c;){var h=31-Ct(c),v=1<<h;v&l|a[h]&l&&(a[h]|=l),c&=~v}}function xs(a,l){var c=l&-l;return c=(c&42)!==0?1:vs(c),(c&(a.suspendedLanes|l))!==0?0:c}function vs(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Ss(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function de(){var a=B.p;return a!==0?a:(a=window.event,a===void 0?32:cx(a.type))}function Ie(a,l){var c=B.p;try{return B.p=a,l()}finally{B.p=c}}var Ye=Math.random().toString(36).slice(2),H="__reactFiber$"+Ye,ve="__reactProps$"+Ye,Se="__reactContainer$"+Ye,nt="__reactEvents$"+Ye,gt="__reactListeners$"+Ye,Rt="__reactHandles$"+Ye,pe="__reactResources$"+Ye,Oe="__reactMarker$"+Ye;function Xe(a){delete a[H],delete a[ve],delete a[nt],delete a[gt],delete a[Rt]}function lt(a){var l=a[H];if(l)return l;for(var c=a.parentNode;c;){if(l=c[Se]||c[H]){if(c=l.alternate,l.child!==null||c!==null&&c.child!==null)for(a=Wp(a);a!==null;){if(c=a[H])return c;a=Wp(a)}return l}a=c,c=a.parentNode}return null}function zt(a){if(a=a[H]||a[Se]){var l=a.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return a}return null}function Mt(a){var l=a.tag;if(l===5||l===26||l===27||l===6)return a.stateNode;throw Error(i(33))}function ct(a){var l=a[pe];return l||(l=a[pe]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function wt(a){a[Oe]=!0}var Ws=new Set,Wt={};function es(a,l){Os(a,l),Os(a+"Capture",l)}function Os(a,l){for(Wt[a]=l,a=0;a<l.length;a++)Ws.add(l[a])}var wc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wr={},Nr={};function Hn(a){return ze.call(Nr,a)?!0:ze.call(wr,a)?!1:wc.test(a)?Nr[a]=!0:(wr[a]=!0,!1)}function Pa(a,l,c){if(Hn(l))if(c===null)a.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":a.removeAttribute(l);return;case"boolean":var h=l.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){a.removeAttribute(l);return}}a.setAttribute(l,""+c)}}function Ga(a,l,c){if(c===null)a.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttribute(l,""+c)}}function dn(a,l,c,h){if(h===null)a.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttributeNS(l,c,""+h)}}function U(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function F(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function J(a,l,c){var h=Object.getOwnPropertyDescriptor(a.constructor.prototype,l);if(!a.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,w=h.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return v.call(this)},set:function(C){c=""+C,w.call(this,C)}}),Object.defineProperty(a,l,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(C){c=""+C},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function z(a){if(!a._valueTracker){var l=F(a)?"checked":"value";a._valueTracker=J(a,l,""+a[l])}}function ie(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var c=l.getValue(),h="";return a&&(h=F(a)?a.checked?"true":"false":a.value),a=h,a!==c?(l.setValue(a),!0):!1}function xe(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var dt=/[\n"\\]/g;function Qt(a){return a.replace(dt,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function ts(a,l,c,h,v,w,C,O){a.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?a.type=C:a.removeAttribute("type"),l!=null?C==="number"?(l===0&&a.value===""||a.value!=l)&&(a.value=""+U(l)):a.value!==""+U(l)&&(a.value=""+U(l)):C!=="submit"&&C!=="reset"||a.removeAttribute("value"),l!=null?os(a,C,U(l)):c!=null?os(a,C,U(c)):h!=null&&a.removeAttribute("value"),v==null&&w!=null&&(a.defaultChecked=!!w),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?a.name=""+U(O):a.removeAttribute("name")}function ss(a,l,c,h,v,w,C,O){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(a.type=w),l!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||l!=null)){z(a);return}c=c!=null?""+U(c):"",l=l!=null?""+U(l):c,O||l===a.value||(a.value=l),a.defaultValue=l}h=h??v,h=typeof h!="function"&&typeof h!="symbol"&&!!h,a.checked=O?a.checked:!!h,a.defaultChecked=!!h,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.name=C),z(a)}function os(a,l,c){l==="number"&&xe(a.ownerDocument)===a||a.defaultValue===""+c||(a.defaultValue=""+c)}function Js(a,l,c,h){if(a=a.options,l){l={};for(var v=0;v<c.length;v++)l["$"+c[v]]=!0;for(c=0;c<a.length;c++)v=l.hasOwnProperty("$"+a[c].value),a[c].selected!==v&&(a[c].selected=v),v&&h&&(a[c].defaultSelected=!0)}else{for(c=""+U(c),l=null,v=0;v<a.length;v++){if(a[v].value===c){a[v].selected=!0,h&&(a[v].defaultSelected=!0);return}l!==null||a[v].disabled||(l=a[v])}l!==null&&(l.selected=!0)}}function Ut(a,l,c){if(l!=null&&(l=""+U(l),l!==a.value&&(a.value=l),c==null)){a.defaultValue!==l&&(a.defaultValue=l);return}a.defaultValue=c!=null?""+U(c):""}function jn(a,l,c,h){if(l==null){if(h!=null){if(c!=null)throw Error(i(92));if(se(h)){if(1<h.length)throw Error(i(93));h=h[0]}c=h}c==null&&(c=""),l=c}c=U(l),a.defaultValue=c,h=a.textContent,h===c&&h!==""&&h!==null&&(a.value=h),z(a)}function Lt(a,l){if(l){var c=a.firstChild;if(c&&c===a.lastChild&&c.nodeType===3){c.nodeValue=l;return}}a.textContent=l}var Ys=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _s(a,l,c){var h=l.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?a.setProperty(l,""):l==="float"?a.cssFloat="":a[l]="":h?a.setProperty(l,c):typeof c!="number"||c===0||Ys.has(l)?l==="float"?a.cssFloat=c:a[l]=(""+c).trim():a[l]=c+"px"}function Ks(a,l,c){if(l!=null&&typeof l!="object")throw Error(i(62));if(a=a.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||l!=null&&l.hasOwnProperty(h)||(h.indexOf("--")===0?a.setProperty(h,""):h==="float"?a.cssFloat="":a[h]="");for(var v in l)h=l[v],l.hasOwnProperty(v)&&c[v]!==h&&_s(a,v,h)}else for(var w in l)l.hasOwnProperty(w)&&_s(a,w,l[w])}function $a(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var hi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_v=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jr(a){return _v.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function qn(){}var Nc=null;function jc(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var mi=null,fi=null;function Lh(a){var l=zt(a);if(l&&(a=l.stateNode)){var c=a[ve]||null;e:switch(a=l.stateNode,l.type){case"input":if(ts(a,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),l=c.name,c.type==="radio"&&l!=null){for(c=a;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Qt(""+l)+'"][type="radio"]'),l=0;l<c.length;l++){var h=c[l];if(h!==a&&h.form===a.form){var v=h[ve]||null;if(!v)throw Error(i(90));ts(h,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(l=0;l<c.length;l++)h=c[l],h.form===a.form&&ie(h)}break e;case"textarea":Ut(a,c.value,c.defaultValue);break e;case"select":l=c.value,l!=null&&Js(a,!!c.multiple,l,!1)}}}var kc=!1;function Bh(a,l,c){if(kc)return a(l,c);kc=!0;try{var h=a(l);return h}finally{if(kc=!1,(mi!==null||fi!==null)&&(uo(),mi&&(l=mi,a=fi,fi=mi=null,Lh(l),a)))for(l=0;l<a.length;l++)Lh(a[l])}}function hl(a,l){var c=a.stateNode;if(c===null)return null;var h=c[ve]||null;if(h===null)return null;c=h[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(a=a.type,h=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!h;break e;default:a=!1}if(a)return null;if(c&&typeof c!="function")throw Error(i(231,l,typeof c));return c}var Vn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sc=!1;if(Vn)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){Sc=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{Sc=!1}var ma=null,_c=null,kr=null;function Ph(){if(kr)return kr;var a,l=_c,c=l.length,h,v="value"in ma?ma.value:ma.textContent,w=v.length;for(a=0;a<c&&l[a]===v[a];a++);var C=c-a;for(h=1;h<=C&&l[c-h]===v[w-h];h++);return kr=v.slice(a,1<h?1-h:void 0)}function Sr(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function _r(){return!0}function Gh(){return!1}function $s(a){function l(c,h,v,w,C){this._reactName=c,this._targetInst=v,this.type=h,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var O in a)a.hasOwnProperty(O)&&(c=a[O],this[O]=c?c(w):w[O]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?_r:Gh,this.isPropagationStopped=Gh,this}return b(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),l}var Fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tr=$s(Fa),fl=b({},Fa,{view:0,detail:0}),Tv=$s(fl),Tc,Cc,pl,Cr=b({},fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ac,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==pl&&(pl&&a.type==="mousemove"?(Tc=a.screenX-pl.screenX,Cc=a.screenY-pl.screenY):Cc=Tc=0,pl=a),Tc)},movementY:function(a){return"movementY"in a?a.movementY:Cc}}),$h=$s(Cr),Cv=b({},Cr,{dataTransfer:0}),Ev=$s(Cv),Av=b({},fl,{relatedTarget:0}),Ec=$s(Av),Iv=b({},Fa,{animationName:0,elapsedTime:0,pseudoElement:0}),Rv=$s(Iv),Mv=b({},Fa,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Dv=$s(Mv),Ov=b({},Fa,{data:0}),Fh=$s(Ov),Uv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pv(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Bv[a])?!!l[a]:!1}function Ac(){return Pv}var Gv=b({},fl,{key:function(a){if(a.key){var l=Uv[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=Sr(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Lv[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ac,charCode:function(a){return a.type==="keypress"?Sr(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Sr(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),$v=$s(Gv),Fv=b({},Cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hh=$s(Fv),Hv=b({},fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ac}),qv=$s(Hv),Vv=b({},Fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),zv=$s(Vv),Wv=b({},Cr,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Jv=$s(Wv),Yv=b({},Fa,{newState:0,oldState:0}),Kv=$s(Yv),Xv=[9,13,27,32],Ic=Vn&&"CompositionEvent"in window,xl=null;Vn&&"documentMode"in document&&(xl=document.documentMode);var Qv=Vn&&"TextEvent"in window&&!xl,qh=Vn&&(!Ic||xl&&8<xl&&11>=xl),Vh=" ",zh=!1;function Wh(a,l){switch(a){case"keyup":return Xv.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jh(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var pi=!1;function Zv(a,l){switch(a){case"compositionend":return Jh(l);case"keypress":return l.which!==32?null:(zh=!0,Vh);case"textInput":return a=l.data,a===Vh&&zh?null:a;default:return null}}function ey(a,l){if(pi)return a==="compositionend"||!Ic&&Wh(a,l)?(a=Ph(),kr=_c=ma=null,pi=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return qh&&l.locale!=="ko"?null:l.data;default:return null}}var ty={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yh(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!ty[a.type]:l==="textarea"}function Kh(a,l,c,h){mi?fi?fi.push(h):fi=[h]:mi=h,l=bo(l,"onChange"),0<l.length&&(c=new Tr("onChange","change",null,c,h),a.push({event:c,listeners:l}))}var gl=null,bl=null;function sy(a){Mp(a,0)}function Er(a){var l=Mt(a);if(ie(l))return a}function Xh(a,l){if(a==="change")return l}var Qh=!1;if(Vn){var Rc;if(Vn){var Mc="oninput"in document;if(!Mc){var Zh=document.createElement("div");Zh.setAttribute("oninput","return;"),Mc=typeof Zh.oninput=="function"}Rc=Mc}else Rc=!1;Qh=Rc&&(!document.documentMode||9<document.documentMode)}function em(){gl&&(gl.detachEvent("onpropertychange",tm),bl=gl=null)}function tm(a){if(a.propertyName==="value"&&Er(bl)){var l=[];Kh(l,bl,a,jc(a)),Bh(sy,l)}}function ny(a,l,c){a==="focusin"?(em(),gl=l,bl=c,gl.attachEvent("onpropertychange",tm)):a==="focusout"&&em()}function ay(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Er(bl)}function iy(a,l){if(a==="click")return Er(l)}function ly(a,l){if(a==="input"||a==="change")return Er(l)}function ry(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Xs=typeof Object.is=="function"?Object.is:ry;function vl(a,l){if(Xs(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var c=Object.keys(a),h=Object.keys(l);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var v=c[h];if(!ze.call(l,v)||!Xs(a[v],l[v]))return!1}return!0}function sm(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function nm(a,l){var c=sm(a);a=0;for(var h;c;){if(c.nodeType===3){if(h=a+c.textContent.length,a<=l&&h>=l)return{node:c,offset:l-a};a=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=sm(c)}}function am(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?am(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function im(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var l=xe(a.document);l instanceof a.HTMLIFrameElement;){try{var c=typeof l.contentWindow.location.href=="string"}catch{c=!1}if(c)a=l.contentWindow;else break;l=xe(a.document)}return l}function Dc(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}var oy=Vn&&"documentMode"in document&&11>=document.documentMode,xi=null,Oc=null,yl=null,Uc=!1;function lm(a,l,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Uc||xi==null||xi!==xe(h)||(h=xi,"selectionStart"in h&&Dc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),yl&&vl(yl,h)||(yl=h,h=bo(Oc,"onSelect"),0<h.length&&(l=new Tr("onSelect","select",null,l,c),a.push({event:l,listeners:h}),l.target=xi)))}function Ha(a,l){var c={};return c[a.toLowerCase()]=l.toLowerCase(),c["Webkit"+a]="webkit"+l,c["Moz"+a]="moz"+l,c}var gi={animationend:Ha("Animation","AnimationEnd"),animationiteration:Ha("Animation","AnimationIteration"),animationstart:Ha("Animation","AnimationStart"),transitionrun:Ha("Transition","TransitionRun"),transitionstart:Ha("Transition","TransitionStart"),transitioncancel:Ha("Transition","TransitionCancel"),transitionend:Ha("Transition","TransitionEnd")},Lc={},rm={};Vn&&(rm=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);function qa(a){if(Lc[a])return Lc[a];if(!gi[a])return a;var l=gi[a],c;for(c in l)if(l.hasOwnProperty(c)&&c in rm)return Lc[a]=l[c];return a}var om=qa("animationend"),cm=qa("animationiteration"),dm=qa("animationstart"),cy=qa("transitionrun"),dy=qa("transitionstart"),uy=qa("transitioncancel"),um=qa("transitionend"),hm=new Map,Bc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bc.push("scrollEnd");function kn(a,l){hm.set(a,l),es(l,[a])}var Ar=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},un=[],bi=0,Pc=0;function Ir(){for(var a=bi,l=Pc=bi=0;l<a;){var c=un[l];un[l++]=null;var h=un[l];un[l++]=null;var v=un[l];un[l++]=null;var w=un[l];if(un[l++]=null,h!==null&&v!==null){var C=h.pending;C===null?v.next=v:(v.next=C.next,C.next=v),h.pending=v}w!==0&&mm(c,v,w)}}function Rr(a,l,c,h){un[bi++]=a,un[bi++]=l,un[bi++]=c,un[bi++]=h,Pc|=h,a.lanes|=h,a=a.alternate,a!==null&&(a.lanes|=h)}function Gc(a,l,c,h){return Rr(a,l,c,h),Mr(a)}function Va(a,l){return Rr(a,null,null,l),Mr(a)}function mm(a,l,c){a.lanes|=c;var h=a.alternate;h!==null&&(h.lanes|=c);for(var v=!1,w=a.return;w!==null;)w.childLanes|=c,h=w.alternate,h!==null&&(h.childLanes|=c),w.tag===22&&(a=w.stateNode,a===null||a._visibility&1||(v=!0)),a=w,w=w.return;return a.tag===3?(w=a.stateNode,v&&l!==null&&(v=31-Ct(c),a=w.hiddenUpdates,h=a[v],h===null?a[v]=[l]:h.push(l),l.lane=c|536870912),w):null}function Mr(a){if(50<Fl)throw Fl=0,Yd=null,Error(i(185));for(var l=a.return;l!==null;)a=l,l=a.return;return a.tag===3?a.stateNode:null}var vi={};function hy(a,l,c,h){this.tag=a,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qs(a,l,c,h){return new hy(a,l,c,h)}function $c(a){return a=a.prototype,!(!a||!a.isReactComponent)}function zn(a,l){var c=a.alternate;return c===null?(c=Qs(a.tag,l,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=l,c.type=a.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=a.flags&65011712,c.childLanes=a.childLanes,c.lanes=a.lanes,c.child=a.child,c.memoizedProps=a.memoizedProps,c.memoizedState=a.memoizedState,c.updateQueue=a.updateQueue,l=a.dependencies,c.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},c.sibling=a.sibling,c.index=a.index,c.ref=a.ref,c.refCleanup=a.refCleanup,c}function fm(a,l){a.flags&=65011714;var c=a.alternate;return c===null?(a.childLanes=0,a.lanes=l,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,l=c.dependencies,a.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),a}function Dr(a,l,c,h,v,w){var C=0;if(h=a,typeof a=="function")$c(a)&&(C=1);else if(typeof a=="string")C=gw(a,c,we.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case Y:return a=Qs(31,c,l,v),a.elementType=Y,a.lanes=w,a;case T:return za(c.children,v,w,l);case S:C=8,v|=24;break;case R:return a=Qs(12,c,l,v|2),a.elementType=R,a.lanes=w,a;case E:return a=Qs(13,c,l,v),a.elementType=E,a.lanes=w,a;case D:return a=Qs(19,c,l,v),a.elementType=D,a.lanes=w,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case I:C=10;break e;case A:C=9;break e;case j:C=11;break e;case L:C=14;break e;case G:C=16,h=null;break e}C=29,c=Error(i(130,a===null?"null":typeof a,"")),h=null}return l=Qs(C,c,l,v),l.elementType=a,l.type=h,l.lanes=w,l}function za(a,l,c,h){return a=Qs(7,a,h,l),a.lanes=c,a}function Fc(a,l,c){return a=Qs(6,a,null,l),a.lanes=c,a}function pm(a){var l=Qs(18,null,null,0);return l.stateNode=a,l}function Hc(a,l,c){return l=Qs(4,a.children!==null?a.children:[],a.key,l),l.lanes=c,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}var xm=new WeakMap;function hn(a,l){if(typeof a=="object"&&a!==null){var c=xm.get(a);return c!==void 0?c:(l={value:a,source:l,stack:Be(l)},xm.set(a,l),l)}return{value:a,source:l,stack:Be(l)}}var yi=[],wi=0,Or=null,wl=0,mn=[],fn=0,fa=null,Ln=1,Bn="";function Wn(a,l){yi[wi++]=wl,yi[wi++]=Or,Or=a,wl=l}function gm(a,l,c){mn[fn++]=Ln,mn[fn++]=Bn,mn[fn++]=fa,fa=a;var h=Ln;a=Bn;var v=32-Ct(h)-1;h&=~(1<<v),c+=1;var w=32-Ct(l)+v;if(30<w){var C=v-v%5;w=(h&(1<<C)-1).toString(32),h>>=C,v-=C,Ln=1<<32-Ct(l)+v|c<<v|h,Bn=w+a}else Ln=1<<w|c<<v|h,Bn=a}function qc(a){a.return!==null&&(Wn(a,1),gm(a,1,0))}function Vc(a){for(;a===Or;)Or=yi[--wi],yi[wi]=null,wl=yi[--wi],yi[wi]=null;for(;a===fa;)fa=mn[--fn],mn[fn]=null,Bn=mn[--fn],mn[fn]=null,Ln=mn[--fn],mn[fn]=null}function bm(a,l){mn[fn++]=Ln,mn[fn++]=Bn,mn[fn++]=fa,Ln=l.id,Bn=l.overflow,fa=a}var Ts=null,Kt=null,kt=!1,pa=null,pn=!1,zc=Error(i(519));function xa(a){var l=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(hn(l,a)),zc}function vm(a){var l=a.stateNode,c=a.type,h=a.memoizedProps;switch(l[H]=a,l[ve]=h,c){case"dialog":yt("cancel",l),yt("close",l);break;case"iframe":case"object":case"embed":yt("load",l);break;case"video":case"audio":for(c=0;c<ql.length;c++)yt(ql[c],l);break;case"source":yt("error",l);break;case"img":case"image":case"link":yt("error",l),yt("load",l);break;case"details":yt("toggle",l);break;case"input":yt("invalid",l),ss(l,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":yt("invalid",l);break;case"textarea":yt("invalid",l),jn(l,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||l.textContent===""+c||h.suppressHydrationWarning===!0||Lp(l.textContent,c)?(h.popover!=null&&(yt("beforetoggle",l),yt("toggle",l)),h.onScroll!=null&&yt("scroll",l),h.onScrollEnd!=null&&yt("scrollend",l),h.onClick!=null&&(l.onclick=qn),l=!0):l=!1,l||xa(a,!0)}function ym(a){for(Ts=a.return;Ts;)switch(Ts.tag){case 5:case 31:case 13:pn=!1;return;case 27:case 3:pn=!0;return;default:Ts=Ts.return}}function Ni(a){if(a!==Ts)return!1;if(!kt)return ym(a),kt=!0,!1;var l=a.tag,c;if((c=l!==3&&l!==27)&&((c=l===5)&&(c=a.type,c=!(c!=="form"&&c!=="button")||du(a.type,a.memoizedProps)),c=!c),c&&Kt&&xa(a),ym(a),l===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));Kt=zp(a)}else if(l===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));Kt=zp(a)}else l===27?(l=Kt,Aa(a.type)?(a=pu,pu=null,Kt=a):Kt=l):Kt=Ts?gn(a.stateNode.nextSibling):null;return!0}function Wa(){Kt=Ts=null,kt=!1}function Wc(){var a=pa;return a!==null&&(Vs===null?Vs=a:Vs.push.apply(Vs,a),pa=null),a}function Nl(a){pa===null?pa=[a]:pa.push(a)}var Jc=P(null),Ja=null,Jn=null;function ga(a,l,c){X(Jc,l._currentValue),l._currentValue=c}function Yn(a){a._currentValue=Jc.current,W(Jc)}function Yc(a,l,c){for(;a!==null;){var h=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,h!==null&&(h.childLanes|=l)):h!==null&&(h.childLanes&l)!==l&&(h.childLanes|=l),a===c)break;a=a.return}}function Kc(a,l,c,h){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var w=v.dependencies;if(w!==null){var C=v.child;w=w.firstContext;e:for(;w!==null;){var O=w;w=v;for(var V=0;V<l.length;V++)if(O.context===l[V]){w.lanes|=c,O=w.alternate,O!==null&&(O.lanes|=c),Yc(w.return,c,a),h||(C=null);break e}w=O.next}}else if(v.tag===18){if(C=v.return,C===null)throw Error(i(341));C.lanes|=c,w=C.alternate,w!==null&&(w.lanes|=c),Yc(C,c,a),C=null}else C=v.child;if(C!==null)C.return=v;else for(C=v;C!==null;){if(C===a){C=null;break}if(v=C.sibling,v!==null){v.return=C.return,C=v;break}C=C.return}v=C}}function ji(a,l,c,h){a=null;for(var v=l,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var C=v.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var O=v.type;Xs(v.pendingProps.value,C.value)||(a!==null?a.push(O):a=[O])}}else if(v===re.current){if(C=v.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Yl):a=[Yl])}v=v.return}a!==null&&Kc(l,a,c,h),l.flags|=262144}function Ur(a){for(a=a.firstContext;a!==null;){if(!Xs(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ya(a){Ja=a,Jn=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Cs(a){return wm(Ja,a)}function Lr(a,l){return Ja===null&&Ya(a),wm(a,l)}function wm(a,l){var c=l._currentValue;if(l={context:l,memoizedValue:c,next:null},Jn===null){if(a===null)throw Error(i(308));Jn=l,a.dependencies={lanes:0,firstContext:l},a.flags|=524288}else Jn=Jn.next=l;return c}var my=typeof AbortController<"u"?AbortController:function(){var a=[],l=this.signal={aborted:!1,addEventListener:function(c,h){a.push(h)}};this.abort=function(){l.aborted=!0,a.forEach(function(c){return c()})}},fy=s.unstable_scheduleCallback,py=s.unstable_NormalPriority,cs={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xc(){return{controller:new my,data:new Map,refCount:0}}function jl(a){a.refCount--,a.refCount===0&&fy(py,function(){a.controller.abort()})}var kl=null,Qc=0,ki=0,Si=null;function xy(a,l){if(kl===null){var c=kl=[];Qc=0,ki=tu(),Si={status:"pending",value:void 0,then:function(h){c.push(h)}}}return Qc++,l.then(Nm,Nm),l}function Nm(){if(--Qc===0&&kl!==null){Si!==null&&(Si.status="fulfilled");var a=kl;kl=null,ki=0,Si=null;for(var l=0;l<a.length;l++)(0,a[l])()}}function gy(a,l){var c=[],h={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return a.then(function(){h.status="fulfilled",h.value=l;for(var v=0;v<c.length;v++)(0,c[v])(l)},function(v){for(h.status="rejected",h.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),h}var jm=M.S;M.S=function(a,l){rp=Ue(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&xy(a,l),jm!==null&&jm(a,l)};var Ka=P(null);function Zc(){var a=Ka.current;return a!==null?a:Vt.pooledCache}function Br(a,l){l===null?X(Ka,Ka.current):X(Ka,l.pool)}function km(){var a=Zc();return a===null?null:{parent:cs._currentValue,pool:a}}var _i=Error(i(460)),ed=Error(i(474)),Pr=Error(i(542)),Gr={then:function(){}};function Sm(a){return a=a.status,a==="fulfilled"||a==="rejected"}function _m(a,l,c){switch(c=a[c],c===void 0?a.push(l):c!==l&&(l.then(qn,qn),l=c),l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Cm(a),a;default:if(typeof l.status=="string")l.then(qn,qn);else{if(a=Vt,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=l,a.status="pending",a.then(function(h){if(l.status==="pending"){var v=l;v.status="fulfilled",v.value=h}},function(h){if(l.status==="pending"){var v=l;v.status="rejected",v.reason=h}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw a=l.reason,Cm(a),a}throw Qa=l,_i}}function Xa(a){try{var l=a._init;return l(a._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Qa=c,_i):c}}var Qa=null;function Tm(){if(Qa===null)throw Error(i(459));var a=Qa;return Qa=null,a}function Cm(a){if(a===_i||a===Pr)throw Error(i(483))}var Ti=null,Sl=0;function $r(a){var l=Sl;return Sl+=1,Ti===null&&(Ti=[]),_m(Ti,a,l)}function _l(a,l){l=l.props.ref,a.ref=l!==void 0?l:null}function Fr(a,l){throw l.$$typeof===y?Error(i(525)):(a=Object.prototype.toString.call(l),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a)))}function Em(a){function l(le,K){if(a){var he=le.deletions;he===null?(le.deletions=[K],le.flags|=16):he.push(K)}}function c(le,K){if(!a)return null;for(;K!==null;)l(le,K),K=K.sibling;return null}function h(le){for(var K=new Map;le!==null;)le.key!==null?K.set(le.key,le):K.set(le.index,le),le=le.sibling;return K}function v(le,K){return le=zn(le,K),le.index=0,le.sibling=null,le}function w(le,K,he){return le.index=he,a?(he=le.alternate,he!==null?(he=he.index,he<K?(le.flags|=67108866,K):he):(le.flags|=67108866,K)):(le.flags|=1048576,K)}function C(le){return a&&le.alternate===null&&(le.flags|=67108866),le}function O(le,K,he,je){return K===null||K.tag!==6?(K=Fc(he,le.mode,je),K.return=le,K):(K=v(K,he),K.return=le,K)}function V(le,K,he,je){var Je=he.type;return Je===T?ye(le,K,he.props.children,je,he.key):K!==null&&(K.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===G&&Xa(Je)===K.type)?(K=v(K,he.props),_l(K,he),K.return=le,K):(K=Dr(he.type,he.key,he.props,null,le.mode,je),_l(K,he),K.return=le,K)}function me(le,K,he,je){return K===null||K.tag!==4||K.stateNode.containerInfo!==he.containerInfo||K.stateNode.implementation!==he.implementation?(K=Hc(he,le.mode,je),K.return=le,K):(K=v(K,he.children||[]),K.return=le,K)}function ye(le,K,he,je,Je){return K===null||K.tag!==7?(K=za(he,le.mode,je,Je),K.return=le,K):(K=v(K,he),K.return=le,K)}function ke(le,K,he){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=Fc(""+K,le.mode,he),K.return=le,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case N:return he=Dr(K.type,K.key,K.props,null,le.mode,he),_l(he,K),he.return=le,he;case k:return K=Hc(K,le.mode,he),K.return=le,K;case G:return K=Xa(K),ke(le,K,he)}if(se(K)||Q(K))return K=za(K,le.mode,he,null),K.return=le,K;if(typeof K.then=="function")return ke(le,$r(K),he);if(K.$$typeof===I)return ke(le,Lr(le,K),he);Fr(le,K)}return null}function fe(le,K,he,je){var Je=K!==null?K.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Je!==null?null:O(le,K,""+he,je);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case N:return he.key===Je?V(le,K,he,je):null;case k:return he.key===Je?me(le,K,he,je):null;case G:return he=Xa(he),fe(le,K,he,je)}if(se(he)||Q(he))return Je!==null?null:ye(le,K,he,je,null);if(typeof he.then=="function")return fe(le,K,$r(he),je);if(he.$$typeof===I)return fe(le,K,Lr(le,he),je);Fr(le,he)}return null}function ge(le,K,he,je,Je){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return le=le.get(he)||null,O(K,le,""+je,Je);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case N:return le=le.get(je.key===null?he:je.key)||null,V(K,le,je,Je);case k:return le=le.get(je.key===null?he:je.key)||null,me(K,le,je,Je);case G:return je=Xa(je),ge(le,K,he,je,Je)}if(se(je)||Q(je))return le=le.get(he)||null,ye(K,le,je,Je,null);if(typeof je.then=="function")return ge(le,K,he,$r(je),Je);if(je.$$typeof===I)return ge(le,K,he,Lr(K,je),Je);Fr(K,je)}return null}function Ge(le,K,he,je){for(var Je=null,Et=null,Fe=K,ht=K=0,jt=null;Fe!==null&&ht<he.length;ht++){Fe.index>ht?(jt=Fe,Fe=null):jt=Fe.sibling;var At=fe(le,Fe,he[ht],je);if(At===null){Fe===null&&(Fe=jt);break}a&&Fe&&At.alternate===null&&l(le,Fe),K=w(At,K,ht),Et===null?Je=At:Et.sibling=At,Et=At,Fe=jt}if(ht===he.length)return c(le,Fe),kt&&Wn(le,ht),Je;if(Fe===null){for(;ht<he.length;ht++)Fe=ke(le,he[ht],je),Fe!==null&&(K=w(Fe,K,ht),Et===null?Je=Fe:Et.sibling=Fe,Et=Fe);return kt&&Wn(le,ht),Je}for(Fe=h(Fe);ht<he.length;ht++)jt=ge(Fe,le,ht,he[ht],je),jt!==null&&(a&&jt.alternate!==null&&Fe.delete(jt.key===null?ht:jt.key),K=w(jt,K,ht),Et===null?Je=jt:Et.sibling=jt,Et=jt);return a&&Fe.forEach(function(Oa){return l(le,Oa)}),kt&&Wn(le,ht),Je}function Qe(le,K,he,je){if(he==null)throw Error(i(151));for(var Je=null,Et=null,Fe=K,ht=K=0,jt=null,At=he.next();Fe!==null&&!At.done;ht++,At=he.next()){Fe.index>ht?(jt=Fe,Fe=null):jt=Fe.sibling;var Oa=fe(le,Fe,At.value,je);if(Oa===null){Fe===null&&(Fe=jt);break}a&&Fe&&Oa.alternate===null&&l(le,Fe),K=w(Oa,K,ht),Et===null?Je=Oa:Et.sibling=Oa,Et=Oa,Fe=jt}if(At.done)return c(le,Fe),kt&&Wn(le,ht),Je;if(Fe===null){for(;!At.done;ht++,At=he.next())At=ke(le,At.value,je),At!==null&&(K=w(At,K,ht),Et===null?Je=At:Et.sibling=At,Et=At);return kt&&Wn(le,ht),Je}for(Fe=h(Fe);!At.done;ht++,At=he.next())At=ge(Fe,le,ht,At.value,je),At!==null&&(a&&At.alternate!==null&&Fe.delete(At.key===null?ht:At.key),K=w(At,K,ht),Et===null?Je=At:Et.sibling=At,Et=At);return a&&Fe.forEach(function(Cw){return l(le,Cw)}),kt&&Wn(le,ht),Je}function qt(le,K,he,je){if(typeof he=="object"&&he!==null&&he.type===T&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case N:e:{for(var Je=he.key;K!==null;){if(K.key===Je){if(Je=he.type,Je===T){if(K.tag===7){c(le,K.sibling),je=v(K,he.props.children),je.return=le,le=je;break e}}else if(K.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===G&&Xa(Je)===K.type){c(le,K.sibling),je=v(K,he.props),_l(je,he),je.return=le,le=je;break e}c(le,K);break}else l(le,K);K=K.sibling}he.type===T?(je=za(he.props.children,le.mode,je,he.key),je.return=le,le=je):(je=Dr(he.type,he.key,he.props,null,le.mode,je),_l(je,he),je.return=le,le=je)}return C(le);case k:e:{for(Je=he.key;K!==null;){if(K.key===Je)if(K.tag===4&&K.stateNode.containerInfo===he.containerInfo&&K.stateNode.implementation===he.implementation){c(le,K.sibling),je=v(K,he.children||[]),je.return=le,le=je;break e}else{c(le,K);break}else l(le,K);K=K.sibling}je=Hc(he,le.mode,je),je.return=le,le=je}return C(le);case G:return he=Xa(he),qt(le,K,he,je)}if(se(he))return Ge(le,K,he,je);if(Q(he)){if(Je=Q(he),typeof Je!="function")throw Error(i(150));return he=Je.call(he),Qe(le,K,he,je)}if(typeof he.then=="function")return qt(le,K,$r(he),je);if(he.$$typeof===I)return qt(le,K,Lr(le,he),je);Fr(le,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,K!==null&&K.tag===6?(c(le,K.sibling),je=v(K,he),je.return=le,le=je):(c(le,K),je=Fc(he,le.mode,je),je.return=le,le=je),C(le)):c(le,K)}return function(le,K,he,je){try{Sl=0;var Je=qt(le,K,he,je);return Ti=null,Je}catch(Fe){if(Fe===_i||Fe===Pr)throw Fe;var Et=Qs(29,Fe,null,le.mode);return Et.lanes=je,Et.return=le,Et}finally{}}}var Za=Em(!0),Am=Em(!1),ba=!1;function td(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sd(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function va(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ya(a,l,c){var h=a.updateQueue;if(h===null)return null;if(h=h.shared,(Dt&2)!==0){var v=h.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),h.pending=l,l=Mr(a),mm(a,null,c),l}return Rr(a,h,l,c),Mr(a)}function Tl(a,l,c){if(l=l.updateQueue,l!==null&&(l=l.shared,(c&4194048)!==0)){var h=l.lanes;h&=a.pendingLanes,c|=h,l.lanes=c,cn(a,c)}}function nd(a,l){var c=a.updateQueue,h=a.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var v=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var C={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?v=w=C:w=w.next=C,c=c.next}while(c!==null);w===null?v=w=l:w=w.next=l}else v=w=l;c={baseState:h.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},a.updateQueue=c;return}a=c.lastBaseUpdate,a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=l}var ad=!1;function Cl(){if(ad){var a=Si;if(a!==null)throw a}}function El(a,l,c,h){ad=!1;var v=a.updateQueue;ba=!1;var w=v.firstBaseUpdate,C=v.lastBaseUpdate,O=v.shared.pending;if(O!==null){v.shared.pending=null;var V=O,me=V.next;V.next=null,C===null?w=me:C.next=me,C=V;var ye=a.alternate;ye!==null&&(ye=ye.updateQueue,O=ye.lastBaseUpdate,O!==C&&(O===null?ye.firstBaseUpdate=me:O.next=me,ye.lastBaseUpdate=V))}if(w!==null){var ke=v.baseState;C=0,ye=me=V=null,O=w;do{var fe=O.lane&-536870913,ge=fe!==O.lane;if(ge?(Nt&fe)===fe:(h&fe)===fe){fe!==0&&fe===ki&&(ad=!0),ye!==null&&(ye=ye.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Ge=a,Qe=O;fe=l;var qt=c;switch(Qe.tag){case 1:if(Ge=Qe.payload,typeof Ge=="function"){ke=Ge.call(qt,ke,fe);break e}ke=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=Qe.payload,fe=typeof Ge=="function"?Ge.call(qt,ke,fe):Ge,fe==null)break e;ke=b({},ke,fe);break e;case 2:ba=!0}}fe=O.callback,fe!==null&&(a.flags|=64,ge&&(a.flags|=8192),ge=v.callbacks,ge===null?v.callbacks=[fe]:ge.push(fe))}else ge={lane:fe,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ye===null?(me=ye=ge,V=ke):ye=ye.next=ge,C|=fe;if(O=O.next,O===null){if(O=v.shared.pending,O===null)break;ge=O,O=ge.next,ge.next=null,v.lastBaseUpdate=ge,v.shared.pending=null}}while(!0);ye===null&&(V=ke),v.baseState=V,v.firstBaseUpdate=me,v.lastBaseUpdate=ye,w===null&&(v.shared.lanes=0),Sa|=C,a.lanes=C,a.memoizedState=ke}}function Im(a,l){if(typeof a!="function")throw Error(i(191,a));a.call(l)}function Rm(a,l){var c=a.callbacks;if(c!==null)for(a.callbacks=null,a=0;a<c.length;a++)Im(c[a],l)}var Ci=P(null),Hr=P(0);function Mm(a,l){a=aa,X(Hr,a),X(Ci,l),aa=a|l.baseLanes}function id(){X(Hr,aa),X(Ci,Ci.current)}function ld(){aa=Hr.current,W(Ci),W(Hr)}var Zs=P(null),xn=null;function wa(a){var l=a.alternate;X(ls,ls.current&1),X(Zs,a),xn===null&&(l===null||Ci.current!==null||l.memoizedState!==null)&&(xn=a)}function rd(a){X(ls,ls.current),X(Zs,a),xn===null&&(xn=a)}function Dm(a){a.tag===22?(X(ls,ls.current),X(Zs,a),xn===null&&(xn=a)):Na()}function Na(){X(ls,ls.current),X(Zs,Zs.current)}function en(a){W(Zs),xn===a&&(xn=null),W(ls)}var ls=P(0);function qr(a){for(var l=a;l!==null;){if(l.tag===13){var c=l.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||mu(c)||fu(c)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Kn=0,ut=null,Ft=null,ds=null,Vr=!1,Ei=!1,ei=!1,zr=0,Al=0,Ai=null,by=0;function ns(){throw Error(i(321))}function od(a,l){if(l===null)return!1;for(var c=0;c<l.length&&c<a.length;c++)if(!Xs(a[c],l[c]))return!1;return!0}function cd(a,l,c,h,v,w){return Kn=w,ut=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,M.H=a===null||a.memoizedState===null?bf:kd,ei=!1,w=c(h,v),ei=!1,Ei&&(w=Um(l,c,h,v)),Om(a),w}function Om(a){M.H=Ml;var l=Ft!==null&&Ft.next!==null;if(Kn=0,ds=Ft=ut=null,Vr=!1,Al=0,Ai=null,l)throw Error(i(300));a===null||us||(a=a.dependencies,a!==null&&Ur(a)&&(us=!0))}function Um(a,l,c,h){ut=a;var v=0;do{if(Ei&&(Ai=null),Al=0,Ei=!1,25<=v)throw Error(i(301));if(v+=1,ds=Ft=null,a.updateQueue!=null){var w=a.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}M.H=vf,w=l(c,h)}while(Ei);return w}function vy(){var a=M.H,l=a.useState()[0];return l=typeof l.then=="function"?Il(l):l,a=a.useState()[0],(Ft!==null?Ft.memoizedState:null)!==a&&(ut.flags|=1024),l}function dd(){var a=zr!==0;return zr=0,a}function ud(a,l,c){l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~c}function hd(a){if(Vr){for(a=a.memoizedState;a!==null;){var l=a.queue;l!==null&&(l.pending=null),a=a.next}Vr=!1}Kn=0,ds=Ft=ut=null,Ei=!1,Al=zr=0,Ai=null}function Bs(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ds===null?ut.memoizedState=ds=a:ds=ds.next=a,ds}function rs(){if(Ft===null){var a=ut.alternate;a=a!==null?a.memoizedState:null}else a=Ft.next;var l=ds===null?ut.memoizedState:ds.next;if(l!==null)ds=l,Ft=a;else{if(a===null)throw ut.alternate===null?Error(i(467)):Error(i(310));Ft=a,a={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},ds===null?ut.memoizedState=ds=a:ds=ds.next=a}return ds}function Wr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(a){var l=Al;return Al+=1,Ai===null&&(Ai=[]),a=_m(Ai,a,l),l=ut,(ds===null?l.memoizedState:ds.next)===null&&(l=l.alternate,M.H=l===null||l.memoizedState===null?bf:kd),a}function Jr(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Il(a);if(a.$$typeof===I)return Cs(a)}throw Error(i(438,String(a)))}function md(a){var l=null,c=ut.updateQueue;if(c!==null&&(l=c.memoCache),l==null){var h=ut.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(l={data:h.data.map(function(v){return v.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),c===null&&(c=Wr(),ut.updateQueue=c),c.memoCache=l,c=l.data[l.index],c===void 0)for(c=l.data[l.index]=Array(a),h=0;h<a;h++)c[h]=q;return l.index++,c}function Xn(a,l){return typeof l=="function"?l(a):l}function Yr(a){var l=rs();return fd(l,Ft,a)}function fd(a,l,c){var h=a.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=c;var v=a.baseQueue,w=h.pending;if(w!==null){if(v!==null){var C=v.next;v.next=w.next,w.next=C}l.baseQueue=v=w,h.pending=null}if(w=a.baseState,v===null)a.memoizedState=w;else{l=v.next;var O=C=null,V=null,me=l,ye=!1;do{var ke=me.lane&-536870913;if(ke!==me.lane?(Nt&ke)===ke:(Kn&ke)===ke){var fe=me.revertLane;if(fe===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),ke===ki&&(ye=!0);else if((Kn&fe)===fe){me=me.next,fe===ki&&(ye=!0);continue}else ke={lane:0,revertLane:me.revertLane,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},V===null?(O=V=ke,C=w):V=V.next=ke,ut.lanes|=fe,Sa|=fe;ke=me.action,ei&&c(w,ke),w=me.hasEagerState?me.eagerState:c(w,ke)}else fe={lane:ke,revertLane:me.revertLane,gesture:me.gesture,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},V===null?(O=V=fe,C=w):V=V.next=fe,ut.lanes|=ke,Sa|=ke;me=me.next}while(me!==null&&me!==l);if(V===null?C=w:V.next=O,!Xs(w,a.memoizedState)&&(us=!0,ye&&(c=Si,c!==null)))throw c;a.memoizedState=w,a.baseState=C,a.baseQueue=V,h.lastRenderedState=w}return v===null&&(h.lanes=0),[a.memoizedState,h.dispatch]}function pd(a){var l=rs(),c=l.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=a;var h=c.dispatch,v=c.pending,w=l.memoizedState;if(v!==null){c.pending=null;var C=v=v.next;do w=a(w,C.action),C=C.next;while(C!==v);Xs(w,l.memoizedState)||(us=!0),l.memoizedState=w,l.baseQueue===null&&(l.baseState=w),c.lastRenderedState=w}return[w,h]}function Lm(a,l,c){var h=ut,v=rs(),w=kt;if(w){if(c===void 0)throw Error(i(407));c=c()}else c=l();var C=!Xs((Ft||v).memoizedState,c);if(C&&(v.memoizedState=c,us=!0),v=v.queue,bd(Gm.bind(null,h,v,a),[a]),v.getSnapshot!==l||C||ds!==null&&ds.memoizedState.tag&1){if(h.flags|=2048,Ii(9,{destroy:void 0},Pm.bind(null,h,v,c,l),null),Vt===null)throw Error(i(349));w||(Kn&127)!==0||Bm(h,l,c)}return c}function Bm(a,l,c){a.flags|=16384,a={getSnapshot:l,value:c},l=ut.updateQueue,l===null?(l=Wr(),ut.updateQueue=l,l.stores=[a]):(c=l.stores,c===null?l.stores=[a]:c.push(a))}function Pm(a,l,c,h){l.value=c,l.getSnapshot=h,$m(l)&&Fm(a)}function Gm(a,l,c){return c(function(){$m(l)&&Fm(a)})}function $m(a){var l=a.getSnapshot;a=a.value;try{var c=l();return!Xs(a,c)}catch{return!0}}function Fm(a){var l=Va(a,2);l!==null&&zs(l,a,2)}function xd(a){var l=Bs();if(typeof a=="function"){var c=a;if(a=c(),ei){Tt(!0);try{c()}finally{Tt(!1)}}}return l.memoizedState=l.baseState=a,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:a},l}function Hm(a,l,c,h){return a.baseState=c,fd(a,Ft,typeof h=="function"?h:Xn)}function yy(a,l,c,h,v){if(Qr(a))throw Error(i(485));if(a=l.action,a!==null){var w={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){w.listeners.push(C)}};M.T!==null?c(!0):w.isTransition=!1,h(w),c=l.pending,c===null?(w.next=l.pending=w,qm(l,w)):(w.next=c.next,l.pending=c.next=w)}}function qm(a,l){var c=l.action,h=l.payload,v=a.state;if(l.isTransition){var w=M.T,C={};M.T=C;try{var O=c(v,h),V=M.S;V!==null&&V(C,O),Vm(a,l,O)}catch(me){gd(a,l,me)}finally{w!==null&&C.types!==null&&(w.types=C.types),M.T=w}}else try{w=c(v,h),Vm(a,l,w)}catch(me){gd(a,l,me)}}function Vm(a,l,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){zm(a,l,h)},function(h){return gd(a,l,h)}):zm(a,l,c)}function zm(a,l,c){l.status="fulfilled",l.value=c,Wm(l),a.state=c,l=a.pending,l!==null&&(c=l.next,c===l?a.pending=null:(c=c.next,l.next=c,qm(a,c)))}function gd(a,l,c){var h=a.pending;if(a.pending=null,h!==null){h=h.next;do l.status="rejected",l.reason=c,Wm(l),l=l.next;while(l!==h)}a.action=null}function Wm(a){a=a.listeners;for(var l=0;l<a.length;l++)(0,a[l])()}function Jm(a,l){return l}function Ym(a,l){if(kt){var c=Vt.formState;if(c!==null){e:{var h=ut;if(kt){if(Kt){t:{for(var v=Kt,w=pn;v.nodeType!==8;){if(!w){v=null;break t}if(v=gn(v.nextSibling),v===null){v=null;break t}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){Kt=gn(v.nextSibling),h=v.data==="F!";break e}}xa(h)}h=!1}h&&(l=c[0])}}return c=Bs(),c.memoizedState=c.baseState=l,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jm,lastRenderedState:l},c.queue=h,c=pf.bind(null,ut,h),h.dispatch=c,h=xd(!1),w=jd.bind(null,ut,!1,h.queue),h=Bs(),v={state:l,dispatch:null,action:a,pending:null},h.queue=v,c=yy.bind(null,ut,v,w,c),v.dispatch=c,h.memoizedState=a,[l,c,!1]}function Km(a){var l=rs();return Xm(l,Ft,a)}function Xm(a,l,c){if(l=fd(a,l,Jm)[0],a=Yr(Xn)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var h=Il(l)}catch(C){throw C===_i?Pr:C}else h=l;l=rs();var v=l.queue,w=v.dispatch;return c!==l.memoizedState&&(ut.flags|=2048,Ii(9,{destroy:void 0},wy.bind(null,v,c),null)),[h,w,a]}function wy(a,l){a.action=l}function Qm(a){var l=rs(),c=Ft;if(c!==null)return Xm(l,c,a);rs(),l=l.memoizedState,c=rs();var h=c.queue.dispatch;return c.memoizedState=a,[l,h,!1]}function Ii(a,l,c,h){return a={tag:a,create:c,deps:h,inst:l,next:null},l=ut.updateQueue,l===null&&(l=Wr(),ut.updateQueue=l),c=l.lastEffect,c===null?l.lastEffect=a.next=a:(h=c.next,c.next=a,a.next=h,l.lastEffect=a),a}function Zm(){return rs().memoizedState}function Kr(a,l,c,h){var v=Bs();ut.flags|=a,v.memoizedState=Ii(1|l,{destroy:void 0},c,h===void 0?null:h)}function Xr(a,l,c,h){var v=rs();h=h===void 0?null:h;var w=v.memoizedState.inst;Ft!==null&&h!==null&&od(h,Ft.memoizedState.deps)?v.memoizedState=Ii(l,w,c,h):(ut.flags|=a,v.memoizedState=Ii(1|l,w,c,h))}function ef(a,l){Kr(8390656,8,a,l)}function bd(a,l){Xr(2048,8,a,l)}function Ny(a){ut.flags|=4;var l=ut.updateQueue;if(l===null)l=Wr(),ut.updateQueue=l,l.events=[a];else{var c=l.events;c===null?l.events=[a]:c.push(a)}}function tf(a){var l=rs().memoizedState;return Ny({ref:l,nextImpl:a}),function(){if((Dt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}function sf(a,l){return Xr(4,2,a,l)}function nf(a,l){return Xr(4,4,a,l)}function af(a,l){if(typeof l=="function"){a=a();var c=l(a);return function(){typeof c=="function"?c():l(null)}}if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function lf(a,l,c){c=c!=null?c.concat([a]):null,Xr(4,4,af.bind(null,l,a),c)}function vd(){}function rf(a,l){var c=rs();l=l===void 0?null:l;var h=c.memoizedState;return l!==null&&od(l,h[1])?h[0]:(c.memoizedState=[a,l],a)}function of(a,l){var c=rs();l=l===void 0?null:l;var h=c.memoizedState;if(l!==null&&od(l,h[1]))return h[0];if(h=a(),ei){Tt(!0);try{a()}finally{Tt(!1)}}return c.memoizedState=[h,l],h}function yd(a,l,c){return c===void 0||(Kn&1073741824)!==0&&(Nt&261930)===0?a.memoizedState=l:(a.memoizedState=c,a=cp(),ut.lanes|=a,Sa|=a,c)}function cf(a,l,c,h){return Xs(c,l)?c:Ci.current!==null?(a=yd(a,c,h),Xs(a,l)||(us=!0),a):(Kn&42)===0||(Kn&1073741824)!==0&&(Nt&261930)===0?(us=!0,a.memoizedState=c):(a=cp(),ut.lanes|=a,Sa|=a,l)}function df(a,l,c,h,v){var w=B.p;B.p=w!==0&&8>w?w:8;var C=M.T,O={};M.T=O,jd(a,!1,l,c);try{var V=v(),me=M.S;if(me!==null&&me(O,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ye=gy(V,h);Rl(a,l,ye,nn(a))}else Rl(a,l,h,nn(a))}catch(ke){Rl(a,l,{then:function(){},status:"rejected",reason:ke},nn())}finally{B.p=w,C!==null&&O.types!==null&&(C.types=O.types),M.T=C}}function jy(){}function wd(a,l,c,h){if(a.tag!==5)throw Error(i(476));var v=uf(a).queue;df(a,v,l,Z,c===null?jy:function(){return hf(a),c(h)})}function uf(a){var l=a.memoizedState;if(l!==null)return l;l={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:Z},next:null};var c={};return l.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:c},next:null},a.memoizedState=l,a=a.alternate,a!==null&&(a.memoizedState=l),l}function hf(a){var l=uf(a);l.next===null&&(l=a.alternate.memoizedState),Rl(a,l.next.queue,{},nn())}function Nd(){return Cs(Yl)}function mf(){return rs().memoizedState}function ff(){return rs().memoizedState}function ky(a){for(var l=a.return;l!==null;){switch(l.tag){case 24:case 3:var c=nn();a=va(c);var h=ya(l,a,c);h!==null&&(zs(h,l,c),Tl(h,l,c)),l={cache:Xc()},a.payload=l;return}l=l.return}}function Sy(a,l,c){var h=nn();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Qr(a)?xf(l,c):(c=Gc(a,l,c,h),c!==null&&(zs(c,a,h),gf(c,l,h)))}function pf(a,l,c){var h=nn();Rl(a,l,c,h)}function Rl(a,l,c,h){var v={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Qr(a))xf(l,v);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=l.lastRenderedReducer,w!==null))try{var C=l.lastRenderedState,O=w(C,c);if(v.hasEagerState=!0,v.eagerState=O,Xs(O,C))return Rr(a,l,v,0),Vt===null&&Ir(),!1}catch{}finally{}if(c=Gc(a,l,v,h),c!==null)return zs(c,a,h),gf(c,l,h),!0}return!1}function jd(a,l,c,h){if(h={lane:2,revertLane:tu(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Qr(a)){if(l)throw Error(i(479))}else l=Gc(a,c,h,2),l!==null&&zs(l,a,2)}function Qr(a){var l=a.alternate;return a===ut||l!==null&&l===ut}function xf(a,l){Ei=Vr=!0;var c=a.pending;c===null?l.next=l:(l.next=c.next,c.next=l),a.pending=l}function gf(a,l,c){if((c&4194048)!==0){var h=l.lanes;h&=a.pendingLanes,c|=h,l.lanes=c,cn(a,c)}}var Ml={readContext:Cs,use:Jr,useCallback:ns,useContext:ns,useEffect:ns,useImperativeHandle:ns,useLayoutEffect:ns,useInsertionEffect:ns,useMemo:ns,useReducer:ns,useRef:ns,useState:ns,useDebugValue:ns,useDeferredValue:ns,useTransition:ns,useSyncExternalStore:ns,useId:ns,useHostTransitionStatus:ns,useFormState:ns,useActionState:ns,useOptimistic:ns,useMemoCache:ns,useCacheRefresh:ns};Ml.useEffectEvent=ns;var bf={readContext:Cs,use:Jr,useCallback:function(a,l){return Bs().memoizedState=[a,l===void 0?null:l],a},useContext:Cs,useEffect:ef,useImperativeHandle:function(a,l,c){c=c!=null?c.concat([a]):null,Kr(4194308,4,af.bind(null,l,a),c)},useLayoutEffect:function(a,l){return Kr(4194308,4,a,l)},useInsertionEffect:function(a,l){Kr(4,2,a,l)},useMemo:function(a,l){var c=Bs();l=l===void 0?null:l;var h=a();if(ei){Tt(!0);try{a()}finally{Tt(!1)}}return c.memoizedState=[h,l],h},useReducer:function(a,l,c){var h=Bs();if(c!==void 0){var v=c(l);if(ei){Tt(!0);try{c(l)}finally{Tt(!1)}}}else v=l;return h.memoizedState=h.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},h.queue=a,a=a.dispatch=Sy.bind(null,ut,a),[h.memoizedState,a]},useRef:function(a){var l=Bs();return a={current:a},l.memoizedState=a},useState:function(a){a=xd(a);var l=a.queue,c=pf.bind(null,ut,l);return l.dispatch=c,[a.memoizedState,c]},useDebugValue:vd,useDeferredValue:function(a,l){var c=Bs();return yd(c,a,l)},useTransition:function(){var a=xd(!1);return a=df.bind(null,ut,a.queue,!0,!1),Bs().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,l,c){var h=ut,v=Bs();if(kt){if(c===void 0)throw Error(i(407));c=c()}else{if(c=l(),Vt===null)throw Error(i(349));(Nt&127)!==0||Bm(h,l,c)}v.memoizedState=c;var w={value:c,getSnapshot:l};return v.queue=w,ef(Gm.bind(null,h,w,a),[a]),h.flags|=2048,Ii(9,{destroy:void 0},Pm.bind(null,h,w,c,l),null),c},useId:function(){var a=Bs(),l=Vt.identifierPrefix;if(kt){var c=Bn,h=Ln;c=(h&~(1<<32-Ct(h)-1)).toString(32)+c,l="_"+l+"R_"+c,c=zr++,0<c&&(l+="H"+c.toString(32)),l+="_"}else c=by++,l="_"+l+"r_"+c.toString(32)+"_";return a.memoizedState=l},useHostTransitionStatus:Nd,useFormState:Ym,useActionState:Ym,useOptimistic:function(a){var l=Bs();l.memoizedState=l.baseState=a;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=c,l=jd.bind(null,ut,!0,c),c.dispatch=l,[a,l]},useMemoCache:md,useCacheRefresh:function(){return Bs().memoizedState=ky.bind(null,ut)},useEffectEvent:function(a){var l=Bs(),c={impl:a};return l.memoizedState=c,function(){if((Dt&2)!==0)throw Error(i(440));return c.impl.apply(void 0,arguments)}}},kd={readContext:Cs,use:Jr,useCallback:rf,useContext:Cs,useEffect:bd,useImperativeHandle:lf,useInsertionEffect:sf,useLayoutEffect:nf,useMemo:of,useReducer:Yr,useRef:Zm,useState:function(){return Yr(Xn)},useDebugValue:vd,useDeferredValue:function(a,l){var c=rs();return cf(c,Ft.memoizedState,a,l)},useTransition:function(){var a=Yr(Xn)[0],l=rs().memoizedState;return[typeof a=="boolean"?a:Il(a),l]},useSyncExternalStore:Lm,useId:mf,useHostTransitionStatus:Nd,useFormState:Km,useActionState:Km,useOptimistic:function(a,l){var c=rs();return Hm(c,Ft,a,l)},useMemoCache:md,useCacheRefresh:ff};kd.useEffectEvent=tf;var vf={readContext:Cs,use:Jr,useCallback:rf,useContext:Cs,useEffect:bd,useImperativeHandle:lf,useInsertionEffect:sf,useLayoutEffect:nf,useMemo:of,useReducer:pd,useRef:Zm,useState:function(){return pd(Xn)},useDebugValue:vd,useDeferredValue:function(a,l){var c=rs();return Ft===null?yd(c,a,l):cf(c,Ft.memoizedState,a,l)},useTransition:function(){var a=pd(Xn)[0],l=rs().memoizedState;return[typeof a=="boolean"?a:Il(a),l]},useSyncExternalStore:Lm,useId:mf,useHostTransitionStatus:Nd,useFormState:Qm,useActionState:Qm,useOptimistic:function(a,l){var c=rs();return Ft!==null?Hm(c,Ft,a,l):(c.baseState=a,[a,c.queue.dispatch])},useMemoCache:md,useCacheRefresh:ff};vf.useEffectEvent=tf;function Sd(a,l,c,h){l=a.memoizedState,c=c(h,l),c=c==null?l:b({},l,c),a.memoizedState=c,a.lanes===0&&(a.updateQueue.baseState=c)}var _d={enqueueSetState:function(a,l,c){a=a._reactInternals;var h=nn(),v=va(h);v.payload=l,c!=null&&(v.callback=c),l=ya(a,v,h),l!==null&&(zs(l,a,h),Tl(l,a,h))},enqueueReplaceState:function(a,l,c){a=a._reactInternals;var h=nn(),v=va(h);v.tag=1,v.payload=l,c!=null&&(v.callback=c),l=ya(a,v,h),l!==null&&(zs(l,a,h),Tl(l,a,h))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var c=nn(),h=va(c);h.tag=2,l!=null&&(h.callback=l),l=ya(a,h,c),l!==null&&(zs(l,a,c),Tl(l,a,c))}};function yf(a,l,c,h,v,w,C){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(h,w,C):l.prototype&&l.prototype.isPureReactComponent?!vl(c,h)||!vl(v,w):!0}function wf(a,l,c,h){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(c,h),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(c,h),l.state!==a&&_d.enqueueReplaceState(l,l.state,null)}function ti(a,l){var c=l;if("ref"in l){c={};for(var h in l)h!=="ref"&&(c[h]=l[h])}if(a=a.defaultProps){c===l&&(c=b({},c));for(var v in a)c[v]===void 0&&(c[v]=a[v])}return c}function Nf(a){Ar(a)}function jf(a){console.error(a)}function kf(a){Ar(a)}function Zr(a,l){try{var c=a.onUncaughtError;c(l.value,{componentStack:l.stack})}catch(h){setTimeout(function(){throw h})}}function Sf(a,l,c){try{var h=a.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Td(a,l,c){return c=va(c),c.tag=3,c.payload={element:null},c.callback=function(){Zr(a,l)},c}function _f(a){return a=va(a),a.tag=3,a}function Tf(a,l,c,h){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var w=h.value;a.payload=function(){return v(w)},a.callback=function(){Sf(l,c,h)}}var C=c.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(a.callback=function(){Sf(l,c,h),typeof v!="function"&&(_a===null?_a=new Set([this]):_a.add(this));var O=h.stack;this.componentDidCatch(h.value,{componentStack:O!==null?O:""})})}function _y(a,l,c,h,v){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(l=c.alternate,l!==null&&ji(l,c,v,!0),c=Zs.current,c!==null){switch(c.tag){case 31:case 13:return xn===null?ho():c.alternate===null&&as===0&&(as=3),c.flags&=-257,c.flags|=65536,c.lanes=v,h===Gr?c.flags|=16384:(l=c.updateQueue,l===null?c.updateQueue=new Set([h]):l.add(h),Qd(a,h,v)),!1;case 22:return c.flags|=65536,h===Gr?c.flags|=16384:(l=c.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=l):(c=l.retryQueue,c===null?l.retryQueue=new Set([h]):c.add(h)),Qd(a,h,v)),!1}throw Error(i(435,c.tag))}return Qd(a,h,v),ho(),!1}if(kt)return l=Zs.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=v,h!==zc&&(a=Error(i(422),{cause:h}),Nl(hn(a,c)))):(h!==zc&&(l=Error(i(423),{cause:h}),Nl(hn(l,c))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,h=hn(h,c),v=Td(a.stateNode,h,v),nd(a,v),as!==4&&(as=2)),!1;var w=Error(i(520),{cause:h});if(w=hn(w,c),$l===null?$l=[w]:$l.push(w),as!==4&&(as=2),l===null)return!0;h=hn(h,c),c=l;do{switch(c.tag){case 3:return c.flags|=65536,a=v&-v,c.lanes|=a,a=Td(c.stateNode,h,a),nd(c,a),!1;case 1:if(l=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(_a===null||!_a.has(w))))return c.flags|=65536,v&=-v,c.lanes|=v,v=_f(v),Tf(v,a,c,h),nd(c,v),!1}c=c.return}while(c!==null);return!1}var Cd=Error(i(461)),us=!1;function Es(a,l,c,h){l.child=a===null?Am(l,null,c,h):Za(l,a.child,c,h)}function Cf(a,l,c,h,v){c=c.render;var w=l.ref;if("ref"in h){var C={};for(var O in h)O!=="ref"&&(C[O]=h[O])}else C=h;return Ya(l),h=cd(a,l,c,C,w,v),O=dd(),a!==null&&!us?(ud(a,l,v),Qn(a,l,v)):(kt&&O&&qc(l),l.flags|=1,Es(a,l,h,v),l.child)}function Ef(a,l,c,h,v){if(a===null){var w=c.type;return typeof w=="function"&&!$c(w)&&w.defaultProps===void 0&&c.compare===null?(l.tag=15,l.type=w,Af(a,l,w,h,v)):(a=Dr(c.type,null,h,l,l.mode,v),a.ref=l.ref,a.return=l,l.child=a)}if(w=a.child,!Ud(a,v)){var C=w.memoizedProps;if(c=c.compare,c=c!==null?c:vl,c(C,h)&&a.ref===l.ref)return Qn(a,l,v)}return l.flags|=1,a=zn(w,h),a.ref=l.ref,a.return=l,l.child=a}function Af(a,l,c,h,v){if(a!==null){var w=a.memoizedProps;if(vl(w,h)&&a.ref===l.ref)if(us=!1,l.pendingProps=h=w,Ud(a,v))(a.flags&131072)!==0&&(us=!0);else return l.lanes=a.lanes,Qn(a,l,v)}return Ed(a,l,c,h,v)}function If(a,l,c,h){var v=h.children,w=a!==null?a.memoizedState:null;if(a===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((l.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,a!==null){for(h=l.child=a.child,v=0;h!==null;)v=v|h.lanes|h.childLanes,h=h.sibling;h=v&~w}else h=0,l.child=null;return Rf(a,l,w,c,h)}if((c&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},a!==null&&Br(l,w!==null?w.cachePool:null),w!==null?Mm(l,w):id(),Dm(l);else return h=l.lanes=536870912,Rf(a,l,w!==null?w.baseLanes|c:c,c,h)}else w!==null?(Br(l,w.cachePool),Mm(l,w),Na(),l.memoizedState=null):(a!==null&&Br(l,null),id(),Na());return Es(a,l,v,c),l.child}function Dl(a,l){return a!==null&&a.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function Rf(a,l,c,h,v){var w=Zc();return w=w===null?null:{parent:cs._currentValue,pool:w},l.memoizedState={baseLanes:c,cachePool:w},a!==null&&Br(l,null),id(),Dm(l),a!==null&&ji(a,l,h,!0),l.childLanes=v,null}function eo(a,l){return l=so({mode:l.mode,children:l.children},a.mode),l.ref=a.ref,a.child=l,l.return=a,l}function Mf(a,l,c){return Za(l,a.child,null,c),a=eo(l,l.pendingProps),a.flags|=2,en(l),l.memoizedState=null,a}function Ty(a,l,c){var h=l.pendingProps,v=(l.flags&128)!==0;if(l.flags&=-129,a===null){if(kt){if(h.mode==="hidden")return a=eo(l,h),l.lanes=536870912,Dl(null,a);if(rd(l),(a=Kt)?(a=Vp(a,pn),a=a!==null&&a.data==="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:fa!==null?{id:Ln,overflow:Bn}:null,retryLane:536870912,hydrationErrors:null},c=pm(a),c.return=l,l.child=c,Ts=l,Kt=null)):a=null,a===null)throw xa(l);return l.lanes=536870912,null}return eo(l,h)}var w=a.memoizedState;if(w!==null){var C=w.dehydrated;if(rd(l),v)if(l.flags&256)l.flags&=-257,l=Mf(a,l,c);else if(l.memoizedState!==null)l.child=a.child,l.flags|=128,l=null;else throw Error(i(558));else if(us||ji(a,l,c,!1),v=(c&a.childLanes)!==0,us||v){if(h=Vt,h!==null&&(C=xs(h,c),C!==0&&C!==w.retryLane))throw w.retryLane=C,Va(a,C),zs(h,a,C),Cd;ho(),l=Mf(a,l,c)}else a=w.treeContext,Kt=gn(C.nextSibling),Ts=l,kt=!0,pa=null,pn=!1,a!==null&&bm(l,a),l=eo(l,h),l.flags|=4096;return l}return a=zn(a.child,{mode:h.mode,children:h.children}),a.ref=l.ref,l.child=a,a.return=l,a}function to(a,l){var c=l.ref;if(c===null)a!==null&&a.ref!==null&&(l.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(i(284));(a===null||a.ref!==c)&&(l.flags|=4194816)}}function Ed(a,l,c,h,v){return Ya(l),c=cd(a,l,c,h,void 0,v),h=dd(),a!==null&&!us?(ud(a,l,v),Qn(a,l,v)):(kt&&h&&qc(l),l.flags|=1,Es(a,l,c,v),l.child)}function Df(a,l,c,h,v,w){return Ya(l),l.updateQueue=null,c=Um(l,h,c,v),Om(a),h=dd(),a!==null&&!us?(ud(a,l,w),Qn(a,l,w)):(kt&&h&&qc(l),l.flags|=1,Es(a,l,c,w),l.child)}function Of(a,l,c,h,v){if(Ya(l),l.stateNode===null){var w=vi,C=c.contextType;typeof C=="object"&&C!==null&&(w=Cs(C)),w=new c(h,w),l.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=_d,l.stateNode=w,w._reactInternals=l,w=l.stateNode,w.props=h,w.state=l.memoizedState,w.refs={},td(l),C=c.contextType,w.context=typeof C=="object"&&C!==null?Cs(C):vi,w.state=l.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(Sd(l,c,C,h),w.state=l.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(C=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),C!==w.state&&_d.enqueueReplaceState(w,w.state,null),El(l,h,w,v),Cl(),w.state=l.memoizedState),typeof w.componentDidMount=="function"&&(l.flags|=4194308),h=!0}else if(a===null){w=l.stateNode;var O=l.memoizedProps,V=ti(c,O);w.props=V;var me=w.context,ye=c.contextType;C=vi,typeof ye=="object"&&ye!==null&&(C=Cs(ye));var ke=c.getDerivedStateFromProps;ye=typeof ke=="function"||typeof w.getSnapshotBeforeUpdate=="function",O=l.pendingProps!==O,ye||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O||me!==C)&&wf(l,w,h,C),ba=!1;var fe=l.memoizedState;w.state=fe,El(l,h,w,v),Cl(),me=l.memoizedState,O||fe!==me||ba?(typeof ke=="function"&&(Sd(l,c,ke,h),me=l.memoizedState),(V=ba||yf(l,c,V,h,fe,me,C))?(ye||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(l.flags|=4194308)):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=h,l.memoizedState=me),w.props=h,w.state=me,w.context=C,h=V):(typeof w.componentDidMount=="function"&&(l.flags|=4194308),h=!1)}else{w=l.stateNode,sd(a,l),C=l.memoizedProps,ye=ti(c,C),w.props=ye,ke=l.pendingProps,fe=w.context,me=c.contextType,V=vi,typeof me=="object"&&me!==null&&(V=Cs(me)),O=c.getDerivedStateFromProps,(me=typeof O=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==ke||fe!==V)&&wf(l,w,h,V),ba=!1,fe=l.memoizedState,w.state=fe,El(l,h,w,v),Cl();var ge=l.memoizedState;C!==ke||fe!==ge||ba||a!==null&&a.dependencies!==null&&Ur(a.dependencies)?(typeof O=="function"&&(Sd(l,c,O,h),ge=l.memoizedState),(ye=ba||yf(l,c,ye,h,fe,ge,V)||a!==null&&a.dependencies!==null&&Ur(a.dependencies))?(me||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ge,V),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ge,V)),typeof w.componentDidUpdate=="function"&&(l.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===a.memoizedProps&&fe===a.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&fe===a.memoizedState||(l.flags|=1024),l.memoizedProps=h,l.memoizedState=ge),w.props=h,w.state=ge,w.context=V,h=ye):(typeof w.componentDidUpdate!="function"||C===a.memoizedProps&&fe===a.memoizedState||(l.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===a.memoizedProps&&fe===a.memoizedState||(l.flags|=1024),h=!1)}return w=h,to(a,l),h=(l.flags&128)!==0,w||h?(w=l.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:w.render(),l.flags|=1,a!==null&&h?(l.child=Za(l,a.child,null,v),l.child=Za(l,null,c,v)):Es(a,l,c,v),l.memoizedState=w.state,a=l.child):a=Qn(a,l,v),a}function Uf(a,l,c,h){return Wa(),l.flags|=256,Es(a,l,c,h),l.child}var Ad={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Id(a){return{baseLanes:a,cachePool:km()}}function Rd(a,l,c){return a=a!==null?a.childLanes&~c:0,l&&(a|=sn),a}function Lf(a,l,c){var h=l.pendingProps,v=!1,w=(l.flags&128)!==0,C;if((C=w)||(C=a!==null&&a.memoizedState===null?!1:(ls.current&2)!==0),C&&(v=!0,l.flags&=-129),C=(l.flags&32)!==0,l.flags&=-33,a===null){if(kt){if(v?wa(l):Na(),(a=Kt)?(a=Vp(a,pn),a=a!==null&&a.data!=="&"?a:null,a!==null&&(l.memoizedState={dehydrated:a,treeContext:fa!==null?{id:Ln,overflow:Bn}:null,retryLane:536870912,hydrationErrors:null},c=pm(a),c.return=l,l.child=c,Ts=l,Kt=null)):a=null,a===null)throw xa(l);return fu(a)?l.lanes=32:l.lanes=536870912,null}var O=h.children;return h=h.fallback,v?(Na(),v=l.mode,O=so({mode:"hidden",children:O},v),h=za(h,v,c,null),O.return=l,h.return=l,O.sibling=h,l.child=O,h=l.child,h.memoizedState=Id(c),h.childLanes=Rd(a,C,c),l.memoizedState=Ad,Dl(null,h)):(wa(l),Md(l,O))}var V=a.memoizedState;if(V!==null&&(O=V.dehydrated,O!==null)){if(w)l.flags&256?(wa(l),l.flags&=-257,l=Dd(a,l,c)):l.memoizedState!==null?(Na(),l.child=a.child,l.flags|=128,l=null):(Na(),O=h.fallback,v=l.mode,h=so({mode:"visible",children:h.children},v),O=za(O,v,c,null),O.flags|=2,h.return=l,O.return=l,h.sibling=O,l.child=h,Za(l,a.child,null,c),h=l.child,h.memoizedState=Id(c),h.childLanes=Rd(a,C,c),l.memoizedState=Ad,l=Dl(null,h));else if(wa(l),fu(O)){if(C=O.nextSibling&&O.nextSibling.dataset,C)var me=C.dgst;C=me,h=Error(i(419)),h.stack="",h.digest=C,Nl({value:h,source:null,stack:null}),l=Dd(a,l,c)}else if(us||ji(a,l,c,!1),C=(c&a.childLanes)!==0,us||C){if(C=Vt,C!==null&&(h=xs(C,c),h!==0&&h!==V.retryLane))throw V.retryLane=h,Va(a,h),zs(C,a,h),Cd;mu(O)||ho(),l=Dd(a,l,c)}else mu(O)?(l.flags|=192,l.child=a.child,l=null):(a=V.treeContext,Kt=gn(O.nextSibling),Ts=l,kt=!0,pa=null,pn=!1,a!==null&&bm(l,a),l=Md(l,h.children),l.flags|=4096);return l}return v?(Na(),O=h.fallback,v=l.mode,V=a.child,me=V.sibling,h=zn(V,{mode:"hidden",children:h.children}),h.subtreeFlags=V.subtreeFlags&65011712,me!==null?O=zn(me,O):(O=za(O,v,c,null),O.flags|=2),O.return=l,h.return=l,h.sibling=O,l.child=h,Dl(null,h),h=l.child,O=a.child.memoizedState,O===null?O=Id(c):(v=O.cachePool,v!==null?(V=cs._currentValue,v=v.parent!==V?{parent:V,pool:V}:v):v=km(),O={baseLanes:O.baseLanes|c,cachePool:v}),h.memoizedState=O,h.childLanes=Rd(a,C,c),l.memoizedState=Ad,Dl(a.child,h)):(wa(l),c=a.child,a=c.sibling,c=zn(c,{mode:"visible",children:h.children}),c.return=l,c.sibling=null,a!==null&&(C=l.deletions,C===null?(l.deletions=[a],l.flags|=16):C.push(a)),l.child=c,l.memoizedState=null,c)}function Md(a,l){return l=so({mode:"visible",children:l},a.mode),l.return=a,a.child=l}function so(a,l){return a=Qs(22,a,null,l),a.lanes=0,a}function Dd(a,l,c){return Za(l,a.child,null,c),a=Md(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function Bf(a,l,c){a.lanes|=l;var h=a.alternate;h!==null&&(h.lanes|=l),Yc(a.return,l,c)}function Od(a,l,c,h,v,w){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:v,treeForkCount:w}:(C.isBackwards=l,C.rendering=null,C.renderingStartTime=0,C.last=h,C.tail=c,C.tailMode=v,C.treeForkCount=w)}function Pf(a,l,c){var h=l.pendingProps,v=h.revealOrder,w=h.tail;h=h.children;var C=ls.current,O=(C&2)!==0;if(O?(C=C&1|2,l.flags|=128):C&=1,X(ls,C),Es(a,l,h,c),h=kt?wl:0,!O&&a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Bf(a,c,l);else if(a.tag===19)Bf(a,c,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(c=l.child,v=null;c!==null;)a=c.alternate,a!==null&&qr(a)===null&&(v=c),c=c.sibling;c=v,c===null?(v=l.child,l.child=null):(v=c.sibling,c.sibling=null),Od(l,!1,v,c,w,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=l.child,l.child=null;v!==null;){if(a=v.alternate,a!==null&&qr(a)===null){l.child=v;break}a=v.sibling,v.sibling=c,c=v,v=a}Od(l,!0,c,null,w,h);break;case"together":Od(l,!1,null,null,void 0,h);break;default:l.memoizedState=null}return l.child}function Qn(a,l,c){if(a!==null&&(l.dependencies=a.dependencies),Sa|=l.lanes,(c&l.childLanes)===0)if(a!==null){if(ji(a,l,c,!1),(c&l.childLanes)===0)return null}else return null;if(a!==null&&l.child!==a.child)throw Error(i(153));if(l.child!==null){for(a=l.child,c=zn(a,a.pendingProps),l.child=c,c.return=l;a.sibling!==null;)a=a.sibling,c=c.sibling=zn(a,a.pendingProps),c.return=l;c.sibling=null}return l.child}function Ud(a,l){return(a.lanes&l)!==0?!0:(a=a.dependencies,!!(a!==null&&Ur(a)))}function Cy(a,l,c){switch(l.tag){case 3:Re(l,l.stateNode.containerInfo),ga(l,cs,a.memoizedState.cache),Wa();break;case 27:case 5:ue(l);break;case 4:Re(l,l.stateNode.containerInfo);break;case 10:ga(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,rd(l),null;break;case 13:var h=l.memoizedState;if(h!==null)return h.dehydrated!==null?(wa(l),l.flags|=128,null):(c&l.child.childLanes)!==0?Lf(a,l,c):(wa(l),a=Qn(a,l,c),a!==null?a.sibling:null);wa(l);break;case 19:var v=(a.flags&128)!==0;if(h=(c&l.childLanes)!==0,h||(ji(a,l,c,!1),h=(c&l.childLanes)!==0),v){if(h)return Pf(a,l,c);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),X(ls,ls.current),h)break;return null;case 22:return l.lanes=0,If(a,l,c,l.pendingProps);case 24:ga(l,cs,a.memoizedState.cache)}return Qn(a,l,c)}function Gf(a,l,c){if(a!==null)if(a.memoizedProps!==l.pendingProps)us=!0;else{if(!Ud(a,c)&&(l.flags&128)===0)return us=!1,Cy(a,l,c);us=(a.flags&131072)!==0}else us=!1,kt&&(l.flags&1048576)!==0&&gm(l,wl,l.index);switch(l.lanes=0,l.tag){case 16:e:{var h=l.pendingProps;if(a=Xa(l.elementType),l.type=a,typeof a=="function")$c(a)?(h=ti(a,h),l.tag=1,l=Of(null,l,a,h,c)):(l.tag=0,l=Ed(null,l,a,h,c));else{if(a!=null){var v=a.$$typeof;if(v===j){l.tag=11,l=Cf(null,l,a,h,c);break e}else if(v===L){l.tag=14,l=Ef(null,l,a,h,c);break e}}throw l=ee(a)||a,Error(i(306,l,""))}}return l;case 0:return Ed(a,l,l.type,l.pendingProps,c);case 1:return h=l.type,v=ti(h,l.pendingProps),Of(a,l,h,v,c);case 3:e:{if(Re(l,l.stateNode.containerInfo),a===null)throw Error(i(387));h=l.pendingProps;var w=l.memoizedState;v=w.element,sd(a,l),El(l,h,null,c);var C=l.memoizedState;if(h=C.cache,ga(l,cs,h),h!==w.cache&&Kc(l,[cs],c,!0),Cl(),h=C.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:C.cache},l.updateQueue.baseState=w,l.memoizedState=w,l.flags&256){l=Uf(a,l,h,c);break e}else if(h!==v){v=hn(Error(i(424)),l),Nl(v),l=Uf(a,l,h,c);break e}else{switch(a=l.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Kt=gn(a.firstChild),Ts=l,kt=!0,pa=null,pn=!0,c=Am(l,null,h,c),l.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Wa(),h===v){l=Qn(a,l,c);break e}Es(a,l,h,c)}l=l.child}return l;case 26:return to(a,l),a===null?(c=Xp(l.type,null,l.pendingProps,null))?l.memoizedState=c:kt||(c=l.type,a=l.pendingProps,h=vo(_e.current).createElement(c),h[H]=l,h[ve]=a,As(h,c,a),wt(h),l.stateNode=h):l.memoizedState=Xp(l.type,a.memoizedProps,l.pendingProps,a.memoizedState),null;case 27:return ue(l),a===null&&kt&&(h=l.stateNode=Jp(l.type,l.pendingProps,_e.current),Ts=l,pn=!0,v=Kt,Aa(l.type)?(pu=v,Kt=gn(h.firstChild)):Kt=v),Es(a,l,l.pendingProps.children,c),to(a,l),a===null&&(l.flags|=4194304),l.child;case 5:return a===null&&kt&&((v=h=Kt)&&(h=aw(h,l.type,l.pendingProps,pn),h!==null?(l.stateNode=h,Ts=l,Kt=gn(h.firstChild),pn=!1,v=!0):v=!1),v||xa(l)),ue(l),v=l.type,w=l.pendingProps,C=a!==null?a.memoizedProps:null,h=w.children,du(v,w)?h=null:C!==null&&du(v,C)&&(l.flags|=32),l.memoizedState!==null&&(v=cd(a,l,vy,null,null,c),Yl._currentValue=v),to(a,l),Es(a,l,h,c),l.child;case 6:return a===null&&kt&&((a=c=Kt)&&(c=iw(c,l.pendingProps,pn),c!==null?(l.stateNode=c,Ts=l,Kt=null,a=!0):a=!1),a||xa(l)),null;case 13:return Lf(a,l,c);case 4:return Re(l,l.stateNode.containerInfo),h=l.pendingProps,a===null?l.child=Za(l,null,h,c):Es(a,l,h,c),l.child;case 11:return Cf(a,l,l.type,l.pendingProps,c);case 7:return Es(a,l,l.pendingProps,c),l.child;case 8:return Es(a,l,l.pendingProps.children,c),l.child;case 12:return Es(a,l,l.pendingProps.children,c),l.child;case 10:return h=l.pendingProps,ga(l,l.type,h.value),Es(a,l,h.children,c),l.child;case 9:return v=l.type._context,h=l.pendingProps.children,Ya(l),v=Cs(v),h=h(v),l.flags|=1,Es(a,l,h,c),l.child;case 14:return Ef(a,l,l.type,l.pendingProps,c);case 15:return Af(a,l,l.type,l.pendingProps,c);case 19:return Pf(a,l,c);case 31:return Ty(a,l,c);case 22:return If(a,l,c,l.pendingProps);case 24:return Ya(l),h=Cs(cs),a===null?(v=Zc(),v===null&&(v=Vt,w=Xc(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=c),v=w),l.memoizedState={parent:h,cache:v},td(l),ga(l,cs,v)):((a.lanes&c)!==0&&(sd(a,l),El(l,null,null,c),Cl()),v=a.memoizedState,w=l.memoizedState,v.parent!==h?(v={parent:h,cache:h},l.memoizedState=v,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=v),ga(l,cs,h)):(h=w.cache,ga(l,cs,h),h!==v.cache&&Kc(l,[cs],c,!0))),Es(a,l,l.pendingProps.children,c),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function Zn(a){a.flags|=4}function Ld(a,l,c,h,v){if((l=(a.mode&32)!==0)&&(l=!1),l){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(mp())a.flags|=8192;else throw Qa=Gr,ed}else a.flags&=-16777217}function $f(a,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!sx(l))if(mp())a.flags|=8192;else throw Qa=Gr,ed}function no(a,l){l!==null&&(a.flags|=4),a.flags&16384&&(l=a.tag!==22?ks():536870912,a.lanes|=l,Oi|=l)}function Ol(a,l){if(!kt)switch(a.tailMode){case"hidden":l=a.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?a.tail=null:c.sibling=null;break;case"collapsed":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:h.sibling=null}}function Xt(a){var l=a.alternate!==null&&a.alternate.child===a.child,c=0,h=0;if(l)for(var v=a.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags&65011712,h|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)c|=v.lanes|v.childLanes,h|=v.subtreeFlags,h|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=h,a.childLanes=c,l}function Ey(a,l,c){var h=l.pendingProps;switch(Vc(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xt(l),null;case 1:return Xt(l),null;case 3:return c=l.stateNode,h=null,a!==null&&(h=a.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),Yn(cs),$e(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(a===null||a.child===null)&&(Ni(l)?Zn(l):a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Wc())),Xt(l),null;case 26:var v=l.type,w=l.memoizedState;return a===null?(Zn(l),w!==null?(Xt(l),$f(l,w)):(Xt(l),Ld(l,v,null,h,c))):w?w!==a.memoizedState?(Zn(l),Xt(l),$f(l,w)):(Xt(l),l.flags&=-16777217):(a=a.memoizedProps,a!==h&&Zn(l),Xt(l),Ld(l,v,a,h,c)),null;case 27:if(be(l),c=_e.current,v=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==h&&Zn(l);else{if(!h){if(l.stateNode===null)throw Error(i(166));return Xt(l),null}a=we.current,Ni(l)?vm(l):(a=Jp(v,h,c),l.stateNode=a,Zn(l))}return Xt(l),null;case 5:if(be(l),v=l.type,a!==null&&l.stateNode!=null)a.memoizedProps!==h&&Zn(l);else{if(!h){if(l.stateNode===null)throw Error(i(166));return Xt(l),null}if(w=we.current,Ni(l))vm(l);else{var C=vo(_e.current);switch(w){case 1:w=C.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=C.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=C.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=C.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?C.createElement("select",{is:h.is}):C.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?C.createElement(v,{is:h.is}):C.createElement(v)}}w[H]=l,w[ve]=h;e:for(C=l.child;C!==null;){if(C.tag===5||C.tag===6)w.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===l)break e;for(;C.sibling===null;){if(C.return===null||C.return===l)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}l.stateNode=w;e:switch(As(w,v,h),v){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Zn(l)}}return Xt(l),Ld(l,l.type,a===null?null:a.memoizedProps,l.pendingProps,c),null;case 6:if(a&&l.stateNode!=null)a.memoizedProps!==h&&Zn(l);else{if(typeof h!="string"&&l.stateNode===null)throw Error(i(166));if(a=_e.current,Ni(l)){if(a=l.stateNode,c=l.memoizedProps,h=null,v=Ts,v!==null)switch(v.tag){case 27:case 5:h=v.memoizedProps}a[H]=l,a=!!(a.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||Lp(a.nodeValue,c)),a||xa(l,!0)}else a=vo(a).createTextNode(h),a[H]=l,l.stateNode=a}return Xt(l),null;case 31:if(c=l.memoizedState,a===null||a.memoizedState!==null){if(h=Ni(l),c!==null){if(a===null){if(!h)throw Error(i(318));if(a=l.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(557));a[H]=l}else Wa(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Xt(l),a=!1}else c=Wc(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=c),a=!0;if(!a)return l.flags&256?(en(l),l):(en(l),null);if((l.flags&128)!==0)throw Error(i(558))}return Xt(l),null;case 13:if(h=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=Ni(l),h!==null&&h.dehydrated!==null){if(a===null){if(!v)throw Error(i(318));if(v=l.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[H]=l}else Wa(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Xt(l),v=!1}else v=Wc(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return l.flags&256?(en(l),l):(en(l),null)}return en(l),(l.flags&128)!==0?(l.lanes=c,l):(c=h!==null,a=a!==null&&a.memoizedState!==null,c&&(h=l.child,v=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(v=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==v&&(h.flags|=2048)),c!==a&&c&&(l.child.flags|=8192),no(l,l.updateQueue),Xt(l),null);case 4:return $e(),a===null&&iu(l.stateNode.containerInfo),Xt(l),null;case 10:return Yn(l.type),Xt(l),null;case 19:if(W(ls),h=l.memoizedState,h===null)return Xt(l),null;if(v=(l.flags&128)!==0,w=h.rendering,w===null)if(v)Ol(h,!1);else{if(as!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(w=qr(a),w!==null){for(l.flags|=128,Ol(h,!1),a=w.updateQueue,l.updateQueue=a,no(l,a),l.subtreeFlags=0,a=c,c=l.child;c!==null;)fm(c,a),c=c.sibling;return X(ls,ls.current&1|2),kt&&Wn(l,h.treeForkCount),l.child}a=a.sibling}h.tail!==null&&Ue()>oo&&(l.flags|=128,v=!0,Ol(h,!1),l.lanes=4194304)}else{if(!v)if(a=qr(w),a!==null){if(l.flags|=128,v=!0,a=a.updateQueue,l.updateQueue=a,no(l,a),Ol(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!kt)return Xt(l),null}else 2*Ue()-h.renderingStartTime>oo&&c!==536870912&&(l.flags|=128,v=!0,Ol(h,!1),l.lanes=4194304);h.isBackwards?(w.sibling=l.child,l.child=w):(a=h.last,a!==null?a.sibling=w:l.child=w,h.last=w)}return h.tail!==null?(a=h.tail,h.rendering=a,h.tail=a.sibling,h.renderingStartTime=Ue(),a.sibling=null,c=ls.current,X(ls,v?c&1|2:c&1),kt&&Wn(l,h.treeForkCount),a):(Xt(l),null);case 22:case 23:return en(l),ld(),h=l.memoizedState!==null,a!==null?a.memoizedState!==null!==h&&(l.flags|=8192):h&&(l.flags|=8192),h?(c&536870912)!==0&&(l.flags&128)===0&&(Xt(l),l.subtreeFlags&6&&(l.flags|=8192)):Xt(l),c=l.updateQueue,c!==null&&no(l,c.retryQueue),c=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==c&&(l.flags|=2048),a!==null&&W(Ka),null;case 24:return c=null,a!==null&&(c=a.memoizedState.cache),l.memoizedState.cache!==c&&(l.flags|=2048),Yn(cs),Xt(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function Ay(a,l){switch(Vc(l),l.tag){case 1:return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return Yn(cs),$e(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 26:case 27:case 5:return be(l),null;case 31:if(l.memoizedState!==null){if(en(l),l.alternate===null)throw Error(i(340));Wa()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 13:if(en(l),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(i(340));Wa()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return W(ls),null;case 4:return $e(),null;case 10:return Yn(l.type),null;case 22:case 23:return en(l),ld(),a!==null&&W(Ka),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 24:return Yn(cs),null;case 25:return null;default:return null}}function Ff(a,l){switch(Vc(l),l.tag){case 3:Yn(cs),$e();break;case 26:case 27:case 5:be(l);break;case 4:$e();break;case 31:l.memoizedState!==null&&en(l);break;case 13:en(l);break;case 19:W(ls);break;case 10:Yn(l.type);break;case 22:case 23:en(l),ld(),a!==null&&W(Ka);break;case 24:Yn(cs)}}function Ul(a,l){try{var c=l.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var v=h.next;c=v;do{if((c.tag&a)===a){h=void 0;var w=c.create,C=c.inst;h=w(),C.destroy=h}c=c.next}while(c!==v)}}catch(O){$t(l,l.return,O)}}function ja(a,l,c){try{var h=l.updateQueue,v=h!==null?h.lastEffect:null;if(v!==null){var w=v.next;h=w;do{if((h.tag&a)===a){var C=h.inst,O=C.destroy;if(O!==void 0){C.destroy=void 0,v=l;var V=c,me=O;try{me()}catch(ye){$t(v,V,ye)}}}h=h.next}while(h!==w)}}catch(ye){$t(l,l.return,ye)}}function Hf(a){var l=a.updateQueue;if(l!==null){var c=a.stateNode;try{Rm(l,c)}catch(h){$t(a,a.return,h)}}}function qf(a,l,c){c.props=ti(a.type,a.memoizedProps),c.state=a.memoizedState;try{c.componentWillUnmount()}catch(h){$t(a,l,h)}}function Ll(a,l){try{var c=a.ref;if(c!==null){switch(a.tag){case 26:case 27:case 5:var h=a.stateNode;break;case 30:h=a.stateNode;break;default:h=a.stateNode}typeof c=="function"?a.refCleanup=c(h):c.current=h}}catch(v){$t(a,l,v)}}function Pn(a,l){var c=a.ref,h=a.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(v){$t(a,l,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){$t(a,l,v)}else c.current=null}function Vf(a){var l=a.type,c=a.memoizedProps,h=a.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(v){$t(a,a.return,v)}}function Bd(a,l,c){try{var h=a.stateNode;Qy(h,a.type,c,l),h[ve]=l}catch(v){$t(a,a.return,v)}}function zf(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Aa(a.type)||a.tag===4}function Pd(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||zf(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Aa(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Gd(a,l,c){var h=a.tag;if(h===5||h===6)a=a.stateNode,l?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(a,l):(l=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,l.appendChild(a),c=c._reactRootContainer,c!=null||l.onclick!==null||(l.onclick=qn));else if(h!==4&&(h===27&&Aa(a.type)&&(c=a.stateNode,l=null),a=a.child,a!==null))for(Gd(a,l,c),a=a.sibling;a!==null;)Gd(a,l,c),a=a.sibling}function ao(a,l,c){var h=a.tag;if(h===5||h===6)a=a.stateNode,l?c.insertBefore(a,l):c.appendChild(a);else if(h!==4&&(h===27&&Aa(a.type)&&(c=a.stateNode),a=a.child,a!==null))for(ao(a,l,c),a=a.sibling;a!==null;)ao(a,l,c),a=a.sibling}function Wf(a){var l=a.stateNode,c=a.memoizedProps;try{for(var h=a.type,v=l.attributes;v.length;)l.removeAttributeNode(v[0]);As(l,h,c),l[H]=a,l[ve]=c}catch(w){$t(a,a.return,w)}}var ea=!1,hs=!1,$d=!1,Jf=typeof WeakSet=="function"?WeakSet:Set,ys=null;function Iy(a,l){if(a=a.containerInfo,ou=_o,a=im(a),Dc(a)){if("selectionStart"in a)var c={start:a.selectionStart,end:a.selectionEnd};else e:{c=(c=a.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var v=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var C=0,O=-1,V=-1,me=0,ye=0,ke=a,fe=null;t:for(;;){for(var ge;ke!==c||v!==0&&ke.nodeType!==3||(O=C+v),ke!==w||h!==0&&ke.nodeType!==3||(V=C+h),ke.nodeType===3&&(C+=ke.nodeValue.length),(ge=ke.firstChild)!==null;)fe=ke,ke=ge;for(;;){if(ke===a)break t;if(fe===c&&++me===v&&(O=C),fe===w&&++ye===h&&(V=C),(ge=ke.nextSibling)!==null)break;ke=fe,fe=ke.parentNode}ke=ge}c=O===-1||V===-1?null:{start:O,end:V}}else c=null}c=c||{start:0,end:0}}else c=null;for(cu={focusedElem:a,selectionRange:c},_o=!1,ys=l;ys!==null;)if(l=ys,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,ys=a;else for(;ys!==null;){switch(l=ys,w=l.alternate,a=l.flags,l.tag){case 0:if((a&4)!==0&&(a=l.updateQueue,a=a!==null?a.events:null,a!==null))for(c=0;c<a.length;c++)v=a[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&w!==null){a=void 0,c=l,v=w.memoizedProps,w=w.memoizedState,h=c.stateNode;try{var Ge=ti(c.type,v);a=h.getSnapshotBeforeUpdate(Ge,w),h.__reactInternalSnapshotBeforeUpdate=a}catch(Qe){$t(c,c.return,Qe)}}break;case 3:if((a&1024)!==0){if(a=l.stateNode.containerInfo,c=a.nodeType,c===9)hu(a);else if(c===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":hu(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=l.sibling,a!==null){a.return=l.return,ys=a;break}ys=l.return}}function Yf(a,l,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:sa(a,c),h&4&&Ul(5,c);break;case 1:if(sa(a,c),h&4)if(a=c.stateNode,l===null)try{a.componentDidMount()}catch(C){$t(c,c.return,C)}else{var v=ti(c.type,l.memoizedProps);l=l.memoizedState;try{a.componentDidUpdate(v,l,a.__reactInternalSnapshotBeforeUpdate)}catch(C){$t(c,c.return,C)}}h&64&&Hf(c),h&512&&Ll(c,c.return);break;case 3:if(sa(a,c),h&64&&(a=c.updateQueue,a!==null)){if(l=null,c.child!==null)switch(c.child.tag){case 27:case 5:l=c.child.stateNode;break;case 1:l=c.child.stateNode}try{Rm(a,l)}catch(C){$t(c,c.return,C)}}break;case 27:l===null&&h&4&&Wf(c);case 26:case 5:sa(a,c),l===null&&h&4&&Vf(c),h&512&&Ll(c,c.return);break;case 12:sa(a,c);break;case 31:sa(a,c),h&4&&Qf(a,c);break;case 13:sa(a,c),h&4&&Zf(a,c),h&64&&(a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(c=Gy.bind(null,c),lw(a,c))));break;case 22:if(h=c.memoizedState!==null||ea,!h){l=l!==null&&l.memoizedState!==null||hs,v=ea;var w=hs;ea=h,(hs=l)&&!w?na(a,c,(c.subtreeFlags&8772)!==0):sa(a,c),ea=v,hs=w}break;case 30:break;default:sa(a,c)}}function Kf(a){var l=a.alternate;l!==null&&(a.alternate=null,Kf(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&Xe(l)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Zt=null,Fs=!1;function ta(a,l,c){for(c=c.child;c!==null;)Xf(a,l,c),c=c.sibling}function Xf(a,l,c){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(_t,c)}catch{}switch(c.tag){case 26:hs||Pn(c,l),ta(a,l,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:hs||Pn(c,l);var h=Zt,v=Fs;Aa(c.type)&&(Zt=c.stateNode,Fs=!1),ta(a,l,c),zl(c.stateNode),Zt=h,Fs=v;break;case 5:hs||Pn(c,l);case 6:if(h=Zt,v=Fs,Zt=null,ta(a,l,c),Zt=h,Fs=v,Zt!==null)if(Fs)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(c.stateNode)}catch(w){$t(c,l,w)}else try{Zt.removeChild(c.stateNode)}catch(w){$t(c,l,w)}break;case 18:Zt!==null&&(Fs?(a=Zt,Hp(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,c.stateNode),Hi(a)):Hp(Zt,c.stateNode));break;case 4:h=Zt,v=Fs,Zt=c.stateNode.containerInfo,Fs=!0,ta(a,l,c),Zt=h,Fs=v;break;case 0:case 11:case 14:case 15:ja(2,c,l),hs||ja(4,c,l),ta(a,l,c);break;case 1:hs||(Pn(c,l),h=c.stateNode,typeof h.componentWillUnmount=="function"&&qf(c,l,h)),ta(a,l,c);break;case 21:ta(a,l,c);break;case 22:hs=(h=hs)||c.memoizedState!==null,ta(a,l,c),hs=h;break;default:ta(a,l,c)}}function Qf(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Hi(a)}catch(c){$t(l,l.return,c)}}}function Zf(a,l){if(l.memoizedState===null&&(a=l.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Hi(a)}catch(c){$t(l,l.return,c)}}function Ry(a){switch(a.tag){case 31:case 13:case 19:var l=a.stateNode;return l===null&&(l=a.stateNode=new Jf),l;case 22:return a=a.stateNode,l=a._retryCache,l===null&&(l=a._retryCache=new Jf),l;default:throw Error(i(435,a.tag))}}function io(a,l){var c=Ry(a);l.forEach(function(h){if(!c.has(h)){c.add(h);var v=$y.bind(null,a,h);h.then(v,v)}})}function Hs(a,l){var c=l.deletions;if(c!==null)for(var h=0;h<c.length;h++){var v=c[h],w=a,C=l,O=C;e:for(;O!==null;){switch(O.tag){case 27:if(Aa(O.type)){Zt=O.stateNode,Fs=!1;break e}break;case 5:Zt=O.stateNode,Fs=!1;break e;case 3:case 4:Zt=O.stateNode.containerInfo,Fs=!0;break e}O=O.return}if(Zt===null)throw Error(i(160));Xf(w,C,v),Zt=null,Fs=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)ep(l,a),l=l.sibling}var Sn=null;function ep(a,l){var c=a.alternate,h=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Hs(l,a),qs(a),h&4&&(ja(3,a,a.return),Ul(3,a),ja(5,a,a.return));break;case 1:Hs(l,a),qs(a),h&512&&(hs||c===null||Pn(c,c.return)),h&64&&ea&&(a=a.updateQueue,a!==null&&(h=a.callbacks,h!==null&&(c=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var v=Sn;if(Hs(l,a),qs(a),h&512&&(hs||c===null||Pn(c,c.return)),h&4){var w=c!==null?c.memoizedState:null;if(h=a.memoizedState,c===null)if(h===null)if(a.stateNode===null){e:{h=a.type,c=a.memoizedProps,v=v.ownerDocument||v;t:switch(h){case"title":w=v.getElementsByTagName("title")[0],(!w||w[Oe]||w[H]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(h),v.head.insertBefore(w,v.querySelector("head > title"))),As(w,h,c),w[H]=a,wt(w),h=w;break e;case"link":var C=ex("link","href",v).get(h+(c.href||""));if(C){for(var O=0;O<C.length;O++)if(w=C[O],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){C.splice(O,1);break t}}w=v.createElement(h),As(w,h,c),v.head.appendChild(w);break;case"meta":if(C=ex("meta","content",v).get(h+(c.content||""))){for(O=0;O<C.length;O++)if(w=C[O],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){C.splice(O,1);break t}}w=v.createElement(h),As(w,h,c),v.head.appendChild(w);break;default:throw Error(i(468,h))}w[H]=a,wt(w),h=w}a.stateNode=h}else tx(v,a.type,a.stateNode);else a.stateNode=Zp(v,h,a.memoizedProps);else w!==h?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,h===null?tx(v,a.type,a.stateNode):Zp(v,h,a.memoizedProps)):h===null&&a.stateNode!==null&&Bd(a,a.memoizedProps,c.memoizedProps)}break;case 27:Hs(l,a),qs(a),h&512&&(hs||c===null||Pn(c,c.return)),c!==null&&h&4&&Bd(a,a.memoizedProps,c.memoizedProps);break;case 5:if(Hs(l,a),qs(a),h&512&&(hs||c===null||Pn(c,c.return)),a.flags&32){v=a.stateNode;try{Lt(v,"")}catch(Ge){$t(a,a.return,Ge)}}h&4&&a.stateNode!=null&&(v=a.memoizedProps,Bd(a,v,c!==null?c.memoizedProps:v)),h&1024&&($d=!0);break;case 6:if(Hs(l,a),qs(a),h&4){if(a.stateNode===null)throw Error(i(162));h=a.memoizedProps,c=a.stateNode;try{c.nodeValue=h}catch(Ge){$t(a,a.return,Ge)}}break;case 3:if(No=null,v=Sn,Sn=yo(l.containerInfo),Hs(l,a),Sn=v,qs(a),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Hi(l.containerInfo)}catch(Ge){$t(a,a.return,Ge)}$d&&($d=!1,tp(a));break;case 4:h=Sn,Sn=yo(a.stateNode.containerInfo),Hs(l,a),qs(a),Sn=h;break;case 12:Hs(l,a),qs(a);break;case 31:Hs(l,a),qs(a),h&4&&(h=a.updateQueue,h!==null&&(a.updateQueue=null,io(a,h)));break;case 13:Hs(l,a),qs(a),a.child.flags&8192&&a.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(ro=Ue()),h&4&&(h=a.updateQueue,h!==null&&(a.updateQueue=null,io(a,h)));break;case 22:v=a.memoizedState!==null;var V=c!==null&&c.memoizedState!==null,me=ea,ye=hs;if(ea=me||v,hs=ye||V,Hs(l,a),hs=ye,ea=me,qs(a),h&8192)e:for(l=a.stateNode,l._visibility=v?l._visibility&-2:l._visibility|1,v&&(c===null||V||ea||hs||si(a)),c=null,l=a;;){if(l.tag===5||l.tag===26){if(c===null){V=c=l;try{if(w=V.stateNode,v)C=w.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{O=V.stateNode;var ke=V.memoizedProps.style,fe=ke!=null&&ke.hasOwnProperty("display")?ke.display:null;O.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(Ge){$t(V,V.return,Ge)}}}else if(l.tag===6){if(c===null){V=l;try{V.stateNode.nodeValue=v?"":V.memoizedProps}catch(Ge){$t(V,V.return,Ge)}}}else if(l.tag===18){if(c===null){V=l;try{var ge=V.stateNode;v?qp(ge,!0):qp(V.stateNode,!1)}catch(Ge){$t(V,V.return,Ge)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===a)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break e;for(;l.sibling===null;){if(l.return===null||l.return===a)break e;c===l&&(c=null),l=l.return}c===l&&(c=null),l.sibling.return=l.return,l=l.sibling}h&4&&(h=a.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,io(a,c))));break;case 19:Hs(l,a),qs(a),h&4&&(h=a.updateQueue,h!==null&&(a.updateQueue=null,io(a,h)));break;case 30:break;case 21:break;default:Hs(l,a),qs(a)}}function qs(a){var l=a.flags;if(l&2){try{for(var c,h=a.return;h!==null;){if(zf(h)){c=h;break}h=h.return}if(c==null)throw Error(i(160));switch(c.tag){case 27:var v=c.stateNode,w=Pd(a);ao(a,w,v);break;case 5:var C=c.stateNode;c.flags&32&&(Lt(C,""),c.flags&=-33);var O=Pd(a);ao(a,O,C);break;case 3:case 4:var V=c.stateNode.containerInfo,me=Pd(a);Gd(a,me,V);break;default:throw Error(i(161))}}catch(ye){$t(a,a.return,ye)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function tp(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var l=a;tp(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),a=a.sibling}}function sa(a,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Yf(a,l.alternate,l),l=l.sibling}function si(a){for(a=a.child;a!==null;){var l=a;switch(l.tag){case 0:case 11:case 14:case 15:ja(4,l,l.return),si(l);break;case 1:Pn(l,l.return);var c=l.stateNode;typeof c.componentWillUnmount=="function"&&qf(l,l.return,c),si(l);break;case 27:zl(l.stateNode);case 26:case 5:Pn(l,l.return),si(l);break;case 22:l.memoizedState===null&&si(l);break;case 30:si(l);break;default:si(l)}a=a.sibling}}function na(a,l,c){for(c=c&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var h=l.alternate,v=a,w=l,C=w.flags;switch(w.tag){case 0:case 11:case 15:na(v,w,c),Ul(4,w);break;case 1:if(na(v,w,c),h=w,v=h.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(me){$t(h,h.return,me)}if(h=w,v=h.updateQueue,v!==null){var O=h.stateNode;try{var V=v.shared.hiddenCallbacks;if(V!==null)for(v.shared.hiddenCallbacks=null,v=0;v<V.length;v++)Im(V[v],O)}catch(me){$t(h,h.return,me)}}c&&C&64&&Hf(w),Ll(w,w.return);break;case 27:Wf(w);case 26:case 5:na(v,w,c),c&&h===null&&C&4&&Vf(w),Ll(w,w.return);break;case 12:na(v,w,c);break;case 31:na(v,w,c),c&&C&4&&Qf(v,w);break;case 13:na(v,w,c),c&&C&4&&Zf(v,w);break;case 22:w.memoizedState===null&&na(v,w,c),Ll(w,w.return);break;case 30:break;default:na(v,w,c)}l=l.sibling}}function Fd(a,l){var c=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),a=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(a=l.memoizedState.cachePool.pool),a!==c&&(a!=null&&a.refCount++,c!=null&&jl(c))}function Hd(a,l){a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&jl(a))}function _n(a,l,c,h){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)sp(a,l,c,h),l=l.sibling}function sp(a,l,c,h){var v=l.flags;switch(l.tag){case 0:case 11:case 15:_n(a,l,c,h),v&2048&&Ul(9,l);break;case 1:_n(a,l,c,h);break;case 3:_n(a,l,c,h),v&2048&&(a=null,l.alternate!==null&&(a=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==a&&(l.refCount++,a!=null&&jl(a)));break;case 12:if(v&2048){_n(a,l,c,h),a=l.stateNode;try{var w=l.memoizedProps,C=w.id,O=w.onPostCommit;typeof O=="function"&&O(C,l.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(V){$t(l,l.return,V)}}else _n(a,l,c,h);break;case 31:_n(a,l,c,h);break;case 13:_n(a,l,c,h);break;case 23:break;case 22:w=l.stateNode,C=l.alternate,l.memoizedState!==null?w._visibility&2?_n(a,l,c,h):Bl(a,l):w._visibility&2?_n(a,l,c,h):(w._visibility|=2,Ri(a,l,c,h,(l.subtreeFlags&10256)!==0||!1)),v&2048&&Fd(C,l);break;case 24:_n(a,l,c,h),v&2048&&Hd(l.alternate,l);break;default:_n(a,l,c,h)}}function Ri(a,l,c,h,v){for(v=v&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var w=a,C=l,O=c,V=h,me=C.flags;switch(C.tag){case 0:case 11:case 15:Ri(w,C,O,V,v),Ul(8,C);break;case 23:break;case 22:var ye=C.stateNode;C.memoizedState!==null?ye._visibility&2?Ri(w,C,O,V,v):Bl(w,C):(ye._visibility|=2,Ri(w,C,O,V,v)),v&&me&2048&&Fd(C.alternate,C);break;case 24:Ri(w,C,O,V,v),v&&me&2048&&Hd(C.alternate,C);break;default:Ri(w,C,O,V,v)}l=l.sibling}}function Bl(a,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var c=a,h=l,v=h.flags;switch(h.tag){case 22:Bl(c,h),v&2048&&Fd(h.alternate,h);break;case 24:Bl(c,h),v&2048&&Hd(h.alternate,h);break;default:Bl(c,h)}l=l.sibling}}var Pl=8192;function Mi(a,l,c){if(a.subtreeFlags&Pl)for(a=a.child;a!==null;)np(a,l,c),a=a.sibling}function np(a,l,c){switch(a.tag){case 26:Mi(a,l,c),a.flags&Pl&&a.memoizedState!==null&&bw(c,Sn,a.memoizedState,a.memoizedProps);break;case 5:Mi(a,l,c);break;case 3:case 4:var h=Sn;Sn=yo(a.stateNode.containerInfo),Mi(a,l,c),Sn=h;break;case 22:a.memoizedState===null&&(h=a.alternate,h!==null&&h.memoizedState!==null?(h=Pl,Pl=16777216,Mi(a,l,c),Pl=h):Mi(a,l,c));break;default:Mi(a,l,c)}}function ap(a){var l=a.alternate;if(l!==null&&(a=l.child,a!==null)){l.child=null;do l=a.sibling,a.sibling=null,a=l;while(a!==null)}}function Gl(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var h=l[c];ys=h,lp(h,a)}ap(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ip(a),a=a.sibling}function ip(a){switch(a.tag){case 0:case 11:case 15:Gl(a),a.flags&2048&&ja(9,a,a.return);break;case 3:Gl(a);break;case 12:Gl(a);break;case 22:var l=a.stateNode;a.memoizedState!==null&&l._visibility&2&&(a.return===null||a.return.tag!==13)?(l._visibility&=-3,lo(a)):Gl(a);break;default:Gl(a)}}function lo(a){var l=a.deletions;if((a.flags&16)!==0){if(l!==null)for(var c=0;c<l.length;c++){var h=l[c];ys=h,lp(h,a)}ap(a)}for(a=a.child;a!==null;){switch(l=a,l.tag){case 0:case 11:case 15:ja(8,l,l.return),lo(l);break;case 22:c=l.stateNode,c._visibility&2&&(c._visibility&=-3,lo(l));break;default:lo(l)}a=a.sibling}}function lp(a,l){for(;ys!==null;){var c=ys;switch(c.tag){case 0:case 11:case 15:ja(8,c,l);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:jl(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,ys=h;else e:for(c=a;ys!==null;){h=ys;var v=h.sibling,w=h.return;if(Kf(h),h===c){ys=null;break e}if(v!==null){v.return=w,ys=v;break e}ys=w}}}var My={getCacheForType:function(a){var l=Cs(cs),c=l.data.get(a);return c===void 0&&(c=a(),l.data.set(a,c)),c},cacheSignal:function(){return Cs(cs).controller.signal}},Dy=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Vt=null,vt=null,Nt=0,Gt=0,tn=null,ka=!1,Di=!1,qd=!1,aa=0,as=0,Sa=0,ni=0,Vd=0,sn=0,Oi=0,$l=null,Vs=null,zd=!1,ro=0,rp=0,oo=1/0,co=null,_a=null,gs=0,Ta=null,Ui=null,ia=0,Wd=0,Jd=null,op=null,Fl=0,Yd=null;function nn(){return(Dt&2)!==0&&Nt!==0?Nt&-Nt:M.T!==null?tu():de()}function cp(){if(sn===0)if((Nt&536870912)===0||kt){var a=Pt;Pt<<=1,(Pt&3932160)===0&&(Pt=262144),sn=a}else sn=536870912;return a=Zs.current,a!==null&&(a.flags|=32),sn}function zs(a,l,c){(a===Vt&&(Gt===2||Gt===9)||a.cancelPendingCommit!==null)&&(Li(a,0),Ca(a,Nt,sn,!1)),Yt(a,c),((Dt&2)===0||a!==Vt)&&(a===Vt&&((Dt&2)===0&&(ni|=c),as===4&&Ca(a,Nt,sn,!1)),Gn(a))}function dp(a,l,c){if((Dt&6)!==0)throw Error(i(327));var h=!c&&(l&127)===0&&(l&a.expiredLanes)===0||ps(a,l),v=h?Ly(a,l):Xd(a,l,!0),w=h;do{if(v===0){Di&&!h&&Ca(a,l,0,!1);break}else{if(c=a.current.alternate,w&&!Oy(c)){v=Xd(a,l,!1),w=!1;continue}if(v===2){if(w=l,a.errorRecoveryDisabledLanes&w)var C=0;else C=a.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){l=C;e:{var O=a;v=$l;var V=O.current.memoizedState.isDehydrated;if(V&&(Li(O,C).flags|=256),C=Xd(O,C,!1),C!==2){if(qd&&!V){O.errorRecoveryDisabledLanes|=w,ni|=w,v=4;break e}w=Vs,Vs=v,w!==null&&(Vs===null?Vs=w:Vs.push.apply(Vs,w))}v=C}if(w=!1,v!==2)continue}}if(v===1){Li(a,0),Ca(a,l,0,!0);break}e:{switch(h=a,w=v,w){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:Ca(h,l,sn,!ka);break e;case 2:Vs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(v=ro+300-Ue(),10<v)){if(Ca(h,l,sn,!ka),js(h,0,!0)!==0)break e;ia=l,h.timeoutHandle=$p(up.bind(null,h,c,Vs,co,zd,l,sn,ni,Oi,ka,w,"Throttled",-0,0),v);break e}up(h,c,Vs,co,zd,l,sn,ni,Oi,ka,w,null,-0,0)}}break}while(!0);Gn(a)}function up(a,l,c,h,v,w,C,O,V,me,ye,ke,fe,ge){if(a.timeoutHandle=-1,ke=l.subtreeFlags,ke&8192||(ke&16785408)===16785408){ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:qn},np(l,w,ke);var Ge=(w&62914560)===w?ro-Ue():(w&4194048)===w?rp-Ue():0;if(Ge=vw(ke,Ge),Ge!==null){ia=w,a.cancelPendingCommit=Ge(vp.bind(null,a,l,w,c,h,v,C,O,V,ye,ke,null,fe,ge)),Ca(a,w,C,!me);return}}vp(a,l,w,c,h,v,C,O,V)}function Oy(a){for(var l=a;;){var c=l.tag;if((c===0||c===11||c===15)&&l.flags&16384&&(c=l.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var v=c[h],w=v.getSnapshot;v=v.value;try{if(!Xs(w(),v))return!1}catch{return!1}}if(c=l.child,l.subtreeFlags&16384&&c!==null)c.return=l,l=c;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ca(a,l,c,h){l&=~Vd,l&=~ni,a.suspendedLanes|=l,a.pingedLanes&=~l,h&&(a.warmLanes|=l),h=a.expirationTimes;for(var v=l;0<v;){var w=31-Ct(v),C=1<<w;h[w]=-1,v&=~C}c!==0&&on(a,c,l)}function uo(){return(Dt&6)===0?(Hl(0),!1):!0}function Kd(){if(vt!==null){if(Gt===0)var a=vt.return;else a=vt,Jn=Ja=null,hd(a),Ti=null,Sl=0,a=vt;for(;a!==null;)Ff(a.alternate,a),a=a.return;vt=null}}function Li(a,l){var c=a.timeoutHandle;c!==-1&&(a.timeoutHandle=-1,tw(c)),c=a.cancelPendingCommit,c!==null&&(a.cancelPendingCommit=null,c()),ia=0,Kd(),Vt=a,vt=c=zn(a.current,null),Nt=l,Gt=0,tn=null,ka=!1,Di=ps(a,l),qd=!1,Oi=sn=Vd=ni=Sa=as=0,Vs=$l=null,zd=!1,(l&8)!==0&&(l|=l&32);var h=a.entangledLanes;if(h!==0)for(a=a.entanglements,h&=l;0<h;){var v=31-Ct(h),w=1<<v;l|=a[v],h&=~w}return aa=l,Ir(),c}function hp(a,l){ut=null,M.H=Ml,l===_i||l===Pr?(l=Tm(),Gt=3):l===ed?(l=Tm(),Gt=4):Gt=l===Cd?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,tn=l,vt===null&&(as=1,Zr(a,hn(l,a.current)))}function mp(){var a=Zs.current;return a===null?!0:(Nt&4194048)===Nt?xn===null:(Nt&62914560)===Nt||(Nt&536870912)!==0?a===xn:!1}function fp(){var a=M.H;return M.H=Ml,a===null?Ml:a}function pp(){var a=M.A;return M.A=My,a}function ho(){as=4,ka||(Nt&4194048)!==Nt&&Zs.current!==null||(Di=!0),(Sa&134217727)===0&&(ni&134217727)===0||Vt===null||Ca(Vt,Nt,sn,!1)}function Xd(a,l,c){var h=Dt;Dt|=2;var v=fp(),w=pp();(Vt!==a||Nt!==l)&&(co=null,Li(a,l)),l=!1;var C=as;e:do try{if(Gt!==0&&vt!==null){var O=vt,V=tn;switch(Gt){case 8:Kd(),C=6;break e;case 3:case 2:case 9:case 6:Zs.current===null&&(l=!0);var me=Gt;if(Gt=0,tn=null,Bi(a,O,V,me),c&&Di){C=0;break e}break;default:me=Gt,Gt=0,tn=null,Bi(a,O,V,me)}}Uy(),C=as;break}catch(ye){hp(a,ye)}while(!0);return l&&a.shellSuspendCounter++,Jn=Ja=null,Dt=h,M.H=v,M.A=w,vt===null&&(Vt=null,Nt=0,Ir()),C}function Uy(){for(;vt!==null;)xp(vt)}function Ly(a,l){var c=Dt;Dt|=2;var h=fp(),v=pp();Vt!==a||Nt!==l?(co=null,oo=Ue()+500,Li(a,l)):Di=ps(a,l);e:do try{if(Gt!==0&&vt!==null){l=vt;var w=tn;t:switch(Gt){case 1:Gt=0,tn=null,Bi(a,l,w,1);break;case 2:case 9:if(Sm(w)){Gt=0,tn=null,gp(l);break}l=function(){Gt!==2&&Gt!==9||Vt!==a||(Gt=7),Gn(a)},w.then(l,l);break e;case 3:Gt=7;break e;case 4:Gt=5;break e;case 7:Sm(w)?(Gt=0,tn=null,gp(l)):(Gt=0,tn=null,Bi(a,l,w,7));break;case 5:var C=null;switch(vt.tag){case 26:C=vt.memoizedState;case 5:case 27:var O=vt;if(C?sx(C):O.stateNode.complete){Gt=0,tn=null;var V=O.sibling;if(V!==null)vt=V;else{var me=O.return;me!==null?(vt=me,mo(me)):vt=null}break t}}Gt=0,tn=null,Bi(a,l,w,5);break;case 6:Gt=0,tn=null,Bi(a,l,w,6);break;case 8:Kd(),as=6;break e;default:throw Error(i(462))}}By();break}catch(ye){hp(a,ye)}while(!0);return Jn=Ja=null,M.H=h,M.A=v,Dt=c,vt!==null?0:(Vt=null,Nt=0,Ir(),as)}function By(){for(;vt!==null&&!St();)xp(vt)}function xp(a){var l=Gf(a.alternate,a,aa);a.memoizedProps=a.pendingProps,l===null?mo(a):vt=l}function gp(a){var l=a,c=l.alternate;switch(l.tag){case 15:case 0:l=Df(c,l,l.pendingProps,l.type,void 0,Nt);break;case 11:l=Df(c,l,l.pendingProps,l.type.render,l.ref,Nt);break;case 5:hd(l);default:Ff(c,l),l=vt=fm(l,aa),l=Gf(c,l,aa)}a.memoizedProps=a.pendingProps,l===null?mo(a):vt=l}function Bi(a,l,c,h){Jn=Ja=null,hd(l),Ti=null,Sl=0;var v=l.return;try{if(_y(a,v,l,c,Nt)){as=1,Zr(a,hn(c,a.current)),vt=null;return}}catch(w){if(v!==null)throw vt=v,w;as=1,Zr(a,hn(c,a.current)),vt=null;return}l.flags&32768?(kt||h===1?a=!0:Di||(Nt&536870912)!==0?a=!1:(ka=a=!0,(h===2||h===9||h===3||h===6)&&(h=Zs.current,h!==null&&h.tag===13&&(h.flags|=16384))),bp(l,a)):mo(l)}function mo(a){var l=a;do{if((l.flags&32768)!==0){bp(l,ka);return}a=l.return;var c=Ey(l.alternate,l,aa);if(c!==null){vt=c;return}if(l=l.sibling,l!==null){vt=l;return}vt=l=a}while(l!==null);as===0&&(as=5)}function bp(a,l){do{var c=Ay(a.alternate,a);if(c!==null){c.flags&=32767,vt=c;return}if(c=a.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!l&&(a=a.sibling,a!==null)){vt=a;return}vt=a=c}while(a!==null);as=6,vt=null}function vp(a,l,c,h,v,w,C,O,V){a.cancelPendingCommit=null;do fo();while(gs!==0);if((Dt&6)!==0)throw Error(i(327));if(l!==null){if(l===a.current)throw Error(i(177));if(w=l.lanes|l.childLanes,w|=Pc,Ds(a,c,w,C,O,V),a===Vt&&(vt=Vt=null,Nt=0),Ui=l,Ta=a,ia=c,Wd=w,Jd=v,op=h,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,Fy(ot,function(){return kp(),null})):(a.callbackNode=null,a.callbackPriority=0),h=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||h){h=M.T,M.T=null,v=B.p,B.p=2,C=Dt,Dt|=4;try{Iy(a,l,c)}finally{Dt=C,B.p=v,M.T=h}}gs=1,yp(),wp(),Np()}}function yp(){if(gs===1){gs=0;var a=Ta,l=Ui,c=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||c){c=M.T,M.T=null;var h=B.p;B.p=2;var v=Dt;Dt|=4;try{ep(l,a);var w=cu,C=im(a.containerInfo),O=w.focusedElem,V=w.selectionRange;if(C!==O&&O&&O.ownerDocument&&am(O.ownerDocument.documentElement,O)){if(V!==null&&Dc(O)){var me=V.start,ye=V.end;if(ye===void 0&&(ye=me),"selectionStart"in O)O.selectionStart=me,O.selectionEnd=Math.min(ye,O.value.length);else{var ke=O.ownerDocument||document,fe=ke&&ke.defaultView||window;if(fe.getSelection){var ge=fe.getSelection(),Ge=O.textContent.length,Qe=Math.min(V.start,Ge),qt=V.end===void 0?Qe:Math.min(V.end,Ge);!ge.extend&&Qe>qt&&(C=qt,qt=Qe,Qe=C);var le=nm(O,Qe),K=nm(O,qt);if(le&&K&&(ge.rangeCount!==1||ge.anchorNode!==le.node||ge.anchorOffset!==le.offset||ge.focusNode!==K.node||ge.focusOffset!==K.offset)){var he=ke.createRange();he.setStart(le.node,le.offset),ge.removeAllRanges(),Qe>qt?(ge.addRange(he),ge.extend(K.node,K.offset)):(he.setEnd(K.node,K.offset),ge.addRange(he))}}}}for(ke=[],ge=O;ge=ge.parentNode;)ge.nodeType===1&&ke.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ke.length;O++){var je=ke[O];je.element.scrollLeft=je.left,je.element.scrollTop=je.top}}_o=!!ou,cu=ou=null}finally{Dt=v,B.p=h,M.T=c}}a.current=l,gs=2}}function wp(){if(gs===2){gs=0;var a=Ta,l=Ui,c=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||c){c=M.T,M.T=null;var h=B.p;B.p=2;var v=Dt;Dt|=4;try{Yf(a,l.alternate,l)}finally{Dt=v,B.p=h,M.T=c}}gs=3}}function Np(){if(gs===4||gs===3){gs=0,Ee();var a=Ta,l=Ui,c=ia,h=op;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?gs=5:(gs=0,Ui=Ta=null,jp(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(_a=null),Ss(c),l=l.stateNode,tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(_t,l,void 0,(l.current.flags&128)===128)}catch{}if(h!==null){l=M.T,v=B.p,B.p=2,M.T=null;try{for(var w=a.onRecoverableError,C=0;C<h.length;C++){var O=h[C];w(O.value,{componentStack:O.stack})}}finally{M.T=l,B.p=v}}(ia&3)!==0&&fo(),Gn(a),v=a.pendingLanes,(c&261930)!==0&&(v&42)!==0?a===Yd?Fl++:(Fl=0,Yd=a):Fl=0,Hl(0)}}function jp(a,l){(a.pooledCacheLanes&=l)===0&&(l=a.pooledCache,l!=null&&(a.pooledCache=null,jl(l)))}function fo(){return yp(),wp(),Np(),kp()}function kp(){if(gs!==5)return!1;var a=Ta,l=Wd;Wd=0;var c=Ss(ia),h=M.T,v=B.p;try{B.p=32>c?32:c,M.T=null,c=Jd,Jd=null;var w=Ta,C=ia;if(gs=0,Ui=Ta=null,ia=0,(Dt&6)!==0)throw Error(i(331));var O=Dt;if(Dt|=4,ip(w.current),sp(w,w.current,C,c),Dt=O,Hl(0,!1),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(_t,w)}catch{}return!0}finally{B.p=v,M.T=h,jp(a,l)}}function Sp(a,l,c){l=hn(c,l),l=Td(a.stateNode,l,2),a=ya(a,l,2),a!==null&&(Yt(a,2),Gn(a))}function $t(a,l,c){if(a.tag===3)Sp(a,a,c);else for(;l!==null;){if(l.tag===3){Sp(l,a,c);break}else if(l.tag===1){var h=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(_a===null||!_a.has(h))){a=hn(c,a),c=_f(2),h=ya(l,c,2),h!==null&&(Tf(c,h,l,a),Yt(h,2),Gn(h));break}}l=l.return}}function Qd(a,l,c){var h=a.pingCache;if(h===null){h=a.pingCache=new Dy;var v=new Set;h.set(l,v)}else v=h.get(l),v===void 0&&(v=new Set,h.set(l,v));v.has(c)||(qd=!0,v.add(c),a=Py.bind(null,a,l,c),l.then(a,a))}function Py(a,l,c){var h=a.pingCache;h!==null&&h.delete(l),a.pingedLanes|=a.suspendedLanes&c,a.warmLanes&=~c,Vt===a&&(Nt&c)===c&&(as===4||as===3&&(Nt&62914560)===Nt&&300>Ue()-ro?(Dt&2)===0&&Li(a,0):Vd|=c,Oi===Nt&&(Oi=0)),Gn(a)}function _p(a,l){l===0&&(l=ks()),a=Va(a,l),a!==null&&(Yt(a,l),Gn(a))}function Gy(a){var l=a.memoizedState,c=0;l!==null&&(c=l.retryLane),_p(a,c)}function $y(a,l){var c=0;switch(a.tag){case 31:case 13:var h=a.stateNode,v=a.memoizedState;v!==null&&(c=v.retryLane);break;case 19:h=a.stateNode;break;case 22:h=a.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(l),_p(a,c)}function Fy(a,l){return Ke(a,l)}var po=null,Pi=null,Zd=!1,xo=!1,eu=!1,Ea=0;function Gn(a){a!==Pi&&a.next===null&&(Pi===null?po=Pi=a:Pi=Pi.next=a),xo=!0,Zd||(Zd=!0,qy())}function Hl(a,l){if(!eu&&xo){eu=!0;do for(var c=!1,h=po;h!==null;){if(a!==0){var v=h.pendingLanes;if(v===0)var w=0;else{var C=h.suspendedLanes,O=h.pingedLanes;w=(1<<31-Ct(42|a)+1)-1,w&=v&~(C&~O),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,Ap(h,w))}else w=Nt,w=js(h,h===Vt?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||ps(h,w)||(c=!0,Ap(h,w));h=h.next}while(c);eu=!1}}function Hy(){Tp()}function Tp(){xo=Zd=!1;var a=0;Ea!==0&&ew()&&(a=Ea);for(var l=Ue(),c=null,h=po;h!==null;){var v=h.next,w=Cp(h,l);w===0?(h.next=null,c===null?po=v:c.next=v,v===null&&(Pi=c)):(c=h,(a!==0||(w&3)!==0)&&(xo=!0)),h=v}gs!==0&&gs!==5||Hl(a),Ea!==0&&(Ea=0)}function Cp(a,l){for(var c=a.suspendedLanes,h=a.pingedLanes,v=a.expirationTimes,w=a.pendingLanes&-62914561;0<w;){var C=31-Ct(w),O=1<<C,V=v[C];V===-1?((O&c)===0||(O&h)!==0)&&(v[C]=Ms(O,l)):V<=l&&(a.expiredLanes|=O),w&=~O}if(l=Vt,c=Nt,c=js(a,a===l?c:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),h=a.callbackNode,c===0||a===l&&(Gt===2||Gt===9)||a.cancelPendingCommit!==null)return h!==null&&h!==null&&Ce(h),a.callbackNode=null,a.callbackPriority=0;if((c&3)===0||ps(a,c)){if(l=c&-c,l===a.callbackPriority)return l;switch(h!==null&&Ce(h),Ss(c)){case 2:case 8:c=ft;break;case 32:c=ot;break;case 268435456:c=Ze;break;default:c=ot}return h=Ep.bind(null,a),c=Ke(c,h),a.callbackPriority=l,a.callbackNode=c,l}return h!==null&&h!==null&&Ce(h),a.callbackPriority=2,a.callbackNode=null,2}function Ep(a,l){if(gs!==0&&gs!==5)return a.callbackNode=null,a.callbackPriority=0,null;var c=a.callbackNode;if(fo()&&a.callbackNode!==c)return null;var h=Nt;return h=js(a,a===Vt?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),h===0?null:(dp(a,h,l),Cp(a,Ue()),a.callbackNode!=null&&a.callbackNode===c?Ep.bind(null,a):null)}function Ap(a,l){if(fo())return null;dp(a,l,!0)}function qy(){sw(function(){(Dt&6)!==0?Ke(mt,Hy):Tp()})}function tu(){if(Ea===0){var a=ki;a===0&&(a=Bt,Bt<<=1,(Bt&261888)===0&&(Bt=256)),Ea=a}return Ea}function Ip(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:jr(""+a)}function Rp(a,l){var c=l.ownerDocument.createElement("input");return c.name=l.name,c.value=l.value,a.id&&c.setAttribute("form",a.id),l.parentNode.insertBefore(c,l),a=new FormData(a),c.parentNode.removeChild(c),a}function Vy(a,l,c,h,v){if(l==="submit"&&c&&c.stateNode===v){var w=Ip((v[ve]||null).action),C=h.submitter;C&&(l=(l=C[ve]||null)?Ip(l.formAction):C.getAttribute("formAction"),l!==null&&(w=l,C=null));var O=new Tr("action","action",null,h,v);a.push({event:O,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Ea!==0){var V=C?Rp(v,C):new FormData(v);wd(c,{pending:!0,data:V,method:v.method,action:w},null,V)}}else typeof w=="function"&&(O.preventDefault(),V=C?Rp(v,C):new FormData(v),wd(c,{pending:!0,data:V,method:v.method,action:w},w,V))},currentTarget:v}]})}}for(var su=0;su<Bc.length;su++){var nu=Bc[su],zy=nu.toLowerCase(),Wy=nu[0].toUpperCase()+nu.slice(1);kn(zy,"on"+Wy)}kn(om,"onAnimationEnd"),kn(cm,"onAnimationIteration"),kn(dm,"onAnimationStart"),kn("dblclick","onDoubleClick"),kn("focusin","onFocus"),kn("focusout","onBlur"),kn(cy,"onTransitionRun"),kn(dy,"onTransitionStart"),kn(uy,"onTransitionCancel"),kn(um,"onTransitionEnd"),Os("onMouseEnter",["mouseout","mouseover"]),Os("onMouseLeave",["mouseout","mouseover"]),Os("onPointerEnter",["pointerout","pointerover"]),Os("onPointerLeave",["pointerout","pointerover"]),es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),es("onBeforeInput",["compositionend","keypress","textInput","paste"]),es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ql));function Mp(a,l){l=(l&4)!==0;for(var c=0;c<a.length;c++){var h=a[c],v=h.event;h=h.listeners;e:{var w=void 0;if(l)for(var C=h.length-1;0<=C;C--){var O=h[C],V=O.instance,me=O.currentTarget;if(O=O.listener,V!==w&&v.isPropagationStopped())break e;w=O,v.currentTarget=me;try{w(v)}catch(ye){Ar(ye)}v.currentTarget=null,w=V}else for(C=0;C<h.length;C++){if(O=h[C],V=O.instance,me=O.currentTarget,O=O.listener,V!==w&&v.isPropagationStopped())break e;w=O,v.currentTarget=me;try{w(v)}catch(ye){Ar(ye)}v.currentTarget=null,w=V}}}}function yt(a,l){var c=l[nt];c===void 0&&(c=l[nt]=new Set);var h=a+"__bubble";c.has(h)||(Dp(l,a,2,!1),c.add(h))}function au(a,l,c){var h=0;l&&(h|=4),Dp(c,a,h,l)}var go="_reactListening"+Math.random().toString(36).slice(2);function iu(a){if(!a[go]){a[go]=!0,Ws.forEach(function(c){c!=="selectionchange"&&(Jy.has(c)||au(c,!1,a),au(c,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[go]||(l[go]=!0,au("selectionchange",!1,l))}}function Dp(a,l,c,h){switch(cx(l)){case 2:var v=Nw;break;case 8:v=jw;break;default:v=yu}c=v.bind(null,l,c,a),v=void 0,!Sc||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),h?v!==void 0?a.addEventListener(l,c,{capture:!0,passive:v}):a.addEventListener(l,c,!0):v!==void 0?a.addEventListener(l,c,{passive:v}):a.addEventListener(l,c,!1)}function lu(a,l,c,h,v){var w=h;if((l&1)===0&&(l&2)===0&&h!==null)e:for(;;){if(h===null)return;var C=h.tag;if(C===3||C===4){var O=h.stateNode.containerInfo;if(O===v)break;if(C===4)for(C=h.return;C!==null;){var V=C.tag;if((V===3||V===4)&&C.stateNode.containerInfo===v)return;C=C.return}for(;O!==null;){if(C=lt(O),C===null)return;if(V=C.tag,V===5||V===6||V===26||V===27){h=w=C;continue e}O=O.parentNode}}h=h.return}Bh(function(){var me=w,ye=jc(c),ke=[];e:{var fe=hm.get(a);if(fe!==void 0){var ge=Tr,Ge=a;switch(a){case"keypress":if(Sr(c)===0)break e;case"keydown":case"keyup":ge=$v;break;case"focusin":Ge="focus",ge=Ec;break;case"focusout":Ge="blur",ge=Ec;break;case"beforeblur":case"afterblur":ge=Ec;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=$h;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=Ev;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=qv;break;case om:case cm:case dm:ge=Rv;break;case um:ge=zv;break;case"scroll":case"scrollend":ge=Tv;break;case"wheel":ge=Jv;break;case"copy":case"cut":case"paste":ge=Dv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Hh;break;case"toggle":case"beforetoggle":ge=Kv}var Qe=(l&4)!==0,qt=!Qe&&(a==="scroll"||a==="scrollend"),le=Qe?fe!==null?fe+"Capture":null:fe;Qe=[];for(var K=me,he;K!==null;){var je=K;if(he=je.stateNode,je=je.tag,je!==5&&je!==26&&je!==27||he===null||le===null||(je=hl(K,le),je!=null&&Qe.push(Vl(K,je,he))),qt)break;K=K.return}0<Qe.length&&(fe=new ge(fe,Ge,null,c,ye),ke.push({event:fe,listeners:Qe}))}}if((l&7)===0){e:{if(fe=a==="mouseover"||a==="pointerover",ge=a==="mouseout"||a==="pointerout",fe&&c!==Nc&&(Ge=c.relatedTarget||c.fromElement)&&(lt(Ge)||Ge[Se]))break e;if((ge||fe)&&(fe=ye.window===ye?ye:(fe=ye.ownerDocument)?fe.defaultView||fe.parentWindow:window,ge?(Ge=c.relatedTarget||c.toElement,ge=me,Ge=Ge?lt(Ge):null,Ge!==null&&(qt=o(Ge),Qe=Ge.tag,Ge!==qt||Qe!==5&&Qe!==27&&Qe!==6)&&(Ge=null)):(ge=null,Ge=me),ge!==Ge)){if(Qe=$h,je="onMouseLeave",le="onMouseEnter",K="mouse",(a==="pointerout"||a==="pointerover")&&(Qe=Hh,je="onPointerLeave",le="onPointerEnter",K="pointer"),qt=ge==null?fe:Mt(ge),he=Ge==null?fe:Mt(Ge),fe=new Qe(je,K+"leave",ge,c,ye),fe.target=qt,fe.relatedTarget=he,je=null,lt(ye)===me&&(Qe=new Qe(le,K+"enter",Ge,c,ye),Qe.target=he,Qe.relatedTarget=qt,je=Qe),qt=je,ge&&Ge)t:{for(Qe=Yy,le=ge,K=Ge,he=0,je=le;je;je=Qe(je))he++;je=0;for(var Je=K;Je;Je=Qe(Je))je++;for(;0<he-je;)le=Qe(le),he--;for(;0<je-he;)K=Qe(K),je--;for(;he--;){if(le===K||K!==null&&le===K.alternate){Qe=le;break t}le=Qe(le),K=Qe(K)}Qe=null}else Qe=null;ge!==null&&Op(ke,fe,ge,Qe,!1),Ge!==null&&qt!==null&&Op(ke,qt,Ge,Qe,!0)}}e:{if(fe=me?Mt(me):window,ge=fe.nodeName&&fe.nodeName.toLowerCase(),ge==="select"||ge==="input"&&fe.type==="file")var Et=Xh;else if(Yh(fe))if(Qh)Et=ly;else{Et=ay;var Fe=ny}else ge=fe.nodeName,!ge||ge.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?me&&$a(me.elementType)&&(Et=Xh):Et=iy;if(Et&&(Et=Et(a,me))){Kh(ke,Et,c,ye);break e}Fe&&Fe(a,fe,me),a==="focusout"&&me&&fe.type==="number"&&me.memoizedProps.value!=null&&os(fe,"number",fe.value)}switch(Fe=me?Mt(me):window,a){case"focusin":(Yh(Fe)||Fe.contentEditable==="true")&&(xi=Fe,Oc=me,yl=null);break;case"focusout":yl=Oc=xi=null;break;case"mousedown":Uc=!0;break;case"contextmenu":case"mouseup":case"dragend":Uc=!1,lm(ke,c,ye);break;case"selectionchange":if(oy)break;case"keydown":case"keyup":lm(ke,c,ye)}var ht;if(Ic)e:{switch(a){case"compositionstart":var jt="onCompositionStart";break e;case"compositionend":jt="onCompositionEnd";break e;case"compositionupdate":jt="onCompositionUpdate";break e}jt=void 0}else pi?Wh(a,c)&&(jt="onCompositionEnd"):a==="keydown"&&c.keyCode===229&&(jt="onCompositionStart");jt&&(qh&&c.locale!=="ko"&&(pi||jt!=="onCompositionStart"?jt==="onCompositionEnd"&&pi&&(ht=Ph()):(ma=ye,_c="value"in ma?ma.value:ma.textContent,pi=!0)),Fe=bo(me,jt),0<Fe.length&&(jt=new Fh(jt,a,null,c,ye),ke.push({event:jt,listeners:Fe}),ht?jt.data=ht:(ht=Jh(c),ht!==null&&(jt.data=ht)))),(ht=Qv?Zv(a,c):ey(a,c))&&(jt=bo(me,"onBeforeInput"),0<jt.length&&(Fe=new Fh("onBeforeInput","beforeinput",null,c,ye),ke.push({event:Fe,listeners:jt}),Fe.data=ht)),Vy(ke,a,me,c,ye)}Mp(ke,l)})}function Vl(a,l,c){return{instance:a,listener:l,currentTarget:c}}function bo(a,l){for(var c=l+"Capture",h=[];a!==null;){var v=a,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=hl(a,c),v!=null&&h.unshift(Vl(a,v,w)),v=hl(a,l),v!=null&&h.push(Vl(a,v,w))),a.tag===3)return h;a=a.return}return[]}function Yy(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Op(a,l,c,h,v){for(var w=l._reactName,C=[];c!==null&&c!==h;){var O=c,V=O.alternate,me=O.stateNode;if(O=O.tag,V!==null&&V===h)break;O!==5&&O!==26&&O!==27||me===null||(V=me,v?(me=hl(c,w),me!=null&&C.unshift(Vl(c,me,V))):v||(me=hl(c,w),me!=null&&C.push(Vl(c,me,V)))),c=c.return}C.length!==0&&a.push({event:l,listeners:C})}var Ky=/\r\n?/g,Xy=/\u0000|\uFFFD/g;function Up(a){return(typeof a=="string"?a:""+a).replace(Ky,`
`).replace(Xy,"")}function Lp(a,l){return l=Up(l),Up(a)===l}function Ht(a,l,c,h,v,w){switch(c){case"children":typeof h=="string"?l==="body"||l==="textarea"&&h===""||Lt(a,h):(typeof h=="number"||typeof h=="bigint")&&l!=="body"&&Lt(a,""+h);break;case"className":Ga(a,"class",h);break;case"tabIndex":Ga(a,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ga(a,c,h);break;case"style":Ks(a,h,w);break;case"data":if(l!=="object"){Ga(a,"data",h);break}case"src":case"href":if(h===""&&(l!=="a"||c!=="href")){a.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){a.removeAttribute(c);break}h=jr(""+h),a.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){a.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(l!=="input"&&Ht(a,l,"name",v.name,v,null),Ht(a,l,"formEncType",v.formEncType,v,null),Ht(a,l,"formMethod",v.formMethod,v,null),Ht(a,l,"formTarget",v.formTarget,v,null)):(Ht(a,l,"encType",v.encType,v,null),Ht(a,l,"method",v.method,v,null),Ht(a,l,"target",v.target,v,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){a.removeAttribute(c);break}h=jr(""+h),a.setAttribute(c,h);break;case"onClick":h!=null&&(a.onclick=qn);break;case"onScroll":h!=null&&yt("scroll",a);break;case"onScrollEnd":h!=null&&yt("scrollend",a);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=c}}break;case"multiple":a.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":a.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){a.removeAttribute("xlink:href");break}c=jr(""+h),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(c,""+h):a.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(c,""):a.removeAttribute(c);break;case"capture":case"download":h===!0?a.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?a.setAttribute(c,h):a.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?a.setAttribute(c,h):a.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?a.removeAttribute(c):a.setAttribute(c,h);break;case"popover":yt("beforetoggle",a),yt("toggle",a),Pa(a,"popover",h);break;case"xlinkActuate":dn(a,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":dn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":dn(a,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":dn(a,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":dn(a,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":dn(a,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":dn(a,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":dn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":dn(a,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Pa(a,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=hi.get(c)||c,Pa(a,c,h))}}function ru(a,l,c,h,v,w){switch(c){case"style":Ks(a,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(c=h.__html,c!=null){if(v.children!=null)throw Error(i(60));a.innerHTML=c}}break;case"children":typeof h=="string"?Lt(a,h):(typeof h=="number"||typeof h=="bigint")&&Lt(a,""+h);break;case"onScroll":h!=null&&yt("scroll",a);break;case"onScrollEnd":h!=null&&yt("scrollend",a);break;case"onClick":h!=null&&(a.onclick=qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wt.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),l=c.slice(2,v?c.length-7:void 0),w=a[ve]||null,w=w!=null?w[c]:null,typeof w=="function"&&a.removeEventListener(l,w,v),typeof h=="function")){typeof w!="function"&&w!==null&&(c in a?a[c]=null:a.hasAttribute(c)&&a.removeAttribute(c)),a.addEventListener(l,h,v);break e}c in a?a[c]=h:h===!0?a.setAttribute(c,""):Pa(a,c,h)}}}function As(a,l,c){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",a),yt("load",a);var h=!1,v=!1,w;for(w in c)if(c.hasOwnProperty(w)){var C=c[w];if(C!=null)switch(w){case"src":h=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Ht(a,l,w,C,c,null)}}v&&Ht(a,l,"srcSet",c.srcSet,c,null),h&&Ht(a,l,"src",c.src,c,null);return;case"input":yt("invalid",a);var O=w=C=v=null,V=null,me=null;for(h in c)if(c.hasOwnProperty(h)){var ye=c[h];if(ye!=null)switch(h){case"name":v=ye;break;case"type":C=ye;break;case"checked":V=ye;break;case"defaultChecked":me=ye;break;case"value":w=ye;break;case"defaultValue":O=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(i(137,l));break;default:Ht(a,l,h,ye,c,null)}}ss(a,w,O,V,me,C,v,!1);return;case"select":yt("invalid",a),h=C=w=null;for(v in c)if(c.hasOwnProperty(v)&&(O=c[v],O!=null))switch(v){case"value":w=O;break;case"defaultValue":C=O;break;case"multiple":h=O;default:Ht(a,l,v,O,c,null)}l=w,c=C,a.multiple=!!h,l!=null?Js(a,!!h,l,!1):c!=null&&Js(a,!!h,c,!0);return;case"textarea":yt("invalid",a),w=v=h=null;for(C in c)if(c.hasOwnProperty(C)&&(O=c[C],O!=null))switch(C){case"value":h=O;break;case"defaultValue":v=O;break;case"children":w=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:Ht(a,l,C,O,c,null)}jn(a,h,v,w);return;case"option":for(V in c)if(c.hasOwnProperty(V)&&(h=c[V],h!=null))switch(V){case"selected":a.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ht(a,l,V,h,c,null)}return;case"dialog":yt("beforetoggle",a),yt("toggle",a),yt("cancel",a),yt("close",a);break;case"iframe":case"object":yt("load",a);break;case"video":case"audio":for(h=0;h<ql.length;h++)yt(ql[h],a);break;case"image":yt("error",a),yt("load",a);break;case"details":yt("toggle",a);break;case"embed":case"source":case"link":yt("error",a),yt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in c)if(c.hasOwnProperty(me)&&(h=c[me],h!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Ht(a,l,me,h,c,null)}return;default:if($a(l)){for(ye in c)c.hasOwnProperty(ye)&&(h=c[ye],h!==void 0&&ru(a,l,ye,h,c,void 0));return}}for(O in c)c.hasOwnProperty(O)&&(h=c[O],h!=null&&Ht(a,l,O,h,c,null))}function Qy(a,l,c,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,C=null,O=null,V=null,me=null,ye=null;for(ge in c){var ke=c[ge];if(c.hasOwnProperty(ge)&&ke!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":V=ke;default:h.hasOwnProperty(ge)||Ht(a,l,ge,null,h,ke)}}for(var fe in h){var ge=h[fe];if(ke=c[fe],h.hasOwnProperty(fe)&&(ge!=null||ke!=null))switch(fe){case"type":w=ge;break;case"name":v=ge;break;case"checked":me=ge;break;case"defaultChecked":ye=ge;break;case"value":C=ge;break;case"defaultValue":O=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(i(137,l));break;default:ge!==ke&&Ht(a,l,fe,ge,h,ke)}}ts(a,C,O,V,me,ye,w,v);return;case"select":ge=C=O=fe=null;for(w in c)if(V=c[w],c.hasOwnProperty(w)&&V!=null)switch(w){case"value":break;case"multiple":ge=V;default:h.hasOwnProperty(w)||Ht(a,l,w,null,h,V)}for(v in h)if(w=h[v],V=c[v],h.hasOwnProperty(v)&&(w!=null||V!=null))switch(v){case"value":fe=w;break;case"defaultValue":O=w;break;case"multiple":C=w;default:w!==V&&Ht(a,l,v,w,h,V)}l=O,c=C,h=ge,fe!=null?Js(a,!!c,fe,!1):!!h!=!!c&&(l!=null?Js(a,!!c,l,!0):Js(a,!!c,c?[]:"",!1));return;case"textarea":ge=fe=null;for(O in c)if(v=c[O],c.hasOwnProperty(O)&&v!=null&&!h.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:Ht(a,l,O,null,h,v)}for(C in h)if(v=h[C],w=c[C],h.hasOwnProperty(C)&&(v!=null||w!=null))switch(C){case"value":fe=v;break;case"defaultValue":ge=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==w&&Ht(a,l,C,v,h,w)}Ut(a,fe,ge);return;case"option":for(var Ge in c)if(fe=c[Ge],c.hasOwnProperty(Ge)&&fe!=null&&!h.hasOwnProperty(Ge))switch(Ge){case"selected":a.selected=!1;break;default:Ht(a,l,Ge,null,h,fe)}for(V in h)if(fe=h[V],ge=c[V],h.hasOwnProperty(V)&&fe!==ge&&(fe!=null||ge!=null))switch(V){case"selected":a.selected=fe&&typeof fe!="function"&&typeof fe!="symbol";break;default:Ht(a,l,V,fe,h,ge)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qe in c)fe=c[Qe],c.hasOwnProperty(Qe)&&fe!=null&&!h.hasOwnProperty(Qe)&&Ht(a,l,Qe,null,h,fe);for(me in h)if(fe=h[me],ge=c[me],h.hasOwnProperty(me)&&fe!==ge&&(fe!=null||ge!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(i(137,l));break;default:Ht(a,l,me,fe,h,ge)}return;default:if($a(l)){for(var qt in c)fe=c[qt],c.hasOwnProperty(qt)&&fe!==void 0&&!h.hasOwnProperty(qt)&&ru(a,l,qt,void 0,h,fe);for(ye in h)fe=h[ye],ge=c[ye],!h.hasOwnProperty(ye)||fe===ge||fe===void 0&&ge===void 0||ru(a,l,ye,fe,h,ge);return}}for(var le in c)fe=c[le],c.hasOwnProperty(le)&&fe!=null&&!h.hasOwnProperty(le)&&Ht(a,l,le,null,h,fe);for(ke in h)fe=h[ke],ge=c[ke],!h.hasOwnProperty(ke)||fe===ge||fe==null&&ge==null||Ht(a,l,ke,fe,h,ge)}function Bp(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Zy(){if(typeof performance.getEntriesByType=="function"){for(var a=0,l=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var v=c[h],w=v.transferSize,C=v.initiatorType,O=v.duration;if(w&&O&&Bp(C)){for(C=0,O=v.responseEnd,h+=1;h<c.length;h++){var V=c[h],me=V.startTime;if(me>O)break;var ye=V.transferSize,ke=V.initiatorType;ye&&Bp(ke)&&(V=V.responseEnd,C+=ye*(V<O?1:(O-me)/(V-me)))}if(--h,l+=8*(w+C)/(v.duration/1e3),a++,10<a)break}}if(0<a)return l/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var ou=null,cu=null;function vo(a){return a.nodeType===9?a:a.ownerDocument}function Pp(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Gp(a,l){if(a===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&l==="foreignObject"?0:a}function du(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var uu=null;function ew(){var a=window.event;return a&&a.type==="popstate"?a===uu?!1:(uu=a,!0):(uu=null,!1)}var $p=typeof setTimeout=="function"?setTimeout:void 0,tw=typeof clearTimeout=="function"?clearTimeout:void 0,Fp=typeof Promise=="function"?Promise:void 0,sw=typeof queueMicrotask=="function"?queueMicrotask:typeof Fp<"u"?function(a){return Fp.resolve(null).then(a).catch(nw)}:$p;function nw(a){setTimeout(function(){throw a})}function Aa(a){return a==="head"}function Hp(a,l){var c=l,h=0;do{var v=c.nextSibling;if(a.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(h===0){a.removeChild(v),Hi(l);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")zl(a.ownerDocument.documentElement);else if(c==="head"){c=a.ownerDocument.head,zl(c);for(var w=c.firstChild;w;){var C=w.nextSibling,O=w.nodeName;w[Oe]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=C}}else c==="body"&&zl(a.ownerDocument.body);c=v}while(c);Hi(l)}function qp(a,l){var c=a;a=0;do{var h=c.nextSibling;if(c.nodeType===1?l?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(l?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(a===0)break;a--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||a++;c=h}while(c)}function hu(a){var l=a.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var c=l;switch(l=l.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":hu(c),Xe(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}a.removeChild(c)}}function aw(a,l,c,h){for(;a.nodeType===1;){var v=c;if(a.nodeName.toLowerCase()!==l.toLowerCase()){if(!h&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(h){if(!a[Oe])switch(l){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(w=a.getAttribute("rel"),w==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(w!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(w=a.getAttribute("src"),(w!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(l==="input"&&a.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===w)return a}else return a;if(a=gn(a.nextSibling),a===null)break}return null}function iw(a,l,c){if(l==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!c||(a=gn(a.nextSibling),a===null))return null;return a}function Vp(a,l){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=gn(a.nextSibling),a===null))return null;return a}function mu(a){return a.data==="$?"||a.data==="$~"}function fu(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function lw(a,l){var c=a.ownerDocument;if(a.data==="$~")a._reactRetry=l;else if(a.data!=="$?"||c.readyState!=="loading")l();else{var h=function(){l(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),a._reactRetry=h}}function gn(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return a}var pu=null;function zp(a){a=a.nextSibling;for(var l=0;a;){if(a.nodeType===8){var c=a.data;if(c==="/$"||c==="/&"){if(l===0)return gn(a.nextSibling);l--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||l++}a=a.nextSibling}return null}function Wp(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var c=a.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(l===0)return a;l--}else c!=="/$"&&c!=="/&"||l++}a=a.previousSibling}return null}function Jp(a,l,c){switch(l=vo(c),a){case"html":if(a=l.documentElement,!a)throw Error(i(452));return a;case"head":if(a=l.head,!a)throw Error(i(453));return a;case"body":if(a=l.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function zl(a){for(var l=a.attributes;l.length;)a.removeAttributeNode(l[0]);Xe(a)}var bn=new Map,Yp=new Set;function yo(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var la=B.d;B.d={f:rw,r:ow,D:cw,C:dw,L:uw,m:hw,X:fw,S:mw,M:pw};function rw(){var a=la.f(),l=uo();return a||l}function ow(a){var l=zt(a);l!==null&&l.tag===5&&l.type==="form"?hf(l):la.r(a)}var Gi=typeof document>"u"?null:document;function Kp(a,l,c){var h=Gi;if(h&&typeof l=="string"&&l){var v=Qt(l);v='link[rel="'+a+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),Yp.has(v)||(Yp.add(v),a={rel:a,crossOrigin:c,href:l},h.querySelector(v)===null&&(l=h.createElement("link"),As(l,"link",a),wt(l),h.head.appendChild(l)))}}function cw(a){la.D(a),Kp("dns-prefetch",a,null)}function dw(a,l){la.C(a,l),Kp("preconnect",a,l)}function uw(a,l,c){la.L(a,l,c);var h=Gi;if(h&&a&&l){var v='link[rel="preload"][as="'+Qt(l)+'"]';l==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+Qt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+Qt(c.imageSizes)+'"]')):v+='[href="'+Qt(a)+'"]';var w=v;switch(l){case"style":w=$i(a);break;case"script":w=Fi(a)}bn.has(w)||(a=b({rel:"preload",href:l==="image"&&c&&c.imageSrcSet?void 0:a,as:l},c),bn.set(w,a),h.querySelector(v)!==null||l==="style"&&h.querySelector(Wl(w))||l==="script"&&h.querySelector(Jl(w))||(l=h.createElement("link"),As(l,"link",a),wt(l),h.head.appendChild(l)))}}function hw(a,l){la.m(a,l);var c=Gi;if(c&&a){var h=l&&typeof l.as=="string"?l.as:"script",v='link[rel="modulepreload"][as="'+Qt(h)+'"][href="'+Qt(a)+'"]',w=v;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Fi(a)}if(!bn.has(w)&&(a=b({rel:"modulepreload",href:a},l),bn.set(w,a),c.querySelector(v)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Jl(w)))return}h=c.createElement("link"),As(h,"link",a),wt(h),c.head.appendChild(h)}}}function mw(a,l,c){la.S(a,l,c);var h=Gi;if(h&&a){var v=ct(h).hoistableStyles,w=$i(a);l=l||"default";var C=v.get(w);if(!C){var O={loading:0,preload:null};if(C=h.querySelector(Wl(w)))O.loading=5;else{a=b({rel:"stylesheet",href:a,"data-precedence":l},c),(c=bn.get(w))&&xu(a,c);var V=C=h.createElement("link");wt(V),As(V,"link",a),V._p=new Promise(function(me,ye){V.onload=me,V.onerror=ye}),V.addEventListener("load",function(){O.loading|=1}),V.addEventListener("error",function(){O.loading|=2}),O.loading|=4,wo(C,l,h)}C={type:"stylesheet",instance:C,count:1,state:O},v.set(w,C)}}}function fw(a,l){la.X(a,l);var c=Gi;if(c&&a){var h=ct(c).hoistableScripts,v=Fi(a),w=h.get(v);w||(w=c.querySelector(Jl(v)),w||(a=b({src:a,async:!0},l),(l=bn.get(v))&&gu(a,l),w=c.createElement("script"),wt(w),As(w,"link",a),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(v,w))}}function pw(a,l){la.M(a,l);var c=Gi;if(c&&a){var h=ct(c).hoistableScripts,v=Fi(a),w=h.get(v);w||(w=c.querySelector(Jl(v)),w||(a=b({src:a,async:!0,type:"module"},l),(l=bn.get(v))&&gu(a,l),w=c.createElement("script"),wt(w),As(w,"link",a),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(v,w))}}function Xp(a,l,c,h){var v=(v=_e.current)?yo(v):null;if(!v)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(l=$i(c.href),c=ct(v).hoistableStyles,h=c.get(l),h||(h={type:"style",instance:null,count:0,state:null},c.set(l,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){a=$i(c.href);var w=ct(v).hoistableStyles,C=w.get(a);if(C||(v=v.ownerDocument||v,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(a,C),(w=v.querySelector(Wl(a)))&&!w._p&&(C.instance=w,C.state.loading=5),bn.has(a)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},bn.set(a,c),w||xw(v,a,c,C.state))),l&&h===null)throw Error(i(528,""));return C}if(l&&h!==null)throw Error(i(529,""));return null;case"script":return l=c.async,c=c.src,typeof c=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Fi(c),c=ct(v).hoistableScripts,h=c.get(l),h||(h={type:"script",instance:null,count:0,state:null},c.set(l,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function $i(a){return'href="'+Qt(a)+'"'}function Wl(a){return'link[rel="stylesheet"]['+a+"]"}function Qp(a){return b({},a,{"data-precedence":a.precedence,precedence:null})}function xw(a,l,c,h){a.querySelector('link[rel="preload"][as="style"]['+l+"]")?h.loading=1:(l=a.createElement("link"),h.preload=l,l.addEventListener("load",function(){return h.loading|=1}),l.addEventListener("error",function(){return h.loading|=2}),As(l,"link",c),wt(l),a.head.appendChild(l))}function Fi(a){return'[src="'+Qt(a)+'"]'}function Jl(a){return"script[async]"+a}function Zp(a,l,c){if(l.count++,l.instance===null)switch(l.type){case"style":var h=a.querySelector('style[data-href~="'+Qt(c.href)+'"]');if(h)return l.instance=h,wt(h),h;var v=b({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(a.ownerDocument||a).createElement("style"),wt(h),As(h,"style",v),wo(h,c.precedence,a),l.instance=h;case"stylesheet":v=$i(c.href);var w=a.querySelector(Wl(v));if(w)return l.state.loading|=4,l.instance=w,wt(w),w;h=Qp(c),(v=bn.get(v))&&xu(h,v),w=(a.ownerDocument||a).createElement("link"),wt(w);var C=w;return C._p=new Promise(function(O,V){C.onload=O,C.onerror=V}),As(w,"link",h),l.state.loading|=4,wo(w,c.precedence,a),l.instance=w;case"script":return w=Fi(c.src),(v=a.querySelector(Jl(w)))?(l.instance=v,wt(v),v):(h=c,(v=bn.get(w))&&(h=b({},c),gu(h,v)),a=a.ownerDocument||a,v=a.createElement("script"),wt(v),As(v,"link",h),a.head.appendChild(v),l.instance=v);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(h=l.instance,l.state.loading|=4,wo(h,c.precedence,a));return l.instance}function wo(a,l,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=h.length?h[h.length-1]:null,w=v,C=0;C<h.length;C++){var O=h[C];if(O.dataset.precedence===l)w=O;else if(w!==v)break}w?w.parentNode.insertBefore(a,w.nextSibling):(l=c.nodeType===9?c.head:c,l.insertBefore(a,l.firstChild))}function xu(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.title==null&&(a.title=l.title)}function gu(a,l){a.crossOrigin==null&&(a.crossOrigin=l.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=l.referrerPolicy),a.integrity==null&&(a.integrity=l.integrity)}var No=null;function ex(a,l,c){if(No===null){var h=new Map,v=No=new Map;v.set(c,h)}else v=No,h=v.get(c),h||(h=new Map,v.set(c,h));if(h.has(a))return h;for(h.set(a,null),c=c.getElementsByTagName(a),v=0;v<c.length;v++){var w=c[v];if(!(w[Oe]||w[H]||a==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var C=w.getAttribute(l)||"";C=a+C;var O=h.get(C);O?O.push(w):h.set(C,[w])}}return h}function tx(a,l,c){a=a.ownerDocument||a,a.head.insertBefore(c,l==="title"?a.querySelector("head > title"):null)}function gw(a,l,c){if(c===1||l.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return a=l.disabled,typeof l.precedence=="string"&&a==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function sx(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function bw(a,l,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=$i(h.href),w=l.querySelector(Wl(v));if(w){l=w._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(a.count++,a=jo.bind(a),l.then(a,a)),c.state.loading|=4,c.instance=w,wt(w);return}w=l.ownerDocument||l,h=Qp(h),(v=bn.get(v))&&xu(h,v),w=w.createElement("link"),wt(w);var C=w;C._p=new Promise(function(O,V){C.onload=O,C.onerror=V}),As(w,"link",h),c.instance=w}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(c,l),(l=c.state.preload)&&(c.state.loading&3)===0&&(a.count++,c=jo.bind(a),l.addEventListener("load",c),l.addEventListener("error",c))}}var bu=0;function vw(a,l){return a.stylesheets&&a.count===0&&So(a,a.stylesheets),0<a.count||0<a.imgCount?function(c){var h=setTimeout(function(){if(a.stylesheets&&So(a,a.stylesheets),a.unsuspend){var w=a.unsuspend;a.unsuspend=null,w()}},6e4+l);0<a.imgBytes&&bu===0&&(bu=62500*Zy());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&So(a,a.stylesheets),a.unsuspend)){var w=a.unsuspend;a.unsuspend=null,w()}},(a.imgBytes>bu?50:800)+l);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(h),clearTimeout(v)}}:null}function jo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)So(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var ko=null;function So(a,l){a.stylesheets=null,a.unsuspend!==null&&(a.count++,ko=new Map,l.forEach(yw,a),ko=null,jo.call(a))}function yw(a,l){if(!(l.state.loading&4)){var c=ko.get(a);if(c)var h=c.get(null);else{c=new Map,ko.set(a,c);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var C=v[w];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(c.set(C.dataset.precedence,C),h=C)}h&&c.set(null,h)}v=l.instance,C=v.getAttribute("data-precedence"),w=c.get(C)||h,w===h&&c.set(null,v),c.set(C,v),this.count++,h=jo.bind(this),v.addEventListener("load",h),v.addEventListener("error",h),w?w.parentNode.insertBefore(v,w.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),l.state.loading|=4}}var Yl={$$typeof:I,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function ww(a,l,c,h,v,w,C,O,V){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=it(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=it(0),this.hiddenUpdates=it(null),this.identifierPrefix=h,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function nx(a,l,c,h,v,w,C,O,V,me,ye,ke){return a=new ww(a,l,c,C,V,me,ye,ke,O),l=1,w===!0&&(l|=24),w=Qs(3,null,null,l),a.current=w,w.stateNode=a,l=Xc(),l.refCount++,a.pooledCache=l,l.refCount++,w.memoizedState={element:h,isDehydrated:c,cache:l},td(w),a}function ax(a){return a?(a=vi,a):vi}function ix(a,l,c,h,v,w){v=ax(v),h.context===null?h.context=v:h.pendingContext=v,h=va(l),h.payload={element:c},w=w===void 0?null:w,w!==null&&(h.callback=w),c=ya(a,h,l),c!==null&&(zs(c,a,l),Tl(c,a,l))}function lx(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var c=a.retryLane;a.retryLane=c!==0&&c<l?c:l}}function vu(a,l){lx(a,l),(a=a.alternate)&&lx(a,l)}function rx(a){if(a.tag===13||a.tag===31){var l=Va(a,67108864);l!==null&&zs(l,a,67108864),vu(a,67108864)}}function ox(a){if(a.tag===13||a.tag===31){var l=nn();l=vs(l);var c=Va(a,l);c!==null&&zs(c,a,l),vu(a,l)}}var _o=!0;function Nw(a,l,c,h){var v=M.T;M.T=null;var w=B.p;try{B.p=2,yu(a,l,c,h)}finally{B.p=w,M.T=v}}function jw(a,l,c,h){var v=M.T;M.T=null;var w=B.p;try{B.p=8,yu(a,l,c,h)}finally{B.p=w,M.T=v}}function yu(a,l,c,h){if(_o){var v=wu(h);if(v===null)lu(a,l,h,To,c),dx(a,h);else if(Sw(v,a,l,c,h))h.stopPropagation();else if(dx(a,h),l&4&&-1<kw.indexOf(a)){for(;v!==null;){var w=zt(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var C=Ot(w.pendingLanes);if(C!==0){var O=w;for(O.pendingLanes|=2,O.entangledLanes|=2;C;){var V=1<<31-Ct(C);O.entanglements[1]|=V,C&=~V}Gn(w),(Dt&6)===0&&(oo=Ue()+500,Hl(0))}}break;case 31:case 13:O=Va(w,2),O!==null&&zs(O,w,2),uo(),vu(w,2)}if(w=wu(h),w===null&&lu(a,l,h,To,c),w===v)break;v=w}v!==null&&h.stopPropagation()}else lu(a,l,h,null,c)}}function wu(a){return a=jc(a),Nu(a)}var To=null;function Nu(a){if(To=null,a=lt(a),a!==null){var l=o(a);if(l===null)a=null;else{var c=l.tag;if(c===13){if(a=d(l),a!==null)return a;a=null}else if(c===31){if(a=u(l),a!==null)return a;a=null}else if(c===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null)}}return To=a,null}function cx(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qe()){case mt:return 2;case ft:return 8;case ot:case pt:return 32;case Ze:return 268435456;default:return 32}default:return 32}}var ju=!1,Ia=null,Ra=null,Ma=null,Kl=new Map,Xl=new Map,Da=[],kw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dx(a,l){switch(a){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Ra=null;break;case"mouseover":case"mouseout":Ma=null;break;case"pointerover":case"pointerout":Kl.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(l.pointerId)}}function Ql(a,l,c,h,v,w){return a===null||a.nativeEvent!==w?(a={blockedOn:l,domEventName:c,eventSystemFlags:h,nativeEvent:w,targetContainers:[v]},l!==null&&(l=zt(l),l!==null&&rx(l)),a):(a.eventSystemFlags|=h,l=a.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),a)}function Sw(a,l,c,h,v){switch(l){case"focusin":return Ia=Ql(Ia,a,l,c,h,v),!0;case"dragenter":return Ra=Ql(Ra,a,l,c,h,v),!0;case"mouseover":return Ma=Ql(Ma,a,l,c,h,v),!0;case"pointerover":var w=v.pointerId;return Kl.set(w,Ql(Kl.get(w)||null,a,l,c,h,v)),!0;case"gotpointercapture":return w=v.pointerId,Xl.set(w,Ql(Xl.get(w)||null,a,l,c,h,v)),!0}return!1}function ux(a){var l=lt(a.target);if(l!==null){var c=o(l);if(c!==null){if(l=c.tag,l===13){if(l=d(c),l!==null){a.blockedOn=l,Ie(a.priority,function(){ox(c)});return}}else if(l===31){if(l=u(c),l!==null){a.blockedOn=l,Ie(a.priority,function(){ox(c)});return}}else if(l===3&&c.stateNode.current.memoizedState.isDehydrated){a.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Co(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var c=wu(a.nativeEvent);if(c===null){c=a.nativeEvent;var h=new c.constructor(c.type,c);Nc=h,c.target.dispatchEvent(h),Nc=null}else return l=zt(c),l!==null&&rx(l),a.blockedOn=c,!1;l.shift()}return!0}function hx(a,l,c){Co(a)&&c.delete(l)}function _w(){ju=!1,Ia!==null&&Co(Ia)&&(Ia=null),Ra!==null&&Co(Ra)&&(Ra=null),Ma!==null&&Co(Ma)&&(Ma=null),Kl.forEach(hx),Xl.forEach(hx)}function Eo(a,l){a.blockedOn===l&&(a.blockedOn=null,ju||(ju=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,_w)))}var Ao=null;function mx(a){Ao!==a&&(Ao=a,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ao===a&&(Ao=null);for(var l=0;l<a.length;l+=3){var c=a[l],h=a[l+1],v=a[l+2];if(typeof h!="function"){if(Nu(h||c)===null)continue;break}var w=zt(c);w!==null&&(a.splice(l,3),l-=3,wd(w,{pending:!0,data:v,method:c.method,action:h},h,v))}}))}function Hi(a){function l(V){return Eo(V,a)}Ia!==null&&Eo(Ia,a),Ra!==null&&Eo(Ra,a),Ma!==null&&Eo(Ma,a),Kl.forEach(l),Xl.forEach(l);for(var c=0;c<Da.length;c++){var h=Da[c];h.blockedOn===a&&(h.blockedOn=null)}for(;0<Da.length&&(c=Da[0],c.blockedOn===null);)ux(c),c.blockedOn===null&&Da.shift();if(c=(a.ownerDocument||a).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var v=c[h],w=c[h+1],C=v[ve]||null;if(typeof w=="function")C||mx(c);else if(C){var O=null;if(w&&w.hasAttribute("formAction")){if(v=w,C=w[ve]||null)O=C.formAction;else if(Nu(v)!==null)continue}else O=C.action;typeof O=="function"?c[h+1]=O:(c.splice(h,3),h-=3),mx(c)}}}function fx(){function a(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(C){return v=C})},focusReset:"manual",scroll:"manual"})}function l(){v!==null&&(v(),v=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),v!==null&&(v(),v=null)}}}function ku(a){this._internalRoot=a}Io.prototype.render=ku.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(i(409));var c=l.current,h=nn();ix(c,h,a,l,null,null)},Io.prototype.unmount=ku.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;ix(a.current,2,null,a,null,null),uo(),l[Se]=null}};function Io(a){this._internalRoot=a}Io.prototype.unstable_scheduleHydration=function(a){if(a){var l=de();a={blockedOn:null,target:a,priority:l};for(var c=0;c<Da.length&&l!==0&&l<Da[c].priority;c++);Da.splice(c,0,a),c===0&&ux(a)}};var px=e.version;if(px!=="19.2.4")throw Error(i(527,px,"19.2.4"));B.findDOMNode=function(a){var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=m(l),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var Tw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ro=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ro.isDisabled&&Ro.supportsFiber)try{_t=Ro.inject(Tw),tt=Ro}catch{}}return er.createRoot=function(a,l){if(!r(a))throw Error(i(299));var c=!1,h="",v=Nf,w=jf,C=kf;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),l=nx(a,1,!1,null,null,c,h,null,v,w,C,fx),a[Se]=l.current,iu(a),new ku(l)},er.hydrateRoot=function(a,l,c){if(!r(a))throw Error(i(299));var h=!1,v="",w=Nf,C=jf,O=kf,V=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(O=c.onRecoverableError),c.formState!==void 0&&(V=c.formState)),l=nx(a,1,!0,l,c??null,h,v,V,w,C,O,fx),l.context=ax(null),c=l.current,h=nn(),h=vs(h),v=va(h),v.callback=null,ya(c,v,h),c=h,l.current.lanes=c,Yt(l,c),Gn(l),a[Se]=l.current,iu(a),new Io(l)},er.version="19.2.4",er}var Sx;function Lw(){if(Sx)return Tu.exports;Sx=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Tu.exports=Uw(),Tu.exports}var Bw=Lw();const Pw=Kg(Bw),_x="cc_sync_queue";class Gw{constructor(){this.queue=[],this.isProcessing=!1,this.listeners=[],this.loadQueue(),window.addEventListener("online",()=>this.processQueue()),window.addEventListener("offline",()=>this.notifyListeners())}loadQueue(){try{const e=localStorage.getItem(_x);e&&(this.queue=JSON.parse(e))}catch(e){console.error("Failed to load sync queue",e)}}saveQueue(){localStorage.setItem(_x,JSON.stringify(this.queue)),this.notifyListeners()}enqueue(e,n){const i={id:crypto.randomUUID(),type:e,payload:n,timestamp:Date.now(),retryCount:0};this.queue.push(i),this.saveQueue(),navigator.onLine&&this.processQueue()}async processQueue(){if(this.isProcessing||this.queue.length===0||!navigator.onLine)return;this.isProcessing=!0,this.notifyListeners();const e=[...this.queue];for(const n of e)try{await this.syncItem(n),this.queue=this.queue.filter(i=>i.id!==n.id),this.saveQueue()}catch(i){console.error(`Failed to sync item ${n.id}`,i);const r=this.queue.findIndex(o=>o.id===n.id);r!==-1&&this.queue[r].retryCount++,this.saveQueue();break}this.isProcessing=!1,this.notifyListeners()}async syncItem(e){return new Promise((n,i)=>{setTimeout(()=>{console.log(`[SYNC] Processed ${e.type}`,e.payload),Math.random()<.05?i(new Error("Random network glitch")):n()},500)})}subscribe(e){return this.listeners.push(e),e(this.queue,navigator.onLine),()=>{this.listeners=this.listeners.filter(n=>n!==e)}}notifyListeners(){this.listeners.forEach(e=>e(this.queue,navigator.onLine))}getStatus(){return{pendingCount:this.queue.length,isOnline:navigator.onLine,isProcessing:this.isProcessing}}}const Tx=new Gw,$w=()=>{const[s,e]=_.useState({pendingCount:0,isOnline:navigator.onLine,isProcessing:!1});_.useEffect(()=>Tx.subscribe((o,d)=>{e({pendingCount:o.length,isOnline:d,isProcessing:Tx.getStatus().isProcessing})}),[]);const n=s.pendingCount===0,i=!s.isOnline;return t.jsxs("div",{className:`
      flex items-center gap-3 px-4 py-2 rounded-full border shadow-lg backdrop-blur-md transition-all duration-500
      ${i?"bg-red-500/10 border-red-500/50 text-red-500":s.isProcessing?"bg-indigo-500/10 border-indigo-500/50 text-indigo-500":n?"bg-emerald-500/10 border-emerald-500/50 text-emerald-500":"bg-amber-500/10 border-amber-500/50 text-amber-500"}
    `,children:[t.jsxs("div",{className:"relative",children:[i?t.jsx("span",{className:"text-lg",children:""}):s.isProcessing?t.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):n?t.jsx("span",{className:"text-lg",children:""}):t.jsx("span",{className:"text-lg",children:""}),t.jsx("div",{className:`absolute -bottom-1 -right-1 w-2.5 h-2.5 rounded-full border-2 border-white ${i?"bg-red-500":n?"bg-emerald-500":"bg-amber-500"}`})]}),t.jsxs("div",{className:"flex flex-col leading-none",children:[t.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:i?"Offline":s.isProcessing?"Syncing...":n?"Cloud Synced":"Changes Pending"}),!n&&t.jsxs("span",{className:"text-[9px] font-bold opacity-80",children:[s.pendingCount," action",s.pendingCount!==1?"s":""," queued"]})]})]})},Fw=(s,e)=>Array.from({length:s}).map((n,i)=>({id:`pl-${e}-${i}`,name:`${e} Player ${i+1}`,role:i===0?"Wicket-keeper":i<5?"Batsman":i<9?"All-rounder":"Bowler",stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}})),Mo=(s,e,n)=>({id:s,name:e,players:Fw(15,n),logoUrl:""}),Cx=[{id:"reset",name:"Reset Data",description:"Clear all data and start fresh.",icon:"",generate:()=>({orgs:[],matches:[]})},{id:"quick_match",name:"Quick Match Ready",description:"Two teams and a match ready to start.",icon:"",generate:()=>{const s=Mo("tm-qm-1","Super Strikers","Strikers"),e=Mo("tm-qm-2","Thunder Bolts","Thunder"),n={id:`mx-qm-${Date.now()}`,teamAId:s.id,teamBId:e.id,date:new Date().toISOString(),teamAName:s.name,teamBName:e.name,venue:"Dev Ground",status:"Scheduled"};return{orgs:[{id:"org-dev-qm",name:"Quick Play",type:"CLUB",memberTeams:[s,e],fixtures:[],tournaments:[],groups:[],members:[],applications:[],sponsors:[],establishedYear:2026,isPublic:!1}],matches:[n]}}},{id:"tournament",name:"Tournament Mode",description:"Full tournament with 8 teams and groups.",icon:"",generate:()=>{const s=Array.from({length:8}).map((o,d)=>Mo(`tm-tr-${d}`,`Team ${String.fromCharCode(65+d)}`,`Team ${String.fromCharCode(65+d)}`)),e={id:"grp-A",name:"Group A",teams:s.slice(0,4)},n={id:"grp-B",name:"Group B",teams:s.slice(4,8)};return{orgs:[{id:"org-dev-trn",name:"Dev League",type:"GOVERNING_BODY",memberTeams:s,fixtures:[],tournaments:[{id:"trn-dev-1",name:"Dev Cup 2026",format:"T20",overs:20,groups:[e,n],status:"Ongoing",pointsConfig:{win:2,loss:0,tie:1,noResult:1,win_outright:2,tie_match:1,first_inning_lead:0,first_inning_tie:0,first_inning_loss:0,bonus_batting_max:0,bonus_bowling_max:0,max_total_per_match:2,batting_bonus_tiers:[],bowling_bonus_tiers:[]}}],groups:[],members:[],applications:[],sponsors:[],establishedYear:2026,isPublic:!0}],matches:[]}}},{id:"central_zone_full",name:"Central Zone Setup",description:"Seeds the 24 Central Zone clubs with admins, captains, and squads.",icon:"",generate:()=>{const e=["Balmain United","Brickfield Sports","Orangefield Sports","Caparo Sports","Centric Academy","Countryside","Couva Sports","Agostini Sports","Esmeralda Sports","Ragoonanan Road Sports","Exchange 2","Felicity Sports","Friendship Hall Sports","Koreans Sports","Lange Park Sports","Line and Length","Madras Divergent Academy","Mc Bean Sports","Petersfield Sports","Preysal Valley Boys","Renoun Sports","Sital Felicity Youngsters","Supersonic Sports","Waterloo Sports"].map((r,o)=>{const d=r.toLowerCase().replace(/\s+/g,"-"),u=Mo(`tm-cz-${d}`,r,r.split(" ")[0]);return u.management="Managed by "+r+" Board",u.location="Central Trinidad",u}),n=[];return e.forEach(r=>{const o=r.id.replace("tm-cz-",""),d=o.split("-")[0];n.push({userId:`adm-${o}`,name:`${r.name} Admin`,handle:`@admin_${d}`,role:"Administrator",addedAt:Date.now(),permissions:{canEditOrg:!0,canManageMembers:!0,canEditSquad:!0,canSubmitReport:!0}});const u=r.players[0];n.push({userId:u.id,name:u.name,handle:`@capt_${d}`,role:"Player",addedAt:Date.now(),permissions:{canSubmitReport:!0,canEditSquad:!0,canViewReports:!0}}),n.push({userId:`coach-${o}`,name:`Coach ${r.name.split(" ")[0]}`,handle:`@coach_${d}`,role:"Coach",addedAt:Date.now(),permissions:{canEditSquad:!0,canViewReports:!0,canManagePractice:!0}}),n.push({userId:`scorer-${o}`,name:`Scorer ${r.name.split(" ")[0]}`,handle:`@scorer_${d}`,role:"Scorer",addedAt:Date.now(),permissions:{canScoreMatch:!0,canEditScorecard:!0,canViewReports:!0}})}),n.push({userId:"umpire-cz-1",name:"Umpire Steve",handle:"@ump_steve",role:"Umpire",addedAt:Date.now(),permissions:{canOfficiate:!0,canViewReports:!0}},{userId:"umpire-cz-2",name:"Umpire Mike",handle:"@ump_mike",role:"Umpire",addedAt:Date.now(),permissions:{canOfficiate:!0,canViewReports:!0}}),{orgs:[{id:"org-central-zone",name:"Central Zone",type:"GOVERNING_BODY",description:"The official governing body for the Central Zone containing all member clubs.",memberTeams:e,fixtures:[],tournaments:[],groups:[],members:n,applications:[],sponsors:[],establishedYear:1980,isPublic:!0,allowUserContent:!0,country:"Trinidad & Tobago"}],matches:[]}}}];function cc(s,e){var n={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(n[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(s);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(s,i[r])&&(n[i[r]]=s[i[r]]);return n}function Hw(s,e,n,i){function r(o){return o instanceof n?o:new n(function(d){d(o)})}return new(n||(n=Promise))(function(o,d){function u(f){try{m(i.next(f))}catch(b){d(b)}}function p(f){try{m(i.throw(f))}catch(b){d(b)}}function m(f){f.done?o(f.value):r(f.value).then(u,p)}m((i=i.apply(s,e||[])).next())})}const qw=s=>s?(...e)=>s(...e):(...e)=>fetch(...e);class Nh extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class Vw extends Nh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ex extends Nh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ax extends Nh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ju;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Ju||(Ju={}));class zw{constructor(e,{headers:n={},customFetch:i,region:r=Ju.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=qw(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Hw(this,arguments,void 0,function*(n,i={}){var r;let o,d;try{const{headers:u,method:p,body:m,signal:f,timeout:b}=i;let y={},{region:N}=i;N||(N=this.region);const k=new URL(`${this.url}/${n}`);N&&N!=="any"&&(y["x-region"]=N,k.searchParams.set("forceFunctionRegion",N));let T;m&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(y["Content-Type"]="application/octet-stream",T=m):typeof m=="string"?(y["Content-Type"]="text/plain",T=m):typeof FormData<"u"&&m instanceof FormData?T=m:(y["Content-Type"]="application/json",T=JSON.stringify(m)):m&&typeof m!="string"&&!(typeof Blob<"u"&&m instanceof Blob)&&!(m instanceof ArrayBuffer)&&!(typeof FormData<"u"&&m instanceof FormData)?T=JSON.stringify(m):T=m;let S=f;b&&(d=new AbortController,o=setTimeout(()=>d.abort(),b),f?(S=d.signal,f.addEventListener("abort",()=>d.abort())):S=d.signal);const R=yield this.fetch(k.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},y),this.headers),u),body:T,signal:S}).catch(E=>{throw new Vw(E)}),A=R.headers.get("x-relay-error");if(A&&A==="true")throw new Ex(R);if(!R.ok)throw new Ax(R);let I=((r=R.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),j;return I==="application/json"?j=yield R.json():I==="application/octet-stream"||I==="application/pdf"?j=yield R.blob():I==="text/event-stream"?j=R:I==="multipart/form-data"?j=yield R.formData():j=yield R.text(),{data:j,error:null,response:R}}catch(u){return{data:null,error:u,response:u instanceof Ax||u instanceof Ex?u.context:void 0}}finally{o&&clearTimeout(o)}})}}var Ww=class extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}},Jw=class{constructor(s){var e,n;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(e=s.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=s.signal,this.isMaybeSingle=(n=s.isMaybeSingle)!==null&&n!==void 0?n:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,e){return this.headers=new Headers(this.headers),this.headers.set(s,e),this}then(s,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let d=null,u=null,p=null,m=o.status,f=o.statusText;if(o.ok){var b,y;if(n.method!=="HEAD"){var N;const R=await o.text();R===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((N=n.headers.get("Accept"))===null||N===void 0)&&N.includes("application/vnd.pgrst.plan+text"))?u=R:u=JSON.parse(R))}const T=(b=n.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),S=(y=o.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");T&&S&&S.length>1&&(p=parseInt(S[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,p=null,m=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var k;const T=await o.text();try{d=JSON.parse(T),Array.isArray(d)&&o.status===404&&(u=[],d=null,m=200,f="OK")}catch{o.status===404&&T===""?(m=204,f="No Content"):d={message:T}}if(d&&n.isMaybeSingle&&(!(d==null||(k=d.details)===null||k===void 0)&&k.includes("0 rows"))&&(d=null,m=200,f="OK"),d&&n.shouldThrowOnError)throw new Ww(d)}return{error:d,data:u,count:p,status:m,statusText:f}});return this.shouldThrowOnError||(r=r.catch(o=>{var d;let u="";const p=o==null?void 0:o.cause;if(p){var m,f,b,y;const k=(m=p==null?void 0:p.message)!==null&&m!==void 0?m:"",T=(f=p==null?void 0:p.code)!==null&&f!==void 0?f:"";u=`${(b=o==null?void 0:o.name)!==null&&b!==void 0?b:"FetchError"}: ${o==null?void 0:o.message}`,u+=`

Caused by: ${(y=p==null?void 0:p.name)!==null&&y!==void 0?y:"Error"}: ${k}`,T&&(u+=` (${T})`),p!=null&&p.stack&&(u+=`
${p.stack}`)}else{var N;u=(N=o==null?void 0:o.stack)!==null&&N!==void 0?N:""}return{error:{message:`${(d=o==null?void 0:o.name)!==null&&d!==void 0?d:"FetchError"}: ${o==null?void 0:o.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),r.then(s,e)}returns(){return this}overrideTypes(){return this}},Yw=class extends Jw{select(s){let e=!1;const n=(s??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:e=!0,nullsFirst:n,foreignTable:i,referencedTable:r=i}={}){const o=r?`${r}.order`:"order",d=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${d?`${d},`:""}${s}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:e,referencedTable:n=e}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${s}`),this}range(s,e,{foreignTable:n,referencedTable:i=n}={}){const r=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${s}`),this.url.searchParams.set(o,`${e-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:e=!1,settings:n=!1,buffers:i=!1,wal:r=!1,format:o="text"}={}){var d;const u=[s?"analyze":null,e?"verbose":null,n?"settings":null,i?"buffers":null,r?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${p}"; options=${u};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}};const Ix=new RegExp("[,()]");var Ki=class extends Yw{eq(s,e){return this.url.searchParams.append(s,`eq.${e}`),this}neq(s,e){return this.url.searchParams.append(s,`neq.${e}`),this}gt(s,e){return this.url.searchParams.append(s,`gt.${e}`),this}gte(s,e){return this.url.searchParams.append(s,`gte.${e}`),this}lt(s,e){return this.url.searchParams.append(s,`lt.${e}`),this}lte(s,e){return this.url.searchParams.append(s,`lte.${e}`),this}like(s,e){return this.url.searchParams.append(s,`like.${e}`),this}likeAllOf(s,e){return this.url.searchParams.append(s,`like(all).{${e.join(",")}}`),this}likeAnyOf(s,e){return this.url.searchParams.append(s,`like(any).{${e.join(",")}}`),this}ilike(s,e){return this.url.searchParams.append(s,`ilike.${e}`),this}ilikeAllOf(s,e){return this.url.searchParams.append(s,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(s,e){return this.url.searchParams.append(s,`ilike(any).{${e.join(",")}}`),this}regexMatch(s,e){return this.url.searchParams.append(s,`match.${e}`),this}regexIMatch(s,e){return this.url.searchParams.append(s,`imatch.${e}`),this}is(s,e){return this.url.searchParams.append(s,`is.${e}`),this}isDistinct(s,e){return this.url.searchParams.append(s,`isdistinct.${e}`),this}in(s,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&Ix.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(s,`in.(${n})`),this}notIn(s,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&Ix.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(s,`not.in.(${n})`),this}contains(s,e){return typeof e=="string"?this.url.searchParams.append(s,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(s,`cs.{${e.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(e)}`),this}containedBy(s,e){return typeof e=="string"?this.url.searchParams.append(s,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(s,`cd.{${e.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(e)}`),this}rangeGt(s,e){return this.url.searchParams.append(s,`sr.${e}`),this}rangeGte(s,e){return this.url.searchParams.append(s,`nxl.${e}`),this}rangeLt(s,e){return this.url.searchParams.append(s,`sl.${e}`),this}rangeLte(s,e){return this.url.searchParams.append(s,`nxr.${e}`),this}rangeAdjacent(s,e){return this.url.searchParams.append(s,`adj.${e}`),this}overlaps(s,e){return typeof e=="string"?this.url.searchParams.append(s,`ov.${e}`):this.url.searchParams.append(s,`ov.{${e.join(",")}}`),this}textSearch(s,e,{config:n,type:i}={}){let r="";i==="plain"?r="pl":i==="phrase"?r="ph":i==="websearch"&&(r="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(s,`${r}fts${o}.${e}`),this}match(s){return Object.entries(s).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(s,e,n){return this.url.searchParams.append(s,`not.${e}.${n}`),this}or(s,{foreignTable:e,referencedTable:n=e}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${s})`),this}filter(s,e,n){return this.url.searchParams.append(s,`${e}.${n}`),this}},Kw=class{constructor(s,{headers:e={},schema:n,fetch:i}){this.url=s,this.headers=new Headers(e),this.schema=n,this.fetch=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(s,e){const{head:n=!1,count:i}=e??{},r=n?"HEAD":"GET";let o=!1;const d=(s??"*").split("").map(m=>/\s/.test(m)&&!o?"":(m==='"'&&(o=!o),m)).join(""),{url:u,headers:p}=this.cloneRequestState();return u.searchParams.set("select",d),i&&p.append("Prefer",`count=${i}`),new Ki({method:r,url:u,headers:p,schema:this.schema,fetch:this.fetch})}insert(s,{count:e,defaultToNull:n=!0}={}){var i;const r="POST",{url:o,headers:d}=this.cloneRequestState();if(e&&d.append("Prefer",`count=${e}`),n||d.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(u.length>0){const p=[...new Set(u)].map(m=>`"${m}"`);o.searchParams.set("columns",p.join(","))}}return new Ki({method:r,url:o,headers:d,schema:this.schema,body:s,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(s,{onConflict:e,ignoreDuplicates:n=!1,count:i,defaultToNull:r=!0}={}){var o;const d="POST",{url:u,headers:p}=this.cloneRequestState();if(p.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&u.searchParams.set("on_conflict",e),i&&p.append("Prefer",`count=${i}`),r||p.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,b)=>f.concat(Object.keys(b)),[]);if(m.length>0){const f=[...new Set(m)].map(b=>`"${b}"`);u.searchParams.set("columns",f.join(","))}}return new Ki({method:d,url:u,headers:p,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(s,{count:e}={}){var n;const i="PATCH",{url:r,headers:o}=this.cloneRequestState();return e&&o.append("Prefer",`count=${e}`),new Ki({method:i,url:r,headers:o,schema:this.schema,body:s,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:s}={}){var e;const n="DELETE",{url:i,headers:r}=this.cloneRequestState();return s&&r.append("Prefer",`count=${s}`),new Ki({method:n,url:i,headers:r,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},Xw=class Xg{constructor(e,{headers:n={},schema:i,fetch:r}={}){this.url=e,this.headers=new Headers(n),this.schemaName=i,this.fetch=r}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Kw(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Xg(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:r=!1,count:o}={}){var d;let u;const p=new URL(`${this.url}/rpc/${e}`);let m;const f=N=>N!==null&&typeof N=="object"&&(!Array.isArray(N)||N.some(f)),b=i&&Object.values(n).some(f);b?(u="POST",m=n):i||r?(u=i?"HEAD":"GET",Object.entries(n).filter(([N,k])=>k!==void 0).map(([N,k])=>[N,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([N,k])=>{p.searchParams.append(N,k)})):(u="POST",m=n);const y=new Headers(this.headers);return b?y.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&y.set("Prefer",`count=${o}`),new Ki({method:u,url:p,headers:y,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class Qw{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const i=n.versions;if(i&&i.node){const r=i.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Zw="2.93.3",eN=`realtime-js/${Zw}`,tN="1.0.0",Qg="2.0.0",Rx=Qg,Yu=1e4,sN=1e3,nN=100;var Ua;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Ua||(Ua={}));var bs;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(bs||(bs={}));var Rn;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(Rn||(Rn={}));var Ku;(function(s){s.websocket="websocket"})(Ku||(Ku={}));var oi;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(oi||(oi={}));class aN{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,i;const r=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,r)}_encodeJsonUserBroadcastPush(e){var n,i;const r=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},d=new TextEncoder().encode(JSON.stringify(r)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(e,n,i){var r,o;const d=e.topic,u=(r=e.ref)!==null&&r!==void 0?r:"",p=(o=e.join_ref)!==null&&o!==void 0?o:"",m=e.payload.event,f=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},b=Object.keys(f).length===0?"":JSON.stringify(f);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const y=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+u.length+d.length+m.length+b.length,N=new ArrayBuffer(this.HEADER_LENGTH+y);let k=new DataView(N),T=0;k.setUint8(T++,this.KINDS.userBroadcastPush),k.setUint8(T++,p.length),k.setUint8(T++,u.length),k.setUint8(T++,d.length),k.setUint8(T++,m.length),k.setUint8(T++,b.length),k.setUint8(T++,n),Array.from(p,R=>k.setUint8(T++,R.charCodeAt(0))),Array.from(u,R=>k.setUint8(T++,R.charCodeAt(0))),Array.from(d,R=>k.setUint8(T++,R.charCodeAt(0))),Array.from(m,R=>k.setUint8(T++,R.charCodeAt(0))),Array.from(b,R=>k.setUint8(T++,R.charCodeAt(0)));var S=new Uint8Array(N.byteLength+i.byteLength);return S.set(new Uint8Array(N),0),S.set(new Uint8Array(i),N.byteLength),S.buffer}decode(e,n){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return n(i)}if(typeof e=="string"){const i=JSON.parse(e),[r,o,d,u,p]=i;return n({join_ref:r,ref:o,topic:d,event:u,payload:p})}return n({})}_binaryDecode(e){const n=new DataView(e),i=n.getUint8(0),r=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,r)}}_decodeUserBroadcast(e,n,i){const r=n.getUint8(1),o=n.getUint8(2),d=n.getUint8(3),u=n.getUint8(4);let p=this.HEADER_LENGTH+4;const m=i.decode(e.slice(p,p+r));p=p+r;const f=i.decode(e.slice(p,p+o));p=p+o;const b=i.decode(e.slice(p,p+d));p=p+d;const y=e.slice(p,e.byteLength),N=u===this.JSON_ENCODING?JSON.parse(i.decode(y)):y,k={type:this.BROADCAST_EVENT,event:f,payload:N};return d>0&&(k.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>n.includes(i)))}}class Zg{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Jt;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Jt||(Jt={}));const Mx=(s,e,n={})=>{var i;const r=(i=n.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((o,d)=>(o[d]=iN(d,s,e,r),o),{}):{}},iN=(s,e,n,i)=>{const r=e.find(u=>u.name===s),o=r==null?void 0:r.type,d=n[s];return o&&!i.includes(o)?eb(o,d):Xu(d)},eb=(s,e)=>{if(s.charAt(0)==="_"){const n=s.slice(1,s.length);return cN(e,n)}switch(s){case Jt.bool:return lN(e);case Jt.float4:case Jt.float8:case Jt.int2:case Jt.int4:case Jt.int8:case Jt.numeric:case Jt.oid:return rN(e);case Jt.json:case Jt.jsonb:return oN(e);case Jt.timestamp:return dN(e);case Jt.abstime:case Jt.date:case Jt.daterange:case Jt.int4range:case Jt.int8range:case Jt.money:case Jt.reltime:case Jt.text:case Jt.time:case Jt.timestamptz:case Jt.timetz:case Jt.tsrange:case Jt.tstzrange:return Xu(e);default:return Xu(e)}},Xu=s=>s,lN=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},rN=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},oN=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch{return s}return s},cN=(s,e)=>{if(typeof s!="string")return s;const n=s.length-1,i=s[n];if(s[0]==="{"&&i==="}"){let o;const d=s.slice(1,n);try{o=JSON.parse("["+d+"]")}catch{o=d?d.split(","):[]}return o.map(u=>eb(e,u))}return s},dN=s=>typeof s=="string"?s.replace(" ","T"):s,tb=s=>{const e=new URL(s);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Iu{constructor(e,n,i={},r=Yu){this.channel=e,this.event=n,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Dx;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(Dx||(Dx={}));class lr{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:o,onLeave:d,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=lr.syncState(this.state,r,o,d),this.pendingDiffs.forEach(p=>{this.state=lr.syncDiff(this.state,p,o,d)}),this.pendingDiffs=[],u()}),this.channel._on(i.diff,{},r=>{const{onJoin:o,onLeave:d,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=lr.syncDiff(this.state,r,o,d),u())}),this.onJoin((r,o,d)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:o,newPresences:d})}),this.onLeave((r,o,d)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:o,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,r){const o=this.cloneDeep(e),d=this.transformState(n),u={},p={};return this.map(o,(m,f)=>{d[m]||(p[m]=f)}),this.map(d,(m,f)=>{const b=o[m];if(b){const y=f.map(S=>S.presence_ref),N=b.map(S=>S.presence_ref),k=f.filter(S=>N.indexOf(S.presence_ref)<0),T=b.filter(S=>y.indexOf(S.presence_ref)<0);k.length>0&&(u[m]=k),T.length>0&&(p[m]=T)}else u[m]=f}),this.syncDiff(o,{joins:u,leaves:p},i,r)}static syncDiff(e,n,i,r){const{joins:o,leaves:d}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(o,(u,p)=>{var m;const f=(m=e[u])!==null&&m!==void 0?m:[];if(e[u]=this.cloneDeep(p),f.length>0){const b=e[u].map(N=>N.presence_ref),y=f.filter(N=>b.indexOf(N.presence_ref)<0);e[u].unshift(...y)}i(u,f,p)}),this.map(d,(u,p)=>{let m=e[u];if(!m)return;const f=p.map(b=>b.presence_ref);m=m.filter(b=>f.indexOf(b.presence_ref)<0),e[u]=m,r(u,m,p),m.length===0&&delete e[u]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const r=e[i];return"metas"in r?n[i]=r.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[i]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ox;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(Ox||(Ox={}));var rr;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(rr||(rr={}));var oa;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(oa||(oa={}));class el{constructor(e,n={config:{}},i){var r,o;if(this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=bs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Iu(this,Rn.join,this.params,this.timeout),this.rejoinTimer=new Zg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bs.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=bs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=bs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Rn.reply,{},(d,u)=>{this._trigger(this._replyEventName(u),d)}),this.presence=new lr(this),this.broadcastEndpointURL=tb(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(r=this.params.config)===null||r===void 0?void 0:r.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var i,r,o;if(this.socket.isConnected()||this.socket.connect(),this.state==bs.closed){const{config:{broadcast:d,presence:u,private:p}}=this.params,m=(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(N=>N.filter))!==null&&r!==void 0?r:[],f=!!this.bindings[rr.PRESENCE]&&this.bindings[rr.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,b={},y={broadcast:d,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(N=>e==null?void 0:e(oa.CHANNEL_ERROR,N)),this._onClose(()=>e==null?void 0:e(oa.CLOSED)),this.updateJoinPayload(Object.assign({config:y},b)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:N})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),N===void 0){e==null||e(oa.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,S=(k=T==null?void 0:T.length)!==null&&k!==void 0?k:0,R=[];for(let A=0;A<S;A++){const I=T[A],{filter:{event:j,schema:E,table:D,filter:L}}=I,G=N&&N[A];if(G&&G.event===j&&el.isFilterValueEqual(G.schema,E)&&el.isFilterValueEqual(G.table,D)&&el.isFilterValueEqual(G.filter,L))R.push(Object.assign(Object.assign({},I),{id:G.id}));else{this.unsubscribe(),this.state=bs.errored,e==null||e(oa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=R,e&&e(oa.SUBSCRIBED);return}}).receive("error",N=>{this.state=bs.errored,e==null||e(oa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(N).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(oa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===bs.joined&&e===rr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,i)}async httpSend(e,n,i={}){var r;if(n==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(r=i.timeout)!==null&&r!==void 0?r:this.timeout);if(u.status===202)return{success:!0};let p=u.statusText;try{const m=await u.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(e,n={}){var i,r;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:d}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:d,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=m.body)===null||r===void 0?void 0:r.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var d,u,p;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(u=(d=this.params)===null||d===void 0?void 0:d.config)===null||u===void 0?void 0:u.broadcast)===null||p===void 0)&&p.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=bs.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Rn.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new Iu(this,Rn.leave,{},e),i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bs.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const r=new AbortController,o=setTimeout(()=>r.abort(),i),d=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(o),d}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Iu(this,e,n,i);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>nN){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var r,o;const d=e.toLocaleLowerCase(),{close:u,error:p,leave:m,join:f}=Rn;if(i&&[u,p,m,f].indexOf(d)>=0&&i!==this._joinRef())return;let y=this._onMessage(d,n,i);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(N=>{var k,T,S;return((k=N.filter)===null||k===void 0?void 0:k.event)==="*"||((S=(T=N.filter)===null||T===void 0?void 0:T.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===d}).map(N=>N.callback(y,i)):(o=this.bindings[d])===null||o===void 0||o.filter(N=>{var k,T,S,R,A,I;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in N){const j=N.id,E=(k=N.filter)===null||k===void 0?void 0:k.event;return j&&((T=n.ids)===null||T===void 0?void 0:T.includes(j))&&(E==="*"||(E==null?void 0:E.toLocaleLowerCase())===((S=n.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const j=(A=(R=N==null?void 0:N.filter)===null||R===void 0?void 0:R.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return j==="*"||j===((I=n==null?void 0:n.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return N.type.toLocaleLowerCase()===d}).map(N=>{if(typeof y=="object"&&"ids"in y){const k=y.data,{schema:T,table:S,commit_timestamp:R,type:A,errors:I}=k;y=Object.assign(Object.assign({},{schema:T,table:S,commit_timestamp:R,eventType:A,new:{},old:{},errors:I}),this._getPayloadRecords(k))}N.callback(y,i)})}_isClosed(){return this.state===bs.closed}_isJoined(){return this.state===bs.joined}_isJoining(){return this.state===bs.joining}_isLeaving(){return this.state===bs.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const r=e.toLocaleLowerCase(),o={type:r,filter:n,callback:i};return this.bindings[r]?this.bindings[r].push(o):this.bindings[r]=[o],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(r=>{var o;return!(((o=r.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===i&&el.isEqual(r.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Rn.close,{},e)}_onError(e){this._on(Rn.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bs.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Mx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Mx(e.columns,e.old_record)),n}}const Ru=()=>{},Do={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uN=[1e3,2e3,5e3,1e4],hN=1e4,mN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fN{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Yu,this.transport=null,this.heartbeatIntervalMs=Do.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ru,this.ref=0,this.reconnectTimer=null,this.vsn=Rx,this.logger=Ru,this.conn=null,this.sendBuffer=[],this.serializer=new aN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=r=>r?(...o)=>r(...o):(...o)=>fetch(...o),!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Ku.websocket}`,this.httpEndpoint=tb(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Qw.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ua.connecting:return oi.Connecting;case Ua.open:return oi.Open;case Ua.closing:return oi.Closing;default:return oi.Closed}}isConnected(){return this.connectionState()===oi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,r=this.getChannels().find(o=>o.topic===i);if(r)return r;{const o=new el(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:i,payload:r,ref:o}=e,d=()=>{this.encode(e,u=>{var p;(p=this.conn)===null||p===void 0||p.send(u)})};this.log("push",`${n} ${i} (${o})`,r),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(sN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Do.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const m=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",m)}catch(f){this.log("error","error in heartbeat callback",f)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:r,payload:o,ref:d}=n,u=d?`(${d})`:"",p=o.status||"";this.log("receive",`${p} ${i} ${r} ${u}`.trim(),o),this.channels.filter(m=>m._isMember(i)).forEach(m=>m._trigger(r,o,d)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ua.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ua.open||this.conn.readyState===Ua.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Rn.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${i}${r}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([mN],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,i=!1;if(e)n=e,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(r){this.log("error","Error fetching access token from callback",r),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:eN};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(Rn.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new Zg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Do.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,r,o,d,u,p,m,f,b,y,N;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:Yu,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Do.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(d=e==null?void 0:e.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:Ru,this.vsn=(p=e==null?void 0:e.vsn)!==null&&p!==void 0?p:Rx,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:(k=>uN[k-1]||hN),this.vsn){case tN:this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:((k,T)=>T(JSON.stringify(k))),this.decode=(b=e==null?void 0:e.decode)!==null&&b!==void 0?b:((k,T)=>T(JSON.parse(k)));break;case Qg:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:this.serializer.encode.bind(this.serializer),this.decode=(N=e==null?void 0:e.decode)!==null&&N!==void 0?N:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var cr=class extends Error{constructor(s,e){var n;super(s),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function pN(s,e,n){const i=new URL(e,s);if(n)for(const[r,o]of Object.entries(n))o!==void 0&&i.searchParams.set(r,o);return i.toString()}async function xN(s){return!s||s.type==="none"?{}:s.type==="bearer"?{Authorization:`Bearer ${s.token}`}:s.type==="header"?{[s.name]:s.value}:s.type==="custom"?await s.getHeaders():{}}function gN(s){const e=s.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:r,body:o,headers:d}){const u=pN(s.baseUrl,i,r),p=await xN(s.auth),m=await e(u,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...p,...d},body:o?JSON.stringify(o):void 0}),f=await m.text(),b=(m.headers.get("content-type")||"").includes("application/json"),y=b&&f?JSON.parse(f):f;if(!m.ok){const N=b?y:void 0,k=N==null?void 0:N.error;throw new cr((k==null?void 0:k.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:N})}return{status:m.status,headers:m.headers,data:y}}}}function Oo(s){return s.join("")}var bN=class{constructor(s,e=""){this.client=s,this.prefix=e}async listNamespaces(s){const e=s?{parent:Oo(s.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(s,e){const n={namespace:s.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(s){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Oo(s.namespace)}`})}async loadNamespaceMetadata(s){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Oo(s.namespace)}`})).data.properties}}async namespaceExists(s){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Oo(s.namespace)}`}),!0}catch(e){if(e instanceof cr&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(s,e){try{return await this.createNamespace(s,e)}catch(n){if(n instanceof cr&&n.status===409)return;throw n}}};function qi(s){return s.join("")}var vN=class{constructor(s,e="",n){this.client=s,this.prefix=e,this.accessDelegation=n}async listTables(s){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qi(s.namespace)}/tables`})).data.identifiers}async createTable(s,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${qi(s.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(s,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${qi(s.namespace)}/tables/${s.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(s,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${qi(s.namespace)}/tables/${s.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(s){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${qi(s.namespace)}/tables/${s.name}`,headers:e})).data.metadata}async tableExists(s){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${qi(s.namespace)}/tables/${s.name}`,headers:e}),!0}catch(n){if(n instanceof cr&&n.status===404)return!1;throw n}}async createTableIfNotExists(s,e){try{return await this.createTable(s,e)}catch(n){if(n instanceof cr&&n.status===409)return await this.loadTable({namespace:s.namespace,name:e.name});throw n}}},yN=class{constructor(s){var i;let e="v1";s.catalogName&&(e+=`/${s.catalogName}`);const n=s.baseUrl.endsWith("/")?s.baseUrl:`${s.baseUrl}/`;this.client=gN({baseUrl:n,auth:s.auth,fetchImpl:s.fetch}),this.accessDelegation=(i=s.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new bN(this.client,e),this.tableOps=new vN(this.client,e,this.accessDelegation)}async listNamespaces(s){return this.namespaceOps.listNamespaces(s)}async createNamespace(s,e){return this.namespaceOps.createNamespace(s,e)}async dropNamespace(s){await this.namespaceOps.dropNamespace(s)}async loadNamespaceMetadata(s){return this.namespaceOps.loadNamespaceMetadata(s)}async listTables(s){return this.tableOps.listTables(s)}async createTable(s,e){return this.tableOps.createTable(s,e)}async updateTable(s,e){return this.tableOps.updateTable(s,e)}async dropTable(s,e){await this.tableOps.dropTable(s,e)}async loadTable(s){return this.tableOps.loadTable(s)}async namespaceExists(s){return this.namespaceOps.namespaceExists(s)}async tableExists(s){return this.tableOps.tableExists(s)}async createNamespaceIfNotExists(s,e){return this.namespaceOps.createNamespaceIfNotExists(s,e)}async createTableIfNotExists(s,e){return this.tableOps.createTableIfNotExists(s,e)}},dc=class extends Error{constructor(s,e="storage",n,i){super(s),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=i}};function uc(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}var Uo=class extends dc{constructor(s,e,n,i="storage"){super(s,i,e,n),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},sb=class extends dc{constructor(s,e,n="storage"){super(s,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const wN=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),NN=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},Qu=s=>{if(Array.isArray(s))return s.map(n=>Qu(n));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([n,i])=>{const r=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[r]=Qu(i)}),e},jN=s=>!s||typeof s!="string"||s.length===0||s.length>100||s.trim()!==s||s.includes("/")||s.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(s);function dr(s){"@babel/helpers - typeof";return dr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dr(s)}function kN(s,e){if(dr(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var i=n.call(s,e);if(dr(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function SN(s){var e=kN(s,"string");return dr(e)=="symbol"?e:e+""}function _N(s,e,n){return(e=SN(e))in s?Object.defineProperty(s,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[e]=n,s}function Ux(s,e){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),n.push.apply(n,i)}return n}function st(s){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ux(Object(n),!0).forEach(function(i){_N(s,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):Ux(Object(n)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(n,i))})}return s}const Lx=s=>{var e;return s.msg||s.message||s.error_description||(typeof s.error=="string"?s.error:(e=s.error)===null||e===void 0?void 0:e.message)||JSON.stringify(s)},TN=async(s,e,n,i)=>{if(s&&typeof s=="object"&&"status"in s&&"ok"in s&&typeof s.status=="number"&&!(n!=null&&n.noResolveJson)){const r=s,o=r.status||500;if(typeof r.json=="function")r.json().then(d=>{const u=(d==null?void 0:d.statusCode)||(d==null?void 0:d.code)||o+"";e(new Uo(Lx(d),o,u,i))}).catch(()=>{if(i==="vectors"){const d=o+"";e(new Uo(r.statusText||`HTTP ${o} error`,o,d,i))}else{const d=o+"";e(new Uo(r.statusText||`HTTP ${o} error`,o,d,i))}});else{const d=o+"";e(new Uo(r.statusText||`HTTP ${o} error`,o,d,i))}}else e(new sb(Lx(s),s,i))},CN=(s,e,n,i)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||s==="HEAD"||!i?st(st({},r),n):(NN(i)?(r.headers=st({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(i)):r.body=i,e!=null&&e.duplex&&(r.duplex=e.duplex),st(st({},r),n))};async function tr(s,e,n,i,r,o,d){return new Promise((u,p)=>{s(n,CN(e,i,r,o)).then(m=>{if(!m.ok)throw m;if(i!=null&&i.noResolveJson)return m;if(d==="vectors"){const f=m.headers.get("content-type");if(m.headers.get("content-length")==="0"||m.status===204)return{};if(!f||!f.includes("application/json"))return{}}return m.json()}).then(m=>u(m)).catch(m=>TN(m,p,i,d))})}function nb(s="storage"){return{get:async(e,n,i,r)=>tr(e,"GET",n,i,r,void 0,s),post:async(e,n,i,r,o)=>tr(e,"POST",n,r,o,i,s),put:async(e,n,i,r,o)=>tr(e,"PUT",n,r,o,i,s),head:async(e,n,i,r)=>tr(e,"HEAD",n,st(st({},i),{},{noResolveJson:!0}),r,void 0,s),remove:async(e,n,i,r,o)=>tr(e,"DELETE",n,r,o,i,s)}}const EN=nb("storage"),{get:ur,post:In,put:Zu,head:AN,remove:jh}=EN,ln=nb("vectors");var ol=class{constructor(s,e={},n,i="storage"){this.shouldThrowOnError=!1,this.url=s,this.headers=e,this.fetch=wN(n),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(s){var e=this;try{return{data:await s(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(uc(n))return{data:null,error:n};throw n}}},IN=class{constructor(s,e){this.downloadFn=s,this.shouldThrowOnError=e}then(s,e){return this.execute().then(s,e)}async execute(){var s=this;try{return{data:(await s.downloadFn()).body,error:null}}catch(e){if(s.shouldThrowOnError)throw e;if(uc(e))return{data:null,error:e};throw e}}};let ab;ab=Symbol.toStringTag;var RN=class{constructor(s,e){this.downloadFn=s,this.shouldThrowOnError=e,this[ab]="BlobDownloadBuilder",this.promise=null}asStream(){return new IN(this.downloadFn,this.shouldThrowOnError)}then(s,e){return this.getPromise().then(s,e)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var s=this;try{return{data:await(await s.downloadFn()).blob(),error:null}}catch(e){if(s.shouldThrowOnError)throw e;if(uc(e))return{data:null,error:e};throw e}}};const MN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var DN=class extends ol{constructor(s,e={},n,i){super(s,e,i,"storage"),this.bucketId=n}async uploadOrUpdate(s,e,n,i){var r=this;return r.handleOperation(async()=>{let o;const d=st(st({},Bx),i);let u=st(st({},r.headers),s==="POST"&&{"x-upsert":String(d.upsert)});const p=d.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",d.cacheControl),p&&o.append("metadata",r.encodeMetadata(p)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",d.cacheControl),p&&!o.has("metadata")&&o.append("metadata",r.encodeMetadata(p))):(o=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType,p&&(u["x-metadata"]=r.toBase64(r.encodeMetadata(p))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!d.duplex&&(d.duplex="half")),i!=null&&i.headers&&(u=st(st({},u),i.headers));const m=r._removeEmptyFolders(e),f=r._getFinalPath(m),b=await(s=="PUT"?Zu:In)(r.fetch,`${r.url}/object/${f}`,o,st({headers:u},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{path:m,id:b.Id,fullPath:b.Key}})}async upload(s,e,n){return this.uploadOrUpdate("POST",s,e,n)}async uploadToSignedUrl(s,e,n,i){var r=this;const o=r._removeEmptyFolders(s),d=r._getFinalPath(o),u=new URL(r.url+`/object/upload/sign/${d}`);return u.searchParams.set("token",e),r.handleOperation(async()=>{let p;const m=st({upsert:Bx.upsert},i),f=st(st({},r.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&n instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",n)):typeof FormData<"u"&&n instanceof FormData?(p=n,p.append("cacheControl",m.cacheControl)):(p=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType),{path:o,fullPath:(await Zu(r.fetch,u.toString(),p,{headers:f})).Key}})}async createSignedUploadUrl(s,e){var n=this;return n.handleOperation(async()=>{let i=n._getFinalPath(s);const r=st({},n.headers);e!=null&&e.upsert&&(r["x-upsert"]="true");const o=await In(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:r}),d=new URL(n.url+o.url),u=d.searchParams.get("token");if(!u)throw new dc("No token returned by API");return{signedUrl:d.toString(),path:s,token:u}})}async update(s,e,n){return this.uploadOrUpdate("PUT",s,e,n)}async move(s,e,n){var i=this;return i.handleOperation(async()=>await In(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:s,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers}))}async copy(s,e,n){var i=this;return i.handleOperation(async()=>({path:(await In(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:s,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(s,e,n){var i=this;return i.handleOperation(async()=>{let r=i._getFinalPath(s),o=await In(i.fetch,`${i.url}/object/sign/${r}`,st({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:i.headers});const d=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${i.url}${o.signedURL}${d}`)}})}async createSignedUrls(s,e,n){var i=this;return i.handleOperation(async()=>{const r=await In(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:s},{headers:i.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return r.map(d=>st(st({},d),{},{signedUrl:d.signedURL?encodeURI(`${i.url}${d.signedURL}${o}`):null}))})}download(s,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),r=i?`?${i}`:"",o=this._getFinalPath(s),d=()=>ur(this.fetch,`${this.url}/${n}/${o}${r}`,{headers:this.headers,noResolveJson:!0});return new RN(d,this.shouldThrowOnError)}async info(s){var e=this;const n=e._getFinalPath(s);return e.handleOperation(async()=>Qu(await ur(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(s){var e=this;const n=e._getFinalPath(s);try{return await AN(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(uc(i)&&i instanceof sb){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}}getPublicUrl(s,e){const n=this._getFinalPath(s),i=[],r=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";r!==""&&i.push(r);const o=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});d!==""&&i.push(d);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}async remove(s){var e=this;return e.handleOperation(async()=>await jh(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:s},{headers:e.headers}))}async list(s,e,n){var i=this;return i.handleOperation(async()=>{const r=st(st(st({},MN),e),{},{prefix:s||""});return await In(i.fetch,`${i.url}/object/list/${i.bucketId}`,r,{headers:i.headers},n)})}async listV2(s,e){var n=this;return n.handleOperation(async()=>{const i=st({},s);return await In(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},e)})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const e=[];return s.width&&e.push(`width=${s.width}`),s.height&&e.push(`height=${s.height}`),s.resize&&e.push(`resize=${s.resize}`),s.format&&e.push(`format=${s.format}`),s.quality&&e.push(`quality=${s.quality}`),e.join("&")}};const ON="2.93.3",gr={"X-Client-Info":`storage-js/${ON}`};var UN=class extends ol{constructor(s,e={},n,i){const r=new URL(s);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."));const o=r.href.replace(/\/$/,""),d=st(st({},gr),e);super(o,d,n,"storage")}async listBuckets(s){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(s);return await ur(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(s){var e=this;return e.handleOperation(async()=>await ur(e.fetch,`${e.url}/bucket/${s}`,{headers:e.headers}))}async createBucket(s,e={public:!1}){var n=this;return n.handleOperation(async()=>await In(n.fetch,`${n.url}/bucket`,{id:s,name:s,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(s,e){var n=this;return n.handleOperation(async()=>await Zu(n.fetch,`${n.url}/bucket/${s}`,{id:s,name:s,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(s){var e=this;return e.handleOperation(async()=>await In(e.fetch,`${e.url}/bucket/${s}/empty`,{},{headers:e.headers}))}async deleteBucket(s){var e=this;return e.handleOperation(async()=>await jh(e.fetch,`${e.url}/bucket/${s}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(s){const e={};return s&&("limit"in s&&(e.limit=String(s.limit)),"offset"in s&&(e.offset=String(s.offset)),s.search&&(e.search=s.search),s.sortColumn&&(e.sortColumn=s.sortColumn),s.sortOrder&&(e.sortOrder=s.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},LN=class extends ol{constructor(s,e={},n){const i=s.replace(/\/$/,""),r=st(st({},gr),e);super(i,r,n,"storage")}async createBucket(s){var e=this;return e.handleOperation(async()=>await In(e.fetch,`${e.url}/bucket`,{name:s},{headers:e.headers}))}async listBuckets(s){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&n.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&n.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&n.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&n.set("sortOrder",s.sortOrder),s!=null&&s.search&&n.set("search",s.search);const i=n.toString(),r=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return await ur(e.fetch,r,{headers:e.headers})})}async deleteBucket(s){var e=this;return e.handleOperation(async()=>await jh(e.fetch,`${e.url}/bucket/${s}`,{},{headers:e.headers}))}from(s){var e=this;if(!jN(s))throw new dc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new yN({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(r,o){const d=r[o];return typeof d!="function"?d:async(...u)=>{try{return{data:await d.apply(r,u),error:null}}catch(p){if(i)throw p;return{data:null,error:p}}}}})}},BN=class extends ol{constructor(s,e={},n){const i=s.replace(/\/$/,""),r=st(st({},gr),{},{"Content-Type":"application/json"},e);super(i,r,n,"vectors")}async createIndex(s){var e=this;return e.handleOperation(async()=>await ln.post(e.fetch,`${e.url}/CreateIndex`,s,{headers:e.headers})||{})}async getIndex(s,e){var n=this;return n.handleOperation(async()=>await ln.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:s,indexName:e},{headers:n.headers}))}async listIndexes(s){var e=this;return e.handleOperation(async()=>await ln.post(e.fetch,`${e.url}/ListIndexes`,s,{headers:e.headers}))}async deleteIndex(s,e){var n=this;return n.handleOperation(async()=>await ln.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:s,indexName:e},{headers:n.headers})||{})}},PN=class extends ol{constructor(s,e={},n){const i=s.replace(/\/$/,""),r=st(st({},gr),{},{"Content-Type":"application/json"},e);super(i,r,n,"vectors")}async putVectors(s){var e=this;if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await ln.post(e.fetch,`${e.url}/PutVectors`,s,{headers:e.headers})||{})}async getVectors(s){var e=this;return e.handleOperation(async()=>await ln.post(e.fetch,`${e.url}/GetVectors`,s,{headers:e.headers}))}async listVectors(s){var e=this;if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error(`segmentIndex must be between 0 and ${s.segmentCount-1}`)}return e.handleOperation(async()=>await ln.post(e.fetch,`${e.url}/ListVectors`,s,{headers:e.headers}))}async queryVectors(s){var e=this;return e.handleOperation(async()=>await ln.post(e.fetch,`${e.url}/QueryVectors`,s,{headers:e.headers}))}async deleteVectors(s){var e=this;if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await ln.post(e.fetch,`${e.url}/DeleteVectors`,s,{headers:e.headers})||{})}},GN=class extends ol{constructor(s,e={},n){const i=s.replace(/\/$/,""),r=st(st({},gr),{},{"Content-Type":"application/json"},e);super(i,r,n,"vectors")}async createBucket(s){var e=this;return e.handleOperation(async()=>await ln.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:s},{headers:e.headers})||{})}async getBucket(s){var e=this;return e.handleOperation(async()=>await ln.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:s},{headers:e.headers}))}async listBuckets(s={}){var e=this;return e.handleOperation(async()=>await ln.post(e.fetch,`${e.url}/ListVectorBuckets`,s,{headers:e.headers}))}async deleteBucket(s){var e=this;return e.handleOperation(async()=>await ln.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:s},{headers:e.headers})||{})}},$N=class extends GN{constructor(s,e={}){super(s,e.headers||{},e.fetch)}from(s){return new FN(this.url,this.headers,s,this.fetch)}async createBucket(s){var e=()=>super.createBucket,n=this;return e().call(n,s)}async getBucket(s){var e=()=>super.getBucket,n=this;return e().call(n,s)}async listBuckets(s={}){var e=()=>super.listBuckets,n=this;return e().call(n,s)}async deleteBucket(s){var e=()=>super.deleteBucket,n=this;return e().call(n,s)}},FN=class extends BN{constructor(s,e,n,i){super(s,e,i),this.vectorBucketName=n}async createIndex(s){var e=()=>super.createIndex,n=this;return e().call(n,st(st({},s),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(s={}){var e=()=>super.listIndexes,n=this;return e().call(n,st(st({},s),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(s){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,s)}async deleteIndex(s){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,s)}index(s){return new HN(this.url,this.headers,this.vectorBucketName,s,this.fetch)}},HN=class extends PN{constructor(s,e,n,i,r){super(s,e,r),this.vectorBucketName=n,this.indexName=i}async putVectors(s){var e=()=>super.putVectors,n=this;return e().call(n,st(st({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(s){var e=()=>super.getVectors,n=this;return e().call(n,st(st({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(s={}){var e=()=>super.listVectors,n=this;return e().call(n,st(st({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(s){var e=()=>super.queryVectors,n=this;return e().call(n,st(st({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(s){var e=()=>super.deleteVectors,n=this;return e().call(n,st(st({},s),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},qN=class extends UN{constructor(s,e={},n,i){super(s,e,n,i)}from(s){return new DN(this.url,this.headers,s,this.fetch)}get vectors(){return new $N(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new LN(this.url+"/iceberg",this.headers,this.fetch)}};const ib="2.93.3",Xi=30*1e3,eh=3,Mu=eh*Xi,VN="http://localhost:9999",zN="supabase.auth.token",WN={"X-Client-Info":`gotrue-js/${ib}`},th="X-Supabase-Api-Version",lb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},JN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,YN=600*1e3;class hr extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Ve(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class KN extends hr{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function XN(s){return Ve(s)&&s.name==="AuthApiError"}class ci extends hr{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class da extends hr{constructor(e,n,i,r){super(e,i,r),this.name=n,this.status=i}}class an extends da{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Du(s){return Ve(s)&&s.name==="AuthSessionMissingError"}class Vi extends da{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lo extends da{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Bo extends da{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function QN(s){return Ve(s)&&s.name==="AuthImplicitGrantRedirectError"}class Px extends da{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ZN extends da{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class sh extends da{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Ou(s){return Ve(s)&&s.name==="AuthRetryableFetchError"}class Gx extends da{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class nh extends da{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$x=` 	
\r=`.split(""),ej=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<$x.length;e+=1)s[$x[e].charCodeAt(0)]=-2;for(let e=0;e<Xo.length;e+=1)s[Xo[e].charCodeAt(0)]=e;return s})();function Fx(s,e,n){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Xo[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(Xo[i]),e.queuedBits-=6}}function rb(s,e,n){const i=ej[s];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Hx(s){const e=[],n=d=>{e.push(String.fromCodePoint(d))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},o=d=>{nj(d,i,n)};for(let d=0;d<s.length;d+=1)rb(s.charCodeAt(d),r,o);return e.join("")}function tj(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function sj(s,e){for(let n=0;n<s.length;n+=1){let i=s.charCodeAt(n);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(s.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}tj(i,e)}}function nj(s,e,n){if(e.utf8seq===0){if(s<=127){n(s);return}for(let i=1;i<6;i+=1)if((s>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function nl(s){const e=[],n={queue:0,queuedBits:0},i=r=>{e.push(r)};for(let r=0;r<s.length;r+=1)rb(s.charCodeAt(r),n,i);return new Uint8Array(e)}function aj(s){const e=[];return sj(s,n=>e.push(n)),new Uint8Array(e)}function di(s){const e=[],n={queue:0,queuedBits:0},i=r=>{e.push(r)};return s.forEach(r=>Fx(r,n,i)),Fx(null,n,i),e.join("")}function ij(s){return Math.round(Date.now()/1e3)+s}function lj(){return Symbol("auth-callback")}const Rs=()=>typeof window<"u"&&typeof document<"u",ai={tested:!1,writable:!1},ob=()=>{if(!Rs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ai.tested)return ai.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),ai.tested=!0,ai.writable=!0}catch{ai.tested=!0,ai.writable=!1}return ai.writable};function rj(s){const e={},n=new URL(s);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,o)=>{e[o]=r})}catch{}return n.searchParams.forEach((i,r)=>{e[r]=i}),e}const cb=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),oj=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Qi=async(s,e,n)=>{await s.setItem(e,JSON.stringify(n))},ii=async(s,e)=>{const n=await s.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Is=async(s,e)=>{await s.removeItem(e)};class hc{constructor(){this.promise=new hc.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}hc.promiseConstructor=Promise;function Po(s){const e=s.split(".");if(e.length!==3)throw new nh("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!JN.test(e[i]))throw new nh("JWT not in base64url format");return{header:JSON.parse(Hx(e[0])),payload:JSON.parse(Hx(e[1])),signature:nl(e[2]),raw:{header:e[0],payload:e[1]}}}async function cj(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function dj(s,e){return new Promise((i,r)=>{(async()=>{for(let o=0;o<1/0;o++)try{const d=await s(o);if(!e(o,null,d)){i(d);return}}catch(d){if(!e(o,d)){r(d);return}}})()})}function uj(s){return("0"+s.toString(16)).substr(-2)}function hj(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let r="";for(let o=0;o<56;o++)r+=n.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,uj).join("")}async function mj(s){const n=new TextEncoder().encode(s),i=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(i);return Array.from(r).map(o=>String.fromCharCode(o)).join("")}async function fj(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const n=await mj(s);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zi(s,e,n=!1){const i=hj();let r=i;n&&(r+="/PASSWORD_RECOVERY"),await Qi(s,`${e}-code-verifier`,r);const o=await fj(i);return[o,i===o?"plain":"s256"]}const pj=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function xj(s){const e=s.headers.get(th);if(!e||!e.match(pj))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gj(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function bj(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const vj=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Wi(s){if(!vj.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Uu(){const s={};return new Proxy(s,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yj(s,e){return new Proxy(s,{get:(n,i,r)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,r)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,i,r)}})}function qx(s){return JSON.parse(JSON.stringify(s))}const li=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),wj=[502,503,504];async function Vx(s){var e;if(!oj(s))throw new sh(li(s),0);if(wj.includes(s.status))throw new sh(li(s),s.status);let n;try{n=await s.json()}catch(o){throw new ci(li(o),o)}let i;const r=xj(s);if(r&&r.getTime()>=lb["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Gx(li(n),s.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new an}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,d)=>o&&typeof d=="string",!0))throw new Gx(li(n),s.status,n.weak_password.reasons);throw new KN(li(n),s.status||500,i)}const Nj=(s,e,n,i)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function et(s,e,n,i){var r;const o=Object.assign({},i==null?void 0:i.headers);o[th]||(o[th]=lb["2024-01-01"].name),i!=null&&i.jwt&&(o.Authorization=`Bearer ${i.jwt}`);const d=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(d.redirect_to=i.redirectTo);const u=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",p=await jj(s,e,n+u,{headers:o,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(p):{data:Object.assign({},p),error:null}}async function jj(s,e,n,i,r,o){const d=Nj(e,i,r,o);let u;try{u=await s(n,Object.assign({},d))}catch(p){throw console.error(p),new sh(li(p),0)}if(u.ok||await Vx(u),i!=null&&i.noResolveJson)return u;try{return await u.json()}catch(p){await Vx(p)}}function An(s){var e;let n=null;_j(s)&&(n=Object.assign({},s),s.expires_at||(n.expires_at=ij(s.expires_in)));const i=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:n,user:i},error:null}}function zx(s){const e=An(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=s.weak_password),e}function La(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function kj(s){return{data:s,error:null}}function Sj(s){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:r,verification_type:o}=s,d=cc(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:n,hashed_token:i,redirect_to:r,verification_type:o},p=Object.assign({},d);return{data:{properties:u,user:p},error:null}}function Wx(s){return s}function _j(s){return s.access_token&&s.refresh_token&&s.expires_in}const Lu=["global","local","others"];class Tj{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=cb(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Lu[0]){if(Lu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Lu.join(", ")}`);try{return await et(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Ve(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await et(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:La})}catch(i){if(Ve(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=cc(e,["options"]),r=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await et(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Sj,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ve(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await et(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:La})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,r,o,d,u,p;try{const m={nextPage:null,lastPage:0,total:0},f=await et(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:Wx});if(f.error)throw f.error;const b=await f.json(),y=(d=f.headers.get("x-total-count"))!==null&&d!==void 0?d:0,N=(p=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&p!==void 0?p:[];return N.length>0&&(N.forEach(k=>{const T=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(k.split(";")[1].split("=")[1]);m[`${S}Page`]=T}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},b),m),error:null}}catch(m){if(Ve(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){Wi(e);try{return await et(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:La})}catch(n){if(Ve(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Wi(e);try{return await et(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:La})}catch(i){if(Ve(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){Wi(e);try{return await et(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:La})}catch(i){if(Ve(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){Wi(e.userId);try{const{data:n,error:i}=await et(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:i}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Wi(e.userId),Wi(e.id);try{return{data:await et(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,i,r,o,d,u,p;try{const m={nextPage:null,lastPage:0,total:0},f=await et(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(o=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&o!==void 0?o:""},xform:Wx});if(f.error)throw f.error;const b=await f.json(),y=(d=f.headers.get("x-total-count"))!==null&&d!==void 0?d:0,N=(p=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&p!==void 0?p:[];return N.length>0&&(N.forEach(k=>{const T=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(k.split(";")[1].split("=")[1]);m[`${S}Page`]=T}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},b),m),error:null}}catch(m){if(Ve(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await et(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await et(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await et(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Ve(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await et(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ve(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await et(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ve(n))return{data:null,error:n};throw n}}}function Jx(s={}){return{getItem:e=>s[e]||null,setItem:(e,n)=>{s[e]=n},removeItem:e=>{delete s[e]}}}const Ji={debug:!!(globalThis&&ob()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class db extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Cj extends db{}async function Ej(s,e,n){Ji.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),Ji.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){Ji.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,r.name);try{return await n()}finally{Ji.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,r.name)}}else{if(e===0)throw Ji.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Cj(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Ji.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Aj(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ub(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function Ij(s){return parseInt(s,16)}function Rj(s){const e=new TextEncoder().encode(s);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function Mj(s){var e;const{chainId:n,domain:i,expirationTime:r,issuedAt:o=new Date,nonce:d,notBefore:u,requestId:p,resources:m,scheme:f,uri:b,version:y}=s;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=s.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const N=ub(s.address),k=f?`${f}://${i}`:i,T=s.statement?`${s.statement}
`:"",S=`${k} wants you to sign in with your Ethereum account:
${N}

${T}`;let R=`URI: ${b}
Version: ${y}
Chain ID: ${n}${d?`
Nonce: ${d}`:""}
Issued At: ${o.toISOString()}`;if(r&&(R+=`
Expiration Time: ${r.toISOString()}`),u&&(R+=`
Not Before: ${u.toISOString()}`),p&&(R+=`
Request ID: ${p}`),m){let A=`
Resources:`;for(const I of m){if(!I||typeof I!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${I}`);A+=`
- ${I}`}R+=A}return`${S}
${R}`}class ms extends Error{constructor({message:e,code:n,cause:i,name:r}){var o;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(o=r??(i instanceof Error?i.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Qo extends ms{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Dj({error:s,options:e}){var n,i,r;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ms({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else if(s.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ms({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:s});if(e.mediation==="conditional"&&((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ms({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:s});if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ms({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:s})}else{if(s.name==="InvalidStateError")return new ms({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:s});if(s.name==="NotAllowedError")return new ms({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="NotSupportedError")return o.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new ms({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:s}):new ms({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:s});if(s.name==="SecurityError"){const d=window.location.hostname;if(hb(d)){if(o.rp.id!==d)return new ms({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ms({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ms({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:s})}else if(s.name==="UnknownError")return new ms({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ms({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}function Oj({error:s,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(s.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ms({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:s})}else{if(s.name==="NotAllowedError")return new ms({message:s.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s});if(s.name==="SecurityError"){const i=window.location.hostname;if(hb(i)){if(n.rpId!==i)return new ms({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:s})}else return new ms({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:s})}else if(s.name==="UnknownError")return new ms({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:s})}return new ms({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s})}class Uj{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Lj=new Uj;function Bj(s){if(!s)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(s);const{challenge:e,user:n,excludeCredentials:i}=s,r=cc(s,["challenge","user","excludeCredentials"]),o=nl(e).buffer,d=Object.assign(Object.assign({},n),{id:nl(n.id).buffer}),u=Object.assign(Object.assign({},r),{challenge:o,user:d});if(i&&i.length>0){u.excludeCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const m=i[p];u.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:nl(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function Pj(s){if(!s)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(s);const{challenge:e,allowCredentials:n}=s,i=cc(s,["challenge","allowCredentials"]),r=nl(e).buffer,o=Object.assign(Object.assign({},i),{challenge:r});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const u=n[d];o.allowCredentials[d]=Object.assign(Object.assign({},u),{id:nl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return o}function Gj(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const n=s;return{id:s.id,rawId:s.id,response:{attestationObject:di(new Uint8Array(s.response.attestationObject)),clientDataJSON:di(new Uint8Array(s.response.clientDataJSON))},type:"public-key",clientExtensionResults:s.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function $j(s){var e;if("toJSON"in s&&typeof s.toJSON=="function")return s.toJSON();const n=s,i=s.getClientExtensionResults(),r=s.response;return{id:s.id,rawId:s.id,response:{authenticatorData:di(new Uint8Array(r.authenticatorData)),clientDataJSON:di(new Uint8Array(r.clientDataJSON)),signature:di(new Uint8Array(r.signature)),userHandle:r.userHandle?di(new Uint8Array(r.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function hb(s){return s==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(s)}function Yx(){var s,e;return!!(Rs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Fj(s){try{const e=await navigator.credentials.create(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Qo("Browser returned unexpected credential type",e)}:{data:null,error:new Qo("Empty credential response",e)}}catch(e){return{data:null,error:Dj({error:e,options:s})}}}async function Hj(s){try{const e=await navigator.credentials.get(s);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Qo("Browser returned unexpected credential type",e)}:{data:null,error:new Qo("Empty credential response",e)}}catch(e){return{data:null,error:Oj({error:e,options:s})}}}const qj={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Vj={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Zo(...s){const e=r=>r!==null&&typeof r=="object"&&!Array.isArray(r),n=r=>r instanceof ArrayBuffer||ArrayBuffer.isView(r),i={};for(const r of s)if(r)for(const o in r){const d=r[o];if(d!==void 0)if(Array.isArray(d))i[o]=d;else if(n(d))i[o]=d;else if(e(d)){const u=i[o];e(u)?i[o]=Zo(u,d):i[o]=Zo(d)}else i[o]=d}return i}function zj(s,e){return Zo(qj,s,e||{})}function Wj(s,e){return Zo(Vj,s,e||{})}class Jj{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:i,signal:r},o){var d;try{const{data:u,error:p}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:p};const m=r??Lj.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:f}=u.webauthn.credential_options.publicKey;if(!f.name){const b=i;if(b)f.name=`${f.id}:${b}`;else{const N=(await this.client.getUser()).data.user,k=((d=N==null?void 0:N.user_metadata)===null||d===void 0?void 0:d.name)||(N==null?void 0:N.email)||(N==null?void 0:N.id)||"User";f.name=`${f.id}:${k}`}}f.displayName||(f.displayName=f.name)}switch(u.webauthn.type){case"create":{const f=zj(u.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:b,error:y}=await Fj({publicKey:f,signal:m});return b?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:b}},error:null}:{data:null,error:y}}case"request":{const f=Wj(u.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:b,error:y}=await Hj(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:f,signal:m}));return b?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:b}},error:null}:{data:null,error:y}}}}catch(u){return Ve(u)?{data:null,error:u}:{data:null,error:new ci("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},o){if(!n)return{data:null,error:new hr("rpId is required for WebAuthn authentication")};try{if(!Yx())return{data:null,error:new ci("Browser does not support WebAuthn",null)};const{data:d,error:u}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:i},signal:r},{request:o});if(!d)return{data:null,error:u};const{webauthn:p}=d;return this._verify({factorId:e,challengeId:d.challengeId,webauthn:{type:p.type,rpId:n,rpOrigins:i,credential_response:p.credential_response}})}catch(d){return Ve(d)?{data:null,error:d}:{data:null,error:new ci("Unexpected error in authenticate",d)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:r}={}},o){if(!n)return{data:null,error:new hr("rpId is required for WebAuthn registration")};try{if(!Yx())return{data:null,error:new ci("Browser does not support WebAuthn",null)};const{data:d,error:u}=await this._enroll({friendlyName:e});if(!d)return await this.client.mfa.listFactors().then(f=>{var b;return(b=f.data)===null||b===void 0?void 0:b.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:p,error:m}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:r},{create:o});return p?this._verify({factorId:d.id,challengeId:p.challengeId,webauthn:{rpId:n,rpOrigins:i,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(d){return Ve(d)?{data:null,error:d}:{data:null,error:new ci("Unexpected error in register",d)}}}}Aj();const Yj={url:VN,storageKey:zN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:WN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Kx(s,e,n){return await n()}const Yi={};class mr{get jwks(){var e,n;return(n=(e=Yi[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Yi[this.storageKey]=Object.assign(Object.assign({},Yi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Yi[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Yi[this.storageKey]=Object.assign(Object.assign({},Yi[this.storageKey]),{cachedAt:e})}constructor(e){var n,i,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},Yj),e);if(this.storageKey=o.storageKey,this.instanceID=(n=mr.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,mr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Rs()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new Tj({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=cb(o.fetch),this.lock=o.lock||Kx,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Rs()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=Ej:this.lock=Kx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Jj(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:ob()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jx(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Jx(this.memoryStorage)),Rs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d);try{await this._notifyAllSubscribers(d.data.event,d.data.session,!1)}catch(u){this._debug("#broadcastChannel","error",u)}})}this.initialize().catch(d=>{this._debug("#initialize()","error",d)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ib}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},i="none";if(Rs()&&(n=rj(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),Rs()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:o}=await this._getSessionFromURL(n,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),QN(o)){const p=(e=o.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:d,redirectType:u}=r;return this._debug("#_initialize()","detected session in URL",d,"redirect type",u),await this._saveSession(d),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ve(n)?this._returnResult({error:n}):this._returnResult({error:new ci("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,r;try{const o=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:An}),{data:d,error:u}=o;if(u||!d)return this._returnResult({data:{user:null,session:null},error:u});const p=d.session,m=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(o){if(Ve(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,i,r;try{let o;if("email"in e){const{email:f,password:b,options:y}=e;let N=null,k=null;this.flowType==="pkce"&&([N,k]=await zi(this.storage,this.storageKey)),o=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:f,password:b,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:N,code_challenge_method:k},xform:An})}else if("phone"in e){const{phone:f,password:b,options:y}=e;o=await et(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:b,data:(i=y==null?void 0:y.data)!==null&&i!==void 0?i:{},channel:(r=y==null?void 0:y.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:An})}else throw new Lo("You must provide either an email or phone number and a password");const{data:d,error:u}=o;if(u||!d)return await Is(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const p=d.session,m=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(o){if(await Is(this.storage,`${this.storageKey}-code-verifier`),Ve(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:d,options:u}=e;n=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:d,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:zx})}else if("phone"in e){const{phone:o,password:d,options:u}=e;n=await et(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:d,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:zx})}else throw new Lo("You must provide either an email or phone number and a password");const{data:i,error:r}=n;if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!i||!i.session||!i.user){const o=new Vi;return this._returnResult({data:{user:null,session:null},error:o})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,i,r,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,i,r,o,d,u,p,m,f,b,y;let N,k;if("message"in e)N=e.message,k=e.signature;else{const{chain:T,wallet:S,statement:R,options:A}=e;let I;if(Rs())if(typeof S=="object")I=S;else{const Y=window;if("ethereum"in Y&&typeof Y.ethereum=="object"&&"request"in Y.ethereum&&typeof Y.ethereum.request=="function")I=Y.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=S}const j=new URL((n=A==null?void 0:A.url)!==null&&n!==void 0?n:window.location.href),E=await I.request({method:"eth_requestAccounts"}).then(Y=>Y).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!E||E.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=ub(E[0]);let L=(i=A==null?void 0:A.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!L){const Y=await I.request({method:"eth_chainId"});L=Ij(Y)}const G={domain:j.host,address:D,statement:R,uri:j.href,version:"1",chainId:L,nonce:(r=A==null?void 0:A.signInWithEthereum)===null||r===void 0?void 0:r.nonce,issuedAt:(d=(o=A==null?void 0:A.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(u=A==null?void 0:A.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(p=A==null?void 0:A.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=A==null?void 0:A.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=A==null?void 0:A.signInWithEthereum)===null||f===void 0?void 0:f.resources};N=Mj(G),k=await I.request({method:"personal_sign",params:[Rj(N),D]})}try{const{data:T,error:S}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:N,signature:k},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:An});if(S)throw S;if(!T||!T.session||!T.user){const R=new Vi;return this._returnResult({data:{user:null,session:null},error:R})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:S})}catch(T){if(Ve(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async signInWithSolana(e){var n,i,r,o,d,u,p,m,f,b,y,N;let k,T;if("message"in e)k=e.message,T=e.signature;else{const{chain:S,wallet:R,statement:A,options:I}=e;let j;if(Rs())if(typeof R=="object")j=R;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))j=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=R}const E=new URL((n=I==null?void 0:I.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const D=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},I==null?void 0:I.signInWithSolana),{version:"1",domain:E.host,uri:E.href}),A?{statement:A}:null));let L;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")L=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)L=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)k=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),T=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${E.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${E.href}`,`Issued At: ${(r=(i=I==null?void 0:I.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((o=I==null?void 0:I.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${I.signInWithSolana.notBefore}`]:[],...!((d=I==null?void 0:I.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${I.signInWithSolana.expirationTime}`]:[],...!((u=I==null?void 0:I.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${I.signInWithSolana.chainId}`]:[],...!((p=I==null?void 0:I.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${I.signInWithSolana.nonce}`]:[],...!((m=I==null?void 0:I.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${I.signInWithSolana.requestId}`]:[],...!((b=(f=I==null?void 0:I.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||b===void 0)&&b.length?["Resources",...I.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const D=await j.signMessage(new TextEncoder().encode(k),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=D}}try{const{data:S,error:R}=await et(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:di(T)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(N=e.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:An});if(R)throw R;if(!S||!S.session||!S.user){const A=new Vi;return this._returnResult({data:{user:null,session:null},error:A})}return S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),this._returnResult({data:Object.assign({},S),error:R})}catch(S){if(Ve(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async _exchangeCodeForSession(e){const n=await ii(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new ZN;const{data:o,error:d}=await et(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:An});if(await Is(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!o||!o.session||!o.user){const u=new Vi;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:r??null}),error:d})}catch(o){if(await Is(this.storage,`${this.storageKey}-code-verifier`),Ve(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:i,token:r,access_token:o,nonce:d}=e,u=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:o,nonce:d,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:An}),{data:p,error:m}=u;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p||!p.session||!p.user){const f=new Vi;return this._returnResult({data:{user:null,session:null},error:f})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:m})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,i,r,o,d;try{if("email"in e){const{email:u,options:p}=e;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await zi(this.storage,this.storageKey));const{error:b}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},create_user:(i=p==null?void 0:p.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in e){const{phone:u,options:p}=e,{data:m,error:f}=await et(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},create_user:(o=p==null?void 0:p.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(d=p==null?void 0:p.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f})}throw new Lo("You must provide either an email or phone number.")}catch(u){if(await Is(this.storage,`${this.storageKey}-code-verifier`),Ve(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var n,i;try{let r,o;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:d,error:u}=await et(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:r,xform:An});if(u)throw u;if(!d)throw new Error("An error occurred on token verification.");const p=d.session,m=d.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(r){if(Ve(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithSSO(e){var n,i,r,o,d;try{let u=null,p=null;this.flowType==="pkce"&&([u,p]=await zi(this.storage,this.storageKey));const m=await et(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:p}),headers:this.headers,xform:kj});return!((o=m.data)===null||o===void 0)&&o.url&&Rs()&&!(!((d=e.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(u){if(await Is(this.storage,`${this.storageKey}-code-verifier`),Ve(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new an;const{error:r}=await et(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:r})})}catch(e){if(Ve(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:r,options:o}=e,{error:d}=await et(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in e){const{phone:i,type:r,options:o}=e,{data:d,error:u}=await et(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u})}throw new Lo("You must provide either an email or phone number and a type")}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ii(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Mu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const d=await ii(this.userStorage,this.storageKey+"-user");d!=null&&d.user?e.user=d.user:e.user=Uu()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};e.user=yj(e.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:r},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:La}):await this._useSession(async n=>{var i,r,o;const{data:d,error:u}=n;if(u)throw u;return!(!((i=d.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new an}:await et(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(r=d.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0,xform:La})})}catch(n){if(Ve(n))return Du(n)&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:r,error:o}=i;if(o)throw o;if(!r.session)throw new an;const d=r.session;let u=null,p=null;this.flowType==="pkce"&&e.email!=null&&([u,p]=await zi(this.storage,this.storageKey));const{data:m,error:f}=await et(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:p}),jwt:d.access_token,xform:La});if(f)throw f;return d.user=m.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(i){if(await Is(this.storage,`${this.storageKey}-code-verifier`),Ve(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new an;const n=Date.now()/1e3;let i=n,r=!0,o=null;const{payload:d}=Po(e.access_token);if(d.exp&&(i=d.exp,r=i<=n),r){const{data:u,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!u)return{data:{user:null,session:null},error:null};o=u}else{const{data:u,error:p}=await this._getUser(e.access_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});o={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(Ve(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:d,error:u}=n;if(u)throw u;e=(i=d.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new an;const{data:r,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):r?this._returnResult({data:{user:r.user,session:r},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ve(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!Rs())throw new Bo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Bo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Px("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bo("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Px("No code detected.");const{data:A,error:I}=await this._exchangeCodeForSession(e.code);if(I)throw I;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:o,refresh_token:d,expires_in:u,expires_at:p,token_type:m}=e;if(!o||!u||!d||!m)throw new Bo("No session defined in URL");const f=Math.round(Date.now()/1e3),b=parseInt(u);let y=f+b;p&&(y=parseInt(p));const N=y-f;N*1e3<=Xi&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${N}s, should have been closer to ${b}s`);const k=y-b;f-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,y,f):f-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,y,f);const{data:T,error:S}=await this._getUser(o);if(S)throw S;const R={provider_token:i,provider_refresh_token:r,access_token:o,expires_in:b,expires_at:y,refresh_token:d,token_type:m,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:R,redirectType:e.type},error:null})}catch(i){if(Ve(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ii(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:r,error:o}=n;if(o&&!Du(o))return this._returnResult({error:o});const d=(i=r.session)===null||i===void 0?void 0:i.access_token;if(d){const{error:u}=await this.admin.signOut(d,e);if(u&&!(XN(u)&&(u.status===404||u.status===401||u.status===403)||Du(u)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Is(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=lj(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,r;try{const{data:{session:o},error:d}=n;if(d)throw d;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await zi(this.storage,this.storageKey,!0));try{return await et(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(await Is(this.storage,`${this.storageKey}-code-verifier`),Ve(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:i,error:r}=await this._useSession(async o=>{var d,u,p,m,f;const{data:b,error:y}=o;if(y)throw y;const N=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await et(this.fetch,"GET",N,{headers:this.headers,jwt:(f=(m=b.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(r)throw r;return Rs()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:e.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(Ve(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var i;try{const{error:r,data:{session:o}}=n;if(r)throw r;const{options:d,provider:u,token:p,access_token:m,nonce:f}=e,b=await et(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=o==null?void 0:o.access_token)!==null&&i!==void 0?i:void 0,body:{provider:u,id_token:p,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:An}),{data:y,error:N}=b;return N?this._returnResult({data:{user:null,session:null},error:N}):!y||!y.session||!y.user?this._returnResult({data:{user:null,session:null},error:new Vi}):(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),this._returnResult({data:y,error:N}))}catch(r){if(await Is(this.storage,`${this.storageKey}-code-verifier`),Ve(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,r;const{data:o,error:d}=n;if(d)throw d;return await et(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await dj(async r=>(r>0&&await cj(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await et(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:An})),(r,o)=>{const d=200*Math.pow(2,r);return o&&Ou(o)&&Date.now()+d-i<Xi})}catch(i){if(this._debug(n,"error",i),Ve(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),Rs()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await ii(this.storage,this.storageKey);if(r&&this.userStorage){let d=await ii(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:r.user},await Qi(this.userStorage,this.storageKey+"-user",d)),r.user=(e=d==null?void 0:d.user)!==null&&e!==void 0?e:Uu()}else if(r&&!r.user&&!r.user){const d=await ii(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(r.user=d.user,await Is(this.storage,this.storageKey+"-user"),await Qi(this.storage,this.storageKey,r)):r.user=Uu()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const o=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Mu;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${Mu}s`),o){if(this.autoRefreshToken&&r.refresh_token){const{error:d}=await this._callRefreshToken(r.refresh_token);d&&(console.error(d),Ou(d)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:u}=await this._getUser(r.access_token);!u&&(d!=null&&d.user)?(r.user=d.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(i,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new an;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new hc;const{data:o,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!o.session)throw new an;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const u={data:o.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(o){if(this._debug(r,"error",o),Ve(o)){const d={data:null,error:o};return Ou(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(d),d}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,i=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],d=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,n)}catch(p){o.push(p)}});if(await Promise.all(d),o.length>0){for(let u=0;u<o.length;u+=1)console.error(o[u]);throw o[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Is(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Qi(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const o=qx(r);await Qi(this.storage,this.storageKey,o)}else{const r=qx(n);await Qi(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Is(this.storage,this.storageKey),await Is(this.storage,this.storageKey+"-code-verifier"),await Is(this.storage,this.storageKey+"-user"),this.userStorage&&await Is(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Rs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Xi);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-e)/Xi);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Xi}ms, refresh threshold is ${eh} ticks`),r<=eh&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof db)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const r=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[o,d]=await zi(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(d)}`});r.push(u.toString())}if(i!=null&&i.queryParams){const o=new URLSearchParams(i.queryParams);r.push(o.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;return o?this._returnResult({data:null,error:o}):await et(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,r;const{data:o,error:d}=n;if(d)return this._returnResult({data:null,error:d});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:m}=await et(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&p.type==="totp"&&(!((r=p==null?void 0:p.totp)===null||r===void 0)&&r.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;if(o)return this._returnResult({data:null,error:o});const d=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Gj(e.webauthn.credential_response):$j(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:p}=await et(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:d,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:p}))})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:o}=n;if(o)return this._returnResult({data:null,error:o});const d=await et(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});if(d.error)return d;const{data:u}=d;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Bj(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Pj(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const r={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])r.all.push(o),o.status==="verified"&&r[o.factor_type].push(o);return{data:r,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,i,r,o;if(e)try{const{payload:N}=Po(e);let k=null;N.aal&&(k=N.aal);let T=k;const{data:{user:S},error:R}=await this.getUser(e);if(R)return this._returnResult({data:null,error:R});((i=(n=S==null?void 0:S.factors)===null||n===void 0?void 0:n.filter(j=>j.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(T="aal2");const I=N.amr||[];return{data:{currentLevel:k,nextLevel:T,currentAuthenticationMethods:I},error:null}}catch(N){if(Ve(N))return this._returnResult({data:null,error:N});throw N}const{data:{session:d},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!d)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:p}=Po(d.access_token);let m=null;p.aal&&(m=p.aal);let f=m;((o=(r=d.user.factors)===null||r===void 0?void 0:r.filter(N=>N.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(f="aal2");const y=p.amr||[];return{data:{currentLevel:m,nextLevel:f,currentAuthenticationMethods:y},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;return r?this._returnResult({data:null,error:r}):i?await et(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new an})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:r},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!r)return this._returnResult({data:null,error:new an});const d=await et(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return d.data&&d.data.redirect_url&&Rs()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(i){if(Ve(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:r},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!r)return this._returnResult({data:null,error:new an});const d=await et(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:r.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return d.data&&d.data.redirect_url&&Rs()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(i){if(Ve(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;return i?this._returnResult({data:null,error:i}):n?await et(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:r=>({data:r,error:null})}):this._returnResult({data:null,error:new an})})}catch(e){if(Ve(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:i},error:r}=n;return r?this._returnResult({data:null,error:r}):i?(await et(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new an})})}catch(n){if(Ve(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(u=>u.kid===e);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(u=>u.kid===e),i&&this.jwks_cached_at+YN>r)return i;const{data:o,error:d}=await et(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=r,i=o.keys.find(u=>u.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:N,error:k}=await this.getSession();if(k||!N.session)return this._returnResult({data:null,error:k});i=N.session.access_token}const{header:r,payload:o,signature:d,raw:{header:u,payload:p}}=Po(i);n!=null&&n.allowExpired||gj(o.exp);const m=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!m){const{error:N}=await this.getUser(i);if(N)throw N;return{data:{claims:o,header:r,signature:d},error:null}}const f=bj(r.alg),b=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,b,d,aj(`${u}.${p}`)))throw new nh("Invalid JWT signature");return{data:{claims:o,header:r,signature:d},error:null}}catch(i){if(Ve(i))return this._returnResult({data:null,error:i});throw i}}}mr.nextInstanceID={};const Kj=mr,Xj="2.93.3";let ar="";typeof Deno<"u"?ar="deno":typeof document<"u"?ar="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ar="react-native":ar="node";const Qj={"X-Client-Info":`supabase-js-${ar}/${Xj}`},Zj={headers:Qj},ek={schema:"public"},tk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sk={};function fr(s){"@babel/helpers - typeof";return fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fr(s)}function nk(s,e){if(fr(s)!="object"||!s)return s;var n=s[Symbol.toPrimitive];if(n!==void 0){var i=n.call(s,e);if(fr(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(s)}function ak(s){var e=nk(s,"string");return fr(e)=="symbol"?e:e+""}function ik(s,e,n){return(e=ak(e))in s?Object.defineProperty(s,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[e]=n,s}function Xx(s,e){var n=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(s,r).enumerable})),n.push.apply(n,i)}return n}function is(s){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xx(Object(n),!0).forEach(function(i){ik(s,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(n)):Xx(Object(n)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(n,i))})}return s}const lk=s=>s?(...e)=>s(...e):(...e)=>fetch(...e),rk=()=>Headers,ok=(s,e,n)=>{const i=lk(n),r=rk();return async(o,d)=>{var u;const p=(u=await e())!==null&&u!==void 0?u:s;let m=new r(d==null?void 0:d.headers);return m.has("apikey")||m.set("apikey",s),m.has("Authorization")||m.set("Authorization",`Bearer ${p}`),i(o,is(is({},d),{},{headers:m}))}};function ck(s){return s.endsWith("/")?s:s+"/"}function dk(s,e){var n,i;const{db:r,auth:o,realtime:d,global:u}=s,{db:p,auth:m,realtime:f,global:b}=e,y={db:is(is({},p),r),auth:is(is({},m),o),realtime:is(is({},f),d),storage:{},global:is(is(is({},b),u),{},{headers:is(is({},(n=b==null?void 0:b.headers)!==null&&n!==void 0?n:{}),(i=u==null?void 0:u.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return s.accessToken?y.accessToken=s.accessToken:delete y.accessToken,y}function uk(s){const e=s==null?void 0:s.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(ck(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var hk=class extends Kj{constructor(s){super(s)}},mk=class{constructor(s,e,n){var i,r;this.supabaseUrl=s,this.supabaseKey=e;const o=uk(s);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const d=`sb-${o.hostname.split(".")[0]}-auth-token`,u={db:ek,realtime:sk,auth:is(is({},tk),{},{storageKey:d}),global:Zj},p=dk(n??{},u);if(this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(r=p.global.headers)!==null&&r!==void 0?r:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(f,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=p.auth)!==null&&m!==void 0?m:{},this.headers,p.global.fetch)}this.fetch=ok(e,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(is({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new Xw(new URL("rest/v1",o).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new qN(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new zw(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(s,e,n)}channel(s,e={config:{}}){return this.realtime.channel(s,e)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var s=this,e,n;if(s.accessToken)return await s.accessToken();const{data:i}=await s.auth.getSession();return(e=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:s.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:r,storageKey:o,flowType:d,lock:u,debug:p,throwOnError:m},f,b){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new hk({url:this.authUrl.href,headers:is(is({},y),f),storageKey:o,autoRefreshToken:s,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:r,flowType:d,lock:u,debug:p,throwOnError:m,fetch:b,hasCustomAuthorizationHeader:Object.keys(this.headers).some(N=>N.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new fN(this.realtimeUrl.href,is(is({},s),{},{params:is(is({},{apikey:this.supabaseKey}),s==null?void 0:s.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,e)=>{this._handleTokenChanged(s,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(s,e,n){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const fk=(s,e,n)=>new mk(s,e,n);function pk(){if(typeof window<"u")return!1;const s=globalThis.process;if(!s)return!1;const e=s.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}pk()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const xk="https://tnvmpjxomfahszuhmlvj.supabase.co",gk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRudm1wanhvbWZhaHN6dWhtbHZqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk5OTA5OTYsImV4cCI6MjA4NTU2Njk5Nn0.0Hd-YhnzO-16dVptFHMjAc84dcy0P1Z58bDIWyVNZE4",Pe=fk(xk,gk),mb=typeof window<"u"&&!!window.wpApiSettings;mb&&`${window.wpApiSettings.root}`;const ec=mb?`${window.wpApiSettings.root}cricket-core/v1/user`:null,Bu=(s,e)=>({id:s.id,name:s.name,logoUrl:s.logo_url,location:s.location,players:e.filter(n=>n.team_id===s.id).map(n=>({id:n.id,userId:n.user_id,name:n.name,role:n.role,photoUrl:n.photo_url,stats:n.stats||{},playerDetails:n.details||{}}))}),Qx=(s,e=[])=>{var r,o;const n=e.find(d=>d.id===s.team_a_id),i=e.find(d=>d.id===s.team_b_id);return{id:s.id,tournamentId:s.tournament_id,teamAId:s.team_a_id,teamBId:s.team_b_id,teamAName:(n==null?void 0:n.name)||"Unknown Team",teamBName:(i==null?void 0:i.name)||"Unknown Team",date:s.date,venue:s.venue,status:s.status,result:s.result,winnerId:s.winner_id,isArchived:s.is_archived,teamAScore:(r=s.scores)==null?void 0:r.teamAScore,teamBScore:(o=s.scores)==null?void 0:o.teamBScore,savedState:s.saved_state,...s.details||{}}},bk=async(s,e)=>{const n=[],i=[],r=[],o=[],d=[],u=[],p=[],m=[];s.orgs.forEach(q=>{n.push({id:q.id,name:q.name,type:q.type,country:q.country,logo_url:q.logoUrl,is_public:q.isPublic,created_by:q.createdBy,details:{description:q.description,address:q.address,allowMemberEditing:q.allowMemberEditing,members:q.members,applications:q.applications,sponsors:q.sponsors,sponsorSettings:q.sponsorSettings}}),(q.parentOrgIds||[]).forEach(ce=>{ce&&ce!==q.id&&m.push({parent_org_id:ce,child_org_id:q.id,status:"APPROVED"})}),q.memberTeams.forEach(ce=>{u.push({organization_id:q.id,team_id:ce.id}),i.push({id:ce.id,name:ce.name,logo_url:ce.logoUrl,location:ce.location}),ce.players.forEach(Q=>{r.push({id:Q.id,team_id:ce.id,name:Q.name,role:Q.role,photo_url:Q.photoUrl,stats:Q.stats,details:Q.playerDetails})})}),q.tournaments.forEach(ce=>{o.push({id:ce.id,org_id:q.id,name:ce.name,format:ce.format,status:ce.status,config:{pointsConfig:ce.pointsConfig,overs:ce.overs}}),(ce.teamIds||[]).forEach(Q=>{p.push({tournament_id:ce.id,team_id:Q})})}),q.fixtures.forEach(ce=>{d.push({id:ce.id,tournament_id:ce.tournamentId,team_a_id:ce.teamAId,team_b_id:ce.teamBId,date:ce.date,venue:ce.venue,status:ce.status,result:ce.result,winner_id:ce.winnerId,scores:{teamAScore:ce.teamAScore,teamBScore:ce.teamBScore},saved_state:ce.savedState,is_archived:ce.isArchived,details:{umpires:ce.umpires,tossWinnerId:ce.tossWinnerId,tossDecision:ce.tossDecision}})})}),(s.standaloneMatches||[]).forEach(q=>{d.push({id:q.id,tournament_id:null,team_a_id:q.teamAId,team_b_id:q.teamBId,date:q.date,venue:q.venue,status:q.status,result:q.result,winner_id:q.winnerId,scores:{teamAScore:q.teamAScore,teamBScore:q.teamBScore},saved_state:q.savedState,is_archived:q.isArchived,details:{umpires:q.umpires,tossWinnerId:q.tossWinnerId,tossDecision:q.tossDecision}})});const f=[],b=[];s.orgs.forEach(q=>{q.tournaments.forEach(ce=>{(ce.groups||[]).forEach(Q=>{f.push({id:Q.id,tournament_id:ce.id,name:Q.name}),Q.teams.forEach(ne=>{b.push({group_id:Q.id,team_id:ne.id})})})})}),console.log("DB_SYNC_DEBUG: Pushing Orgs with members:",n.map(q=>{var ce;return{id:q.id,name:q.name,memberCount:(ce=q.members)==null?void 0:ce.length}})),console.log("DB_SYNC_DEBUG: Pushing Teams:",i.map(q=>({id:q.id,name:q.name}))),console.log("DB_SYNC_DEBUG: Pushing Org-Team Links:",u.length,"links"),console.log("DB_SYNC_DEBUG: Pushing Tournament-Team Links:",p.length,"links"),console.log("DB_SYNC_DEBUG: Pushing Groups:",f.length,"groups"),console.log("DB_SYNC_DEBUG: Pushing Group-Team Links:",b.length,"assignments"),console.log("DB_SYNC_DEBUG: Pushing Affiliations:",m.length,"links");const{error:y}=await Pe.from("organizations").upsert(n),{error:N}=await Pe.from("tournaments").upsert(o),{error:k}=await Pe.from("teams").upsert(i),{error:T}=await Pe.from("roster_players").upsert(r),{error:S}=await Pe.from("fixtures").upsert(d),{error:R}=await Pe.from("media_posts").upsert(s.mediaPosts.map(q=>({id:q.id,type:q.type,title:q.title,caption:q.caption,author_name:q.authorName,content_url:q.contentUrl,likes:q.likes,timestamp:new Date(q.timestamp),comments:q.comments||[],reactions:q.reactions||{}}))),{error:A}=u.length>0?await Pe.from("organization_teams").upsert(u,{onConflict:"organization_id,team_id",ignoreDuplicates:!0}):{error:null},{error:I}=p.length>0?await Pe.from("tournament_teams").upsert(p,{onConflict:"tournament_id,team_id",ignoreDuplicates:!0}):{error:null},{error:j}=f.length>0?await Pe.from("tournament_groups").upsert(f,{onConflict:"id",ignoreDuplicates:!1}):{error:null},{error:E}=b.length>0?await Pe.from("group_teams").upsert(b,{onConflict:"group_id,team_id",ignoreDuplicates:!0}):{error:null},{error:D}=m.length>0?await Pe.from("organization_affiliations").upsert(m,{onConflict:"parent_org_id,child_org_id",ignoreDuplicates:!0}):{error:null},{error:L}=(s.issues||[]).length>0?await Pe.from("game_issues").upsert((s.issues||[]).map(q=>({id:q.id,match_id:q.matchId,lodged_by:q.lodgedBy,team_id:q.teamId,type:q.type,title:q.title,description:q.description,status:q.status,evidence_urls:q.evidenceUrls,admin_comments:q.adminComments,resolution:q.resolution,admin_response:q.adminResponse,resolved_at:q.resolvedAt?new Date(q.resolvedAt):null,timestamp:new Date(q.timestamp)}))):{error:null},{error:G}=(s.matchReports||[]).length>0?await Pe.from("match_reports").upsert((s.matchReports||[]).map(q=>({id:q.id,match_id:q.matchId,submitted_by:q.submittedBy,status:q.status,scorecard_photo_url:q.scorecardPhotoUrl,admin_feedback:q.adminFeedback,player_performances:q.playerPerformances,umpires:q.umpires,umpire_ratings:q.umpireRatings,facility_rating:q.facilityRating,spirit_rating:q.spiritRating,timestamp:new Date(q.timestamp),team_a_performance:{score:q.teamAScore,wickets:q.teamAWickets,overs:q.teamAOvers},team_b_performance:{score:q.teamBScore,wickets:q.teamBWickets,overs:q.teamBOvers}}))):{error:null},{error:Y}=(s.umpireReports||[]).length>0?await Pe.from("umpire_reports").upsert((s.umpireReports||[]).map(q=>({id:q.id,match_id:q.matchId,fixture_id:q.fixtureId,submitted_by:q.submittedBy,umpire_name:q.umpireName,status:q.status,match_outcome:q.matchOutcome,conduct_notes:q.conductNotes,rule_violations:q.ruleViolations,player_behavior_ratings:q.playerBehaviorRatings,facility_report:q.facilityReport,incident_reports:q.incidentReports,supporting_documents:q.supportingDocuments,organization_id:q.organizationId,reviewed_by:q.reviewedBy,review_notes:q.reviewNotes,timestamp:new Date(q.timestamp)}))):{error:null};return y||N||k||T||S||R||A||I||j||E||D||L||G||Y?(console.error("Relational Sync Error Details:"),y&&console.error("Organizations Error:",JSON.stringify(y,null,2)),N&&console.error("Tournaments Error:",JSON.stringify(N,null,2)),k&&console.error("Teams Error:",JSON.stringify(k,null,2)),T&&console.error("Players Error:",JSON.stringify(T,null,2)),S&&console.error("Fixtures Error:",JSON.stringify(S,null,2)),R&&console.error("Media Error:",JSON.stringify(R,null,2)),L&&console.error("Issues Error:",JSON.stringify(L,null,2)),G&&console.error("Match Reports Error:",JSON.stringify(G,null,2)),Y&&console.error("Umpire Reports Error:",JSON.stringify(Y,null,2)),console.error("Summary:",{err1:y,err2:N,err3:k,err4:T,err5:S,err6:R,err7:A,err8:I,err9:j,err10:E,err11:D,err12:L,err13:G,err14:Y}),!1):(console.log("DB_SYNC_DEBUG: Sync Successful (including groups & junction tables)"),!0)},Pu=async(s,e)=>{try{const{error:n}=await Pe.from("organization_affiliations").insert({parent_org_id:s,child_org_id:e.applicantId,status:"PENDING"});return n?(console.error("Affiliation Request (Junction) Failed:",n),!1):!0}catch(n){return console.error("Affiliation Request Exception:",n),!1}},vk=async(s,e,n)=>{var i,r;try{const{data:o}=await Pe.from("roster_players").select("user_id").eq("id",s).single();if(o!=null&&o.user_id)return{success:!1,message:"This profile is already claimed by another user."};const{data:d}=await Pe.from("roster_players").select(`
            team_id,
            teams (
                organization_teams (
                    organization_id
                )
            )
        `).eq("id",s).single(),u=Array.isArray(d==null?void 0:d.teams)?d.teams[0]:d==null?void 0:d.teams,p=(r=(i=u==null?void 0:u.organization_teams)==null?void 0:i[0])==null?void 0:r.organization_id;if(!p)return{success:!1,message:"This player belongs to a team that is not part of any managed club."};const f=`claim-req-${Date.now()}-${e.substring(0,5)}`,b=`CLAIM_REQ:${e}:${s}:${n}`,{error:y}=await Pe.from("organizations").insert({id:f,name:b,type:"CLUB",is_public:!1,created_by:e,country:"Global",ground_location:"Virtual",established_year:new Date().getFullYear(),member_teams:[],tournaments:[],groups:[]});if(y)return console.error("Claim Failed: Proxy Org Creation Error",y),{success:!1,message:"Failed to initialize claim request."};const{error:N}=await Pe.from("organization_affiliations").insert({parent_org_id:p,child_org_id:f,status:"PENDING"});return N?(console.error("Claim Failed: Affiliation Insert Error",N),await Pe.from("organizations").delete().eq("id",f),{success:!1,message:"Failed to send request due to a database error."}):{success:!0}}catch(o){return console.error("Claim Error",o),{success:!1,message:"An unexpected error occurred."}}},yk=async(s,e,n)=>{const{error:i}=await Pe.from("roster_players").update({user_id:n}).eq("id",e);return i?!1:(await Pe.from("organization_affiliations").delete().eq("child_org_id",s),await Pe.from("organizations").delete().eq("id",s),!0)},Zx=async(s,e,n)=>{const{error:i}=await Pe.from("organization_affiliations").update({status:n}).match({parent_org_id:s,child_org_id:e});return i?(console.error("Update Affiliation Status Failed:",i),!1):!0},wk=async s=>{var e,n,i,r,o,d,u,p,m,f,b;try{const[y,N,k,T,S,R,A,I,j,E,D,L,G,Y]=await Promise.all([Pe.from("organizations").select("*"),Pe.from("teams").select("*"),Pe.from("roster_players").select("*"),Pe.from("tournaments").select("*"),Pe.from("fixtures").select("*"),Pe.from("media_posts").select("*"),Pe.from("organization_teams").select("*"),Pe.from("tournament_teams").select("*"),Pe.from("tournament_groups").select("*"),Pe.from("group_teams").select("*"),Pe.from("organization_affiliations").select("*"),Pe.from("game_issues").select("*"),Pe.from("match_reports").select("*"),Pe.from("umpire_reports").select("*")]);if(y.error||N.error||k.error)throw console.error("Fetch failed with errors:",{orgsErr:y.error,teamsErr:N.error,playersErr:k.error}),new Error("Fetch failed");console.log("DB_SYNC_DEBUG: Raw Data Counts:",{orgs:((e=y.data)==null?void 0:e.length)||0,teams:((n=N.data)==null?void 0:n.length)||0,players:((i=k.data)==null?void 0:i.length)||0,orgTeamLinks:((r=A.data)==null?void 0:r.length)||0,tournaments:((o=T.data)==null?void 0:o.length)||0,fixtures:((d=S.data)==null?void 0:d.length)||0}),console.log("DB_SYNC_DEBUG: Raw Orgs IDs:",(u=y.data)==null?void 0:u.map(M=>M.id)),console.log("DB_SYNC_DEBUG: Raw Team IDs:",(p=N.data)==null?void 0:p.map(M=>M.id)),console.log("DB_SYNC_DEBUG: Raw Org-Team Links:",A.data);const q=y.data.map(M=>{var re,Re,$e,ue,be,Te,$,oe,Ae,De,Me,Be,ze,Ke;const B=((re=T.data)==null?void 0:re.filter(Ce=>Ce.org_id===M.id))||[],Z=((Re=A.data)==null?void 0:Re.filter(Ce=>Ce.organization_id===M.id).map(Ce=>Ce.team_id))||[],ae=((($e=N.data)==null?void 0:$e.filter(Ce=>Z.includes(Ce.id)))||[]).map(Ce=>Bu(Ce,k.data||[])),P=B.map(Ce=>Ce.id),W=((ue=S.data)==null?void 0:ue.filter(Ce=>P.includes(Ce.tournament_id)).map(Ce=>Qx(Ce,N.data||[])))||[],X=B.map(Ce=>{var Ue,qe;const St=((Ue=I.data)==null?void 0:Ue.filter(mt=>mt.tournament_id===Ce.id).map(mt=>mt.team_id))||[],Ee=((qe=j.data)==null?void 0:qe.filter(mt=>mt.tournament_id===Ce.id).map(mt=>{var pt;const ft=((pt=E.data)==null?void 0:pt.filter(Ze=>Ze.group_id===mt.id).map(Ze=>Ze.team_id))||[],ot=(N.data||[]).map(Ze=>Bu(Ze,k.data||[])).filter(Ze=>ft.includes(Ze.id));return{id:mt.id,name:mt.name,teams:ot}}))||[];return{id:Ce.id,name:Ce.name,format:Ce.format,status:Ce.status,teamIds:St,groups:Ee,orgId:Ce.org_id,...Ce.config}}),we=((be=M.details)==null?void 0:be.applications)||M.applications||[],te=((Te=D.data)==null?void 0:Te.filter(Ce=>Ce.parent_org_id===M.id&&Ce.status==="PENDING").map(Ce=>{const St=Ce.child_org_id||"",Ee=y.data.find(Ue=>Ue.id===St);if(Ee&&Ee.name.startsWith("CLAIM_REQ:")){const Ue=Ee.name.split(":"),qe=Ue[1],mt=Ue[2],ft=Ue.slice(3).join(":");return{id:St,type:"PLAYER_CLAIM",applicantId:qe,applicantName:ft||"Claim Request",targetPlayerId:mt,status:Ce.status,timestamp:new Date(Ce.created_at||Date.now()).getTime()}}if(St.startsWith("join:")||St.startsWith("invite:")){const Ue=St.startsWith("invite:"),[,qe]=St.split(":");return{id:`${Ue?"inv":"join"}-${Ce.id}`,type:Ue?"CLUB_INVITE":"USER_JOIN",applicantId:qe,applicantName:Ue?"Invited Player":"New Member",status:Ce.status,timestamp:new Date(Ce.created_at||Date.now()).getTime()}}return{id:`aff-req-${St}`,type:"ORG_AFFILIATE",applicantId:St,applicantName:(Ee==null?void 0:Ee.name)||"Unknown Org",applicantHandle:"",status:"PENDING",timestamp:new Date(Ce.created_at||Date.now()).getTime()}}))||[],_e=[...we,...te];return{id:M.id,name:M.name,type:M.type,createdBy:M.created_by,country:M.country,description:($=M.details)==null?void 0:$.description,address:(oe=M.details)==null?void 0:oe.address,logoUrl:M.logo_url,isPublic:M.is_public,allowUserContent:!0,allowMemberEditing:((Ae=M.details)==null?void 0:Ae.allowMemberEditing)!==void 0?M.details.allowMemberEditing:!0,members:((De=M.details)==null?void 0:De.members)||M.members||[],applications:_e,sponsors:((Me=M.details)==null?void 0:Me.sponsors)||M.sponsors||[],sponsorSettings:((Be=M.details)==null?void 0:Be.sponsorSettings)||M.sponsorSettings,tournaments:X,groups:[],memberTeams:ae,fixtures:W,parentOrgIds:((ze=D.data)==null?void 0:ze.filter(Ce=>Ce.child_org_id===M.id&&Ce.status==="APPROVED").map(Ce=>Ce.parent_org_id))||[],childOrgIds:((Ke=D.data)==null?void 0:Ke.filter(Ce=>Ce.parent_org_id===M.id&&Ce.status==="APPROVED").map(Ce=>Ce.child_org_id))||[]}}),ce=((m=R.data)==null?void 0:m.map(M=>({id:M.id,type:M.type,title:M.title,caption:M.caption,authorName:M.author_name,contentUrl:M.content_url,likes:M.likes,timestamp:new Date(M.timestamp).getTime(),comments:M.comments||[],reactions:M.reactions||{}})))||[],Q=((f=N.data)==null?void 0:f.map(M=>Bu(M,k.data||[])))||[],ne=(L.data||[]).map(M=>({id:M.id,matchId:M.match_id,lodgedBy:M.lodged_by,teamId:M.team_id,type:M.type,title:M.title,description:M.description,status:M.status,evidenceUrls:M.evidence_urls,adminComments:M.admin_comments,resolution:M.resolution,adminResponse:M.admin_response,resolvedAt:M.resolved_at?new Date(M.resolved_at).getTime():void 0,timestamp:new Date(M.timestamp).getTime()})),ee=(G.data||[]).map(M=>{var B,Z,Ne,ae,P,W;return{id:M.id,matchId:M.match_id,submittedBy:M.submitted_by,status:M.status,scorecardPhotoUrl:M.scorecard_photo_url,adminFeedback:M.admin_feedback,playerPerformances:M.player_performances||[],umpires:M.umpires||[],umpireRatings:M.umpire_ratings||{},facilityRating:M.facility_rating||{},spiritRating:M.spirit_rating||{},timestamp:new Date(M.timestamp).getTime(),teamAScore:((B=M.team_a_performance)==null?void 0:B.score)||0,teamAWickets:((Z=M.team_a_performance)==null?void 0:Z.wickets)||0,teamAOvers:((Ne=M.team_a_performance)==null?void 0:Ne.overs)||"0",teamBScore:((ae=M.team_b_performance)==null?void 0:ae.score)||0,teamBWickets:((P=M.team_b_performance)==null?void 0:P.wickets)||0,teamBOvers:((W=M.team_b_performance)==null?void 0:W.overs)||"0"}}),se=(Y.data||[]).map(M=>({id:M.id,matchId:M.match_id,fixtureId:M.fixture_id,submittedBy:M.submitted_by,umpireName:M.umpire_name,status:M.status,matchOutcome:M.match_outcome,conductNotes:M.conduct_notes,ruleViolations:M.rule_violations||[],playerBehaviorRatings:M.player_behavior_ratings||{},facilityReport:M.facility_report||{},incidentReports:M.incident_reports||[],supportingDocuments:M.supporting_documents||[],organizationId:M.organization_id,reviewedBy:M.reviewed_by,review_notes:M.review_notes,timestamp:new Date(M.timestamp).getTime()}));return{orgs:q,allTeams:Q,standaloneMatches:((b=S.data)==null?void 0:b.filter(M=>!M.tournament_id).map(M=>Qx(M,N.data||[])))||[],mediaPosts:ce,issues:ne,matchReports:ee,umpireReports:se}}catch(y){return console.error("Relational Fetch Error:",y),null}},e0=async(s,e)=>{const{error:n}=await Pe.from("organization_teams").delete().match({organization_id:s,team_id:e});return n?(console.error("Failed to remove team from organization:",n),!1):!0},Nk=async s=>{await Pe.from("tournament_teams").delete().match({tournament_id:s}),await Pe.from("fixtures").delete().match({tournament_id:s});const{error:e}=await Pe.from("tournaments").delete().match({id:s});return e?(console.error("Failed to delete tournament:",e),!1):!0},jk=async s=>{const{error:e}=await Pe.from("fixtures").delete().match({id:s});return e?(console.error("Failed to delete fixture:",e),!1):!0},kk=async s=>{const{error:e}=await Pe.from("media_posts").delete().match({id:s});return e?(console.error("Failed to delete media post:",e),!1):!0},Sk=async(s,e)=>{var i,r,o,d,u,p,m,f;const{error:n}=await Pe.from("user_profiles").upsert({id:s,name:(i=e.profile)==null?void 0:i.name,handle:(r=e.profile)==null?void 0:r.handle,role:(o=e.profile)==null?void 0:o.role,avatar_url:(d=e.profile)==null?void 0:d.avatarUrl,password:(u=e.profile)==null?void 0:u.password,player_details:(p=e.profile)==null?void 0:p.playerDetails,scorer_details:(m=e.profile)==null?void 0:m.scorerDetails,coach_details:(f=e.profile)==null?void 0:f.coachDetails,settings:e.settings,following:e.following,updated_at:new Date});if(n&&console.error("Supabase User Sync Error:",n),!ec)return!n;try{return(await fetch(`${ec}?user_id=${encodeURIComponent(s)}`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings.nonce},body:JSON.stringify(e)})).ok}catch(b){return console.error("User Data WP Sync Failed:",b),!1}},fb=async s=>{let{data:e,error:n}=await Pe.from("user_profiles").select("*").eq("id",s).single();if(!e||n){const i=s.startsWith("@")?s:`@${s}`,{data:r,error:o}=await Pe.from("user_profiles").select("*").ilike("handle",i).single();r&&!o&&(e=r,n=null)}if(e&&!n)return{profile:{id:e.id,name:e.name,handle:e.handle,role:e.role,avatarUrl:e.avatar_url,password:e.password,playerDetails:e.player_details,scorerDetails:e.scorer_details,coachDetails:e.coach_details,createdAt:e.created_at?new Date(e.created_at).getTime():Date.now()},settings:e.settings,following:e.following};if(n&&n.code!=="PGRST116"&&console.warn("Supabase User Fetch error:",n.message),!ec)return null;try{const i=await fetch(`${ec}?user_id=${encodeURIComponent(s)}`,{method:"GET",headers:{"X-WP-Nonce":window.wpApiSettings.nonce}});if(!i.ok)return null;const r=await i.json();return!r||Object.keys(r).length===0?null:r}catch(i){return console.error("User Data WP Fetch Failed:",i),null}return null},_k=async s=>{let e=Pe.from("user_profiles").select("*").eq("role","Player").filter("player_details->lookingForClub","eq",!0);s&&s!=="ALL"&&(e=e.filter("player_details->primaryRole","eq",s));const{data:n,error:i}=await e;return i?(console.error("Market search failed:",i),[]):(n||[]).map(r=>({id:r.id,name:r.name,handle:r.handle,role:r.role,avatarUrl:r.avatar_url,playerDetails:r.player_details,scorerDetails:r.scorer_details,coachDetails:r.coach_details,createdAt:r.created_at?new Date(r.created_at).getTime():Date.now()}))},Gu=async(s,e)=>{var n,i;try{const{data:r}=await Pe.from("fixtures").select("details, scores").eq("id",s).single(),o={...(r==null?void 0:r.details)||{},...e};delete o.savedState,delete o.status,delete o.result,delete o.teamAScore,delete o.teamBScore;const d={};e.status&&(d.status=e.status),e.result&&(d.result=e.result),e.savedState&&(d.saved_state=e.savedState),(e.teamAScore!==void 0||e.teamBScore!==void 0)&&(d.scores={teamAScore:e.teamAScore??((n=r==null?void 0:r.scores)==null?void 0:n.teamAScore),teamBScore:e.teamBScore??((i=r==null?void 0:r.scores)==null?void 0:i.teamBScore)});const{error:u}=await Pe.from("fixtures").update({...d,details:o}).eq("id",s);if(u)throw u;return!0}catch(r){return console.error("Update Fixture Failed:",r),!1}},Tk=({profile:s,orgs:e,standaloneMatches:n,mediaPosts:i,allTeams:r,settings:o,following:d,issues:u,matchReports:p,umpireReports:m,setOrgsState:f,setMatchesState:b,setPostsState:y,setAllTeamsState:N,setSettings:k,setFollowing:T,setIssuesState:S,setMatchReportsState:R,setUmpireReportsState:A})=>{const[I,j]=_.useState(!1),E=_.useRef(!1),D=_.useRef(!1),L=_.useRef(0),G=300*1e3,Y=_.useCallback(async(Q=!1)=>{var M,B,Z,Ne,ae,P;if(E.current)return;if(D.current){console.log(" Skipping Pull: Local changes pending push.");return}const ee=Date.now()-L.current;if(!Q&&ee<G&&L.current>0){console.log(` Skipping Pull: Data is fresh (${Math.round(ee/1e3)}s old)`);return}E.current=!0,j(!0);const se=(s==null?void 0:s.googleId)||((s==null?void 0:s.role)!=="Guest"?s==null?void 0:s.id:void 0);try{const W=await wk(se);if(console.log(" Cloud data received:",W?{orgs:(M=W.orgs)==null?void 0:M.length,teams:(B=W.allTeams)==null?void 0:B.length,matches:(Z=W.standaloneMatches)==null?void 0:Z.length,issues:(Ne=W.issues)==null?void 0:Ne.length,matchReports:(ae=W.matchReports)==null?void 0:ae.length,umpireReports:(P=W.umpireReports)==null?void 0:P.length}:"null"),W){const X=JSON.stringify(W.orgs)!==JSON.stringify(e),we=JSON.stringify(W.standaloneMatches)!==JSON.stringify(n),te=JSON.stringify(W.mediaPosts)!==JSON.stringify(i),_e=JSON.stringify(W.allTeams)!==JSON.stringify(r),re=JSON.stringify(W.issues)!==JSON.stringify(u),Re=JSON.stringify(W.matchReports)!==JSON.stringify(p),$e=JSON.stringify(W.umpireReports)!==JSON.stringify(m);console.log(" Applying changes:",{orgsChanged:X,matchesChanged:we,postsChanged:te,allTeamsChanged:_e,issuesChanged:re,matchReportsChanged:Re,umpireReportsChanged:$e}),X&&f(W.orgs||[]),we&&b(W.standaloneMatches||[]),te&&y(W.mediaPosts||[]),_e&&N(W.allTeams||[]),re&&S(W.issues||[]),Re&&R(W.matchReports||[]),$e&&A(W.umpireReports||[])}else console.log(" No cloud data to sync");if(s&&s.role!=="Guest"){const X=await fb(s.id);X&&(X.settings&&k(X.settings),X.following&&T(X.following))}L.current=Date.now()}catch(W){console.error("Sync fetch failed:",W)}finally{E.current=!1,j(!1),D.current=!1}},[s==null?void 0:s.id,s==null?void 0:s.role,e,n,i,r,u,p,m]),q=_.useCallback(async()=>{if(E.current)return!1;E.current=!0,j(!0);const Q=(s==null?void 0:s.googleId)||((s==null?void 0:s.role)!=="Guest"?s==null?void 0:s.id:void 0);try{return await bk({orgs:e,standaloneMatches:n,mediaPosts:i,issues:u,matchReports:p,umpireReports:m},Q)?(s&&s.role!=="Guest"&&await Sk(s.id,{profile:s,settings:o,following:d}),D.current=!1,console.log(" Global push successful"),!0):(console.error(" Global push failed - keeping changes dirty"),!1)}catch(ne){return console.error("Sync push exception:",ne),!1}finally{E.current=!1,j(!1)}},[e,n,i,u,p,m,s,o,d]);return _.useEffect(()=>{Y();const Q=setInterval(Y,3e4),ne=Pe.channel("fixtures-realtime").on("postgres_changes",{event:"*",schema:"public",table:"fixtures"},ee=>{console.log(" Realtime Update Received:",ee.eventType),Y()}).subscribe(ee=>{console.log(" Realtime Subscription Status:",ee)});return()=>{clearInterval(Q),Pe.removeChannel(ne)}},[Y]),_.useEffect(()=>{const Q=()=>{console.log(" Connection restored. Attempting sync..."),D.current?q():Y()};return window.addEventListener("online",Q),()=>window.removeEventListener("online",Q)},[Y,q]),_.useEffect(()=>{if(!D.current)return;const Q=setTimeout(()=>{q()},1e3);return()=>clearTimeout(Q)},[e,n,i,u,p,m,s,o,d,q]),{isSyncing:I,pullNow:Y,pushNow:q,markDirty:()=>{D.current=!0}}},$n=(s="id")=>{const e=Math.random().toString(36).substr(2,9),n=Date.now().toString(36).substr(-4);return`${s}_${e}${n}`},or=Date.now(),$u=36e5,Ck=864e5,yn=(s,e)=>({id:$n("p"),name:s,role:e,stats:{runs:Math.floor(Math.random()*5e3),wickets:Math.floor(Math.random()*200),matches:Math.floor(Math.random()*100),ballsFaced:0,ballsBowled:0,runsConceded:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0},playerDetails:{battingStyle:"Right-hand",bowlingStyle:"Right-arm Medium",primaryRole:e,lookingForClub:!1,isHireable:!0}}),Ek=[yn("Virat Kohli","Batsman"),yn("Rohit Sharma","Batsman"),yn("KL Rahul","Wicket-keeper"),yn("Hardik Pandya","All-rounder"),yn("Jasprit Bumrah","Bowler"),yn("Mohammed Shami","Bowler")],Ak=[yn("Steve Smith","Batsman"),yn("David Warner","Batsman"),yn("Alex Carey","Wicket-keeper"),yn("Glenn Maxwell","All-rounder"),yn("Pat Cummins","Bowler"),yn("Mitchell Starc","Bowler")],ah=[{id:"team-india-demo",name:"India Warriors",location:"Mumbai, India",players:Ek,logoUrl:"https://images.unsplash.com/photo-1540747913346-19e32dc3e97e?w=200&h=200&fit=crop"},{id:"team-aus-demo",name:"Australian Stars",location:"Sydney, Australia",players:Ak,logoUrl:"https://images.unsplash.com/photo-1531415074968-036ba1b575da?w=200&h=200&fit=crop"}],Ik=[{id:"org-icc-demo",name:"International Cricket Council",type:"GOVERNING_BODY",description:"The global governing body for cricket.",logoUrl:"https://images.unsplash.com/photo-1593341646782-e0b495cff86d?w=200&h=200&fit=crop",isPublic:!0,members:[],applications:[],tournaments:[],groups:[],memberTeams:ah,fixtures:[]},{id:"org-ipl-demo",name:"IPL Global League",type:"GOVERNING_BODY",description:"The premier T20 league for world-class talent.",logoUrl:"https://images.unsplash.com/photo-1594470117722-da434a3eb3f9?w=200&h=200&fit=crop",isPublic:!0,members:[],applications:[],tournaments:[],groups:[],memberTeams:ah,fixtures:[]}],Rk=[{id:"match-live-demo",teamAId:"team-india-demo",teamBId:"team-aus-demo",teamAName:"India Warriors",teamBName:"Australian Stars",date:new Date(or).toISOString(),venue:"Eden Gardens, Kolkata",status:"Live",teamAScore:"185/4",teamBScore:"142/2",result:"India Warriors leading by 43 runs",format:"T20"},{id:"match-comp-demo",teamAId:"team-aus-demo",teamBId:"team-india-demo",teamAName:"Australian Stars",teamBName:"India Warriors",date:new Date(or-Ck).toISOString(),venue:"MCG, Melbourne",status:"Completed",teamAScore:"312/8",teamBScore:"315/6",result:"India Warriors won by 4 wickets",winnerId:"team-india-demo",format:"50-over"}],Mk=[{id:"post-demo-1",type:"NEWS",title:"India Warriors Clinch Dramatic Series Win!",caption:"A stunning performance by the middle order guided the Warriors to a historic 3-wicket victory in Melbourne.",authorName:"Cricket Weekly",timestamp:or-$u*2,contentUrl:"https://images.unsplash.com/photo-1540747913346-19e32dc3e97e?w=800&q=80",likes:["user-1","user-2"],dislikes:[],shares:15,comments:[],reactions:{"":["user-1","user-2","user-3"],"":["user-4"]}},{id:"post-demo-2",type:"IMAGE",authorName:"Dennis Trinity",caption:"Match day at Eden Gardens is something special! ",timestamp:or-$u,contentUrl:"https://images.unsplash.com/photo-1531415074968-036ba1b575da?w=800&q=80",likes:["user-10"],dislikes:[],shares:5,comments:[{id:"c1",userId:"user-5",author:"Rahul",text:"Best stadium in the world!",timestamp:or-$u/2}]}],pb=_.createContext(void 0),kh=()=>{const s=_.useContext(pb);if(!s)throw new Error("useData must be used within a DataProvider");return s},t0={id:"guest",name:"Visitor",handle:"guest",role:"Guest",createdAt:Date.now()},Dk=({children:s})=>{const[e,n]=_.useState(()=>{try{const X=localStorage.getItem("cc_profile");return X?JSON.parse(X):t0}catch{return t0}}),[i,r]=_.useState(()=>{try{const X=localStorage.getItem("cc_orgs");return X?JSON.parse(X):[]}catch{return[]}}),[o,d]=_.useState(()=>{try{const X=localStorage.getItem("cc_matches");return X?JSON.parse(X):[]}catch{return[]}}),[u,p]=_.useState(()=>{try{const X=localStorage.getItem("cc_posts");return X?JSON.parse(X):[]}catch{return[]}}),[m,f]=_.useState(()=>{try{const X=localStorage.getItem("cc_all_teams");return X?JSON.parse(X):[]}catch{return[]}}),[b,y]=_.useState(()=>{try{const X=localStorage.getItem("cc_settings");return X?JSON.parse(X):{notifications:!1,sound:!0,devMode:!1,fullScreen:!1,demoMode:!1}}catch{return{notifications:!1,sound:!0,devMode:!1,fullScreen:!1,demoMode:!1}}}),[N,k]=_.useState(()=>{try{const X=localStorage.getItem("cc_following");return X?JSON.parse(X):{teams:[],players:[],orgs:[]}}catch{return{teams:[],players:[],orgs:[]}}}),[T,S]=_.useState(()=>{try{const X=localStorage.getItem("cc_issues");return X?JSON.parse(X):[]}catch{return[]}}),[R,A]=_.useState(()=>{try{const X=localStorage.getItem("cc_match_reports");return X?JSON.parse(X):[]}catch{return[]}}),[I,j]=_.useState(()=>{try{const X=localStorage.getItem("cc_umpire_reports");return X?JSON.parse(X):[]}catch{return[]}});_.useEffect(()=>{e&&e.role!=="Guest"?localStorage.setItem("cc_profile",JSON.stringify(e)):localStorage.removeItem("cc_profile")},[e]),_.useEffect(()=>{localStorage.setItem("cc_settings",JSON.stringify(b))},[b]),_.useEffect(()=>{localStorage.setItem("cc_following",JSON.stringify(N))},[N]),_.useEffect(()=>{localStorage.setItem("cc_orgs",JSON.stringify(i))},[i]),_.useEffect(()=>{localStorage.setItem("cc_matches",JSON.stringify(o))},[o]),_.useEffect(()=>{localStorage.setItem("cc_posts",JSON.stringify(u))},[u]),_.useEffect(()=>{localStorage.setItem("cc_all_teams",JSON.stringify(m))},[m]),_.useEffect(()=>{localStorage.setItem("cc_issues",JSON.stringify(T))},[T]),_.useEffect(()=>{localStorage.setItem("cc_match_reports",JSON.stringify(R))},[R]),_.useEffect(()=>{localStorage.setItem("cc_umpire_reports",JSON.stringify(I))},[I]);const{isSyncing:E,pullNow:D,pushNow:L,markDirty:G}=Tk({profile:e,orgs:i,standaloneMatches:o,mediaPosts:u,allTeams:m,settings:b,following:N,issues:T,matchReports:R,umpireReports:I,setOrgsState:r,setMatchesState:d,setPostsState:p,setAllTeamsState:f,setSettings:y,setFollowing:k,setIssuesState:S,setMatchReportsState:A,setUmpireReportsState:j}),Y=X=>{r(X),G()},q=X=>{d(X),G()},ce=X=>{p(X),G()},Q=X=>{f(X)},ne=X=>{S(X),G()},ee=X=>{A(X),G()},se=X=>{j(X),G()},M=X=>{e&&(n({...e,...X}),G())},B=X=>{y(X),G()},Z=X=>{k(X),G()},Ne=b.demoMode?[...i,...Ik]:i,ae=b.demoMode?[...o,...Rk]:o,P=b.demoMode?[...u,...Mk]:u,W=b.demoMode?[...m,...ah]:m;return t.jsx(pb.Provider,{value:{orgs:Ne,standaloneMatches:ae,mediaPosts:P,allTeams:W,profile:e,settings:b,following:N,issues:T,matchReports:R,umpireReports:I,setOrgs:Y,setStandaloneMatches:q,setMediaPosts:ce,setAllTeams:Q,setIssues:ne,setMatchReports:ee,setUmpireReports:se,updateProfile:M,updateSettings:B,updateFollowing:Z,pullNow:D,forcePush:L,isSyncing:E,setOrgsSilent:r,setStandaloneMatchesSilent:d},children:s})},Ok=()=>{const{setOrgs:s,setStandaloneMatches:e}=kh(),n=i=>{const r=Cx.find(d=>d.id===i);if(!r||!confirm(`Are you sure you want to load "${r.name}"? This will overwrite existing data.`))return;const o=r.generate();s(o.orgs),e(o.matches),alert(`Loaded profile: ${r.name}`)};return t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-xs font-black text-indigo-400 uppercase tracking-widest mb-3",children:"Dev Data Profiles"}),t.jsx("div",{className:"grid grid-cols-1 gap-2",children:Cx.map(i=>t.jsxs("button",{onClick:()=>n(i.id),className:"flex items-center gap-3 p-3 bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-xl transition-all text-left group",children:[t.jsx("span",{className:"text-2xl group-hover:scale-110 transition-transform",children:i.icon}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-bold text-white",children:i.name}),t.jsx("div",{className:"text-[10px] text-slate-500",children:i.description})]})]},i.id))})]})},Uk=["organizations","teams","roster_players","tournaments","fixtures","media_posts","user_profiles","app_state"],Lk=({onClose:s})=>{const[e,n]=_.useState("organizations"),[i,r]=_.useState([]),[o,d]=_.useState(!1),[u,p]=_.useState(""),[m,f]=_.useState(""),[b,y]=_.useState(null),[N,k]=_.useState("");_.useEffect(()=>{T()},[e]);const T=async()=>{d(!0),f("");const{data:I,error:j}=await Pe.from(e).select("*").limit(100);j?(f(j.message),r([])):r(I||[]),d(!1)},S=async I=>{if(!confirm("Are you sure you want to delete this row? This cannot be undone."))return;const{error:j}=await Pe.from(e).delete().eq("id",I);j?alert("Delete failed: "+j.message):r(i.filter(E=>E.id!==I))},R=async()=>{try{const I=JSON.parse(N),{error:j}=await Pe.from(e).upsert(I);if(j)throw j;r(i.map(E=>E.id===I.id?I:E)),y(null),alert("Saved successfully!")}catch(I){alert("Save failed: "+I.message)}},A=i.filter(I=>JSON.stringify(I).toLowerCase().includes(u.toLowerCase()));return t.jsxs("div",{className:"fixed inset-0 bg-slate-950 z-[100] flex flex-col text-white animate-in slide-in-from-bottom duration-300",children:[t.jsxs("div",{className:"h-16 border-b border-slate-800 flex items-center justify-between px-6 bg-slate-900",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-8 h-8 bg-pink-500 rounded-lg flex items-center justify-center font-black",children:"db"}),t.jsx("h2",{className:"font-bold text-lg tracking-tight",children:"Developer Database Console"})]}),t.jsx("button",{onClick:s,className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs font-bold uppercase tracking-widest transition-all",children:"Close Console"})]}),t.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[t.jsxs("div",{className:"w-64 bg-slate-900 border-r border-slate-800 p-4 flex flex-col gap-2 overflow-y-auto",children:[t.jsx("div",{className:"text-[10px] uppercase font-black text-slate-500 tracking-widest mb-2 px-2",children:"Tables"}),Uk.map(I=>t.jsx("button",{onClick:()=>n(I),className:`px-4 py-3 rounded-xl text-left text-xs font-bold uppercase tracking-wide transition-all ${e===I?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,children:I.replace("_"," ")},I))]}),t.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-slate-950",children:[t.jsxs("div",{className:"p-4 border-b border-slate-800 flex items-center gap-4 bg-slate-900/50",children:[t.jsxs("div",{className:"relative flex-1 max-w-xl",children:[t.jsx("span",{className:"absolute left-3 top-2.5 text-slate-500",children:""}),t.jsx("input",{type:"text",placeholder:"Search data...",value:u,onChange:I=>p(I.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl pl-10 pr-4 py-2 text-sm text-white focus:outline-none focus:border-indigo-500 transition-colors"})]}),t.jsxs("div",{className:"text-xs text-slate-400 font-bold uppercase",children:[A.length," records found"]}),t.jsx("button",{onClick:T,className:"ml-auto px-4 py-2 bg-slate-800 hover:bg-slate-700 rounded-lg text-xs font-bold uppercase tracking-widest",children:"Refresh"})]}),t.jsx("div",{className:"flex-1 overflow-auto p-4 custom-scrollbar",children:o?t.jsxs("div",{className:"flex items-center justify-center h-full text-slate-500 animate-pulse",children:["Loading ",e,"..."]}):m?t.jsx("div",{className:"bg-red-900/20 text-red-500 p-4 rounded-xl border border-red-900/50 text-center",children:m}):t.jsxs("div",{className:"grid gap-2",children:[A.map(I=>t.jsxs("div",{className:"bg-slate-900 border border-slate-800 p-3 rounded-xl hover:border-slate-600 transition-colors group flex items-start gap-4",children:[t.jsxs("div",{className:"flex-1 min-w-0 font-mono text-xs text-slate-300 break-all",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"px-1.5 py-0.5 bg-slate-800 text-slate-500 rounded text-[9px] font-bold",children:I.id}),I.name&&t.jsx("span",{className:"font-bold text-white text-sm",children:I.name}),I.handle&&t.jsxs("span",{className:"text-indigo-400 font-bold",children:["@",I.handle]}),I.role&&t.jsx("span",{className:"text-emerald-500 text-[10px] uppercase font-bold",children:I.role})]}),t.jsx("div",{className:"opacity-60 line-clamp-1",children:JSON.stringify(I)})]}),t.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx("button",{onClick:()=>{y(I),k(JSON.stringify(I,null,2))},className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 rounded-lg text-[10px] font-black uppercase tracking-widest text-white",children:"Edit"}),t.jsx("button",{onClick:()=>S(I.id),className:"px-3 py-1.5 bg-red-600 hover:bg-red-500 rounded-lg text-[10px] font-black uppercase tracking-widest text-white",children:"Delete"})]})]},I.id)),A.length===0&&t.jsx("div",{className:"text-center py-20 text-slate-500 text-sm",children:"No records found."})]})})]})]}),b&&t.jsx("div",{className:"fixed inset-0 bg-black/80 z-[110] flex items-center justify-center p-6 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-slate-900 w-full max-w-4xl h-[80vh] rounded-2xl border border-slate-700 shadow-2xl flex flex-col",children:[t.jsxs("div",{className:"p-4 border-b border-slate-800 flex justify-between items-center",children:[t.jsx("h3",{className:"font-bold text-white",children:"Edit Record"}),t.jsx("button",{onClick:()=>y(null),className:"text-slate-400 hover:text-white",children:""})]}),t.jsx("div",{className:"flex-1 p-4 overflow-hidden",children:t.jsx("textarea",{value:N,onChange:I=>k(I.target.value),className:"w-full h-full bg-slate-950 text-emerald-400 font-mono text-sm p-4 rounded-xl border border-slate-800 focus:border-indigo-500 focus:outline-none resize-none custom-scrollbar",spellCheck:!1})}),t.jsxs("div",{className:"p-4 border-t border-slate-800 flex justify-end gap-3 bg-slate-900 rounded-b-2xl",children:[t.jsx("button",{onClick:()=>y(null),className:"px-6 py-3 text-slate-400 font-bold hover:text-white uppercase text-xs tracking-widest",children:"Cancel"}),t.jsx("button",{onClick:R,className:"px-6 py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-black uppercase text-xs tracking-widest rounded-xl shadow-lg",children:"Save Changes"})]})]})})]})},Bk=({children:s,activeTab:e,onTabChange:n,profile:i,theme:r,onThemeToggle:o,settings:d,onToggleSetting:u,onEditProfile:p,onApplyForAccreditation:m,onSignOut:f,onSignIn:b,onSignUp:y,onSwitchProfile:N,showCaptainHub:k,organizations:T=[],viewingOrgId:S,activeViewRole:R})=>{var Z,Ne;const[A,I]=_.useState(!1),[j,E]=_.useState(!1),[D,L]=_.useState(!1),[G,Y]=_.useState(!1),q=(Z=window.wpApiSettings)!=null&&Z.plugin_url?`${window.wpApiSettings.plugin_url}logo.jpg`:"/logo.jpg",ce=d.devMode||i.handle==="Trinity"||i.handle==="@Trinity",Q=((Ne=i.notifications)==null?void 0:Ne.filter(ae=>!ae.read).length)||0;_.useEffect(()=>{if(!d.fullScreen)return;const ae=()=>{!document.fullscreenElement&&document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen().catch(P=>{console.log(`Error attempting to enable full-screen mode: ${P.message} (${P.name})`)}),document.removeEventListener("click",ae),document.removeEventListener("touchstart",ae)};return document.addEventListener("click",ae),document.addEventListener("touchstart",ae),()=>{document.removeEventListener("click",ae),document.removeEventListener("touchstart",ae)}},[d.fullScreen]);const ne=ae=>{n(ae),I(!1)};i.role==="Guest"||i.role==="Fan"||i.role==="Captain"||(i.role==="Player"||i.role,i.role);const ee=S?T.find(ae=>ae.id===S):T.find(ae=>ae.id==="org-central-zone")||T[0];ee!=null&&ee.sponsorSettings;const se=((ee==null?void 0:ee.sponsors)||[]).filter(ae=>ae.isActive&&ae.placements.includes("MEDIA_TOP")),B=["scorer","setup","media"].includes(e)?"h-[100dvh] w-full pt-16 lg:pt-20 overflow-x-hidden overflow-y-hidden flex flex-col relative":"h-[100dvh] w-full pt-20 lg:pt-24 pb-12 px-2 md:px-8 lg:px-12 overflow-x-hidden overflow-y-auto scroll-container custom-scrollbar no-scrollbar relative flex flex-col";return t.jsxs("div",{className:`h-[100dvh] w-full ${r==="dark"?"bg-slate-950 text-white":"bg-slate-50 text-slate-900"} relative transition-colors duration-300 flex flex-col overflow-hidden`,children:[t.jsxs("div",{className:"fixed top-4 left-4 lg:top-6 lg:left-6 z-50 flex items-center gap-4",children:[e!=="scorer"&&t.jsxs("button",{onClick:()=>{I(!A),E(!1)},className:`w-12 h-12 lg:w-14 lg:h-14 rounded-2xl flex flex-col items-center justify-center gap-1.5 transition-all duration-300 shadow-2xl z-50 ${A?"bg-slate-800 text-white rotate-90 ring-2 ring-indigo-500":"bg-indigo-600 text-white hover:scale-105 active:scale-95 shadow-indigo-600/40"}`,"aria-label":"Menu",children:[t.jsx("span",{className:`w-6 h-1 bg-current rounded-full transition-all ${A?"rotate-45 translate-y-2.5":""}`}),t.jsx("span",{className:`w-6 h-1 bg-current rounded-full transition-all ${A?"opacity-0":""}`}),t.jsx("span",{className:`w-6 h-1 bg-current rounded-full transition-all ${A?"-rotate-45 -translate-y-2.5":""}`})]}),!A&&e!=="scorer"&&t.jsxs("div",{className:"hidden md:flex items-center gap-3 bg-slate-900/10 backdrop-blur-md p-1 pr-4 rounded-2xl border border-white/10 shadow-sm animate-in fade-in slide-in-from-left-4",children:[t.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center text-white font-black text-xs shadow-inner",children:i.name.charAt(0)}),t.jsxs("div",{className:"flex flex-col px-1 py-1",children:[t.jsxs("h1",{className:"text-[9px] font-black text-slate-400 uppercase tracking-[0.2em] mb-0.5",children:[new Date().getHours()<12?"Good Morning":new Date().getHours()<18?"Good Afternoon":"Good Evening",", ",i.role," ",i.name.split(" ")[0]]}),t.jsx("span",{className:"text-xs text-indigo-600 font-black uppercase tracking-widest leading-none",children:e==="home"?i.role==="Fan"?"Media Center":"Dashboard":e.replace("_"," ")})]})]})]}),t.jsx("div",{className:"fixed top-4 left-20 lg:top-6 lg:left-24 right-20 lg:right-24 z-50 flex justify-center pointer-events-none",children:t.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl border border-white/5 h-12 lg:h-14 flex items-center justify-center gap-6 px-6 shadow-2xl overflow-hidden pointer-events-auto max-w-full",children:se.length>0?se.map(ae=>t.jsx("img",{src:ae.logoUrl,alt:ae.name,className:"h-8 lg:h-10 object-contain hover:scale-110 transition-transform cursor-pointer",onClick:()=>ae.website&&window.open(ae.website,"_blank"),title:ae.name},ae.id)):t.jsx("div",{className:"text-[10px] font-black text-white/20 uppercase tracking-[0.3em] whitespace-nowrap",children:"Cricket Core 2026 Management System"})})}),t.jsxs("div",{className:"fixed top-4 right-4 lg:top-6 lg:right-6 z-50 flex items-center gap-4",children:[e!=="scorer"&&t.jsx("div",{className:"hidden md:block",children:t.jsx($w,{})}),e!=="scorer"&&t.jsx("button",{onClick:()=>{E(!j),I(!1),L(!1)},className:`w-12 h-12 lg:w-14 lg:h-14 rounded-2xl flex items-center justify-center transition-all duration-300 shadow-2xl z-50 ${j?"bg-slate-800 text-white rotate-180 ring-2 ring-slate-600":"bg-white/10 backdrop-blur-md text-slate-400 border border-white/5 hover:bg-white/20"}`,"aria-label":"Settings",children:t.jsx("span",{className:"text-xl",children:""})})]}),t.jsx("div",{className:`fixed inset-0 bg-slate-950/90 backdrop-blur-md z-40 transition-opacity duration-300 ${A||j||D?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>{I(!1),E(!1),L(!1)}}),t.jsxs("nav",{className:`fixed top-0 left-0 h-full w-full sm:w-72 bg-slate-900 p-6 pt-20 sm:pt-6 flex flex-col gap-4 shadow-2xl z-40 transition-transform duration-500 ease-out border-r border-slate-800 ${A?"translate-x-0":"-translate-x-full"}`,children:[t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("img",{src:q,alt:"Cricket Core",className:"w-12 h-12 object-contain drop-shadow-lg"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("h1",{className:"text-sm font-black text-white leading-tight tracking-[0.2em]",children:"CRICKET CORE"}),t.jsx("p",{className:"text-[8px] text-slate-500 font-bold uppercase tracking-widest leading-none",children:"Management v3.0"})]})]}),t.jsxs("div",{className:"flex flex-col gap-1.5 overflow-y-auto custom-scrollbar flex-1",children:[t.jsxs("button",{onClick:()=>ne("home"),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${e==="home"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"Dashboard"})]},"home"),t.jsxs("button",{onClick:()=>ne("media"),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${e==="media"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"Media Center"})]},"media"),(k||R==="Administrator"||R==="Captain"||i.role==="Administrator")&&t.jsxs("button",{onClick:()=>ne("captain_hub"),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${e==="captain_hub"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"Captain's Hub"})]},"captain_hub"),(R==="Administrator"||i.role==="Administrator"||R==="Scorer")&&t.jsxs("button",{onClick:()=>ne("stats"),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${e==="stats"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"Analytics"})]},"stats"),t.jsxs("button",{onClick:()=>ne("my_matches"),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${e==="my_matches"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"My Matches"})]},"my_matches"),t.jsxs("button",{onClick:()=>ne("profile"),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${e==="profile"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"Profile"})]},"profile"),t.jsxs("button",{onClick:()=>ne("my_teams"),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${e==="my_teams"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"My Teams"})]},"my_teams"),t.jsxs("button",{onClick:()=>ne("my_clubs"),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${e==="my_clubs"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"My Clubs"})]},"my_clubs"),t.jsxs("button",{onClick:()=>ne("scorer"),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${e==="scorer"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"Start a Match"})]},"scorer"),t.jsxs("button",{onClick:()=>ne("register_club"),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${e==="register_club"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"Register a Club"})]},"register_club"),t.jsxs("button",{onClick:()=>ne("following"),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${e==="following"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"Following"})]},"following"),t.jsxs("button",{onClick:()=>ne("registry"),className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${["registry","team_registry"].includes(e)?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:bg-slate-800"}`,children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"Player/Team Registry"})]},"registry")]}),t.jsxs("div",{className:"mt-auto pt-4 border-t border-white/5 space-y-3",children:[t.jsxs("button",{onClick:()=>{E(!j),I(!1)},className:"w-full flex items-center justify-center gap-3 py-3 bg-slate-800 hover:bg-slate-700 text-slate-400 hover:text-white rounded-xl transition-all group",children:[t.jsx("span",{className:"text-xl group-hover:rotate-90 transition-transform duration-500",children:""}),t.jsx("span",{className:"font-black uppercase text-[10px] tracking-widest",children:"Settings"})]}),i.role==="Guest"&&t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("button",{onClick:b,className:"py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg transition-all",children:"Sign In"}),t.jsx("button",{onClick:y,className:"py-3 bg-slate-800 hover:bg-slate-700 text-white border border-slate-700 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all",children:"Join Now"})]}),t.jsxs("div",{className:"flex items-center gap-3 bg-slate-800/50 p-2 rounded-xl border border-white/5",children:[t.jsx("div",{className:"w-8 h-8 bg-indigo-500 rounded-lg flex items-center justify-center font-black text-white text-xs",children:i.name.charAt(0)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-[10px] font-black text-white truncate",children:i.name}),t.jsx("p",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-widest",children:i.role==="Guest"?"GUEST USER":(R||i.role).toUpperCase()})]}),i.role!=="Guest"&&t.jsx("button",{onClick:f,className:"w-6 h-6 flex items-center justify-center text-red-400 hover:text-red-500 transition-colors",children:""}),i.role==="Guest"&&b&&t.jsx("button",{onClick:b,className:"w-6 h-6 flex items-center justify-center text-emerald-400 hover:text-emerald-500 transition-colors",children:""})]})]})]}),t.jsxs("aside",{className:`fixed top-0 right-0 h-full w-full sm:w-80 bg-slate-900 p-8 pt-24 sm:pt-8 flex flex-col gap-6 shadow-2xl z-40 transition-transform duration-500 ease-out border-l border-slate-800 ${j?"translate-x-0":"translate-x-full"}`,children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h2",{className:"text-xl font-black text-white",children:"Application Settings"}),t.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Configure your experience"})]}),i.role!=="Guest"&&t.jsxs("div",{className:"bg-slate-800/80 rounded-2xl overflow-hidden border border-slate-700/50 shadow-inner",children:[t.jsxs("button",{onClick:()=>L(!D),className:"w-full p-4 flex items-center justify-between hover:bg-slate-700/50 transition-colors",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"text-xl",children:""}),Q>0&&t.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-slate-800"})]}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"text-sm font-bold text-white",children:"Notifications"}),t.jsx("div",{className:"text-[9px] text-slate-500 uppercase tracking-widest",children:Q>0?`${Q} new alerts`:"No new alerts"})]})]}),t.jsx("span",{className:`text-xs transition-transform transform ${D?"rotate-180":""}`,children:""})]}),D&&t.jsx("div",{className:"p-2 bg-slate-900/50 max-h-48 overflow-y-auto no-scrollbar",children:i.notifications&&i.notifications.length>0?i.notifications.slice().reverse().map(ae=>t.jsxs("div",{className:`p-2.5 mb-2 rounded-xl border text-left transition-all ${ae.read?"bg-slate-900/30 border-transparent opacity-60":"bg-slate-800 border-indigo-500/30"}`,children:[t.jsx("h4",{className:"text-[11px] font-bold text-white mb-0.5",children:ae.title}),t.jsx("p",{className:"text-[10px] text-slate-400 leading-tight",children:ae.message})]},ae.id)):t.jsx("div",{className:"text-center py-4 text-slate-500 text-[10px] font-bold uppercase",children:"No updates"})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar scroll-container space-y-4 pr-1",children:[(i.role==="Fan"||i.role==="Player")&&t.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl flex items-center justify-between border border-slate-700/50",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-bold text-white",children:"Official Accreditation"}),t.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:"Join Organizations"})]}),t.jsx("button",{onClick:()=>{m&&(m(),E(!1))},className:"px-3 py-1.5 bg-emerald-500/10 text-emerald-500 border border-emerald-500/20 rounded-lg text-[9px] font-black uppercase tracking-widest hover:bg-emerald-500 hover:text-white transition-all",children:"Apply"})]}),t.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-bold text-white",children:"Dark Mode"}),t.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:"Visual Theme"})]}),t.jsx("button",{onClick:o,className:`w-12 h-6 rounded-full transition-colors relative ${r==="dark"?"bg-indigo-600":"bg-slate-600"}`,children:t.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all ${r==="dark"?"left-7":"left-1"}`})})]}),t.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-bold text-white",children:"Developer Mode"}),t.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:"Restricted Access"})]}),t.jsx("button",{onClick:()=>{if(d.devMode)u("devMode");else{const ae=prompt("Enter developer password:");ae==="mitchipooh22"?u("devMode"):ae!==null&&alert("Incorrect password")}},className:`w-12 h-6 rounded-full transition-colors relative ${d.devMode?"bg-indigo-600":"bg-slate-600"}`,children:t.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all ${d.devMode?"left-7":"left-1"}`})})]}),t.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-bold text-white",children:"Full-Screen Mode"}),t.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:"Auto-enter fullscreen"})]}),t.jsx("button",{onClick:()=>u("fullScreen"),className:`w-12 h-6 rounded-full transition-colors relative ${d.fullScreen?"bg-indigo-600":"bg-slate-600"}`,children:t.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all ${d.fullScreen?"left-7":"left-1"}`})})]}),t.jsxs("div",{className:"bg-indigo-900/40 p-4 rounded-2xl flex items-center justify-between border border-indigo-500/30",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-bold text-white",children:"Demo Mode "}),t.jsx("div",{className:"text-[10px] text-indigo-300/60 uppercase tracking-widest font-black",children:"Fill app with demo data"})]}),t.jsx("button",{onClick:()=>u("demoMode"),className:`w-12 h-6 rounded-full transition-colors relative ${d.demoMode?"bg-emerald-500":"bg-slate-600"}`,children:t.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all ${d.demoMode?"left-7":"left-1"}`})})]}),t.jsxs("button",{onClick:()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},className:"w-full py-4 bg-indigo-600 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-lg shadow-indigo-900/20 flex items-center justify-center gap-3 group hover:bg-indigo-500 transition-all",children:[t.jsx("span",{className:"text-lg",children:""}),"Toggle Full Screen Now"]}),ce&&t.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-2xl border border-indigo-500/30 space-y-4",children:[t.jsx("h3",{className:"text-xs font-black text-indigo-400 uppercase tracking-widest mb-3",children:"Dev: Switch Persona"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("button",{onClick:()=>{N("ADMIN"),E(!1)},className:"p-2 bg-purple-900/30 text-purple-400 border border-purple-500/30 rounded-lg text-[9px] font-bold uppercase hover:bg-purple-900/50",children:"Admin"}),t.jsx("button",{onClick:()=>{N("SCORER"),E(!1)},className:"p-2 bg-emerald-900/30 text-emerald-400 border border-emerald-500/30 rounded-lg text-[9px] font-bold uppercase hover:bg-emerald-900/50",children:"Scorer"}),t.jsx("button",{onClick:()=>{N("UMPIRE"),E(!1)},className:"p-2 bg-yellow-900/30 text-yellow-400 border border-yellow-500/30 rounded-lg text-[9px] font-bold uppercase hover:bg-yellow-900/50",children:"Umpire"}),t.jsx("button",{onClick:()=>{N("PLAYER"),E(!1)},className:"p-2 bg-pink-900/30 text-pink-400 border border-pink-500/30 rounded-lg text-[9px] font-bold uppercase hover:bg-pink-900/50",children:"Player"}),t.jsx("button",{onClick:()=>{N("FAN"),E(!1)},className:"p-2 bg-slate-700/30 text-slate-400 border border-slate-600/30 rounded-lg text-[9px] font-bold uppercase hover:bg-slate-700/50",children:"Fan"}),t.jsx("button",{onClick:()=>{N("GUEST"),E(!1)},className:"p-2 bg-slate-500/30 text-slate-300 border border-slate-500/30 rounded-lg text-[9px] font-bold uppercase hover:bg-slate-500/50",children:"Guest"}),t.jsx("button",{onClick:()=>{N("CAPTAIN"),E(!1)},className:"p-2 col-span-2 bg-indigo-900/30 text-indigo-400 border border-indigo-500/30 rounded-lg text-[9px] font-bold uppercase hover:bg-indigo-900/50",children:"Captain (Mock)"})]}),t.jsx("div",{className:"h-px bg-indigo-500/20 my-4"}),t.jsxs("button",{onClick:()=>{Y(!0),E(!1)},className:"w-full py-4 bg-slate-900 border border-slate-700 hover:border-pink-500 text-slate-300 hover:text-pink-400 rounded-xl transition-all font-black uppercase text-[10px] tracking-[0.2em] shadow-lg group",children:[t.jsx("span",{className:"mr-2 text-lg group-hover:animate-pulse",children:""})," Open Database Console"]}),t.jsx("div",{className:"h-px bg-indigo-500/20 my-4"}),t.jsx(Ok,{})]})]}),t.jsxs("div",{className:"mt-auto bg-slate-800/50 p-6 rounded-3xl text-center shrink-0",children:[t.jsx("div",{className:"text-4xl mb-3",children:""}),t.jsx("h3",{className:"font-bold text-white mb-2",children:"Get Mobile App"}),t.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Install Cricket-Core on your device for best performance."}),t.jsx("button",{className:"w-full py-3 bg-white text-slate-900 rounded-xl text-xs font-black uppercase tracking-widest",children:"Install Now"}),t.jsx("div",{className:"pt-4 mt-4 border-t border-white/5 text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:"Created by mitchipoohdevs"})]})]}),t.jsx("main",{className:B,children:t.jsx("div",{className:"max-w-[1920px] mx-auto h-full flex flex-col min-h-0 w-full",children:t.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden px-3 py-4 md:px-6 md:py-8",children:s})})}),G&&t.jsx(Fn.Suspense,{fallback:null,children:t.jsx(Lk,{onClose:()=>Y(!1)})})]})};function s0(s,e,n){let i=0;const r=[...e].sort((o,d)=>o.threshold-d.threshold);for(const o of r)s>=o.threshold&&(i=o.points);return Math.min(i,n)}function n0(s,e,n){let i=0,r=0;const o=e.winnerSide===s,d=e.winnerSide==="TIE";e.isIncomplete||(o?i=n.win_outright:d&&(i=n.tie_match)),e.firstInningsWinnerId;const u=s==="A"?e.firstInningsResult:e.firstInningsResult==="LEAD"?"LOSS":e.firstInningsResult==="LOSS"?"LEAD":e.firstInningsResult;u==="LEAD"?r=n.first_inning_lead:u==="TIE"?r=n.first_inning_tie:u==="LOSS"&&(r=n.first_inning_loss),e.isIncomplete&&(i=0);const p=s==="A"?e.teamARuns:e.teamBRuns,m=s==="A"?e.teamBWickets:e.teamAWickets,f=s0(p,n.batting_bonus_tiers,n.bonus_batting_max),b=s0(m,n.bowling_bonus_tiers,n.bonus_bowling_max),y=i+r+f+b,N=y<=n.max_total_per_match;return{matchPoints:i,inningPoints:r,battingBonus:f,bowlingBonus:b,total:y,isValid:N,error:N?void 0:`Total points (${y}) exceeds maximum allowed per match (${n.max_total_per_match})`}}const xb={win:16,loss:0,tie:8,noResult:8,win_outright:16,tie_match:8,first_inning_lead:8,first_inning_tie:5,first_inning_loss:2,bonus_batting_max:6,bonus_bowling_max:3,max_total_per_match:28,batting_bonus_tiers:[{threshold:150,points:1},{threshold:200,points:2},{threshold:250,points:3},{threshold:300,points:4},{threshold:350,points:5},{threshold:400,points:6}],bowling_bonus_tiers:[{threshold:3,points:1},{threshold:5,points:2},{threshold:8,points:3}]},gb={win:3,loss:0,tie:1,noResult:1,win_outright:3,tie_match:1,first_inning_lead:0,first_inning_tie:0,first_inning_loss:0,bonus_batting_max:0,bonus_bowling_max:0,max_total_per_match:5,batting_bonus_tiers:[],bowling_bonus_tiers:[]},br=gb;function a0(s,e,n=br){switch(s){case"TIE":return n.tie;case"NO_RESULT":case"ABANDONED":return n.noResult;case"HOME_WIN":return e==="A"?n.win:n.loss;case"AWAY_WIN":return e==="B"?n.win:n.loss;default:return 0}}const Pk=(s,e,n)=>{const i=[],r=s.length,o=[...s];r%2!==0&&o.push({id:"BYE",name:"BYE",players:[]});const d=o.length-1,u=o.length/2;for(let p=0;p<d;p++){for(let f=0;f<u;f++){const b=o[f],y=o[o.length-1-f];b.id!=="BYE"&&y.id!=="BYE"&&i.push({id:`match-${Date.now()}-${p}-${f}`,tournamentId:e,groupId:n,stage:"Group",teamAId:b.id,teamBId:y.id,teamAName:b.name,teamBName:y.name,date:new Date(Date.now()+p*864e5).toISOString().split("T")[0],venue:"Arena "+(f+1),status:"Scheduled",format:"T20"})}const m=o.pop();o.splice(1,0,m)}return i},Gk=(s,e,n,i=20)=>{const r=(i-e)/i,o=1-n*.05;return Math.ceil(s*r*o)+1},Mn=s=>s!=="Wide"&&s!=="NoBall",ll=s=>{const e=Math.floor(s/6),n=s%6;return`${e}.${n}`},$k=(s,e)=>s.map(n=>({...n,memberTeams:n.memberTeams.map(i=>({...i,players:i.players.map(r=>{const o=e.playerPerformances.find(d=>d.playerId===r.id);return o?{...r,stats:{...r.stats,matches:r.stats.matches+1,runs:r.stats.runs+o.runs,ballsFaced:r.stats.ballsFaced+o.balls,wickets:r.stats.wickets+o.wickets,ballsBowled:r.stats.ballsBowled+o.overs*6,runsConceded:r.stats.runsConceded+o.runsConceded,catches:r.stats.catches+o.catches,stumpings:r.stats.stumpings+o.stumpings,runOuts:r.stats.runOuts+o.runOuts,fours:r.stats.fours+o.fours,sixes:r.stats.sixes+o.sixes,maidens:r.stats.maidens+o.maidens,highestScore:Math.max(r.stats.highestScore||0,o.runs),hundreds:r.stats.hundreds+(o.runs>=100?1:0),fifties:r.stats.fifties+(o.runs>=50&&o.runs<100?1:0),ducks:r.stats.ducks+(o.runs===0?1:0),threeWickets:r.stats.threeWickets+(o.wickets>=3&&o.wickets<5?1:0),fiveWickets:r.stats.fiveWickets+(o.wickets>=5?1:0)}}:r})})),fixtures:n.fixtures.map(i=>i.id===e.matchId?{...i,reportSubmission:{...e,status:"VERIFIED"}}:i)})),tc=s=>s.isWicket?"#b91c1c":s.extraType&&s.extraType!=="None"?"#b45309":s.runs===4?"#4f46e5":s.runs===6?"#10b981":"#1e293b",Fk={Administrator:["org:create","org:delete","team:add","team:remove","tournament:add","fixture:generate"],Scorer:["match:score"],"Match Official":["match:view","match:umpire"]},Wo=({role:s,perform:e,children:n,fallback:i=null})=>(Fk[s]||[]).includes(e)?t.jsx(t.Fragment,{children:n}):t.jsx(t.Fragment,{children:i}),Hk=({org:s,userRole:e,onOpen:n,onDeleteRequest:i})=>{var o;const r=s.type==="CLUB";return t.jsxs("div",{onClick:()=>n(s.id),className:"group bg-white border border-slate-200 p-3 md:p-4 rounded-2xl hover:border-indigo-500 hover:shadow-lg hover:shadow-indigo-100 transition-all cursor-pointer relative overflow-hidden h-full flex flex-col",children:[t.jsx("div",{className:"absolute -top-1 -right-1 p-2 md:p-3 opacity-[0.05] text-4xl md:text-5xl font-black text-slate-900 group-hover:opacity-[0.08] transition-opacity select-none italic",children:s.name.charAt(0)}),t.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 border rounded-xl flex items-center justify-center text-lg md:text-xl shadow-sm group-hover:scale-110 transition-transform duration-300 ${r?"bg-emerald-50 border-emerald-100 text-emerald-500":"bg-purple-50 border-purple-100 text-purple-500"}`,children:r?"":""}),t.jsx(Wo,{role:e,perform:"org:delete",children:t.jsx("button",{onClick:d=>{d.stopPropagation(),i(s)},className:"text-slate-300 hover:text-red-500 p-1 transition-colors text-xs",children:""})})]}),t.jsxs("div",{className:"mb-1 flex items-center gap-1.5 flex-wrap",children:[r?t.jsx("span",{className:"bg-emerald-100 text-emerald-700 px-1.5 py-0.5 rounded text-[7px] md:text-[8px] font-black uppercase tracking-wider",children:"Club"}):t.jsx("span",{className:"bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded text-[7px] md:text-[8px] font-black uppercase tracking-wider",children:"Org"}),t.jsx("span",{className:"text-[8px] md:text-[9px] font-bold text-slate-400 uppercase tracking-wider truncate",children:s.country||"Global"})]}),t.jsx("h3",{className:"text-xs md:text-sm font-black text-slate-900 mb-2 tracking-tight line-clamp-2 leading-tight flex-1",children:s.name}),t.jsxs("div",{className:"flex justify-between items-center border-t border-slate-100 pt-3 mt-auto",children:[t.jsxs("div",{className:"text-center flex-1",children:[t.jsx("div",{className:"text-sm md:text-base font-black text-slate-900 leading-none",children:s.memberTeams.length+(((o=s.childOrgIds)==null?void 0:o.length)||0)}),t.jsx("div",{className:"text-[7px] md:text-[8px] font-black text-slate-400 uppercase tracking-widest mt-1",children:"Squads"})]}),t.jsx("div",{className:"w-px h-4 bg-slate-100 mx-2"}),(!r||s.tournaments.length>0)&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center flex-1",children:[t.jsx("div",{className:"text-sm md:text-base font-black text-slate-900 leading-none",children:s.tournaments.length}),t.jsx("div",{className:"text-[7px] md:text-[8px] font-black text-slate-400 uppercase tracking-widest mt-1",children:r?"Leagues":"Seasons"})]}),t.jsx("div",{className:"w-px h-4 bg-slate-100 mx-2"})]}),t.jsxs("div",{className:"text-center flex-1",children:[t.jsx("div",{className:"text-sm md:text-base font-black text-slate-900 leading-none",children:s.establishedYear||"---"}),t.jsx("div",{className:"text-[7px] md:text-[8px] font-black text-slate-400 uppercase tracking-widest mt-1",children:"EST."})]})]})]})]})},bb=({isOpen:s,onClose:e,organizations:n,onApply:i})=>{const[r,o]=_.useState(""),[d,u]=_.useState(null);if(!s)return null;const p=n.filter(f=>f.name.toLowerCase().includes(r.toLowerCase())||f.id.toLowerCase().includes(r.toLowerCase())),m=()=>{d&&(i(d),e())};return t.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col max-h-[80vh]",children:[t.jsxs("div",{className:"bg-slate-50 p-8 border-b border-slate-100",children:[t.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:"Apply for Access"}),t.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-widest",children:"Join an Organization as Staff"})]}),t.jsxs("div",{className:"p-6 space-y-4 flex-1 overflow-hidden flex flex-col",children:[t.jsx("div",{children:t.jsx("input",{value:r,onChange:f=>o(f.target.value),placeholder:"Search Organization Name or ID...",className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500 transition-all shadow-sm"})}),t.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar space-y-2 pr-1",children:p.length===0?t.jsx("div",{className:"text-center py-10 text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No organizations found"}):p.map(f=>t.jsxs("button",{onClick:()=>u(f.id),className:`w-full p-4 rounded-xl border text-left flex items-center gap-4 transition-all ${d===f.id?"bg-indigo-600 border-indigo-600 text-white shadow-lg":"bg-white border-slate-100 hover:border-slate-300"}`,children:[t.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-lg font-black shrink-0 ${d===f.id?"bg-white/20":"bg-slate-100 text-slate-500"}`,children:f.name.charAt(0)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:`font-black text-sm truncate ${d===f.id?"text-white":"text-slate-900"}`,children:f.name}),t.jsxs("div",{className:`text-[10px] font-bold uppercase tracking-widest ${d===f.id?"text-indigo-200":"text-slate-400"}`,children:[f.memberTeams.length," Teams  ",f.country||"Global"]})]}),d===f.id&&t.jsx("div",{className:"text-white text-xl",children:""})]},f.id))})]}),t.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-4",children:[t.jsx("button",{onClick:e,className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs hover:text-slate-600 transition-all",children:"Cancel"}),t.jsx("button",{onClick:m,disabled:!d,className:"flex-1 py-4 bg-emerald-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-emerald-200 hover:bg-emerald-400 disabled:opacity-50 disabled:shadow-none transition-all",children:"Send Application"})]})]})})},qk=({organizations:s,profile:e,onUpdateProfile:n,onSelectOrg:i,onRequestDeleteOrg:r,onRequestCreateOrg:o,onRequestQuickMatch:d,onOpenMediaStudio:u,fixtures:p,topBatsmen:m,topBowlers:f,onStartMatch:b,onViewMatch:y,onViewTeam:N,currentUserId:k,onApplyForOrg:T,onUpgradeProfile:S,following:R,onToggleFollow:A,onRequestCaptainHub:I,showCaptainHub:j,onRequestMatchReports:E,onOpenCaptainHub:D,onViewOrg:L,onCreateUser:G,onRequestTransferMarket:Y,globalUsers:q=[],onRemoveFixture:ce})=>{const[Q,ne]=_.useState(!1);if(!e)return t.jsx("div",{className:"p-10 text-center font-bold text-slate-400",children:"Loading Profile..."});const ee=s.filter(re=>re.members.some(Re=>Re.userId===k)),se=s.filter(re=>re.isPublic!==!1&&!re.members.some(Re=>Re.userId===k)),M=ee.map(re=>re.id),B=p.filter(re=>{const Re=s.find($e=>$e.fixtures.some(ue=>ue.id===re.id));return Re?M.includes(Re.id):!1}),Z=B.filter(re=>re.status==="Live"),Ne=e.role==="Administrator"||e.role==="Scorer",ae=e.role==="Umpire",P=e.role==="Scorer",W=e.role==="Fan",X=e.role==="Player",we=e.role==="Guest",te=re=>{if(!Ne&&!ae||re.status==="Completed")return!1;const Re=s.find(ue=>ue.fixtures.some(be=>be.id===re.id));return Re?Re.members.some(ue=>ue.userId===k):!0},_e=re=>{we&&S?(alert("Please create a profile to apply to organizations."),S()):T&&T(re)};return t.jsxs("div",{className:"animate-in fade-in duration-700 pb-20",children:[t.jsx(bb,{isOpen:Q,onClose:()=>ne(!1),organizations:s.filter(re=>re.isPublic!==!1),onApply:_e}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-4 md:gap-6 mb-6 md:mb-8",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-black text-slate-900 tracking-tighter",children:W||we?"Fun Hub":"Command Center"}),t.jsx("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-[0.2em] mt-1",children:W||we?"Fan Zone & Live Games":X?"Player Hub":"Global Operations"})]}),t.jsxs("div",{className:"flex flex-wrap gap-2 w-full md:w-auto",children:[t.jsx(Wo,{role:e.role,perform:"fixture:generate",children:t.jsxs("button",{onClick:d,className:"flex-1 md:flex-none bg-emerald-500 text-white px-3 md:px-5 py-2.5 md:py-3 rounded-xl font-black uppercase text-[9px] md:text-[10px] tracking-widest shadow-xl shadow-emerald-200 hover:bg-emerald-400 hover:scale-105 transition-all flex items-center justify-center gap-2 whitespace-nowrap",children:[t.jsx("span",{children:""})," Quick Match"]})}),(W||X||we)&&S&&t.jsx("button",{onClick:S,className:"flex-1 md:flex-none bg-indigo-600 text-white px-4 md:px-6 py-2.5 md:py-3 rounded-xl font-black uppercase text-[9px] md:text-[10px] tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 hover:scale-105 transition-all whitespace-nowrap",children:we?"Create Profile":"Upgrade Profile"}),t.jsxs("button",{onClick:u,className:"flex-1 md:flex-none bg-gradient-to-r from-pink-500 to-purple-500 text-white px-4 md:px-6 py-2.5 md:py-3 rounded-xl font-black uppercase text-[9px] md:text-[10px] tracking-widest shadow-xl shadow-pink-200 hover:shadow-pink-300 hover:scale-105 transition-all flex items-center justify-center gap-2 whitespace-nowrap",children:[t.jsx("span",{children:""})," Media Studio"]}),j&&D&&t.jsxs("div",{className:"flex flex-wrap gap-2 w-full md:w-auto",children:[t.jsxs("button",{onClick:D,className:"flex-1 md:flex-none bg-indigo-600 text-white px-4 md:px-6 py-2.5 md:py-3 rounded-xl font-black uppercase text-[9px] md:text-[10px] tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 hover:scale-105 transition-all flex items-center justify-center gap-2 whitespace-nowrap",children:[t.jsx("span",{children:""})," Captain's Hub"]}),t.jsxs("button",{onClick:E,className:"flex-1 md:flex-none bg-slate-900 text-white px-4 md:px-6 py-2.5 md:py-3 rounded-xl font-black uppercase text-[9px] md:text-[10px] tracking-widest shadow-xl shadow-slate-200 hover:bg-slate-800 hover:scale-105 transition-all flex items-center justify-center gap-2 whitespace-nowrap",children:[t.jsx("span",{children:""})," Reports"]})]}),t.jsxs(Wo,{role:e.role,perform:"org:create",children:[t.jsx("button",{onClick:Y,className:"flex-1 md:flex-none bg-white text-indigo-600 border border-slate-200 hover:bg-slate-50 px-4 md:px-6 py-2.5 md:py-3 rounded-xl font-black uppercase text-[9px] md:text-[10px] tracking-widest transition-all shadow-xl whitespace-nowrap",children:"Recruit Talent "}),t.jsx("button",{onClick:o,className:"flex-1 md:flex-none bg-slate-900 text-white hover:bg-slate-800 px-4 md:px-6 py-2.5 md:py-3 rounded-xl font-black uppercase text-[9px] md:text-[10px] tracking-widest transition-all shadow-xl whitespace-nowrap",children:"+ New Org"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:gap-6",children:[t.jsxs("div",{className:"space-y-6 md:space-y-8",children:[(ae||P)&&t.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-[2rem] p-8 shadow-sm",children:[t.jsxs("h3",{className:"text-xl font-black text-yellow-800 mb-4 flex items-center gap-2",children:[t.jsx("span",{className:"text-2xl",children:""})," Active Assignments"]}),Z.length>0?t.jsx("div",{className:"grid grid-cols-1 gap-3",children:Z.map(re=>t.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-yellow-100 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"font-black text-sm text-slate-900",children:[re.teamAName," vs ",re.teamBName]}),t.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-widest",children:re.venue})]}),t.jsx("button",{onClick:()=>b(re),className:"bg-yellow-500 text-white px-4 py-2 rounded-xl text-[10px] font-black uppercase hover:bg-yellow-600 transition-all",children:"Resume"})]},re.id))}):t.jsx("p",{className:"text-yellow-700/60 text-xs font-bold uppercase tracking-widest",children:"No live matches to officiate currently."})]}),(Z.length>0||B.some(re=>re.status==="Scheduled"))&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h3",{className:"text-xl font-black text-slate-900 flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"})," Match Day"]}),t.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest bg-slate-100 px-3 py-1 rounded-full border border-slate-200",children:"Live & Upcoming"})]}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:B.filter(re=>re.status==="Live"||re.status==="Scheduled").sort((re,Re)=>{if(re.status==="Live"&&Re.status!=="Live")return-1;if(re.status!=="Live"&&Re.status==="Live")return 1;const $e=s.some(be=>be.fixtures.some(Te=>Te.id===re.id)&&be.members.some(Te=>Te.userId===k)),ue=s.some(be=>be.fixtures.some(Te=>Te.id===Re.id)&&be.members.some(Te=>Te.userId===k));return $e&&!ue?-1:!$e&&ue?1:new Date(re.date).getTime()-new Date(Re.date).getTime()}).slice(0,10).map(re=>{const Re=te(re),$e=e.role==="Administrator",ue=s.some(Te=>Te.fixtures.some($=>$.id===re.id)&&Te.members.some($=>$.userId===k)),be=s.find(Te=>Te.fixtures.some($=>$.id===re.id));return t.jsxs("div",{className:`p-4 rounded-3xl border transition-all hover:bg-slate-50 group flex items-center justify-between gap-4 ${re.status==="Live"?"bg-slate-900 border-slate-800 text-white":"bg-white border-slate-100 text-slate-900"}`,children:[t.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",onClick:()=>y(re),children:[t.jsx("div",{className:`w-10 h-10 rounded-2xl flex items-center justify-center shrink-0 ${re.status==="Live"?"bg-red-500/20 text-red-500 animate-pulse":"bg-indigo-50 text-indigo-500"}`,children:re.status==="Live"?"":""}),t.jsxs("div",{className:"truncate flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"font-black text-sm truncate",children:[re.teamAName," vs ",re.teamBName]}),t.jsx("span",{className:`text-[8px] font-bold uppercase tracking-widest px-1.5 py-0.5 rounded ${re.status==="Live"?"bg-red-600 text-white":"bg-slate-100 text-slate-500"}`,children:re.status==="Live"?"Live":"Upcoming"}),!ue&&be&&t.jsxs("span",{className:"text-[8px] font-black uppercase tracking-widest px-1.5 py-0.5 rounded bg-indigo-100 text-indigo-600 border border-indigo-200",children:["Global: ",be.name]})]}),t.jsxs("div",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-widest mt-0.5",children:[re.venue,"  ",new Date(re.date).toLocaleDateString()]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[Re&&t.jsx("button",{onClick:Te=>{Te.stopPropagation(),b(re)},className:"bg-indigo-600 text-white px-3 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-indigo-500 transition-all shadow-lg",children:re.status==="Live"?"Resume":"Claim"}),t.jsx("button",{onClick:Te=>{Te.stopPropagation(),y(re)},className:"bg-slate-100 text-slate-900 px-3 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-slate-200 transition-all border border-slate-200",children:"Stats"}),$e&&ce&&t.jsx("button",{onClick:Te=>{Te.stopPropagation(),window.confirm("Delete this fixture permanently?")&&ce(re.id)},className:"w-8 h-8 flex items-center justify-center bg-red-50 text-red-400 rounded-xl hover:bg-red-500 hover:text-white transition-all border border-red-100",children:""})]})]},re.id)})})]}),!W&&!we&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("h3",{className:"text-xl font-black text-slate-900 flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"})," My Organizations"]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4",children:[ee.length>0?ee.map(re=>t.jsx(Hk,{org:re,userRole:e.role,onOpen:i,onDeleteRequest:r},re.id)):t.jsx("div",{className:"col-span-full py-12 text-center bg-slate-50 border-2 border-dashed border-slate-200 rounded-[2.5rem]",children:t.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"You are not a member of any organization."})}),t.jsx(Wo,{role:e.role,perform:"org:create",children:t.jsxs("button",{onClick:o,className:"border-2 border-dashed border-slate-200 rounded-2xl flex flex-col items-center justify-center p-6 hover:bg-slate-50 hover:border-indigo-300 transition-all text-slate-400 hover:text-indigo-600 gap-2 group aspect-[4/3] md:aspect-auto",children:[t.jsx("span",{className:"text-3xl md:text-4xl font-thin group-hover:scale-110 transition-transform",children:"+"}),t.jsx("span",{className:"text-[9px] md:text-[10px] font-black uppercase tracking-widest text-center",children:"New Org"})]})})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("h3",{className:"text-xl font-black text-slate-900 flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-300"})," ",X?"Find Clubs":"Discover"]}),!W&&!we&&t.jsx("button",{onClick:()=>ne(!0),className:"text-indigo-600 font-bold text-xs uppercase tracking-widest hover:underline",children:"Find More"})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-4",children:se.slice(0,6).map(re=>{const Re=R==null?void 0:R.orgs.includes(re.id);return t.jsxs("div",{className:"bg-white border border-slate-200 p-4 rounded-2xl opacity-85 hover:opacity-100 transition-all relative overflow-hidden group flex flex-col h-full",children:[t.jsx("button",{onClick:()=>L&&L(re.id),className:"text-left w-full hover:underline group-hover:text-indigo-600 transition-colors mb-2",children:t.jsx("h4",{className:"font-black text-sm md:text-base text-slate-900 line-clamp-1",children:re.name})}),t.jsxs("div",{className:"flex items-center gap-1.5 mb-4 flex-wrap",children:[t.jsx("span",{className:`text-[7px] md:text-[8px] font-black uppercase tracking-widest px-1.5 py-0.5 rounded ${re.type==="GOVERNING_BODY"?"bg-purple-100 text-purple-700":"bg-emerald-100 text-emerald-700"}`,children:re.type==="GOVERNING_BODY"?"Org":"Club"}),t.jsx("span",{className:"text-[9px] text-slate-500 truncate",children:re.country||"Global"})]}),t.jsx("div",{className:"mt-auto",children:W||we?t.jsx("button",{onClick:()=>A&&A("ORG",re.id),className:`w-full py-1.5 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all ${Re?"bg-slate-900 text-white":"bg-slate-50 text-slate-600 hover:bg-slate-200"}`,children:Re?"Following":"Follow"}):t.jsx("button",{onClick:()=>_e(re.id),className:"w-full py-1.5 bg-slate-50 text-slate-600 rounded-lg text-[9px] font-black uppercase tracking-widest hover:bg-indigo-600 hover:text-white transition-all",children:X&&re.type==="CLUB"?"Join":"Apply"})})]},re.id)})})]})]}),t.jsx("div",{className:"space-y-8",children:t.jsxs("div",{className:"bg-white rounded-[2rem] p-6 border border-slate-200 shadow-xl shadow-slate-100",children:[t.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-6",children:"Global Leaders"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest mb-3",children:"Orange Cap"}),m.slice(0,3).map((re,Re)=>t.jsxs("div",{className:"flex justify-between items-center text-xs mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-bold text-slate-700",children:re.name}),t.jsx("button",{onClick:()=>N(re.teamId),className:"text-[9px] font-bold text-slate-400 bg-slate-100 px-1 rounded hover:bg-slate-200",children:re.teamName})]}),t.jsx("span",{className:"font-black text-slate-900",children:re.stats.runs})]},re.id))]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] font-black text-purple-500 uppercase tracking-widest mb-3",children:"Purple Cap"}),f.slice(0,3).map((re,Re)=>t.jsxs("div",{className:"flex justify-between items-center text-xs mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-bold text-slate-700",children:re.name}),t.jsx("button",{onClick:()=>N(re.teamId),className:"text-[9px] font-bold text-slate-400 bg-slate-100 px-1 rounded hover:bg-slate-200",children:re.teamName})]}),t.jsx("span",{className:"font-black text-slate-900",children:re.stats.wickets})]},re.id))]})]})]})})]})]})},vr=({shots:s=[],onRecord:e,readonly:n=!1})=>{const i=_.useRef(null),r=o=>{if(n||!e||!i.current)return;const d=i.current.getBoundingClientRect(),u=(o.clientX-d.left)/d.width*100,p=(o.clientY-d.top)/d.height*100;e({x:u,y:p})};return t.jsxs("div",{className:"relative aspect-square w-full max-w-[300px] mx-auto",children:[t.jsxs("svg",{ref:i,viewBox:"0 0 100 100",className:`w-full h-full rounded-full bg-emerald-700 border-4 border-emerald-800 shadow-inner ${n?"":"cursor-crosshair"}`,onClick:r,children:[t.jsx("circle",{cx:"50",cy:"50",r:"48",fill:"none",stroke:"rgba(255,255,255,0.2)",strokeWidth:"0.5"}),t.jsx("circle",{cx:"50",cy:"50",r:"30",fill:"rgba(255,255,255,0.05)",stroke:"rgba(255,255,255,0.3)",strokeWidth:"0.5",strokeDasharray:"2 2"}),t.jsx("rect",{x:"48",y:"42",width:"4",height:"16",fill:"#e2e8f0",rx:"1",opacity:"0.8"})," ",s.map((o,d)=>t.jsxs("g",{children:[t.jsx("line",{x1:"50",y1:"50",x2:o.coords.x,y2:o.coords.y,stroke:o.color||"yellow",strokeWidth:"0.5",opacity:"0.6"}),t.jsx("circle",{cx:o.coords.x,cy:o.coords.y,r:"1.5",fill:o.color||"yellow",stroke:"white",strokeWidth:"0.2"})]},d))]}),t.jsx("div",{className:"absolute top-2 right-2 text-[8px] font-black text-white/50 uppercase tracking-widest pointer-events-none",children:"Wagon Wheel"})]})},yr=({deliveries:s=[],onRecord:e,readonly:n=!1})=>{const i=_.useRef(null),r=o=>{if(n||!e||!i.current)return;const d=i.current.getBoundingClientRect(),u=(o.clientX-d.left)/d.width*100,p=(o.clientY-d.top)/d.height*200;e({x:u,y:p})};return t.jsxs("div",{className:"relative aspect-[1/2] w-full max-w-[150px] mx-auto",children:[t.jsxs("svg",{ref:i,viewBox:"0 0 100 200",className:`w-full h-full bg-[#d2b48c] border-2 border-[#b08d55] shadow-inner ${n?"":"cursor-crosshair"}`,onClick:r,children:[t.jsx("line",{x1:"10",y1:"20",x2:"90",y2:"20",stroke:"white",strokeWidth:"1"})," ",t.jsx("line",{x1:"10",y1:"40",x2:"90",y2:"40",stroke:"white",strokeWidth:"1"})," ",t.jsx("line",{x1:"10",y1:"180",x2:"90",y2:"180",stroke:"white",strokeWidth:"1"})," ",t.jsx("line",{x1:"10",y1:"160",x2:"90",y2:"160",stroke:"white",strokeWidth:"1"})," ",t.jsx("rect",{x:"48",y:"10",width:"4",height:"10",fill:"#333"}),t.jsx("rect",{x:"48",y:"180",width:"4",height:"10",fill:"#333"}),t.jsx("rect",{x:"0",y:"40",width:"100",height:"70",fill:"#f59e0b",fillOpacity:"0.1"})," ",t.jsx("rect",{x:"0",y:"110",width:"100",height:"30",fill:"#10b981",fillOpacity:"0.1"})," ",t.jsx("rect",{x:"0",y:"140",width:"100",height:"20",fill:"#06b6d4",fillOpacity:"0.1"})," ",t.jsx("text",{x:"5",y:"105",fontSize:"4",fontWeight:"bold",fill:"#f59e0b",opacity:"0.4",pointerEvents:"none",children:"SHORT"}),t.jsx("text",{x:"5",y:"135",fontSize:"4",fontWeight:"bold",fill:"#10b981",opacity:"0.4",pointerEvents:"none",children:"BOL"}),t.jsx("text",{x:"5",y:"155",fontSize:"4",fontWeight:"bold",fill:"#06b6d4",opacity:"0.4",pointerEvents:"none",children:"FULL"}),s.map((o,d)=>t.jsx("circle",{cx:o.coords.x,cy:o.coords.y,r:"3",fill:o.color||"red",stroke:"black",strokeWidth:"0.5"},d))]}),t.jsx("div",{className:"absolute top-2 left-2 text-[8px] font-black text-black/30 uppercase tracking-widest pointer-events-none rotate-90 origin-top-left translate-x-4",children:"Pitch Map"})]})},vb=({player:s,isOpen:e,onClose:n,isFollowed:i,onToggleFollow:r,allFixtures:o=[],onViewMatch:d,onUpdatePlayer:u,onDeletePlayer:p,onClaim:m})=>{var W,X,we,te,_e,re,Re,$e;const[f,b]=_.useState("SUMMARY"),[y,N]=_.useState("BATTING"),[k,T]=_.useState("OFFICIAL"),[S,R]=_.useState(!1),[A,I]=_.useState(!1),[j,E]=_.useState({name:"",role:"",bio:"",age:"",battingStyle:"",bowlingStyle:"",teamName:"",teamRole:"",nickname:"",favoritePlayer:"",favoriteWorldCupMoment:"",favoriteGround:""}),D=_.useMemo(()=>o.filter(ue=>k==="OFFICIAL"?ue.isOfficial!==!1:ue.isOfficial===!1),[o,k]),L=_.useMemo(()=>{if(!s)return{matches:0,runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,catches:0,stumpings:0,highestScore:0,fours:0,sixes:0,fiveWickets:0,threeWickets:0,maidens:0,ducks:0,hundreds:0,fifties:0,bestBowling:""};let ue=0,be=0,Te=0,$=0,oe=0,Ae=0,De=0,Me=0,Be=0,ze=0,Ke=0,Ce=0,St=0,Ee=0,Ue=0,qe=0,mt=0,ft="";return D.forEach(ot=>{var Ns,fs;if(!ot.savedState)return;(((Ns=ot.teamASquadIds)==null?void 0:Ns.includes(s.id))||((fs=ot.teamBSquadIds)==null?void 0:fs.includes(s.id))||ot.teamAId===s.teamId||ot.teamBId===s.teamId)&&Ae++;const Ze=ot.savedState.history,He=Ze.filter(We=>{var Bt;return We.strikerId===s.id&&!((Bt=We.commentary)!=null&&Bt.startsWith("EVENT"))}),bt=He.reduce((We,Bt)=>We+(Bt.runs||0),0),_t=He.filter(We=>We.extraType!=="Wide").length;(_t>0||He.some(We=>We.isWicket&&We.outPlayerId===s.id))&&(Te+=_t,ue+=bt,bt>Be&&(Be=bt),bt>=100?qe++:bt>=50&&mt++,bt===0&&He.some(We=>We.isWicket&&We.outPlayerId===s.id)&&Ue++,ze+=He.filter(We=>We.runs===4).length,Ke+=He.filter(We=>We.runs===6).length);const tt=Ze.filter(We=>{var Bt;return We.bowlerId===s.id&&!((Bt=We.commentary)!=null&&Bt.startsWith("EVENT"))}),Tt=tt.filter(We=>We.isWicket&&We.creditBowler).length,Ct=tt.reduce((We,Bt)=>{const Pt=Bt.extraType==="Wide"||Bt.extraType==="NoBall"?1:0;return We+(Bt.runs||0)+(Bt.extraRuns||0)+Pt},0);tt.length>0&&(be+=Tt,oe+=Ct,$+=tt.filter(We=>We.extraType!=="Wide"&&We.extraType!=="NoBall").length,Tt>=5?Ce++:Tt>=3&&St++),De+=Ze.filter(We=>We.isWicket&&We.wicketType==="Caught"&&We.fielderId===s.id).length,Me+=Ze.filter(We=>We.isWicket&&We.wicketType==="Stumped"&&We.fielderId===s.id).length}),{matches:Ae,runs:ue,wickets:be,ballsFaced:Te,ballsBowled:$,runsConceded:oe,catches:De,stumpings:Me,highestScore:Be,fours:ze,sixes:Ke,fiveWickets:Ce,threeWickets:St,maidens:Ee,ducks:Ue,hundreds:qe,fifties:mt,bestBowling:ft}},[D,s]),G=_.useMemo(()=>{if(!s)return[];const ue=[];return D.forEach(be=>{var Te;(Te=be.savedState)!=null&&Te.history&&be.savedState.history.forEach($=>{($.strikerId===s.id||$.bowlerId===s.id)&&ue.push($)})}),ue},[D,s]),Y=_.useMemo(()=>G.filter(ue=>s&&ue.strikerId===s.id&&ue.pitchCoords).map(ue=>({coords:ue.pitchCoords,color:ue.isWicket?"red":ue.runs>=4?"yellow":"green"})),[G,s]),q=_.useMemo(()=>G.filter(ue=>s&&ue.strikerId===s.id&&ue.shotCoords).map(ue=>({coords:ue.shotCoords,color:ue.runs===4?"indigo":ue.runs===6?"emerald":"yellow"})),[G,s]),ce=L.matches>0?(L.runs/Math.max(1,L.matches-L.ducks)).toFixed(1):"0.0",Q=L.ballsFaced>0?(L.runs/L.ballsFaced*100).toFixed(1):"0.0",ne=Math.floor(L.ballsBowled/6)+L.ballsBowled%6/10,ee=L.ballsBowled>0?(L.runsConceded/(L.ballsBowled/6)).toFixed(2):"0.0",se=L.wickets>0?(L.runsConceded/L.wickets).toFixed(1):"0.0";if(!e||!s)return null;const M=s.role==="Wicket-keeper",B=D.filter(ue=>{var be,Te;return ue.teamAId===s.teamId||ue.teamBId===s.teamId||((be=ue.teamASquadIds)==null?void 0:be.includes(s.id))||((Te=ue.teamBSquadIds)==null?void 0:Te.includes(s.id))}).sort((ue,be)=>new Date(be.date).getTime()-new Date(ue.date).getTime()),Z=()=>{b("DETAILED"),s.role==="Bowler"?N("BOWLING"):N(M?"KEEPING":"BATTING")},Ne=["BATTING","BOWLING","SPATIAL","MATCHES"].filter(ue=>!(ue==="KEEPING"&&!M)),ae=()=>{var ue,be,Te,$,oe,Ae,De,Me;A?(u&&u({name:j.name,role:j.role,bio:j.bio,playerDetails:{...s.playerDetails||{battingStyle:"Right-hand",bowlingStyle:"",primaryRole:j.role,lookingForClub:!1,isHireable:!1},battingStyle:j.battingStyle||"Right-hand",bowlingStyle:j.bowlingStyle||"",primaryRole:j.role,age:j.age,teamRole:j.teamRole,nickname:j.nickname,favoritePlayer:j.favoritePlayer,favoriteWorldCupMoment:j.favoriteWorldCupMoment,favoriteGround:j.favoriteGround}}),I(!1)):(E({name:s.name,role:s.role,bio:s.bio||"",age:((ue=s.playerDetails)==null?void 0:ue.age)||"",battingStyle:((be=s.playerDetails)==null?void 0:be.battingStyle)||"Right-hand",bowlingStyle:((Te=s.playerDetails)==null?void 0:Te.bowlingStyle)||"",teamName:s.teamName||"",teamRole:(($=s.playerDetails)==null?void 0:$.teamRole)||"",nickname:((oe=s.playerDetails)==null?void 0:oe.nickname)||"",favoritePlayer:((Ae=s.playerDetails)==null?void 0:Ae.favoritePlayer)||"",favoriteWorldCupMoment:((De=s.playerDetails)==null?void 0:De.favoriteWorldCupMoment)||"",favoriteGround:((Me=s.playerDetails)==null?void 0:Me.favoriteGround)||""}),I(!0))},P=ue=>{var Te;const be=(Te=ue.target.files)==null?void 0:Te[0];if(be&&u){R(!0);const $=new FileReader;$.onload=oe=>{var De;const Ae=new Image;Ae.onload=()=>{const Me=document.createElement("canvas"),Be=Me.getContext("2d"),ze=800;let Ke=Ae.width,Ce=Ae.height;Ke>Ce?Ke>ze&&(Ce*=ze/Ke,Ke=ze):Ce>ze&&(Ke*=ze/Ce,Ce=ze),Me.width=Ke,Me.height=Ce,Be==null||Be.drawImage(Ae,0,0,Ke,Ce);const St=Me.toDataURL("image/jpeg",.8);u({photoUrl:St}),R(!1)},Ae.src=(De=oe.target)==null?void 0:De.result},$.readAsDataURL(be)}};return t.jsx("div",{className:"fixed inset-0 bg-slate-950/95 backdrop-blur-2xl z-[200] flex items-center justify-center p-4 overflow-y-auto",children:t.jsxs("div",{className:"bg-[#1A1A2E] w-full max-w-5xl md:h-[85vh] rounded-[3rem] shadow-[0_0_100px_rgba(0,0,0,0.8)] border border-slate-800 relative overflow-hidden flex flex-col md:flex-row animate-in zoom-in-95 duration-500",children:[t.jsxs("div",{className:"w-full md:w-1/2 relative bg-slate-950 overflow-hidden shrink-0 group",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1A1A2E] via-transparent to-transparent z-10"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#1A1A2E]/40 to-transparent z-10"}),s.highlightVideoUrl?t.jsx("video",{src:s.highlightVideoUrl,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-full object-cover opacity-90 scale-105"}):t.jsx("img",{src:s.photoUrl||`https://ui-avatars.com/api/?name=${s.name}&background=1A1A2E&color=fff&size=1024`,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",alt:s.name}),t.jsx("div",{className:"absolute top-8 left-8 z-30 flex gap-3",children:t.jsx("button",{onClick:n,className:"w-12 h-12 bg-white/10 hover:bg-white/20 backdrop-blur-xl rounded-full text-white flex items-center justify-center transition-all border border-white/10 shadow-2xl",children:""})}),u&&t.jsx("div",{className:"absolute bottom-8 left-8 z-30",children:t.jsxs("label",{className:"bg-white/10 hover:bg-white/20 backdrop-blur-xl border border-white/20 px-4 py-2 rounded-xl cursor-pointer text-[10px] font-black uppercase text-white tracking-widest transition-all",children:[S?"Uploading...":"Change Photo",t.jsx("input",{type:"file",accept:"image/*",onChange:P,className:"hidden"})]})})]}),t.jsxs("div",{className:"flex-1 bg-white relative flex flex-col min-w-0",children:[t.jsxs("div",{className:"bg-[#FCE4EC] p-12 flex justify-between items-start shrink-0",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-pink-600",children:"PLAYER"}),t.jsx("div",{className:"text-3xl font-serif italic text-pink-800 leading-none",children:"profile"})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[A&&t.jsxs("div",{className:"space-y-1 text-right",children:[t.jsx("div",{className:"text-[9px] font-black text-pink-400 uppercase tracking-widest",children:"Select Role:"}),t.jsxs("select",{value:j.role,onChange:ue=>E({...j,role:ue.target.value}),className:"bg-transparent border-b border-pink-300 font-black text-slate-800 uppercase focus:border-indigo-500 outline-none text-xs",children:[t.jsx("option",{value:"Batsman",children:"Batsman"}),t.jsx("option",{value:"Bowler",children:"Bowler"}),t.jsx("option",{value:"All-rounder",children:"All-rounder"}),t.jsx("option",{value:"Wicket-keeper",children:"Wicket-keeper"})]})]}),t.jsx("div",{className:"w-12 h-12",children:t.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full fill-pink-600 opacity-20",children:t.jsx("rect",{x:"10",y:"10",width:"80",height:"80"})})})]})]}),t.jsxs("div",{className:"px-12 py-8 flex-1 overflow-y-auto no-scrollbar bg-gradient-to-b from-[#FCE4EC] to-white",children:[t.jsxs("div",{className:"mb-12",children:[t.jsx("div",{className:"text-[10px] font-black text-pink-400 uppercase tracking-widest mb-1",children:"Name:"}),A?t.jsx("input",{value:j.name,onChange:ue=>E({...j,name:ue.target.value}),className:"text-5xl font-black text-slate-900 bg-transparent border-b-4 border-pink-400 focus:border-indigo-600 outline-none w-full uppercase"}):t.jsx("h1",{className:"text-5xl font-black text-slate-900 tracking-tight leading-none uppercase",children:s.name.split(" ").map((ue,be)=>t.jsx("div",{children:ue},be))})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"text-[10px] font-black text-pink-400 uppercase tracking-widest",children:"Age:"}),A?t.jsx("input",{value:j.age,onChange:ue=>E({...j,age:ue.target.value}),className:"bg-transparent border-b border-pink-300 font-black text-slate-800 uppercase focus:border-indigo-500 outline-none w-full"}):t.jsx("div",{className:"text-xl font-black text-slate-800 uppercase",children:((W=s.playerDetails)==null?void 0:W.age)||"26"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"text-[10px] font-black text-pink-400 uppercase tracking-widest",children:"Local Team:"}),A?t.jsx("input",{value:j.teamName,onChange:ue=>E({...j,teamName:ue.target.value}),className:"bg-transparent border-b border-pink-300 font-black text-slate-800 uppercase focus:border-indigo-500 outline-none w-full"}):t.jsx("div",{className:"text-xl font-black text-slate-800 uppercase",children:s.teamName||"HOODS"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"text-[10px] font-black text-pink-400 uppercase tracking-widest",children:"Batting:"}),A?t.jsxs("select",{value:j.battingStyle,onChange:ue=>E({...j,battingStyle:ue.target.value}),className:"bg-transparent border-b border-pink-300 font-black text-slate-800 uppercase focus:border-indigo-500 outline-none w-full",children:[t.jsx("option",{value:"Right-hand",children:"RIGHT-HANDED"}),t.jsx("option",{value:"Left-hand",children:"LEFT-HANDED"})]}):t.jsx("div",{className:"text-xl font-black text-slate-800 uppercase",children:((X=s.playerDetails)==null?void 0:X.battingStyle)||"RIGHT-HANDED"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("div",{className:"text-[10px] font-black text-pink-400 uppercase tracking-widest",children:"Bowling:"}),A?t.jsx("input",{value:j.bowlingStyle,onChange:ue=>E({...j,bowlingStyle:ue.target.value}),className:"bg-transparent border-b border-pink-300 font-black text-slate-800 uppercase focus:border-indigo-500 outline-none w-full"}):t.jsx("div",{className:"text-xl font-black text-slate-800 uppercase",children:((we=s.playerDetails)==null?void 0:we.bowlingStyle)||"RIGHT-ARM OFFSPIN"})]}),t.jsxs("div",{className:"space-y-1 col-span-2",children:[t.jsx("div",{className:"text-[10px] font-black text-pink-400 uppercase tracking-widest",children:"Role in Team:"}),A?t.jsxs("select",{value:j.teamRole,onChange:ue=>E({...j,teamRole:ue.target.value}),className:"bg-transparent border-b border-pink-300 font-black text-slate-800 uppercase focus:border-indigo-500 outline-none w-full",children:[t.jsx("option",{value:"",children:"SELECT ROLE"}),t.jsx("option",{value:"Batter",children:"BATTER"}),t.jsx("option",{value:"Bowler",children:"BOWLER"}),t.jsx("option",{value:"Wicket-keeper",children:"WICKET-KEEPER"}),t.jsx("option",{value:"Captain",children:"CAPTAIN"}),t.jsx("option",{value:"Vice Captain",children:"VICE CAPTAIN"})]}):t.jsx("div",{className:"text-xl font-black text-slate-800 uppercase",children:((te=s.playerDetails)==null?void 0:te.teamRole)||"PLAYER"})]}),t.jsxs("div",{className:"space-y-1 col-span-2",children:[t.jsx("div",{className:"text-[10px] font-black text-pink-400 uppercase tracking-widest",children:"Nickname:"}),A?t.jsx("input",{value:j.nickname,onChange:ue=>E({...j,nickname:ue.target.value}),className:"bg-transparent border-b border-pink-300 font-black text-slate-800 uppercase focus:border-indigo-500 outline-none w-full"}):t.jsx("div",{className:"text-xl font-black text-slate-800 uppercase",children:((_e=s.playerDetails)==null?void 0:_e.nickname)||"-"})]}),t.jsxs("div",{className:"space-y-1 col-span-2",children:[t.jsx("div",{className:"text-[10px] font-black text-pink-400 uppercase tracking-widest",children:"Favorite Player:"}),A?t.jsx("input",{value:j.favoritePlayer,onChange:ue=>E({...j,favoritePlayer:ue.target.value}),className:"bg-transparent border-b border-pink-300 font-black text-slate-800 uppercase focus:border-indigo-500 outline-none w-full"}):t.jsx("div",{className:"text-base font-black text-slate-800 uppercase",children:((re=s.playerDetails)==null?void 0:re.favoritePlayer)||"-"})]}),t.jsxs("div",{className:"space-y-1 col-span-2",children:[t.jsx("div",{className:"text-[10px] font-black text-pink-400 uppercase tracking-widest",children:"Favorite WC Moment:"}),A?t.jsx("input",{value:j.favoriteWorldCupMoment,onChange:ue=>E({...j,favoriteWorldCupMoment:ue.target.value}),className:"bg-transparent border-b border-pink-300 font-black text-slate-800 uppercase focus:border-indigo-500 outline-none w-full"}):t.jsx("div",{className:"text-base font-black text-slate-800 uppercase",children:((Re=s.playerDetails)==null?void 0:Re.favoriteWorldCupMoment)||"-"})]}),t.jsxs("div",{className:"space-y-1 col-span-2",children:[t.jsx("div",{className:"text-[10px] font-black text-pink-400 uppercase tracking-widest",children:"Favorite Ground:"}),A?t.jsx("input",{value:j.favoriteGround,onChange:ue=>E({...j,favoriteGround:ue.target.value}),className:"bg-transparent border-b border-pink-300 font-black text-slate-800 uppercase focus:border-indigo-500 outline-none w-full"}):t.jsx("div",{className:"text-base font-black text-slate-800 uppercase",children:(($e=s.playerDetails)==null?void 0:$e.favoriteGround)||"-"})]})]}),t.jsxs("div",{className:"mt-12 pt-12 border-t border-pink-100",children:[t.jsx("div",{className:"text-[10px] font-black text-pink-400 uppercase tracking-widest mb-4 italic",children:"Biography"}),A?t.jsx("textarea",{value:j.bio,onChange:ue=>E({...j,bio:ue.target.value}),className:"w-full bg-slate-50 rounded-2xl p-4 text-slate-600 text-sm border-2 border-pink-200 focus:border-indigo-500 outline-none h-32"}):t.jsx("p",{className:"text-slate-600 text-sm font-medium leading-relaxed",children:s.bio||"A vital part of the team, bringing consistency and high-level performance to every match."})]})]}),t.jsxs("div",{className:"p-8 bg-slate-50 border-t border-slate-100 flex items-center justify-between gap-4 shrink-0",children:[t.jsxs("div",{className:"flex gap-2",children:[u&&t.jsx("button",{onClick:ae,className:`px-6 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-xl transition-all hover:scale-105 active:scale-95 ${A?"bg-indigo-600 text-white":"bg-[#10B981] text-white"}`,children:A?"Save Changes":"Edit Profile"}),A&&p&&t.jsx("button",{onClick:()=>confirm(`Delete ${s.name}?`)&&p(s.id),className:"px-6 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest bg-red-600 text-white shadow-xl hover:bg-red-700 transition-all",children:"Delete"}),!A&&t.jsxs(t.Fragment,{children:[!s.userId&&m&&t.jsx("button",{onClick:()=>{confirm("Are you sure this is you? This will send a claim request to the team admin.")&&m(s.id)},className:"px-6 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest bg-indigo-600 text-white shadow-xl hover:bg-indigo-500 transition-all shadow-indigo-200",children:"Claim Profile"}),t.jsx("button",{onClick:r,className:`px-6 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${i?"bg-[#10B981] text-white":"bg-slate-200 text-slate-600 hover:bg-slate-300"}`,children:i?"Following":"Follow"})]})]}),t.jsx("button",{onClick:Z,className:"px-6 py-3 text-[10px] font-black uppercase tracking-widest text-indigo-600 hover:text-indigo-800 transition-all flex items-center gap-2",children:"Analytics "})]}),f==="DETAILED"&&t.jsxs("div",{className:"absolute inset-0 bg-[#FCE4EC] z-50 flex flex-col p-12 overflow-y-auto custom-scrollbar animate-in slide-in-from-right-10 duration-500",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8 shrink-0",children:[t.jsx("button",{onClick:()=>b("SUMMARY"),className:"text-pink-600 font-black text-sm flex items-center gap-2 hover:gap-4 transition-all",children:" Back to Profile"}),t.jsx("div",{className:"bg-white/50 backdrop-blur-md p-1 rounded-xl flex gap-1",children:["OFFICIAL","UNOFFICIAL"].map(ue=>t.jsx("button",{onClick:()=>T(ue),className:`px-4 py-2 rounded-lg text-[9px] font-black uppercase transition-all ${k===ue?"bg-pink-600 text-white shadow-lg":"text-pink-400 hover:bg-pink-100"}`,children:ue},ue))})]}),t.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-6 shrink-0",children:Ne.map(ue=>t.jsx("button",{onClick:()=>N(ue),className:`px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${y===ue?"bg-pink-600 text-white shadow-xl":"bg-white text-pink-400 hover:bg-pink-50"}`,children:ue},ue))}),t.jsxs("div",{className:"grid grid-cols-1 gap-6 flex-1",children:[y==="BATTING"&&t.jsxs("div",{className:"bg-white rounded-[2rem] p-8 shadow-sm space-y-8",children:[t.jsxs("div",{className:"flex justify-between items-end border-b border-pink-50 pb-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-6xl font-black text-pink-600 leading-none",children:L.runs}),t.jsx("div",{className:"text-xs font-bold text-pink-300 uppercase tracking-widest mt-2",children:"Career Runs"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-4xl font-black text-slate-800 leading-none",children:L.highestScore||0}),t.jsx("div",{className:"text-[10px] font-bold text-pink-300 uppercase tracking-widest mt-1",children:"High Score"})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[{l:"Average",v:ce},{l:"SR",v:Q},{l:"100s",v:L.hundreds},{l:"50s",v:L.fifties},{l:"Ducks",v:L.ducks},{l:"Fours",v:L.fours},{l:"Sixes",v:L.sixes},{l:"Matches",v:L.matches}].map((ue,be)=>t.jsxs("div",{className:"bg-pink-50/50 p-6 rounded-2xl border border-pink-100/50",children:[t.jsx("div",{className:"text-2xl font-black text-slate-800",children:ue.v}),t.jsx("div",{className:"text-[10px] text-pink-300 uppercase tracking-widest font-black",children:ue.l})]},be))})]}),y==="BOWLING"&&t.jsxs("div",{className:"bg-white rounded-[2rem] p-8 shadow-sm space-y-8",children:[t.jsxs("div",{className:"flex justify-between items-end border-b border-pink-50 pb-6",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-6xl font-black text-indigo-600 leading-none",children:L.wickets}),t.jsx("div",{className:"text-xs font-bold text-indigo-300 uppercase tracking-widest mt-2",children:"Career Wickets"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-4xl font-black text-slate-800 leading-none",children:L.bestBowling||"-/-"}),t.jsx("div",{className:"text-[10px] font-bold text-indigo-300 uppercase tracking-widest mt-1",children:"Best Fig."})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-6",children:[{l:"Economy",v:ee},{l:"Average",v:se},{l:"5W Hauls",v:L.fiveWickets},{l:"3W Hauls",v:L.threeWickets},{l:"Maidens",v:L.maidens},{l:"Overs",v:ne}].map((ue,be)=>t.jsxs("div",{className:"bg-indigo-50/50 p-6 rounded-2xl border border-indigo-100/50",children:[t.jsx("div",{className:"text-2xl font-black text-slate-800",children:ue.v}),t.jsx("div",{className:"text-[10px] text-indigo-300 uppercase tracking-widest font-black",children:ue.l})]},be))})]}),y==="SPATIAL"&&t.jsxs("div",{className:"bg-white rounded-[2rem] p-8 shadow-sm grid grid-cols-1 md:grid-cols-2 gap-12 items-center",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-[10px] font-black text-pink-400 uppercase tracking-widest text-center",children:"Pitch Dispersion"}),t.jsx("div",{className:"bg-pink-50 p-4 rounded-3xl",children:t.jsx(yr,{deliveries:Y,readonly:!0})})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-[10px] font-black text-pink-400 uppercase tracking-widest text-center",children:"Wagon Wheel"}),t.jsx("div",{className:"bg-pink-50 p-4 rounded-3xl",children:t.jsx(vr,{shots:q,readonly:!0})})]})]}),y==="MATCHES"&&t.jsxs("div",{className:"bg-white rounded-[2rem] p-8 shadow-sm space-y-4",children:[t.jsx("h3",{className:"text-sm font-black text-pink-600 uppercase tracking-widest mb-4",children:"Match History"}),t.jsx("div",{className:"space-y-3",children:B.map(ue=>t.jsxs("div",{onClick:()=>d&&d(ue),className:"p-4 rounded-2xl border border-pink-100 hover:bg-pink-50 transition-all cursor-pointer flex justify-between items-center group",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] text-pink-300 font-bold uppercase",children:new Date(ue.date).toLocaleDateString()}),t.jsxs("div",{className:"font-bold text-slate-800 text-sm group-hover:text-pink-600 transition-colors",children:[ue.teamAName," vs ",ue.teamBName]})]}),t.jsx("div",{className:`text-[10px] font-black uppercase px-2 py-1 rounded ${ue.status==="Completed"?"text-emerald-600":"text-amber-600"}`,children:ue.status})]},ue.id))})]})]})]})]}),t.jsx("button",{onClick:n,className:"absolute top-8 right-8 z-[60] w-12 h-12 bg-white/10 hover:bg-white/20 backdrop-blur-xl rounded-full text-white flex items-center justify-center transition-all border border-white/10 shadow-2xl md:hidden",children:""})]})})},yb=({member:s,isOpen:e,onClose:n,allOrganizations:i=[]})=>{const r=_.useMemo(()=>{if(!s||s.role!=="Umpire"&&s.role!=="Match Official")return null;const d={totalGames:0,orgs:[]};return i.forEach(u=>{const p=u.fixtures.filter(m=>{var f;return(f=m.umpires)==null?void 0:f.includes(s.userId)}).length;p>0&&(d.totalGames+=p,d.orgs.push({name:u.name,count:p}))}),d},[s,i]),o=_.useMemo(()=>!s||!i?[]:i.filter(d=>d.createdBy===s.userId),[s,i]);return!e||!s?null:t.jsx("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[400] flex items-center justify-center p-4 animate-in zoom-in-95 duration-200",children:t.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[2.5rem] shadow-2xl overflow-hidden relative border border-slate-200",children:[t.jsxs("div",{className:"h-32 bg-slate-900 relative overflow-hidden",children:[t.jsx("div",{className:`absolute inset-0 bg-gradient-to-br opacity-80 ${s.role==="Administrator"?"from-purple-600 to-indigo-900":s.role==="Umpire"?"from-yellow-600 to-amber-900":"from-teal-500 to-emerald-800"}`}),t.jsx("button",{onClick:n,className:"absolute top-4 right-4 w-8 h-8 bg-black/20 text-white rounded-full flex items-center justify-center hover:bg-black/40 transition-all backdrop-blur-md z-10",children:""}),t.jsx("div",{className:"absolute -bottom-10 -right-10 text-9xl opacity-10 text-white rotate-12",children:""})]}),t.jsxs("div",{className:"px-8 pb-8 -mt-12 relative max-h-[60vh] overflow-y-auto custom-scrollbar",children:[t.jsx("div",{className:"w-24 h-24 bg-white p-1.5 rounded-3xl shadow-xl mb-4",children:t.jsx("div",{className:`w-full h-full rounded-2xl flex items-center justify-center text-4xl font-black text-white shadow-inner ${s.role==="Administrator"?"bg-purple-600":s.role==="Umpire"?"bg-amber-500":"bg-teal-500"}`,children:s.name.charAt(0)})}),t.jsx("h2",{className:"text-2xl font-black text-slate-900 leading-tight",children:s.name}),t.jsx("p",{className:"text-sm font-bold text-slate-400 mb-8",children:s.handle}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100 flex items-center justify-between",children:[t.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Role"}),t.jsx("span",{className:`text-[10px] font-black uppercase tracking-widest px-3 py-1.5 rounded-lg ${s.role==="Administrator"?"bg-purple-100 text-purple-600":"bg-teal-100 text-teal-600"}`,children:s.role})]}),o.length>0&&t.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Created Clubs"}),t.jsx("span",{className:"text-xl font-black text-indigo-600",children:o.length})]}),t.jsx("div",{className:"pt-3 border-t border-slate-200/50 space-y-2",children:o.map((d,u)=>t.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-5 h-5 bg-white rounded border border-slate-200 flex items-center justify-center font-black text-[8px] text-slate-400",children:d.logoUrl?t.jsx("img",{src:d.logoUrl,className:"w-full h-full object-cover rounded"}):d.name.charAt(0)}),t.jsx("span",{className:"font-bold text-slate-700",children:d.name})]}),t.jsx("span",{className:"font-bold text-slate-400 uppercase tracking-widest",children:d.type==="CLUB"?"Club":"League"})]},u))})]}),r&&t.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Games Officiated"}),t.jsx("span",{className:"text-xl font-black text-amber-600",children:r.totalGames})]}),r.orgs.length>0&&t.jsx("div",{className:"pt-3 border-t border-slate-200/50 space-y-1",children:r.orgs.map((d,u)=>t.jsxs("div",{className:"flex justify-between text-[10px]",children:[t.jsx("span",{className:"font-bold text-slate-600",children:d.name}),t.jsx("span",{className:"font-black text-slate-900",children:d.count})]},u))})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100 flex items-center justify-between",children:[t.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Member Since"}),t.jsx("span",{className:"text-xs font-bold text-slate-900",children:new Date(s.addedAt).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})})]}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-100 flex items-center justify-between",children:[t.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"ID"}),t.jsx("span",{className:"text-[10px] font-mono text-slate-500 truncate max-w-[100px]",children:s.userId})]})]})]})]})})},Vk=({organization:s,onSave:e,onClose:n,currentUserProfile:i})=>{const[r,o]=_.useState("DETAILS"),[d,u]=_.useState(null),[p,m]=_.useState(!1),[f,b]=_.useState({name:s.name,description:s.description||"",country:s.country||"",location:s.groundLocation||"",logoUrl:s.logoUrl||"",isPublic:s.isPublic!==void 0?s.isPublic:!0,allowUserContent:s.allowUserContent!==void 0?s.allowUserContent:!0,allowMemberEditing:s.allowMemberEditing!==void 0?s.allowMemberEditing:!0,pushToGlobalFeed:s.pushToGlobalFeed!==void 0?s.pushToGlobalFeed:!0,managerName:s.managerName||"",ownerName:s.ownerName||"",establishedYear:s.establishedYear||"",sponsors:s.sponsors?s.sponsors.map(j=>j.logoUrl||""):[]}),y=()=>{e(s.id,{name:f.name,description:f.description,country:f.country,groundLocation:f.location,logoUrl:f.logoUrl,isPublic:f.isPublic,allowUserContent:f.allowUserContent,allowMemberEditing:f.allowMemberEditing,pushToGlobalFeed:f.pushToGlobalFeed,managerName:f.managerName,ownerName:f.ownerName,establishedYear:f.establishedYear?Number(f.establishedYear):void 0,sponsors:f.sponsors.filter(j=>j.trim()!=="").map((j,E)=>({id:`sponsor-${Date.now()}-${E}`,name:`Sponsor ${E+1}`,logoUrl:j,isActive:!0,placements:["SCOREBOARD_BOTTOM"]}))}),n()},N=j=>{var D;const E=(D=j.target.files)==null?void 0:D[0];if(E){m(!0);const L=new FileReader;L.onload=G=>{var q;const Y=new Image;Y.onload=()=>{const ce=document.createElement("canvas"),Q=ce.getContext("2d"),ne=800;let ee=Y.width,se=Y.height;ee>se?ee>ne&&(se*=ne/ee,ee=ne):se>ne&&(ee*=ne/se,se=ne),ce.width=ee,ce.height=se,Q==null||Q.drawImage(Y,0,0,ee,se);const M=ce.toDataURL("image/jpeg",.7);b(B=>({...B,logoUrl:M})),m(!1)},Y.src=(q=G.target)==null?void 0:q.result},L.readAsDataURL(E)}},k=j=>{const E=s.members.filter(G=>G.userId!==j.userId);let D=[...s.applications||[]];const L=D.findIndex(G=>G.applicantId===j.userId);if(L>=0)D[L]={...D[L],status:"REJECTED"};else{const G={id:`app-revoke-${Date.now()}`,type:"USER_JOIN",applicantId:j.userId,applicantName:j.name,applicantHandle:j.handle,status:"REJECTED",timestamp:Date.now()};D.push(G)}e(s.id,{members:E,applications:D})},T=j=>{const E=(s.applications||[]).map(L=>L.id===j.id?{...L,status:"APPROVED"}:L);let D=[...s.members];D.some(L=>L.userId===j.applicantId)||D.push({userId:j.applicantId,name:j.applicantName,handle:j.applicantHandle||"",role:"Scorer",addedAt:Date.now()}),e(s.id,{members:D,applications:E})},S=_.useMemo(()=>s.members.filter(j=>j.role==="Administrator"),[s.members]),R=_.useMemo(()=>s.members.filter(j=>j.role==="Scorer"),[s.members]),A=_.useMemo(()=>(s.applications||[]).filter(j=>j.status==="REJECTED"),[s.applications]),I=j=>t.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 flex items-center justify-between shadow-sm group hover:border-indigo-300 transition-all",children:[t.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-1",onClick:()=>u(j),children:[t.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black text-white shadow-sm ${j.role==="Administrator"?"bg-purple-600":"bg-teal-500"}`,children:j.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-sm text-slate-900 group-hover:text-indigo-600 transition-colors",children:j.name}),t.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:j.handle})]})]}),t.jsx("button",{onClick:()=>k(j),className:"px-4 py-2 border border-red-100 bg-red-50 text-red-500 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-red-100 transition-all",children:"Revoke"})]},j.userId);return t.jsxs("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:[t.jsx(yb,{member:d,isOpen:!!d,onClose:()=>u(null)}),t.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col max-h-[85vh]",children:[t.jsxs("div",{className:"bg-slate-900 p-8 border-b border-slate-800 shrink-0",children:[t.jsxs("div",{className:"flex justify-between items-start mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:"Organization Settings"}),t.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Manage Entity & Access"})]}),t.jsx("button",{onClick:n,className:"w-8 h-8 rounded-full bg-slate-800 text-slate-400 flex items-center justify-center hover:bg-slate-700 transition-all",children:""})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>o("DETAILS"),className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${r==="DETAILS"?"bg-indigo-600 text-white":"bg-slate-800 text-slate-400 hover:text-white"}`,children:"Details"}),t.jsx("button",{onClick:()=>o("ACCESS"),className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${r==="ACCESS"?"bg-indigo-600 text-white":"bg-slate-800 text-slate-400 hover:text-white"}`,children:"Access Control"})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar bg-slate-50 p-8",children:[r==="DETAILS"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[t.jsxs("div",{className:"w-24 h-24 rounded-2xl bg-white border border-slate-200 flex items-center justify-center overflow-hidden shrink-0 relative group",children:[p?t.jsx("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}):f.logoUrl?t.jsx("img",{src:f.logoUrl,className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-2xl text-slate-300 font-black",children:f.name.charAt(0)}),t.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"absolute inset-0 opacity-0 cursor-pointer"}),t.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:t.jsx("span",{className:"text-white text-[9px] font-bold uppercase",children:p?"Processing":"Change"})})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-bold text-slate-900",children:"Organization Logo"}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Tap image to upload. Auto-resized."})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1",children:"Organization Name"}),t.jsx("input",{value:f.name,onChange:j=>b({...f,name:j.target.value}),className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1",children:"Region / Country"}),t.jsx("input",{value:f.country,onChange:j=>b({...f,country:j.target.value}),className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1",children:"Main Venue"}),t.jsx("input",{value:f.location,onChange:j=>b({...f,location:j.target.value}),className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1",children:"Description"}),t.jsx("textarea",{value:f.description,onChange:j=>b({...f,description:j.target.value}),rows:3,className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500 resize-none"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1",children:"Manager Name"}),t.jsx("input",{value:f.managerName,onChange:j=>b({...f,managerName:j.target.value}),className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1",children:"Owner Name"}),t.jsx("input",{value:f.ownerName,onChange:j=>b({...f,ownerName:j.target.value}),className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1",children:"Established Year"}),t.jsx("input",{type:"number",value:f.establishedYear,onChange:j=>b({...f,establishedYear:j.target.value}),className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 px-1",children:"Sponsors (Max 5)"}),t.jsxs("div",{className:"space-y-2",children:[f.sponsors.map((j,E)=>t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:j,onChange:D=>{const L=[...f.sponsors];L[E]=D.target.value,b({...f,sponsors:L})},placeholder:"Enter Sponsor Logo URL",className:"flex-1 bg-white border border-slate-200 rounded-xl px-5 py-3 font-bold text-sm outline-none focus:border-indigo-500"}),j&&t.jsx("img",{src:j,className:"w-10 h-10 object-contain rounded bg-slate-100 border border-slate-200"}),t.jsx("button",{onClick:()=>{const D=f.sponsors.filter((L,G)=>G!==E);b({...f,sponsors:D})},className:"w-10 h-10 lg:w-12 lg:h-12 rounded-xl bg-red-50 text-red-500 hover:bg-red-100 flex items-center justify-center font-bold",children:""})]},E)),f.sponsors.length<5&&t.jsx("button",{onClick:()=>b({...f,sponsors:[...f.sponsors,""]}),className:"px-4 py-2 rounded-xl bg-slate-100 text-slate-500 text-[10px] font-black uppercase tracking-widest hover:bg-slate-200 transition-colors",children:"+ Add Sponsor Logo"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-slate-900 text-sm",children:"Public Visibility"}),t.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Show in Global Feed"})]}),t.jsx("div",{onClick:()=>b({...f,isPublic:!f.isPublic}),className:`w-12 h-6 rounded-full relative cursor-pointer transition-colors ${f.isPublic?"bg-indigo-600":"bg-slate-300"}`,children:t.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all shadow-sm ${f.isPublic?"left-7":"left-1"}`})})]}),t.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-slate-900 text-sm",children:"Allow User Posts"}),t.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Enable Public Feed"})]}),t.jsx("div",{onClick:()=>b({...f,allowUserContent:!f.allowUserContent}),className:`w-12 h-6 rounded-full relative cursor-pointer transition-colors ${f.allowUserContent?"bg-emerald-500":"bg-slate-300"}`,children:t.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all shadow-sm ${f.allowUserContent?"left-7":"left-1"}`})})]}),t.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 flex items-center justify-between gap-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-bold text-slate-900 text-sm",children:"Push Matches to Global Feed"}),t.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Show Matches to All Users"})]}),t.jsx("div",{onClick:()=>b({...f,pushToGlobalFeed:!f.pushToGlobalFeed}),className:`w-12 h-6 rounded-full relative cursor-pointer transition-colors shrink-0 ${f.pushToGlobalFeed?"bg-blue-600":"bg-slate-300"}`,children:t.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all shadow-sm ${f.pushToGlobalFeed?"left-7":"left-1"}`})})]}),(i==null?void 0:i.handle)==="@cz_admin"&&t.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 flex items-center justify-between col-span-1 md:col-span-2",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-slate-900 text-sm",children:"Council-wide Editing"}),t.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest text-indigo-600",children:"Master Switch: Allow Member/Team Admins to Edit"})]}),t.jsx("div",{onClick:()=>b({...f,allowMemberEditing:!f.allowMemberEditing}),className:`w-12 h-6 rounded-full relative cursor-pointer transition-all ${f.allowMemberEditing?"bg-indigo-600":"bg-slate-300"}`,children:t.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-all shadow-sm ${f.allowMemberEditing?"left-7":"left-1"}`})})]})]}),t.jsx("button",{onClick:y,className:"w-full py-4 bg-slate-900 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-slate-800 transition-all mt-4",children:"Save Changes"})]}),r==="ACCESS"&&t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"text-xs font-black text-purple-600 uppercase tracking-widest mb-4 flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 bg-purple-600 rounded-full"})," Administrators"]}),t.jsx("div",{className:"space-y-3",children:S.length>0?S.map(I):t.jsx("div",{className:"text-slate-400 text-xs italic pl-4",children:"No administrators defined."})})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"text-xs font-black text-teal-600 uppercase tracking-widest mb-4 flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 bg-teal-600 rounded-full"})," Scorers"]}),t.jsx("div",{className:"space-y-3",children:R.length>0?R.map(I):t.jsx("div",{className:"text-slate-400 text-xs italic pl-4",children:"No scorers assigned."})})]}),t.jsxs("div",{children:[t.jsxs("h4",{className:"text-xs font-black text-red-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full"})," Restricted / Rejected"]}),A.length===0?t.jsx("div",{className:"p-6 bg-slate-100 rounded-2xl border border-dashed border-slate-300 text-center text-slate-400 text-xs font-bold uppercase",children:"No rejected applicants"}):t.jsx("div",{className:"space-y-3",children:A.map(j=>t.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 flex items-center justify-between shadow-sm opacity-75 hover:opacity-100 transition-opacity",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-full flex items-center justify-center font-black text-slate-400",children:j.applicantName.charAt(0)}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-sm text-slate-900",children:j.applicantName}),t.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:new Date(j.timestamp).toLocaleDateString()})]})]}),t.jsx("button",{onClick:()=>T(j),className:"px-4 py-2 border border-emerald-100 bg-emerald-50 text-emerald-600 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-emerald-100 transition-all",children:"Restore"})]},j.id))})]})]})]})]})]})},zk=({isOpen:s,mode:e,onClose:n,onConfirm:i,currentUserPassword:r})=>{const[o,d]=_.useState(""),[u,p]=_.useState(""),[m,f]=_.useState("INPUT"),[b,y]=_.useState("");if(!s)return null;const N=()=>{if(u===r){const k=o.split(`
`).map(T=>T.trim()).filter(T=>T.length>0);i(k)}else y("Incorrect Admin Password")};return t.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col max-h-[85vh]",children:[t.jsxs("div",{className:"bg-slate-900 p-8 text-white",children:[t.jsxs("h3",{className:"text-xl font-black mb-1",children:["Bulk Import ",e==="TEAMS"?"Teams":"Players"]}),t.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Administrative Action"})]}),t.jsx("div",{className:"p-8 flex-1 overflow-y-auto custom-scrollbar",children:m==="INPUT"?t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"text-sm text-slate-600 mb-4 font-medium",children:e==="TEAMS"?"Paste team names below (one per line). Duplicates will be handled automatically.":"Paste players below or upload CSV. Format: Name, Handle, Role"}),e==="PLAYERS"&&t.jsxs("div",{className:"mb-4",children:[t.jsxs("label",{className:"block w-full p-4 border-2 border-dashed border-slate-300 rounded-xl text-center cursor-pointer hover:border-indigo-400 hover:bg-slate-50 transition-all group",children:[t.jsx("input",{type:"file",accept:".csv",className:"hidden",onChange:k=>{var S;const T=(S=k.target.files)==null?void 0:S[0];if(T){const R=new FileReader;R.onload=A=>{var D;const E=((D=A.target)==null?void 0:D.result).split(`
`).slice(1).map(L=>{const[G,Y,q]=L.split(",").map(ce=>ce.trim());return G?`${G}${q?` - ${q}`:""}`:null}).filter(Boolean).join(`
`);d(E)},R.readAsText(T)}}}),t.jsx("span",{className:"text-xs font-black uppercase text-slate-400 group-hover:text-indigo-600",children:" Upload CSV (Name, Handle, Role)"})]}),t.jsx("div",{className:"text-center text-[10px] font-bold text-slate-300 uppercase my-2",children:"- OR -"})]}),t.jsx("textarea",{value:o,onChange:k=>d(k.target.value),placeholder:e==="TEAMS"?`Team A
Team B...`:`John Doe - Batsman
Jane Smith
...`,className:"w-full h-48 bg-slate-50 border border-slate-200 rounded-xl p-4 font-mono text-sm outline-none focus:border-indigo-500 resize-none"})]}):t.jsxs("div",{className:"py-10 text-center",children:[t.jsx("div",{className:"text-4xl mb-4",children:""}),t.jsx("h4",{className:"text-lg font-black text-slate-900 mb-2",children:"Security Check"}),t.jsx("p",{className:"text-xs text-slate-500 mb-6",children:"Please enter your admin password to authorize this bulk update."}),t.jsx("input",{type:"password",value:u,onChange:k=>p(k.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold text-center outline-none focus:border-indigo-500",placeholder:"Admin Password",autoFocus:!0}),b&&t.jsx("p",{className:"text-red-500 text-xs font-bold mt-4 uppercase tracking-widest animate-pulse",children:b})]})}),t.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-4",children:[t.jsx("button",{onClick:n,className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs hover:text-slate-600 transition-all",children:"Cancel"}),m==="INPUT"?t.jsx("button",{onClick:()=>f("VERIFY"),disabled:!o.trim(),className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-500 shadow-lg disabled:opacity-50",children:"Proceed to Verify"}):t.jsx("button",{onClick:N,className:"flex-1 py-4 bg-emerald-500 text-white rounded-xl font-black uppercase text-xs tracking-widest hover:bg-emerald-400 shadow-lg",children:"Confirm Import"})]})]})})},Wk=({isOpen:s,teamName:e,onClose:n,onSave:i})=>{const[r,o]=_.useState(""),[d,u]=_.useState("Batsman");if(!s)return null;const p=m=>{m.preventDefault(),r.trim()&&(i(r,d),o(""),u("Batsman"),n())};return t.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-sm rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden",children:[t.jsxs("div",{className:"bg-slate-900 p-6 text-white text-center",children:[t.jsx("h3",{className:"text-xl font-black mb-1",children:"Add Player"}),t.jsxs("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:["To ",e]})]}),t.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Player Name"}),t.jsx("input",{value:r,onChange:m=>o(m.target.value),placeholder:"e.g. Virat Kohli",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500",autoFocus:!0})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Primary Role"}),t.jsxs("select",{value:d,onChange:m=>u(m.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500",children:[t.jsx("option",{value:"Batsman",children:"Batsman"}),t.jsx("option",{value:"Bowler",children:"Bowler"}),t.jsx("option",{value:"All-rounder",children:"All-rounder"}),t.jsx("option",{value:"Wicket-keeper",children:"Wicket-keeper"})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx("button",{type:"button",onClick:n,className:"flex-1 py-3 text-slate-400 font-black uppercase text-xs hover:text-slate-600",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:!r.trim(),className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-500 shadow-lg disabled:opacity-50",children:"Add to Squad"})]})]})]})})},Jk=({isOpen:s,onClose:e,globalUsers:n,orgTeams:i,onAdd:r,existingMemberIds:o})=>{const[d,u]=_.useState("SEARCH"),[p,m]=_.useState(""),[f,b]=_.useState("NAME"),[y,N]=_.useState("ALL"),[k,T]=_.useState(null),[S,R]=_.useState("Scorer"),[A,I]=_.useState(""),j=_.useMemo(()=>!p&&y==="ALL"?[]:n.filter(L=>o.includes(L.id)||y!=="ALL"&&L.role!==y?!1:p?f==="ID"?L.id.toLowerCase().includes(p.toLowerCase()):L.name.toLowerCase().includes(p.toLowerCase())||L.handle.toLowerCase().includes(p.toLowerCase()):!0).slice(0,10),[n,p,o,f,y]);if(!s)return null;const E=L=>{T(L),u("CONFIGURE"),L.role==="Player"?(R("Player"),i.length>0&&I(i[0].id)):L.role==="Umpire"?R("Umpire"):L.role==="Scorer"&&R("Scorer")},D=()=>{k&&(r(k,S,A),e(),u("SEARCH"),m(""),T(null))};return t.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col max-h-[80vh]",children:[t.jsxs("div",{className:"bg-slate-900 p-8 border-b border-slate-800 shrink-0",children:[t.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:"Add Member"}),t.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:d==="SEARCH"?"Search Global Directory":"Configure Role & Access"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 bg-slate-50",children:d==="SEARCH"?t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("select",{value:f,onChange:L=>b(L.target.value),className:"bg-slate-100 border-none rounded-xl px-3 py-4 text-xs font-black uppercase tracking-widest outline-none cursor-pointer hover:bg-slate-200 transition-colors",children:[t.jsx("option",{value:"NAME",children:"Name / Handle"}),t.jsx("option",{value:"ID",children:"User ID"})]}),t.jsxs("select",{value:y,onChange:L=>N(L.target.value),className:"bg-slate-100 border-none rounded-xl px-3 py-4 text-xs font-black uppercase tracking-widest outline-none cursor-pointer hover:bg-slate-200 transition-colors",children:[t.jsx("option",{value:"ALL",children:"Any Role"}),t.jsx("option",{value:"Administrator",children:"Admins"}),t.jsx("option",{value:"Captain",children:"Captains"}),t.jsx("option",{value:"Scorer",children:"Scorers"}),t.jsx("option",{value:"Umpire",children:"Umpires"}),t.jsx("option",{value:"Coach",children:"Coaches"}),t.jsx("option",{value:"Player",children:"Players"})]})]}),t.jsx("input",{value:p,onChange:L=>m(L.target.value),placeholder:f==="ID"?"Enter exact User ID...":"Search by name or handle...",className:"w-full bg-white border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500 shadow-sm",autoFocus:!0}),t.jsxs("div",{className:"space-y-2",children:[j.map(L=>t.jsxs("button",{onClick:()=>E(L),className:"w-full p-4 bg-white rounded-xl border border-slate-200 hover:border-indigo-400 hover:shadow-md transition-all flex items-center gap-4 text-left group",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center font-black text-slate-500 group-hover:bg-indigo-100 group-hover:text-indigo-600",children:L.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("div",{className:"font-black text-slate-900 text-sm",children:L.name}),t.jsxs("div",{className:"text-[10px] text-slate-400 font-bold uppercase",children:[L.handle,"  ",L.role]})]})]},L.id)),p&&j.length===0&&t.jsx("div",{className:"text-center py-8 text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No users found"}),!p&&y==="ALL"&&t.jsxs("div",{className:"text-center py-12 opacity-30",children:[t.jsx("span",{className:"text-4xl mb-2 block",children:""}),t.jsx("p",{className:"text-xs font-black uppercase",children:"Type to search or select a filter"})]})]})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm",children:[t.jsx("div",{className:"w-12 h-12 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center font-black text-xl",children:k==null?void 0:k.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-slate-900",children:k==null?void 0:k.name}),t.jsx("p",{className:"text-xs text-slate-500 font-bold",children:k==null?void 0:k.handle})]}),t.jsx("button",{onClick:()=>u("SEARCH"),className:"ml-auto text-xs font-bold text-slate-400 underline hover:text-indigo-600",children:"Change"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Assign Role"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Administrator","Scorer","Umpire","Coach","Player"].map(L=>t.jsx("button",{onClick:()=>R(L),className:`py-3 px-2 rounded-xl text-[10px] font-black uppercase tracking-widest border-2 transition-all ${S===L?"bg-indigo-600 border-indigo-600 text-white shadow-lg":"bg-white border-slate-200 text-slate-500 hover:border-slate-300"}`,children:L},L))})]}),S==="Player"&&t.jsxs("div",{className:"space-y-2 animate-in fade-in slide-in-from-top-2",children:[t.jsx("label",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-widest px-1",children:"Assign to Squad (Optional)"}),t.jsxs("select",{value:A,onChange:L=>I(L.target.value),className:"w-full bg-white border border-emerald-200 rounded-xl px-4 py-3 font-bold text-sm text-slate-900 outline-none focus:border-emerald-500",children:[t.jsx("option",{value:"",children:"-- Add to Org Roster Only --"}),i.map(L=>t.jsx("option",{value:L.id,children:L.name},L.id))]}),t.jsx("p",{className:"text-[9px] text-slate-400 px-1",children:"Adding to a squad automatically creates a Player Profile in that team."})]})]})}),t.jsxs("div",{className:"p-6 border-t border-slate-200 bg-white flex gap-4",children:[t.jsx("button",{onClick:e,className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs hover:text-slate-600 transition-all",children:"Cancel"}),d==="CONFIGURE"&&t.jsx("button",{onClick:D,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-indigo-500 transition-all",children:"Confirm Assignment"})]})]})})},Yk=({isOpen:s,onClose:e,allTeams:n,onSelectTeam:i,currentOrgName:r})=>{const[o,d]=_.useState(""),u=_.useMemo(()=>o?n.filter(p=>p.name.toLowerCase().includes(o.toLowerCase())):[],[n,o]);return s?t.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm animate-in fade-in duration-200",children:t.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2rem] shadow-2xl flex flex-col max-h-[80vh] overflow-hidden",children:[t.jsxs("div",{className:"p-8 border-b border-slate-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Link Existing Team"}),t.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-slate-50 text-slate-400 hover:bg-slate-100 font-bold",children:""})]}),t.jsxs("p",{className:"text-xs text-slate-500 font-bold mb-4",children:["Search the global database to add a squad to ",t.jsx("span",{className:"text-indigo-600",children:r}),"."]}),t.jsx("input",{autoFocus:!0,value:o,onChange:p=>d(p.target.value),placeholder:"Search team name (e.g. Balmain)...",className:"w-full bg-slate-50 border-none outline-none p-4 rounded-xl font-bold text-lg text-slate-900 placeholder:text-slate-300 focus:ring-2 focus:ring-indigo-500 transition-all"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar",children:o.length===0?t.jsx("div",{className:"text-center py-12 text-slate-300 font-black uppercase text-xs tracking-widest",children:"Type to search..."}):u.length===0?t.jsxs("div",{className:"text-center py-12 text-slate-400 font-bold text-sm",children:['No teams found matching "',o,'"']}):u.map(p=>t.jsxs("div",{onClick:()=>{confirm(`Add ${p.name} to ${r}?`)&&i(p)},className:"group flex items-center justify-between p-4 rounded-xl hover:bg-indigo-50 border border-transparent hover:border-indigo-100 cursor-pointer transition-all",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-slate-100 text-slate-300 flex items-center justify-center font-black text-lg group-hover:bg-white group-hover:text-indigo-600 border border-slate-200 group-hover:border-indigo-200",children:p.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-slate-900 group-hover:text-indigo-700",children:p.name}),t.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:p.location||"Unknown Location"})]})]}),t.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity bg-indigo-600 text-white px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest shadow-md",children:"Add +"})]},p.id))})]})}):null},wb=({team:s,onSave:e,onClose:n,onDelete:i})=>{const[r,o]=_.useState({name:s.name,location:s.location||"",logoUrl:s.logoUrl||""}),[d,u]=_.useState(!1),p=()=>{e(r),n()},m=f=>{var y;const b=(y=f.target.files)==null?void 0:y[0];if(b){u(!0);const N=new FileReader;N.onload=k=>{var S;const T=new Image;T.onload=()=>{const R=document.createElement("canvas"),A=R.getContext("2d"),I=400;let j=T.width,E=T.height;j>E?j>I&&(E*=I/j,j=I):E>I&&(j*=I/E,E=I),R.width=j,R.height=E,A==null||A.drawImage(T,0,0,j,E);const D=R.toDataURL("image/jpeg",.7);o(L=>({...L,logoUrl:D})),u(!1)},T.src=(S=k.target)==null?void 0:S.result},N.readAsDataURL(b)}};return t.jsx("div",{className:"fixed inset-0 bg-slate-950/50 backdrop-blur-sm z-[250] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 w-full max-w-lg shadow-2xl animate-in zoom-in-95",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsx("h2",{className:"text-2xl font-black text-slate-900 uppercase tracking-tight",children:"Edit Team"}),t.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 font-bold text-xl",children:""})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex flex-col items-center mb-6",children:t.jsxs("div",{className:"w-24 h-24 bg-slate-100 rounded-3xl overflow-hidden mb-4 border-2 border-slate-100 relative group",children:[r.logoUrl?t.jsx("img",{src:r.logoUrl,className:"w-full h-full object-cover",alt:"Team Logo"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-300 text-3xl font-black",children:r.name.charAt(0)}),t.jsx("input",{type:"file",accept:"image/*",onChange:m,className:"absolute inset-0 opacity-0 cursor-pointer z-10"}),t.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx("span",{className:"text-white text-[10px] font-black uppercase",children:d?"...":"Upload"})})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Team Name"}),t.jsx("input",{value:r.name,onChange:f=>o({...r,name:f.target.value}),className:"w-full bg-slate-50 border-none p-4 rounded-xl font-bold text-sm outline-none focus:ring-2 ring-indigo-500",placeholder:"Team Name"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Location / Home Ground"}),t.jsx("input",{value:r.location,onChange:f=>o({...r,location:f.target.value}),className:"w-full bg-slate-50 border-none p-4 rounded-xl font-bold text-sm outline-none focus:ring-2 ring-indigo-500",placeholder:"City or Stadium Name"})]}),t.jsxs("div",{className:"pt-6 flex flex-col gap-3",children:[t.jsx("button",{onClick:p,className:"w-full bg-indigo-600 text-white py-4 rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 transition-all flex items-center justify-center gap-2",children:t.jsx("span",{children:"Save Changes"})}),t.jsx("button",{onClick:()=>{confirm(`Delete ${s.name}? This will remove it from the organization and all tournaments.`)&&(i(),n())},className:"w-full py-4 text-red-500 font-black uppercase text-[10px] tracking-widest hover:bg-red-50 hover:rounded-2xl transition-all",children:"Remove Team"})]})]})]})})},Nb=({tournament:s,onSave:e,onClose:n,onDelete:i})=>{const[r,o]=_.useState({name:s.name,format:s.format,overs:s.overs,status:s.status,startDate:s.startDate||"",endDate:s.endDate||"",gameStartTime:s.gameStartTime||"",description:s.description||""}),d=()=>{e(r),n()};return t.jsx("div",{className:"fixed inset-0 bg-slate-950/50 backdrop-blur-sm z-[250] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 w-full max-w-xl shadow-2xl animate-in zoom-in-95 max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsx("h2",{className:"text-2xl font-black text-slate-900 uppercase tracking-tight",children:"Edit Tournament"}),t.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 font-bold text-xl",children:""})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Tournament Name"}),t.jsx("input",{value:r.name,onChange:u=>o({...r,name:u.target.value}),className:"w-full bg-slate-50 border-none p-4 rounded-xl font-bold text-sm outline-none focus:ring-2 ring-indigo-500"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Format"}),t.jsxs("select",{value:r.format,onChange:u=>o({...r,format:u.target.value}),className:"w-full bg-slate-50 border-none p-4 rounded-xl font-bold text-sm outline-none",children:[t.jsx("option",{value:"T20",children:"T20"}),t.jsx("option",{value:"ODI",children:"ODI"}),t.jsx("option",{value:"TEST",children:"TEST"}),t.jsx("option",{value:"The 100",children:"The 100"}),t.jsx("option",{value:"T10",children:"T10"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Overs"}),t.jsx("input",{type:"number",value:r.overs,onChange:u=>o({...r,overs:parseInt(u.target.value)}),className:"w-full bg-slate-50 border-none p-4 rounded-xl font-bold text-sm outline-none"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Default Start Time"}),t.jsx("input",{type:"time",value:r.gameStartTime,onChange:u=>o({...r,gameStartTime:u.target.value}),className:"w-full bg-slate-50 border-none p-4 rounded-xl font-bold text-sm outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Status"}),t.jsxs("select",{value:r.status,onChange:u=>o({...r,status:u.target.value}),className:"w-full bg-slate-50 border-none p-4 rounded-xl font-bold text-sm outline-none",children:[t.jsx("option",{value:"Upcoming",children:"Upcoming"}),t.jsx("option",{value:"Ongoing",children:"Ongoing"}),t.jsx("option",{value:"Completed",children:"Completed"}),t.jsx("option",{value:"Draft",children:"Draft"})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Start Date"}),t.jsx("input",{type:"date",value:r.startDate,onChange:u=>o({...r,startDate:u.target.value}),className:"w-full bg-slate-50 border-none p-4 rounded-xl font-bold text-sm outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"End Date"}),t.jsx("input",{type:"date",value:r.endDate,onChange:u=>o({...r,endDate:u.target.value}),className:"w-full bg-slate-50 border-none p-4 rounded-xl font-bold text-sm outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Description / About"}),t.jsx("textarea",{value:r.description,onChange:u=>o({...r,description:u.target.value}),placeholder:"Details about this tournament...",className:"w-full bg-slate-50 border-none p-4 rounded-xl font-bold text-sm outline-none min-h-[100px] resize-none"})]}),t.jsxs("div",{className:"pt-6 flex flex-col gap-3",children:[t.jsx("button",{onClick:d,className:"w-full bg-indigo-600 text-white py-4 rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 transition-all",children:"Save Updates"}),t.jsx("button",{onClick:()=>{confirm("Are you sure you want to delete this tournament? This cannot be undone.")&&(i(),n())},className:"w-full py-4 text-red-500 font-black uppercase text-[10px] tracking-widest hover:bg-red-50 hover:rounded-2xl transition-all",children:"Delete Tournament"})]})]})]})})},Kk=({isOpen:s,onClose:e,onCreate:n,organizationName:i})=>{const[r,o]=_.useState({name:"",handle:"@",password:"",role:"Player",email:""});if(!s)return null;const d=async()=>{if(!r.name||!r.handle||!r.password||!r.email){alert("Please fill in all required fields (Name, Handle, Email, Password).");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.email)){alert("Please enter a valid email address.");return}const p={id:$n("user"),name:r.name,handle:r.handle.startsWith("@")?r.handle:`@${r.handle}`,role:r.role,email:r.email,createdAt:Date.now()};await n(p,r.password),e(),o({name:"",handle:"@",password:"",role:"Player",email:""})};return t.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[60] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-8 shadow-2xl animate-in fade-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-black text-slate-900",children:"Create New User"}),t.jsxs("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mt-1",children:["For ",i]})]}),t.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-900 flex items-center justify-center font-bold transition-all",children:""})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-1.5 ml-1",children:"Full Name *"}),t.jsx("input",{value:r.name,onChange:u=>o({...r,name:u.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm outline-none focus:border-indigo-400 transition-colors",placeholder:"e.g. John Smith"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-1.5 ml-1",children:"System Handle *"}),t.jsx("input",{value:r.handle,onChange:u=>o({...r,handle:u.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm outline-none focus:border-indigo-400 transition-colors",placeholder:"@johnsmith"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-1.5 ml-1",children:"Email *"}),t.jsx("input",{type:"email",value:r.email,onChange:u=>o({...r,email:u.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm outline-none focus:border-indigo-400 transition-colors",placeholder:"johnsmith@example.com"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-1.5 ml-1",children:"Password *"}),t.jsx("input",{type:"password",value:r.password,onChange:u=>o({...r,password:u.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm outline-none focus:border-indigo-400 transition-colors",placeholder:"Set a password"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-1.5 ml-1",children:"Role"}),t.jsxs("select",{value:r.role,onChange:u=>o({...r,role:u.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm outline-none focus:border-indigo-400 transition-colors",children:[t.jsx("option",{value:"Administrator",children:"Administrator"}),t.jsx("option",{value:"Scorer",children:"Scorer"}),t.jsx("option",{value:"Captain",children:"Captain"}),t.jsx("option",{value:"Coach",children:"Coach"}),t.jsx("option",{value:"Player",children:"Player"})]})]})})]}),t.jsxs("div",{className:"flex gap-3 mt-8",children:[t.jsx("button",{onClick:e,className:"flex-1 py-3 text-slate-400 font-black uppercase text-xs hover:bg-slate-50 rounded-xl transition-colors",children:"Cancel"}),t.jsx("button",{onClick:d,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs shadow-lg hover:bg-indigo-500 hover:shadow-xl hover:scale-[1.02] transition-all",children:"Create Account"})]})]})})},Xk=({organization:s,onUpdateOrg:e,isParentAdmin:n,isMainAdmin:i,isOrgAdmin:r})=>{var R,A;const[o,d]=_.useState("ALL"),[u,p]=_.useState(""),[m,f]=_.useState(null),b=I=>s.members.filter(j=>(I==="ALL_ROLES"||j.role===I)&&(j.name.toLowerCase().includes(u.toLowerCase())||j.handle.toLowerCase().includes(u.toLowerCase()))),y=()=>{e&&e(s.id,{allowMemberEditing:!s.allowMemberEditing})},N=()=>{switch(o){case"ADMINS":return b("Administrator");case"CAPTAINS":return s.members.filter(I=>{var j;return I.role==="Captain"||I.role==="Player"&&((j=I.permissions)==null?void 0:j.canSubmitReport)}).filter(I=>I.name.toLowerCase().includes(u.toLowerCase()));case"SCORERS":return b("Scorer");case"UMPIRES":return b("Umpire");case"COACHES":return b("Coach");default:return s.members.filter(I=>I.name.toLowerCase().includes(u.toLowerCase()))}},k=I=>{if(!e)return;const j=I,E=s.members.filter(G=>G.role===I),D=s.memberTeams.filter(G=>!E.some(Y=>Y.managedTeamId===G.id));if(D.length===0){alert(`All teams already have a designated ${j}.`);return}if(!confirm(`Generate ${D.length} ${j} accounts (one for each missing team)?`))return;const L=D.map(G=>({userId:`${I.toLowerCase().substring(0,3)}-${G.id}-${Date.now()}`,name:`${G.name} ${I}`,handle:`@${G.name.replace(/\s+/g,"").toLowerCase()}_${I.toLowerCase().substring(0,3)}`,role:I,addedAt:Date.now(),managedTeamId:G.id,permissions:I==="Captain"?{canSubmitReport:!0,canViewReports:!0}:I==="Scorer"?{canScoreMatch:!0,canEditScorecard:!0}:I==="Coach"?{canEditSquad:!0,canViewReports:!0}:{}}));e(s.id,{members:[...s.members,...L]}),alert(`Generated ${L.length} ${j} accounts.`)},T=I=>{if(!m||!e)return;const j=m.permissions||{},E={...j,[I]:!j[I]},D=s.members.map(L=>L.userId===m.userId?{...L,permissions:E}:L);e(s.id,{members:D}),f({...m,permissions:E})},S=N();return t.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[t.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center mb-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Access Control Center"}),t.jsx("p",{className:"text-xs font-bold text-slate-400 mt-1 uppercase tracking-widest",children:"Manage Privileges & Permissions"})]}),t.jsxs("div",{className:"w-full md:w-auto flex gap-2",children:[t.jsx("input",{value:u,onChange:I=>p(I.target.value),placeholder:"Find user...",className:"bg-slate-50 px-5 py-3 rounded-xl border-none outline-none font-bold text-sm w-full md:w-64 focus:ring-2 focus:ring-indigo-100 transition-all"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{className:"bg-slate-900 text-white px-4 py-3 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-slate-700 whitespace-nowrap shadow-lg",children:"+ Bulk Add"}),e&&o==="CAPTAINS"&&t.jsx("button",{onClick:()=>k("Captain"),className:"bg-indigo-600 text-white px-4 py-3 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-500 whitespace-nowrap shadow-lg flex items-center gap-2",title:"Generate a unique login for every team that lacks a captain",children:" Auto Captains"}),e&&o==="SCORERS"&&t.jsx("button",{onClick:()=>k("Scorer"),className:"bg-teal-600 text-white px-4 py-3 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-teal-500 whitespace-nowrap shadow-lg flex items-center gap-2",title:"Generate a unique scorer login for every team",children:" Auto Scorers"}),e&&o==="COACHES"&&t.jsx("button",{onClick:()=>k("Coach"),className:"bg-amber-600 text-white px-4 py-3 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-amber-500 whitespace-nowrap shadow-lg flex items-center gap-2",title:"Generate a unique coach login for every team",children:" Auto Coaches"})]})]})]}),t.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-2",children:["ALL","ADMINS","CAPTAINS","SCORERS","UMPIRES","COACHES"].map(I=>t.jsx("button",{onClick:()=>{d(I),f(null)},className:`px-4 py-2 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${o===I?"bg-indigo-600 text-white shadow-md":"bg-slate-50 text-slate-400 hover:bg-slate-100"}`,children:I},I))})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-1 space-y-3 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:[S.map(I=>t.jsx("div",{onClick:()=>f(I),className:`p-4 rounded-xl border cursor-pointer transition-all ${(m==null?void 0:m.userId)===I.userId?"bg-indigo-50 border-indigo-200 shadow-md":"bg-white border-slate-100 hover:border-indigo-200"}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-black text-xs ${I.role==="Administrator"?"bg-purple-500":I.role==="Scorer"?"bg-teal-500":"bg-slate-400"}`,children:I.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-900 text-sm",children:I.name}),t.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:I.role})]})]})},I.userId)),S.length===0&&t.jsx("div",{className:"p-8 text-center border-2 border-dashed border-slate-200 rounded-xl text-slate-400 font-bold text-xs uppercase",children:"No users found."})]}),t.jsx("div",{className:"lg:col-span-2",children:m?t.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-xl sticky top-6 animate-in slide-in-from-right-4 duration-300",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[t.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-900 text-white flex items-center justify-center text-2xl font-black",children:m.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-black text-slate-900",children:m.name}),t.jsxs("p",{className:"text-xs font-bold text-indigo-500 uppercase tracking-widest",children:[m.role,"  ",m.handle]}),t.jsxs("div",{className:"flex gap-2 mt-1",children:[m.role==="Administrator"&&t.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:"Default PW: admin"}),m.role==="Coach"&&t.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:"Default PW: coach"}),m.role==="Scorer"&&t.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:"Default PW: scorer"}),m.role==="Umpire"&&t.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:"Default PW: umpire"}),(m.role==="Captain"||m.role==="Player"&&((R=m.permissions)==null?void 0:R.canSubmitReport))&&t.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-slate-100 px-2 py-0.5 rounded",children:"Default PW: Captain"})]})]})]}),t.jsx("h4",{className:"text-sm font-black text-slate-400 uppercase tracking-widest border-b border-slate-100 pb-3 mb-6",children:"Permissions"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["canEditOrg","canManageMembers","canEditSquad","canSubmitReport","canViewReports","view_protests","canScoreMatch","canEditScorecard","canOfficiate"].map(I=>{var j,E;return t.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-100",children:[t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-slate-700 text-sm",children:I.replace(/([A-Z])/g," $1").replace(/^./,D=>D.toUpperCase())}),t.jsxs("p",{className:"text-[10px] text-slate-400",children:["Allow user to ",I.replace("can","").toLowerCase(),"..."]})]}),t.jsx("button",{onClick:()=>T(I),className:`w-12 h-6 rounded-full p-1 transition-all ${(j=m.permissions)!=null&&j[I]?"bg-emerald-500":"bg-slate-300"}`,children:t.jsx("div",{className:`w-4 h-4 rounded-full bg-white shadow-sm transition-all ${(E=m.permissions)!=null&&E[I]?"translate-x-6":"translate-x-0"}`})})]},I)})}),e&&(i||r)&&t.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-100",children:[t.jsx("h4",{className:"text-sm font-black text-slate-400 uppercase tracking-widest mb-4",children:"Managed Team Assignment"}),t.jsx("p",{className:"text-xs text-slate-500 mb-4 font-medium",children:"Link this user to a specific team to enable their Captains Hub / Team Admin view."}),t.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[t.jsx("div",{className:"flex gap-2 mb-2",children:t.jsxs("select",{className:"flex-1 bg-white border border-slate-200 rounded-lg px-4 py-3 text-sm font-bold outline-none focus:border-indigo-500",value:m.managedTeamId||"",onChange:I=>{const j=I.target.value,E=s.members.map(D=>D.userId===m.userId?{...D,managedTeamId:j||void 0}:D);e(s.id,{members:E}),f({...m,managedTeamId:j||void 0})},children:[t.jsx("option",{value:"",children:"-- No Team Assigned --"}),s.memberTeams.map(I=>t.jsx("option",{value:I.id,children:I.name},I.id))]})}),m.managedTeamId&&t.jsx("div",{className:"flex items-center gap-2 text-indigo-600 text-xs font-bold",children:t.jsxs("span",{children:[" Linked to ",(A=s.memberTeams.find(I=>I.id===m.managedTeamId))==null?void 0:A.name]})})]})]}),n&&t.jsx("div",{className:"mt-8 pt-8 border-t border-slate-100",children:t.jsx("div",{className:"bg-red-50 p-6 rounded-2xl border border-red-100",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-black text-red-900 uppercase tracking-widest mb-1",children:"Organization Lockdown"}),t.jsx("p",{className:"text-xs text-red-700 font-medium",children:"Prevent further member edits by Club Admins."})]}),t.jsx("button",{onClick:y,className:`px-6 py-3 rounded-xl font-bold uppercase text-[10px] tracking-widest transition-all ${s.allowMemberEditing?"bg-white text-red-500 border border-red-200":"bg-red-600 text-white shadow-lg"}`,children:s.allowMemberEditing?"Lock Now ":"Locked "})]})})})]}):t.jsx("div",{className:"h-full bg-slate-50 rounded-[2.5rem] border-2 border-dashed border-slate-200 flex items-center justify-center p-12 text-center text-slate-400",children:t.jsxs("div",{children:[t.jsx("p",{className:"text-4xl mb-4",children:""}),t.jsx("p",{className:"font-bold uppercase text-xs tracking-widest",children:"Select a member to edit permissions"})]})})})]})]})},Qk=({organization:s,isMainAdmin:e,isCouncilAdmin:n,isOrgAdmin:i,isLockdown:r,isActive:o,focusMyTeam:d,myTeam:u,isClub:p,affiliatedTeams:m,onLinkTeam:f,onBulkAddTeams:b,onRequestAddTeam:y,onViewTeam:N,onRemoveTeam:k,onUpdateOrg:T,onSelectHubTeam:S,onAddPlayer:R,onBulkImportPlayers:A,onEditTeam:I,canEditTeam:j})=>o?t.jsxs("div",{className:"space-y-6",children:[(e||n)&&!r&&t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:f,className:"bg-indigo-50 text-indigo-700 border border-indigo-200 px-4 py-2 rounded-xl text-[10px] font-black uppercase hover:bg-indigo-100 transition-all shadow-sm",children:" Link Existing Team"}),t.jsx("button",{onClick:b,className:"bg-slate-100 text-slate-600 px-4 py-2 rounded-xl text-[10px] font-black uppercase hover:bg-slate-200",children:"+ Bulk Add Teams"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(e||n)&&!r&&t.jsxs("button",{onClick:y,className:"border-2 border-dashed border-slate-200 rounded-[2rem] flex flex-col items-center justify-center p-8 hover:bg-white hover:border-indigo-400 hover:shadow-lg transition-all text-slate-400 hover:text-indigo-600 gap-4 min-h-[200px] bg-slate-50/50",children:[t.jsx("span",{className:"text-5xl font-thin",children:"+"}),t.jsxs("span",{className:"text-xs font-black uppercase tracking-widest",children:["Register ",p?"Squad":"Team"]})]}),((i||e||n)&&!d?[...s.memberTeams,...m.map(E=>({...E,isAffiliate:!0}))]:u?[u]:[]).map(E=>t.jsxs("div",{className:`bg-white border p-6 rounded-[2rem] hover:shadow-xl transition-all group flex flex-col relative ${E.isAffiliate?"border-indigo-100 bg-indigo-50/10":"border-slate-200 hover:shadow-slate-100"}`,children:[E.isAffiliate&&t.jsxs("div",{className:"absolute top-4 right-4 bg-indigo-100 text-indigo-700 px-2 py-1 rounded text-[8px] font-black uppercase tracking-widest flex items-center gap-1",children:[" ",E.orgName||"Affiliated"]}),!E.isAffiliate&&(e||n)&&(k||T)&&t.jsx("button",{onClick:D=>{if(D.stopPropagation(),confirm(`Remove ${E.name} from ${s.name}?`)){if(k)k(s.id,E.id);else if(T){const L={...s,memberTeams:s.memberTeams.filter(G=>G.id!==E.id)};T(s.id,L)}}},className:"absolute top-4 right-4 w-8 h-8 bg-slate-100 hover:bg-red-500 text-slate-400 hover:text-white rounded-full flex items-center justify-center font-black text-lg transition-all opacity-0 group-hover:opacity-100 z-10",title:"Remove from organization",children:""}),t.jsxs("div",{onClick:()=>N(E.id),className:"cursor-pointer",children:[t.jsx("h3",{className:"text-base font-black text-slate-900 group-hover:text-indigo-600 transition-colors mb-1",children:E.name}),t.jsxs("p",{className:"text-[10px] text-indigo-500 font-bold uppercase tracking-wider",children:[" ",E.location||"Home Ground"]})]}),t.jsxs("div",{className:"mt-4 mb-4 flex-1",children:[t.jsxs("div",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2",children:[E.players.length," Player",E.players.length!==1?"s":""]}),E.players.length>0?t.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto custom-scrollbar",children:E.players.map((D,L)=>t.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[t.jsxs("span",{className:"text-slate-400 font-mono text-[10px] w-5",children:[L+1,"."]}),t.jsx("span",{className:"text-slate-700 font-medium truncate",children:D.name}),t.jsx("span",{className:"text-[9px] text-slate-400 ml-auto flex-shrink-0",children:D.role})]},D.id))}):t.jsx("div",{className:"text-slate-300 text-xs italic",children:"No players yet"})]}),(n||j(E.id))&&T&&t.jsxs("div",{className:"flex gap-2 pt-4 border-t border-slate-100",onClick:D=>D.stopPropagation(),children:[!r&&!E.isAffiliate&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>R(E),className:"flex-1 py-2 bg-slate-50 text-slate-600 hover:bg-indigo-600 hover:text-white rounded-xl text-[10px] font-black uppercase transition-all border border-slate-100 hover:border-indigo-600",children:"+ Add"}),t.jsx("button",{onClick:()=>A(E),className:"flex-1 py-2 bg-slate-50 text-slate-600 hover:bg-emerald-600 hover:text-white rounded-xl text-[10px] font-black uppercase transition-all border border-slate-100 hover:border-emerald-600",children:"+ Bulk"})]}),S&&(i||n||E.isAffiliate)&&t.jsx("button",{onClick:()=>S(E.id),className:"px-3 py-2 bg-indigo-50 text-indigo-600 hover:bg-indigo-600 hover:text-white rounded-xl text-[10px] font-black uppercase transition-all border border-indigo-50 hover:border-indigo-600",title:"Open Team Hub",children:" Hub"}),!E.isAffiliate&&t.jsx("button",{onClick:()=>I(E),className:"px-3 py-2 bg-slate-50 text-slate-600 hover:bg-indigo-600 hover:text-white rounded-xl text-[10px] font-black uppercase transition-all border border-slate-100 hover:border-indigo-600",title:"Edit Team Info",children:""})]})]},E.id))]})]}):null,Zk=({organization:s,isClub:e,isOrgAdmin:n,isActive:i,onRequestAddTournament:r,onViewTournament:o,onUpdateTournament:d,onRemoveTournament:u,setEditingTournament:p})=>i?t.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest",children:e?"Active Leagues":"Tournaments"}),n&&t.jsxs("button",{onClick:r,className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-500 shadow-lg transition-all",children:["+ Create ",e?"League":"Tournament"]})]}),s.tournaments.length===0?t.jsxs("div",{className:"p-12 text-center bg-slate-50 border border-dashed border-slate-200 rounded-[2rem] gap-4 flex flex-col items-center justify-center",children:[t.jsx("span",{className:"text-4xl opacity-50",children:""}),t.jsxs("div",{className:"text-slate-400 font-bold uppercase text-xs",children:["No ",e?"leagues":"tournaments"," found."]}),n&&t.jsxs("button",{onClick:r,className:"text-indigo-600 font-black text-xs underline",children:["Create First ",e?"League":"Tournament"]})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.tournaments.map(m=>t.jsxs("div",{onClick:()=>o(m.id),className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm cursor-pointer hover:border-indigo-300 transition-all group relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 font-black text-6xl text-slate-900 group-hover:opacity-20 transition-opacity",children:m.format}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("h3",{className:"text-xl font-black text-slate-900 mb-1 group-hover:text-indigo-600 transition-colors",children:m.name}),t.jsxs("div",{className:"flex flex-col gap-1.5",children:[t.jsx("div",{className:"flex gap-2",children:t.jsx("span",{className:`px-2 py-1 rounded-md text-[9px] font-black uppercase tracking-widest ${m.status==="Ongoing"?"bg-emerald-100 text-emerald-700":m.status==="Completed"?"bg-slate-100 text-slate-500":"bg-amber-100 text-amber-700"}`,children:m.status})}),(m.startDate||m.endDate)&&t.jsxs("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-1",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[m.startDate?new Date(m.startDate).toLocaleDateString(void 0,{month:"short",day:"numeric"}):"...",m.endDate?`  ${new Date(m.endDate).toLocaleDateString(void 0,{month:"short",day:"numeric"})}`:""]})]})]})]}),n&&d&&t.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 z-20",children:[t.jsx("button",{onClick:f=>{f.stopPropagation(),p(m)},className:"w-8 h-8 rounded-full bg-slate-100/80 hover:bg-slate-200 text-slate-500 flex items-center justify-center transition-all opacity-0 group-hover:opacity-100",title:"Edit Tournament",children:""}),u&&t.jsx("button",{onClick:f=>{f.stopPropagation(),confirm(`Delete "${m.name}"? This action cannot be undone.`)&&u(s.id,m.id)},className:"w-8 h-8 rounded-full bg-red-100/80 hover:bg-red-500 text-red-500 hover:text-white flex items-center justify-center transition-all opacity-0 group-hover:opacity-100",title:"Delete Tournament",children:""})]})]},m.id))})]}):null,eS=({organization:s,isActive:e,onUpdateFixture:n})=>{if(!e)return null;const[i,r]=_.useState("ALL"),o=_.useMemo(()=>{let d=s.fixtures||[];return d=[...d].sort((u,p)=>new Date(p.date).getTime()-new Date(u.date).getTime()),i==="ALL"?d:i==="LIVE"?d.filter(u=>u.status==="Live"):i==="SCHEDULED"?d.filter(u=>u.status==="Scheduled"):i==="COMPLETED"?d.filter(u=>u.status==="Completed"):d},[s.fixtures,i]);return t.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4",children:[t.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest",children:"Team Fixtures"}),t.jsx("div",{className:"flex gap-2",children:["ALL","LIVE","SCHEDULED","COMPLETED"].map(d=>t.jsx("button",{onClick:()=>r(d),className:`px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${i===d?"bg-slate-900 text-white shadow-lg":"bg-white border border-slate-200 text-slate-400 hover:bg-slate-50"}`,children:d},d))})]}),o.length===0?t.jsx("div",{className:"p-12 text-center bg-slate-50 border border-dashed border-slate-200 rounded-[2rem] text-slate-400 font-bold uppercase text-xs",children:"No fixtures found."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.map(d=>t.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex flex-col gap-3 relative overflow-hidden group",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsx("span",{className:`px-2 py-1 rounded text-[9px] font-black uppercase tracking-widest ${d.status==="Live"?"bg-red-100 text-red-600 animate-pulse":d.status==="Completed"?"bg-slate-100 text-slate-500":"bg-blue-100 text-blue-600"}`,children:d.status}),d.isOfficial===!1&&t.jsx("span",{className:"bg-amber-100 text-amber-600 px-2 py-1 rounded text-[9px] font-black uppercase tracking-widest",children:"Unofficial"})]}),t.jsxs("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:[new Date(d.date).toLocaleDateString(),"  ",d.venue]})]}),t.jsxs("div",{className:"flex flex-col gap-2 my-2",children:[t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{className:`font-black text-lg break-words flex-1 leading-tight ${d.winnerId&&d.winnerId===d.teamAId?"text-emerald-600":"text-slate-900"}`,children:d.teamAName}),t.jsx("span",{className:"font-mono font-bold text-slate-600 shrink-0",children:d.teamAScore||"-"})]}),t.jsxs("div",{className:"flex justify-between items-start gap-3",children:[t.jsx("span",{className:`font-black text-lg break-words flex-1 leading-tight ${d.winnerId&&d.winnerId===d.teamBId?"text-emerald-600":"text-slate-900"}`,children:d.teamBName}),t.jsx("span",{className:"font-mono font-bold text-slate-600 shrink-0",children:d.teamBScore||"-"})]})]}),d.result&&t.jsx("div",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-widest bg-emerald-50 p-2 rounded-lg text-center",children:d.result}),n&&t.jsx("div",{className:"flex justify-end pt-2 border-t border-slate-100 mt-2 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx("button",{onClick:()=>{},className:"text-[10px] font-bold text-slate-400 hover:text-indigo-600 uppercase tracking-widest",children:"Manage"})})]},d.id))})]})},sc=({organization:s,userRole:e,onBack:n,onViewTournament:i,onViewPlayer:r,onRequestAddTeam:o,onRequestAddTournament:d,players:u,onViewTeam:p,isFollowed:m,onToggleFollow:f,globalUsers:b,onAddMember:y,onUpdateOrg:N,onRemoveTeam:k,onRemoveTournament:T,onUpdateTournament:S,onRemoveFixture:R,onProcessApplication:A,allOrganizations:I=[],currentUserProfile:j,embedMode:E=!1,onRequestCaptainHub:D,onSelectHubTeam:L,onUpdateFixture:G,onApplyForOrg:Y,onRequestAffiliation:q,onCreateUser:ce})=>{const Q=s.type==="CLUB",[ne,ee]=_.useState("SQUADS"),[se,M]=_.useState(""),[B,Z]=_.useState(null),[Ne,ae]=_.useState(!1),[P,W]=_.useState(!1),[X,we]=_.useState(null),[te,_e]=_.useState(!1),[re,Re]=_.useState(null),[$e,ue]=_.useState(null),[be,Te]=_.useState(null),[$,oe]=_.useState(!1),[Ae,De]=_.useState(!1),[Me,Be]=_.useState(null),[ze,Ke]=_.useState(null),[Ce,St]=_.useState(""),[Ee,Ue]=_.useState(null),[qe,mt]=_.useState(""),ft=_.useMemo(()=>{var H;return((H=s.applications)==null?void 0:H.filter(ve=>ve.status==="PENDING"||ve.status==="REVIEW"))||[]},[s.applications]),ot=_.useMemo(()=>s.members.find(H=>H.userId===(j==null?void 0:j.id)),[s.members,j==null?void 0:j.id]),pt=_.useMemo(()=>j!=null&&j.id?I.filter(H=>{var ve;return(ve=s.parentOrgIds)==null?void 0:ve.includes(H.id)}).some(H=>H.members.some(ve=>ve.userId===j.id&&ve.role==="Administrator")):!1,[I,s.parentOrgIds,j==null?void 0:j.id]),Ze=(ot==null?void 0:ot.role)==="Administrator"&&!ot.managedTeamId||e==="Administrator"||pt,He=(ot==null?void 0:ot.role)==="Administrator"&&!!ot.managedTeamId,bt=(j==null?void 0:j.handle)==="@cz_admin",_t=s.createdBy===(j==null?void 0:j.id)||e==="Administrator"||pt,tt=s.type==="UMPIRE_ASSOCIATION",Tt=H=>bt||Ze||_t?!0:s.allowMemberEditing?(ot==null?void 0:ot.managedTeamId)===H:!1,Ct=_.useMemo(()=>!s.childOrgIds||s.childOrgIds.length===0?[]:I.filter(ve=>{var Se;return(Se=s.childOrgIds)==null?void 0:Se.includes(ve.id)}).flatMap(ve=>ve.memberTeams.map(Se=>({...Se,orgName:ve.name}))),[s.childOrgIds,I]),Ns=_.useMemo(()=>I.flatMap(H=>H.memberTeams),[I]),fs=_.useMemo(()=>s.members.filter(H=>H.role==="Umpire"||H.role==="Match Official"),[s.members]),We=H=>s.fixtures.filter(ve=>{var Se;return(Se=ve.umpires)==null?void 0:Se.includes(H)}).length,Bt=H=>{Z(H),r(H)},Pt=H=>{if(!N)return;if(s.memberTeams.some(Se=>Se.id===H.id)){alert("This team is already in your organization.");return}const ve=[...s.memberTeams,H];N(s.id,{memberTeams:ve}),De(!1),alert(`${H.name} linked to ${s.name} successfully!`)},xt=(H,ve,Se)=>{var gt;const nt={userId:H.id,name:H.name,handle:H.handle,role:ve,addedAt:Date.now()};if(N){let Rt=[...s.members,nt],pe=s.memberTeams;if(ve==="Player"&&Se){const Oe={id:H.id,name:H.name,role:((gt=H.playerDetails)==null?void 0:gt.primaryRole)||"All-rounder",photoUrl:H.avatarUrl,stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}};pe=pe.map(Xe=>Xe.id===Se?{...Xe,players:[...Xe.players,Oe]}:Xe)}N(s.id,{members:Rt,memberTeams:pe})}else y(nt)},Ot=H=>{Ee&&A&&(A(s.id,Ee.id,"APPROVED",H),Ue(null))},js=(H,ve)=>{if(!N||!be)return;const Se={id:`pl-${Date.now()}`,name:H,role:ve,stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}},nt=s.memberTeams.map(gt=>gt.id===be.id?{...gt,players:[...gt.players,Se]}:gt);N(s.id,{memberTeams:nt}),Te(null)},ps=()=>{var ve;if(!N||!Ce)return;const H=b.find(Se=>Se.id===Ce);if(H){if(s.memberTeams.length===0){alert("Please create a team/squad first.");return}const Se=s.memberTeams[0].id,nt={id:H.id,name:H.name,role:((ve=H.playerDetails)==null?void 0:ve.primaryRole)||"All-rounder",photoUrl:H.avatarUrl,stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}},gt=s.memberTeams.map(Rt=>Rt.id===Se?{...Rt,players:[...Rt.players,nt]}:Rt);N(s.id,{memberTeams:gt}),St(""),alert(`${H.name} added to ${s.memberTeams[0].name}.`)}else alert("User ID not found in global directory.")},Ms=H=>{if(N){if(re==="TEAMS"){const ve=H.map(nt=>({id:`tm-${Date.now()}-${Math.floor(Math.random()*1e3)}`,name:nt.trim(),players:[]})),Se=[...s.memberTeams,...ve];N(s.id,{memberTeams:Se})}else if(re==="PLAYERS"){let ve=be==null?void 0:be.id;if(!ve)if(s.memberTeams.length===0){const gt={id:`tm-gen-${Date.now()}`,name:"General Squad",players:[]};s.memberTeams.push(gt),ve=gt.id}else ve=s.memberTeams[0].id;const Se=H.map((gt,Rt)=>{const[pe,Oe]=gt.split("-").map(lt=>lt.trim()),Xe=["Batsman","Bowler","All-rounder","Wicket-keeper"].includes(Oe)?Oe:"All-rounder";return{id:`pl-bulk-${Date.now()}-${Rt}`,name:pe,role:Xe,stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}}}),nt=s.memberTeams.map(gt=>gt.id===ve?{...gt,players:[...gt.players,...Se]}:gt);N(s.id,{memberTeams:nt})}Re(null),Te(null)}};let ks=["SQUADS","MATCHES","TOURNAMENTS"];(Ze||_t||bt)&&(ks=["SQUADS","PLAYERS","TOURNAMENTS","MEMBERS","OFFICIALS","REQUESTS"],(_t||bt)&&(ks.push("AFFILIATIONS"),ks.push("ACCESS"))),tt&&(Ze||_t||bt)&&ks.push("ASSIGNMENTS"),I.filter(H=>{var ve;return(ve=s.parentOrgIds)==null?void 0:ve.includes(H.id)});const it=ft.filter(H=>H.type==="ORG_AFFILIATE"),Yt=ft.filter(H=>H.type==="USER_JOIN"||H.type==="PLAYER_CLAIM"),Ds=H=>{if(!H)return"Unknown Profile";const ve=s.memberTeams.flatMap(Se=>Se.players).find(Se=>Se.id===H);return(ve==null?void 0:ve.name)||"Unknown Profile"},on=s.allowMemberEditing===!1&&!I.filter(H=>{var ve;return(ve=s.parentOrgIds)==null?void 0:ve.includes(H.id)}).some(H=>H.members.some(ve=>ve.userId===(j==null?void 0:j.id)&&ve.role==="Administrator")),cn=(j==null?void 0:j.role)==="Captain"||s.members.some(H=>H.userId===(j==null?void 0:j.id)&&H.role==="Captain"),xs=(j==null?void 0:j.role)==="Coach"||s.members.some(H=>H.userId===(j==null?void 0:j.id)&&H.role==="Coach");j==null||j.role;const vs=Fn.useMemo(()=>{if(j!=null&&j.managedTeamId)return j.managedTeamId;const H=s.memberTeams.find(ve=>ve.players.some(Se=>Se.email===(j==null?void 0:j.email)));return H==null?void 0:H.id},[j,s.memberTeams]),Ss=Fn.useMemo(()=>s.memberTeams.find(H=>H.id===vs),[s.memberTeams,vs]),de=(He||cn||xs)&&!Ze&&!vs,[Ie,Ye]=_.useState(!1);return Fn.useEffect(()=>{},[vs,He,cn,xs,Ze,ne]),t.jsxs("div",{className:"animate-in slide-in-from-right-8 duration-500 max-w-[100vw] overflow-x-hidden",children:[on&&t.jsxs("div",{className:"bg-amber-100 border-l-4 border-amber-500 text-amber-700 p-4 mb-4 rounded-r shadow-sm flex items-center gap-3",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsxs("div",{children:[t.jsx("p",{className:"font-bold text-sm",children:"Organization Locked"}),t.jsx("p",{className:"text-xs",children:"Your governing body has restricted editing for this organization. You cannot add or remove players/teams at this time."})]})]}),de&&ne==="SQUADS"&&t.jsxs("div",{className:"bg-indigo-900 rounded-[2.5rem] p-12 text-center text-white mb-8 shadow-2xl relative overflow-hidden",children:[t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("h2",{className:"text-3xl font-black mb-2",children:"Welcome, Captain!"}),t.jsx("p",{className:"text-indigo-200 text-sm font-bold uppercase tracking-widest mb-8",children:"Please link your account to your squad to verify your roster."}),t.jsx("button",{onClick:()=>De(!0),className:"bg-white text-indigo-900 px-8 py-4 rounded-2xl font-black uppercase tracking-widest hover:bg-indigo-50 transition-all shadow-xl hover:scale-105",children:" Select My Team"})]}),t.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-500/20 rounded-full blur-3xl -mr-16 -mt-16"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-indigo-500/20 rounded-full blur-3xl -ml-16 -mb-16"})]}),t.jsx(yb,{member:X,isOpen:!!X,onClose:()=>we(null),allOrganizations:I}),t.jsx(Jk,{isOpen:Ne,onClose:()=>ae(!1),globalUsers:b,orgTeams:s.memberTeams,existingMemberIds:s.members.map(H=>H.userId),onAdd:xt}),t.jsx(Yk,{isOpen:Ae,onClose:()=>De(!1),allTeams:Ns,onSelectTeam:H=>{if(de&&N){Pt(H);const ve=s.members.map(Se=>Se.userId===(j==null?void 0:j.id)?{...Se,role:"Captain",managedTeamId:H.id}:Se);N(s.id,{members:ve})}else Pt(H)},currentOrgName:s.name}),Me&&N&&t.jsx(wb,{team:Me,onClose:()=>Be(null),onSave:H=>{const ve=s.memberTeams.map(Se=>Se.id===Me.id?{...Se,...H}:Se);N(s.id,{memberTeams:ve})},onDelete:()=>{if(k)k(s.id,Me.id);else{const H=s.memberTeams.filter(ve=>ve.id!==Me.id);N(s.id,{memberTeams:H})}}}),t.jsx(vb,{isOpen:!!B,player:B,onClose:()=>Z(null),isFollowed:!1,onToggleFollow:()=>{},allFixtures:s.fixtures,onUpdatePlayer:B&&(bt||Tt(B.teamId))&&N?H=>{const ve=s.memberTeams.map(Se=>Se.id===(B==null?void 0:B.teamId)?{...Se,players:Se.players.map(nt=>nt.id===B.id?{...nt,...H}:nt)}:Se);N(s.id,{memberTeams:ve}),Z(Se=>Se?{...Se,...H}:null)}:void 0,onDeletePlayer:B&&(bt||Tt(B.teamId))&&N?H=>{const ve=s.memberTeams.map(Se=>Se.id===(B==null?void 0:B.teamId)?{...Se,players:Se.players.filter(nt=>nt.id!==H)}:Se);N(s.id,{memberTeams:ve}),Z(null)}:void 0}),te&&N&&t.jsx(Vk,{organization:s,onClose:()=>_e(!1),onSave:N,currentUserProfile:j}),ze&&S&&T&&t.jsx(Nb,{tournament:ze,onClose:()=>Ke(null),onSave:H=>{S(s.id,ze.id,H),Ke(null)},onDelete:()=>{T(s.id,ze.id),Ke(null)}}),re&&t.jsx(zk,{isOpen:!0,mode:re,onClose:()=>{Re(null),Te(null)},onConfirm:Ms,currentUserPassword:j==null?void 0:j.password}),t.jsx(Wk,{isOpen:$,teamName:(be==null?void 0:be.name)||"",onClose:()=>{oe(!1),Te(null)},onSave:js}),!E&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start mb-6 md:mb-8 gap-4",children:[t.jsxs("div",{className:"flex items-center gap-3 md:gap-5 w-full",children:[t.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-50 hover:text-black transition-all shadow-sm flex-none",children:""}),t.jsxs("div",{className:"flex items-center gap-3 md:gap-4 overflow-hidden",children:[t.jsx("div",{className:"w-14 h-14 md:w-16 md:h-16 bg-white p-1 rounded-xl shadow-md border border-slate-100 flex-none",children:s.logoUrl?t.jsx("img",{src:s.logoUrl,className:"w-full h-full object-cover rounded-lg"}):t.jsx("div",{className:"w-full h-full bg-slate-100 rounded-lg flex items-center justify-center font-black text-slate-300 text-xl",children:s.name.charAt(0)})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[t.jsx("h1",{className:"text-xl md:text-2xl lg:text-3xl font-black text-slate-900 tracking-tight truncate",children:s.name}),Q&&t.jsx("span",{className:"bg-emerald-100 text-emerald-700 px-1.5 py-0.5 rounded text-[7px] md:text-[8px] font-black uppercase tracking-widest align-middle whitespace-nowrap",children:"Club"})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-x-3 gap-y-1",children:[t.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1",children:[" ",s.memberTeams.length+Ct.length," Squads"]}),s.establishedYear&&t.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1",children:[" Est. ",s.establishedYear]}),(s.address||s.groundLocation)&&t.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1 truncate",children:[" ",s.address||s.groundLocation]})]})]})]})]}),t.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-start md:justify-end flex-wrap",children:[(Ss||(He||Ze)&&D)&&t.jsx("button",{onClick:()=>{Ze&&Ss?(Ye(!Ie),ee("SQUADS")):D&&D()},className:`px-4 py-2.5 rounded-xl font-black uppercase text-[9px] md:text-[10px] tracking-widest transition-all shadow-md ${Ie?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-indigo-600 text-white hover:bg-indigo-500"}`,children:Ie?"Org View ":"Team Hub "}),Ze&&N&&!He&&t.jsx("button",{onClick:()=>_e(!0),className:"w-10 h-10 rounded-xl bg-slate-100 text-slate-500 hover:bg-slate-200 hover:text-slate-900 flex items-center justify-center text-lg transition-all",title:"Settings",children:""}),t.jsx("button",{onClick:f,className:`px-4 py-2.5 rounded-xl font-black uppercase text-[9px] md:text-[10px] tracking-widest transition-all whitespace-nowrap ${m?"bg-emerald-500 text-white":"bg-slate-900 text-white hover:bg-slate-800"}`,children:m?"Following":"Follow"})]})]}),t.jsx("div",{className:"bg-white p-1 rounded-xl flex w-full gap-1 mb-6 md:mb-8 border border-slate-200 shadow-sm overflow-x-auto no-scrollbar",children:ks.map(H=>{const ve=H==="REQUESTS"?Yt.length:H==="AFFILIATIONS"?it.length:0;return t.jsxs("button",{onClick:()=>ee(H),className:`flex-none px-4 md:px-6 py-2.5 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all whitespace-nowrap flex items-center gap-1.5 ${ne===H?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-slate-900"}`,children:[H==="TOURNAMENTS"&&Q?"LEAGUES":H,ve>0&&t.jsx("span",{className:"bg-red-500 text-white px-1.5 py-0.5 rounded text-[8px]",children:ve})]},H)})})]}),t.jsx(Zk,{organization:s,isClub:Q,isOrgAdmin:Ze,isActive:ne==="TOURNAMENTS",onRequestAddTournament:d,onViewTournament:i,onUpdateTournament:S,onRemoveTournament:T,setEditingTournament:Ke}),t.jsx(eS,{organization:s,isActive:ne==="MATCHES",onUpdateFixture:G}),t.jsx(Qk,{organization:s,isMainAdmin:_t,isCouncilAdmin:bt,isOrgAdmin:Ze,isLockdown:on,isActive:ne==="SQUADS",focusMyTeam:Ie,myTeam:Ss,isClub:Q,affiliatedTeams:Ct,onLinkTeam:()=>De(!0),onBulkAddTeams:()=>Re("TEAMS"),onRequestAddTeam:o,onViewTeam:p,onRemoveTeam:k,onUpdateOrg:N,onSelectHubTeam:L,onAddPlayer:H=>{Te(H),oe(!0)},onBulkImportPlayers:H=>{Te(H),Re("PLAYERS")},onEditTeam:Be,canEditTeam:Tt}),ne==="PLAYERS"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex flex-col gap-4",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:se,onChange:H=>M(H.target.value),placeholder:`Search ${Q?"club":"organizational"} roster...`,className:"flex-1 bg-slate-50 border-none outline-none p-4 rounded-xl font-bold text-sm"}),Ze&&t.jsx("button",{onClick:()=>Re("PLAYERS"),className:"bg-slate-900 text-white px-6 py-4 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-slate-700 shadow-lg",children:"Bulk Import"})]}),Ze&&t.jsxs("div",{className:"flex gap-2 items-center bg-slate-50 p-2 rounded-xl border border-slate-100",children:[t.jsx("input",{value:Ce,onChange:H=>St(H.target.value),placeholder:"Add Player by User ID...",className:"flex-1 bg-white border-none outline-none px-4 py-3 rounded-lg font-mono text-xs"}),t.jsx("button",{onClick:ps,className:"bg-indigo-600 text-white px-4 py-3 rounded-lg font-black uppercase text-xs tracking-widest hover:bg-indigo-500",children:"Add"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:u.filter(H=>H.name.toLowerCase().includes(se.toLowerCase())).map(H=>t.jsxs("div",{onClick:()=>Bt(H),className:"bg-white p-6 rounded-3xl border border-slate-100 shadow-sm cursor-pointer hover:border-indigo-400 transition-all flex items-center gap-4 group hover:shadow-lg",children:[t.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-100 flex items-center justify-center text-lg overflow-hidden border border-slate-200 group-hover:border-indigo-300",children:t.jsx("img",{src:H.photoUrl||`https://ui-avatars.com/api/?name=${H.name}&background=random`,alt:H.name,className:"w-full h-full object-cover"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-black text-slate-900 text-sm group-hover:text-indigo-600 transition-colors",children:H.name}),t.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:H.teamName}),t.jsx("div",{className:"text-[9px] font-bold text-indigo-400 uppercase mt-0.5",children:H.role})]})]},H.id))})]}),ne==="MEMBERS"&&t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest",children:"Registered Members"}),Ze&&t.jsxs("div",{className:"flex gap-2",children:[ce&&t.jsx("button",{onClick:()=>W(!0),className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-500 shadow-lg transition-all",children:"+ Create User"}),t.jsx("button",{onClick:()=>ae(!0),className:"bg-slate-900 text-white px-6 py-3 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-slate-700 shadow-lg transition-all",children:"Add Existing"})]})]}),P&&ce&&t.jsx(Kk,{isOpen:!0,onClose:()=>W(!1),onCreate:async(H,ve)=>{var Se;try{console.log("Creating user...",H);const nt=await ce(H,ve);if(!nt.success){alert(`Failed to create user: ${((Se=nt.error)==null?void 0:Se.message)||"Unknown error"}`);return}const gt={...H,id:nt.userId};xt(gt,H.role),W(!1),alert(`User ${H.handle} created successfully!

Password: ${ve}

They can now sign in with their handle and password.`)}catch(nt){console.error("User creation failed:",nt),alert(`Failed to create user: ${nt.message||"Unknown error"}`)}},organizationName:s.name}),["Administrator","Captain","Scorer","Umpire","Coach","Player"].map(H=>{const ve=s.members.filter(Se=>Se.role===H);return ve.length===0?null:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest border-b border-slate-200 pb-2",children:[H,"s"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ve.map(Se=>t.jsxs("div",{onClick:()=>we(Se),className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex items-center justify-between cursor-pointer hover:border-indigo-300 transition-all group",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center font-black text-lg text-white shadow-md ${H==="Administrator"?"bg-purple-600":H==="Scorer"?"bg-teal-500":H==="Umpire"?"bg-amber-500":H==="Captain"?"bg-indigo-600":"bg-slate-800"}`,children:Se.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-slate-900 group-hover:text-indigo-600 transition-colors",children:Se.name}),t.jsx("p",{className:"text-xs font-bold text-slate-400",children:Se.handle})]})]}),t.jsx("div",{className:"text-[10px] font-bold text-slate-300 uppercase tracking-widest group-hover:text-indigo-400 transition-colors",children:"View"})]},Se.userId))})]},H)}),s.members.length===0&&t.jsx("div",{className:"p-12 text-center bg-slate-50 border border-dashed border-slate-200 rounded-[2rem] text-slate-400 font-bold uppercase text-xs",children:"No members found. Add some to get started."})]}),ne==="REQUESTS"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[t.jsx("div",{className:"flex justify-between items-center mb-4",children:t.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest",children:"Pending Applications"})}),Yt.length===0?t.jsx("div",{className:"p-12 text-center bg-slate-50 border border-dashed border-slate-200 rounded-[2rem] text-slate-400 font-bold uppercase text-xs",children:"No pending membership requests."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Yt.map(H=>t.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex flex-col gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-xl overflow-hidden flex items-center justify-center font-black text-slate-400",children:H.applicantImage?t.jsx("img",{src:H.applicantImage,className:"w-full h-full object-cover"}):H.applicantName.charAt(0)}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-slate-900",children:H.applicantName}),t.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:H.applicantHandle||"@user"}),H.type==="PLAYER_CLAIM"&&t.jsxs("div",{className:"mt-2 bg-indigo-50 px-3 py-1.5 rounded-lg border border-indigo-100",children:[t.jsx("p",{className:"text-[9px] font-bold text-indigo-400 uppercase tracking-widest mb-0.5",children:"Claiming Profile"}),t.jsx("p",{className:"text-xs font-black text-indigo-700",children:Ds(H.targetPlayerId)})]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Ue(H),className:"flex-1 py-3 bg-emerald-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-emerald-500 transition-all shadow-md shadow-emerald-600/20",children:"Accept"}),t.jsx("button",{onClick:()=>A==null?void 0:A(s.id,H.id,"REJECTED"),className:"flex-1 py-3 bg-slate-100 text-slate-600 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-slate-200 transition-all",children:"Decline"})]})]},H.id))})]}),ne==="AFFILIATIONS"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[t.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-slate-900 rounded-[2rem] p-8 text-white relative overflow-hidden",children:[t.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row justify-between items-center gap-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black mb-2",children:"Connect with Zone"}),t.jsxs("p",{className:"text-xs text-indigo-200 font-bold uppercase tracking-widest max-w-md",children:["Link your ",s.type==="UMPIRE_ASSOCIATION"?"association":"club"," to a governing body to receive official fixtures."]})]}),t.jsxs("div",{className:"w-full md:w-auto relative",children:[t.jsx("input",{type:"text",placeholder:"Search Governing Bodies...",className:"bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-sm font-bold placeholder-indigo-300 w-full md:w-64 focus:bg-white/20 transition-all outline-none",value:qe,onChange:H=>mt(H.target.value)}),t.jsx("span",{className:"absolute right-4 top-3.5 text-indigo-300",children:""})]})]}),qe&&t.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4 animate-in slide-in-from-bottom-2",children:[I.filter(H=>{var ve;return H.type==="GOVERNING_BODY"&&!((ve=s.parentOrgIds)!=null&&ve.includes(H.id))}).filter(H=>H.name.toLowerCase().includes(qe.toLowerCase())).slice(0,4).map(H=>{var Se,nt,gt;(Se=s.applications)==null||Se.some(Rt=>Rt.type==="ORG_AFFILIATE"&&Rt.applicantId===H.id&&Rt.status==="PENDING");const ve=(gt=(nt=I.find(Rt=>Rt.id===H.id))==null?void 0:nt.applications)==null?void 0:gt.some(Rt=>Rt.type==="ORG_AFFILIATE"&&Rt.applicantId===s.id&&Rt.status==="PENDING");return t.jsxs("div",{className:"bg-white/10 border border-white/10 p-4 rounded-xl flex items-center justify-between hover:bg-white/20 transition-all",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-black",children:H.name}),t.jsx("div",{className:"text-[10px] uppercase tracking-widest text-indigo-300",children:H.country||"Global"})]}),ve?t.jsx("button",{disabled:!0,className:"bg-white/50 text-white px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest cursor-not-allowed",children:"Pending..."}):t.jsx("button",{onClick:()=>q==null?void 0:q(H.id,s),className:"bg-white text-indigo-900 px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest hover:scale-105 transition-all",children:"Request Link"})]},H.id)}),I.filter(H=>H.type==="GOVERNING_BODY"&&H.name.toLowerCase().includes(qe.toLowerCase())).length===0&&t.jsxs("div",{className:"col-span-full text-center text-indigo-300 text-xs font-bold uppercase py-4",children:['No governing bodies found matching "',qe,'"']})]})]}),s.parentOrgIds&&s.parentOrgIds.length>0&&t.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200",children:[t.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest mb-4",children:"Active Affiliations"}),t.jsx("div",{className:"flex flex-wrap gap-4",children:I.filter(H=>{var ve;return(ve=s.parentOrgIds)==null?void 0:ve.includes(H.id)}).map(H=>t.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 px-4 py-2 rounded-xl flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:""}),t.jsx("span",{className:"font-black text-indigo-900 text-sm",children:H.name})]},H.id))})]}),t.jsx("div",{className:"flex justify-between items-center mb-4 pt-6 border-t border-slate-100",children:t.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest",children:"Incoming Organization Ties"})}),it.length===0?t.jsx("div",{className:"p-12 text-center bg-slate-50 border border-dashed border-slate-200 rounded-[2rem] text-slate-400 font-bold uppercase text-xs",children:"No pending affiliation requests."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:it.map(H=>t.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex flex-col gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-slate-900 text-white rounded-xl flex items-center justify-center font-black text-xl",children:""}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-slate-900",children:H.applicantName}),t.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Wants to affiliate"})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>A==null?void 0:A(s.id,H.id,"APPROVED"),className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-indigo-500 transition-all shadow-md shadow-indigo-600/20",children:"Grant Affiliation"}),t.jsx("button",{onClick:()=>A==null?void 0:A(s.id,H.id,"REJECTED"),className:"flex-1 py-3 bg-slate-100 text-slate-600 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-slate-200 transition-all",children:"Decline"})]})]},H.id))})]}),ne==="OFFICIALS"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest",children:"Official Panel"}),Ze&&t.jsx("button",{onClick:()=>ae(!0),className:"bg-slate-900 text-white px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest hover:bg-slate-700",children:"+ Register Official"})]}),fs.length===0?t.jsx("div",{className:"p-12 text-center bg-slate-50 border border-dashed border-slate-200 rounded-[2rem] text-slate-400 font-bold uppercase text-xs",children:"No officials registered. Use the 'Add Member' feature to add Umpires."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:fs.map(H=>t.jsxs("div",{onClick:()=>we(H),className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex items-center justify-between cursor-pointer hover:border-indigo-300 transition-all group",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-14 h-14 bg-slate-900 text-white rounded-xl flex items-center justify-center font-black text-lg",children:H.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-slate-900",children:H.name}),t.jsx("p",{className:"text-xs font-bold text-slate-400",children:H.role})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-black text-indigo-600",children:We(H.userId)}),t.jsx("div",{className:"text-[8px] font-bold text-slate-400 uppercase tracking-widest",children:"Games"})]})]},H.userId))})]}),ne==="ACCESS"&&t.jsx(Xk,{organization:s,onUpdateOrg:N,isParentAdmin:I.filter(H=>{var ve;return(ve=s.parentOrgIds)==null?void 0:ve.includes(H.id)}).some(H=>H.members.some(ve=>ve.userId===(j==null?void 0:j.id)&&ve.role==="Administrator")),isMainAdmin:_t,isOrgAdmin:Ze}),ne==="ASSIGNMENTS"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[t.jsxs("div",{className:"bg-slate-900 text-white p-6 rounded-[2rem] mb-6",children:[t.jsx("h3",{className:"text-xl font-black mb-2",children:"Officiating Assignments"}),t.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Assign your officials to affiliated matches"})]}),t.jsx("div",{className:"grid grid-cols-1 gap-4",children:I.filter(H=>{var ve;return(ve=s.parentOrgIds)==null?void 0:ve.includes(H.id)}).flatMap(H=>H.fixtures.map(ve=>({...ve,orgName:H.name,orgId:H.id}))).filter(H=>H.status!=="Completed").sort((H,ve)=>new Date(H.date).getTime()-new Date(ve.date).getTime()).map(H=>t.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between items-center gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest bg-slate-100 px-2 py-0.5 rounded text-slate-500",children:H.orgName}),t.jsx("span",{className:"text-[9px] font-bold text-slate-400",children:new Date(H.date).toLocaleDateString()})]}),t.jsxs("div",{className:"font-black text-slate-900",children:[H.teamAName," vs ",H.teamBName]}),t.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:H.umpires&&H.umpires.length>0?t.jsxs("span",{className:"text-emerald-600 flex items-center gap-1",children:[" ",H.umpires.length," Assigned",t.jsxs("span",{className:"text-slate-400 font-normal normal-case",children:["(",s.members.filter(ve=>{var Se;return(Se=H.umpires)==null?void 0:Se.includes(ve.userId)}).map(ve=>ve.name).join(", "),")"]})]}):t.jsx("span",{className:"text-amber-500",children:" Unassigned"})})]}),Ze&&t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs("select",{className:"bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-xs font-bold outline-none focus:border-indigo-500",onChange:ve=>{if(ve.target.value&&G){const Se=H.umpires||[];Se.includes(ve.target.value)||G(H.orgId,H.id,{umpires:[...Se,ve.target.value]})}},value:"",children:[t.jsx("option",{value:"",children:"+ Assign Official"}),fs.map(ve=>{var Se;return t.jsx("option",{value:ve.userId,disabled:(Se=H.umpires)==null?void 0:Se.includes(ve.userId),children:ve.name},ve.userId)})]})})]},H.id))})]}),Ee&&t.jsx("div",{className:"fixed inset-0 bg-slate-950/50 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-[2.5rem] p-8 w-full max-w-sm shadow-2xl animate-in zoom-in-95",children:[t.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"Accept Application"}),t.jsxs("p",{className:"text-slate-500 text-xs mb-6",children:["Approve ",t.jsx("span",{className:"font-bold text-slate-900",children:Ee.applicantName}),". They will be notified."]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{onClick:()=>Ot("Player"),className:"w-full p-4 rounded-xl border-2 border-slate-100 hover:border-indigo-500 hover:bg-indigo-50 transition-all text-left group",children:[t.jsx("div",{className:"font-black text-slate-900 group-hover:text-indigo-700",children:"Add as Player"}),t.jsx("div",{className:"text-[10px] text-slate-400 group-hover:text-indigo-600/70",children:"Assign to team roster."})]}),t.jsxs("button",{onClick:()=>Ot("Scorer"),className:"w-full p-4 rounded-xl border-2 border-slate-100 hover:border-teal-500 hover:bg-teal-50 transition-all text-left group",children:[t.jsx("div",{className:"font-black text-slate-900 group-hover:text-teal-700",children:"Scorer / Staff"}),t.jsx("div",{className:"text-[10px] text-slate-400 group-hover:text-teal-600/70",children:"Can score matches."})]}),t.jsxs("button",{onClick:()=>Ot("Club"),className:"w-full p-4 rounded-xl border-2 border-slate-100 hover:border-emerald-500 hover:bg-emerald-50 transition-all text-left group",children:[t.jsx("div",{className:"font-black text-slate-900 group-hover:text-emerald-700",children:"Add as Club / Team"}),t.jsx("div",{className:"text-[10px] text-slate-400 group-hover:text-emerald-600/70",children:"Create new team & assign admin."})]})]}),t.jsx("button",{onClick:()=>Ue(null),className:"mt-6 w-full py-3 text-slate-400 font-black uppercase text-xs hover:text-slate-600",children:"Cancel"})]})}),X&&t.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-8 shadow-2xl animate-in zoom-in-95",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center text-2xl font-black text-slate-400",children:X.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-xl font-black text-slate-900",children:X.name}),t.jsx("p",{className:"text-sm font-bold text-slate-400",children:X.handle})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2",children:"Current Role"}),t.jsx("div",{className:"p-4 bg-slate-50 rounded-xl font-bold text-slate-900 border border-slate-100",children:X.role})]}),Ze&&X.role!=="Administrator"&&t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest block mb-2",children:"Change Role To"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Administrator","Scorer","Umpire","Coach","Player","Captain"].filter(H=>H!==X.role).map(H=>t.jsx("button",{onClick:()=>{N&&alert(`Role change for ${X.name} to ${H} would happen here. (Backend Hook Needed)`)},className:"py-3 px-2 bg-white border border-slate-200 rounded-xl text-[10px] font-black uppercase text-slate-500 hover:border-indigo-500 hover:text-indigo-600 transition-all",children:H},H))})]}),t.jsx("div",{className:"pt-4 border-t border-slate-100",children:t.jsx("button",{onClick:()=>we(null),className:"w-full py-3 bg-slate-900 text-white rounded-xl font-black uppercase text-xs",children:"Close"})})]})]})})]})},jb=({rows:s,onViewTeam:e})=>t.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[2rem] overflow-hidden shadow-xl",children:[t.jsx("div",{className:"w-full",children:t.jsxs("table",{className:"w-full text-left border-collapse table-fixed md:table-auto",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-800/50 text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] border-b border-slate-800",children:[t.jsx("th",{className:"pl-4 pr-2 py-2 w-5/12 md:w-auto md:px-6 md:py-3",children:"Team"}),t.jsx("th",{className:"px-1 py-2 text-center md:px-4 md:py-3",children:"P"}),t.jsx("th",{className:"px-1 py-2 text-center md:px-4 md:py-3",children:"W"}),t.jsx("th",{className:"px-1 py-2 text-center md:px-4 md:py-3",children:"L"}),t.jsx("th",{className:"px-1 py-2 text-center hidden sm:table-cell md:px-4 md:py-3",children:"T"}),t.jsx("th",{className:"px-1 py-2 text-center hidden sm:table-cell md:px-4 md:py-3",children:"D"}),t.jsx("th",{className:"px-1 py-2 text-center text-amber-500 font-bold md:px-4 md:py-3",children:"BP"}),t.jsx("th",{className:"px-1 py-2 text-center md:px-4 md:py-3",children:"NRR"}),t.jsx("th",{className:"pr-4 pl-2 py-2 text-right text-indigo-400 md:px-6 md:py-3",children:"PTS"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-800/50",children:s.map((n,i)=>t.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[t.jsx("td",{className:"pl-4 pr-2 py-2 md:px-6 md:py-3 overflow-hidden",children:t.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[t.jsx("span",{className:"text-[10px] font-black text-slate-600 w-3 md:w-4 shrink-0",children:i+1}),e?t.jsx("button",{onClick:()=>e(n.teamId),className:"text-[11px] md:text-sm font-black text-slate-200 group-hover:text-white transition-colors hover:underline truncate block w-full text-left leading-tight",children:n.teamName}):t.jsx("span",{className:"text-[11px] md:text-sm font-black text-slate-200 group-hover:text-white transition-colors truncate block leading-tight",children:n.teamName})]})}),t.jsx("td",{className:"px-1 py-2 text-center text-slate-400 font-bold text-[10px] md:text-sm md:px-4 md:py-3",children:n.played}),t.jsx("td",{className:"px-1 py-2 text-center text-emerald-500 font-black text-[10px] md:text-sm md:px-4 md:py-3",children:n.won}),t.jsx("td",{className:"px-1 py-2 text-center text-red-500/70 font-bold text-[10px] md:text-sm md:px-4 md:py-3",children:n.lost}),t.jsx("td",{className:"px-1 py-2 text-center text-slate-500 font-medium text-[10px] md:text-sm hidden sm:table-cell md:px-4 md:py-3",children:n.tied}),t.jsx("td",{className:"px-1 py-2 text-center text-slate-500 font-medium text-[10px] md:text-sm hidden sm:table-cell md:px-4 md:py-3",children:n.drawn}),t.jsx("td",{className:"px-1 py-2 text-center text-amber-500/80 font-black text-[10px] md:text-sm md:px-4 md:py-3",children:n.bonusPoints}),t.jsxs("td",{className:`px-1 py-2 text-center font-bold text-[9px] md:text-xs md:px-4 md:py-3 ${n.nrr>=0?"text-emerald-400":"text-red-400"}`,children:[n.nrr>0?"+":"",n.nrr]}),t.jsx("td",{className:"pr-4 pl-2 py-2 text-right font-black text-xs md:text-base text-white tabular-nums md:px-6 md:py-3",children:n.points})]},n.teamId))})]})}),s.length===0&&t.jsxs("div",{className:"p-10 text-center flex flex-col items-center gap-2 opacity-20",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsx("p",{className:"text-[9px] font-black uppercase tracking-widest",children:"No competition data"})]})]}),tS=({fixtures:s,onViewMatch:e})=>{const n=s.filter(o=>o.stage==="Semi-Final"),i=s.find(o=>o.stage==="Final"),r=({match:o,title:d})=>{if(!o)return t.jsx("div",{className:"w-64 h-32 bg-slate-800/50 rounded-2xl border-2 border-dashed border-slate-700 flex items-center justify-center",children:t.jsxs("span",{className:"text-slate-500 font-bold text-xs uppercase tracking-widest",children:[d," TBD"]})});const u=o.winnerId&&o.winnerId===o.teamAId,p=o.winnerId&&o.winnerId===o.teamBId;return t.jsxs("div",{onClick:()=>e(o),className:`w-64 bg-slate-800 rounded-2xl border transition-all cursor-pointer relative overflow-hidden group ${o.status==="Live"?"border-red-500 shadow-[0_0_15px_rgba(220,38,38,0.3)]":"border-slate-700 hover:border-indigo-500"}`,children:[t.jsxs("div",{className:"bg-slate-900 p-2 flex justify-between items-center border-b border-slate-700",children:[t.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:d}),o.status==="Completed"&&t.jsx("span",{className:"text-[9px] font-black bg-emerald-500/20 text-emerald-400 px-2 py-0.5 rounded",children:"DONE"}),o.status==="Live"&&t.jsx("span",{className:"text-[9px] font-black bg-red-600 text-white px-2 py-0.5 rounded animate-pulse",children:"LIVE"})]}),t.jsxs("div",{className:"p-4 space-y-2",children:[t.jsxs("div",{className:`flex justify-between items-center ${u?"text-emerald-400":p?"text-slate-500":"text-white"}`,children:[t.jsx("span",{className:"font-bold text-sm truncate max-w-[120px]",children:o.teamAName}),t.jsx("span",{className:"font-black font-mono",children:o.teamAScore||"-"})]}),t.jsxs("div",{className:`flex justify-between items-center ${p?"text-emerald-400":u?"text-slate-500":"text-white"}`,children:[t.jsx("span",{className:"font-bold text-sm truncate max-w-[120px]",children:o.teamBName}),t.jsx("span",{className:"font-black font-mono",children:o.teamBScore||"-"})]})]}),o.result&&t.jsx("div",{className:"px-4 pb-2 text-[9px] text-slate-400 italic truncate",children:o.result})]})};return t.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-12 p-8 overflow-x-auto min-h-[400px]",children:[t.jsxs("div",{className:"flex flex-col gap-12 relative",children:[t.jsx(r,{match:n[0],title:"Semi Final 1"}),t.jsx(r,{match:n[1],title:"Semi Final 2"}),t.jsx("div",{className:"absolute top-16 -right-6 w-6 h-[calc(100%-8rem)] border-r-2 border-t-2 border-b-2 border-slate-600 rounded-r-xl pointer-events-none md:block hidden"}),t.jsx("div",{className:"absolute top-1/2 -right-12 w-6 h-0.5 bg-slate-600 pointer-events-none md:block hidden"})]}),t.jsxs("div",{className:"flex flex-col items-center gap-6",children:[t.jsx("div",{className:"text-4xl",children:""}),t.jsx(r,{match:i,title:"Grand Final"}),(i==null?void 0:i.winnerId)&&t.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-yellow-600 text-white px-6 py-2 rounded-full font-black text-xs uppercase tracking-widest shadow-xl animate-in zoom-in",children:["Champion: ",i.winnerId===i.teamAId?i.teamAName:i.teamBName]})]})]})};function kb(s,e){const n=new Map;return e.forEach(i=>{n.set(i.id,{teamId:i.id,teamName:i.name,played:0,won:0,lost:0,tied:0,nr:0,drawn:0,points:0,bonusPoints:0,runsFor:0,oversFor:0,runsAgainst:0,oversAgainst:0,nrr:0})}),s.forEach(i=>{const r=n.get(i.teamAId),o=n.get(i.teamBId);!r||!o||(r.played++,o.played++,r.runsFor+=i.teamAScore,r.oversFor+=i.teamAOvers,r.runsAgainst+=i.teamBScore,r.oversAgainst+=i.teamBOvers,o.runsFor+=i.teamBScore,o.oversFor+=i.teamBOvers,o.runsAgainst+=i.teamAScore,o.oversAgainst+=i.teamAOvers,r.points+=a0(i.result,"A"),o.points+=a0(i.result,"B"),i.result==="TIE"?(r.tied++,o.tied++):i.result==="HOME_WIN"?(r.won++,o.lost++):i.result==="AWAY_WIN"?(o.won++,r.lost++):(r.nr++,o.nr++))}),Array.from(n.values()).map(i=>{const r=i.oversFor>0?i.runsFor/i.oversFor:0,o=i.oversAgainst>0?i.runsAgainst/i.oversAgainst:0;return{...i,nrr:parseFloat((r-o).toFixed(3))}}).sort((i,r)=>r.points!==i.points?r.points-i.points:r.nrr-i.nrr)}const sS=({config:s,onSave:e})=>{const n={...br,...s},[i,r]=_.useState(n),o=f=>{confirm("Apply this preset? This will overwrite your current point settings.")&&r({...f})},d=(f,b)=>{r(y=>({...y,[f]:b}))},u=(f,b,y,N)=>{const k=f==="batting"?"batting_bonus_tiers":"bowling_bonus_tiers",T=[...i[k]];T[b]={...T[b],[y]:N},d(k,T)},p=f=>{const b=f==="batting"?"batting_bonus_tiers":"bowling_bonus_tiers",y=[...i[b],{threshold:0,points:0}];d(b,y)},m=(f,b)=>{const y=f==="batting"?"batting_bonus_tiers":"bowling_bonus_tiers",N=i[y].filter((k,T)=>T!==b);d(y,N)};return t.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-xl space-y-8 animate-in fade-in slide-in-from-bottom-4",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-black text-slate-900",children:"Points Configuration"}),t.jsx("p",{className:"text-sm text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Regulatory Logic Settings"})]}),t.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[t.jsx("div",{className:"flex-1 md:flex-none",children:t.jsxs("select",{onChange:f=>{f.target.value==="T20"&&o(gb),f.target.value==="TEST"&&o(xb),f.target.value=""},className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-xs font-black uppercase tracking-widest outline-none focus:ring-2 ring-indigo-500",children:[t.jsx("option",{value:"",children:"Apply Preset..."}),t.jsx("option",{value:"T20",children:"Standard T20/Limited Overs"}),t.jsx("option",{value:"TEST",children:"Standard Test/Multi-Day"})]})}),t.jsx("button",{onClick:()=>e(i),className:"bg-indigo-600 text-white px-8 py-3 rounded-2xl font-black uppercase text-xs tracking-widest shadow-lg shadow-indigo-200 hover:bg-indigo-500 transition-all",children:"Save Configuration"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("section",{className:"space-y-4",children:[t.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest px-1",children:"Standard Match Points"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(ra,{label:"Win (Reg/Outright)",value:i.win_outright,onChange:f=>{d("win_outright",f),d("win",f)}}),t.jsx(ra,{label:"Tie (Reg/Match)",value:i.tie_match,onChange:f=>{d("tie_match",f),d("tie",f)}}),t.jsx(ra,{label:"No Result / Abandoned",value:i.noResult,onChange:f=>d("noResult",f)})]})]}),t.jsxs("section",{className:"space-y-4",children:[t.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest px-1",children:"Test/Multi-Day Points"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(ra,{label:"1st Innings Lead",value:i.first_inning_lead,onChange:f=>d("first_inning_lead",f)}),t.jsx(ra,{label:"1st Innings Tie",value:i.first_inning_tie,onChange:f=>d("first_inning_tie",f)}),t.jsx(ra,{label:"1st Innings Loss",value:i.first_inning_loss,onChange:f=>d("first_inning_loss",f)})]})]}),t.jsxs("section",{className:"space-y-4",children:[t.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-widest px-1",children:"Bonus Caps & Limits"}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(ra,{label:"Max Pts Per Match",value:i.max_total_per_match,onChange:f=>d("max_total_per_match",f)}),t.jsx(ra,{label:"Max Batting Bonus",value:i.bonus_batting_max,onChange:f=>d("bonus_batting_max",f)}),t.jsx(ra,{label:"Max Bowling Bonus",value:i.bonus_bowling_max,onChange:f=>d("bonus_bowling_max",f)})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 pt-6 border-t border-slate-100",children:[t.jsx(i0,{title:"Batting Bonus Tiers",unit:"Runs",tiers:i.batting_bonus_tiers,onAdd:()=>p("batting"),onRemove:f=>m("batting",f),onChange:(f,b,y)=>u("batting",f,b,y)}),t.jsx(i0,{title:"Bowling Bonus Tiers",unit:"Wickets",tiers:i.bowling_bonus_tiers,onAdd:()=>p("bowling"),onRemove:f=>m("bowling",f),onChange:(f,b,y)=>u("bowling",f,b,y)})]})]})},ra=({label:s,value:e,onChange:n})=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[t.jsx("span",{className:"text-sm font-bold text-slate-600",children:s}),t.jsx("input",{type:"number",value:e,onChange:i=>n(parseInt(i.target.value)||0),className:"w-16 bg-white border border-slate-200 rounded-lg p-2 text-center font-black text-indigo-600 outline-none focus:ring-2 ring-indigo-500"})]}),i0=({title:s,unit:e,tiers:n,onAdd:i,onRemove:r,onChange:o})=>t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h4",{className:"text-sm font-black text-slate-900 uppercase tracking-tight",children:s}),t.jsx("button",{onClick:i,className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest hover:underline",children:"+ Add Tier"})]}),t.jsx("div",{className:"space-y-2",children:n.map((d,u)=>t.jsxs("div",{className:"flex items-center gap-3 animate-in slide-in-from-left-2",children:[t.jsxs("div",{className:"flex-1 flex items-center gap-2 bg-slate-50 p-2 px-4 rounded-xl border border-slate-100",children:[t.jsxs("span",{className:"text-[10px] font-black text-slate-400",children:["MIN ",e,":"]}),t.jsx("input",{type:"number",value:d.threshold,onChange:p=>o(u,"threshold",parseInt(p.target.value)||0),className:"w-full bg-transparent font-bold text-sm outline-none"})]}),t.jsxs("div",{className:"w-24 flex items-center gap-2 bg-indigo-50/50 p-2 px-4 rounded-xl border border-indigo-100/50",children:[t.jsx("span",{className:"text-[10px] font-black text-indigo-400",children:"PTS:"}),t.jsx("input",{type:"number",value:d.points,onChange:p=>o(u,"points",parseInt(p.target.value)||0),className:"w-full bg-transparent font-black text-sm text-indigo-600 outline-none"})]}),t.jsx("button",{onClick:()=>r(u),className:"text-slate-300 hover:text-red-500 transition-colors",children:""})]},u))})]}),nS=({fixture:s,config:e,onSave:n,onCancel:i})=>{const r=_.useMemo(()=>({...br,...e}),[e]),[o,d]=_.useState({resultType:"OUTRIGHT_WIN",winnerSide:"A",firstInningsWinnerId:s.teamAId,firstInningsResult:"LEAD",isIncomplete:!1,teamARuns:0,teamBRuns:0,teamAWickets:0,teamBWickets:0}),u=_.useMemo(()=>n0("A",o,r),[o,r]),p=_.useMemo(()=>n0("B",o,r),[o,r]),m=u.isValid&&p.isValid;return t.jsxs("div",{className:"bg-white rounded-[2.5rem] overflow-hidden border border-slate-200 shadow-2xl animate-in zoom-in-95 duration-300",children:[t.jsxs("div",{className:"bg-slate-900 p-8 text-white",children:[t.jsx("h3",{className:"text-2xl font-black italic uppercase tracking-tight",children:"Record Match Result"}),t.jsxs("p",{className:"text-indigo-400 font-bold text-xs uppercase tracking-widest mt-1",children:[s.teamAName," vs ",s.teamBName]})]}),t.jsxs("div",{className:"p-8 space-y-8",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Match Outcome"}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("select",{value:o.isIncomplete?"INCOMPLETE":"OUTRIGHT",onChange:f=>d(b=>({...b,isIncomplete:f.target.value==="INCOMPLETE"})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-4 font-bold outline-none focus:ring-2 ring-indigo-500",children:[t.jsx("option",{value:"OUTRIGHT",children:"Outright Result"}),t.jsx("option",{value:"INCOMPLETE",children:"Incomplete Match (Innings Based)"})]}),!o.isIncomplete&&t.jsxs("select",{value:o.winnerSide,onChange:f=>d(b=>({...b,winnerSide:f.target.value})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-4 font-bold outline-none",children:[t.jsxs("option",{value:"A",children:[s.teamAName," Won Outright"]}),t.jsxs("option",{value:"B",children:[s.teamBName," Won Outright"]}),t.jsx("option",{value:"TIE",children:"Match Tied"})]})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"1st Innings Performance"}),t.jsx("div",{className:"flex flex-col gap-2",children:t.jsxs("select",{value:o.firstInningsResult||"",onChange:f=>d(b=>({...b,firstInningsResult:f.target.value})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-4 font-bold outline-none",children:[t.jsxs("option",{value:"LEAD",children:[s.teamAName," 1st Innings Lead"]}),t.jsx("option",{value:"TIE",children:"1st Innings Tied"}),t.jsxs("option",{value:"LOSS",children:[s.teamAName," 1st Innings Loss"]})]})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6 bg-slate-50 p-6 rounded-3xl border border-slate-100",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-xs font-black text-slate-900 uppercase text-center",children:s.teamAName}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx(Go,{label:"Runs",value:o.teamARuns,onChange:f=>d(b=>({...b,teamARuns:f}))}),t.jsx(Go,{label:"Wkts Taken",value:o.teamAWickets,onChange:f=>d(b=>({...b,teamAWickets:f}))})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("h4",{className:"text-xs font-black text-slate-900 uppercase text-center",children:s.teamBName}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx(Go,{label:"Runs",value:o.teamBRuns,onChange:f=>d(b=>({...b,teamBRuns:f}))}),t.jsx(Go,{label:"Wkts Taken",value:o.teamBWickets,onChange:f=>d(b=>({...b,teamBWickets:f}))})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(l0,{side:"A",name:s.teamAName,calculation:u}),t.jsx(l0,{side:"B",name:s.teamBName,calculation:p})]}),!m&&t.jsxs("div",{className:"p-4 bg-red-50 border border-red-100 rounded-2xl text-red-600 text-xs font-bold flex items-center gap-3 animate-bounce",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("span",{children:u.error||p.error})]}),t.jsxs("div",{className:"flex gap-4 pt-4",children:[t.jsx("button",{onClick:i,className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs tracking-widest",children:"Cancel"}),t.jsx("button",{disabled:!m,onClick:()=>n(s.id,o),className:"flex-1 bg-slate-900 text-white py-4 rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl disabled:opacity-50 transition-all",children:"Confirm & Save Result"})]})]})]})},Go=({label:s,value:e,onChange:n})=>t.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[t.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase",children:s}),t.jsx("input",{type:"number",value:e,onChange:i=>n(parseInt(i.target.value)||0),className:"w-full bg-white border border-slate-200 rounded-xl p-3 text-center font-black outline-none focus:ring-2 ring-indigo-500"})]}),l0=({name:s,calculation:e})=>t.jsxs("div",{className:`p-5 rounded-3xl border transition-all ${e.isValid?"bg-indigo-50/50 border-indigo-100":"bg-red-50 border-red-100"}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-3",children:[t.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase truncate max-w-[100px]",children:s}),t.jsx("span",{className:`text-2xl font-black ${e.isValid?"text-indigo-600":"text-red-600"}`,children:e.total})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx($o,{label:"Match",value:e.matchPoints}),t.jsx($o,{label:"Innings",value:e.inningPoints}),t.jsx($o,{label:"Batting",value:e.battingBonus}),t.jsx($o,{label:"Bowling",value:e.bowlingBonus})]})]}),$o=({label:s,value:e})=>t.jsxs("div",{className:"flex justify-between text-[10px] items-center",children:[t.jsx("span",{className:"text-slate-500 font-bold uppercase tracking-tight",children:s}),t.jsxs("span",{className:"font-black text-slate-900",children:["+",e]})]});function Sb(s,e,n){const[i,r]=[s,e].sort();let o;return typeof n=="number"?o=new Date(n).toISOString().split("T")[0]:o=new Date(n).toISOString().split("T")[0],`${i}_${r}_${o}`}function r0(s,e){if(!s.teamAId||!s.teamBId||!s.date&&!s.timestamp)return{isDuplicate:!1,gameId:""};const n=Sb(s.teamAId,s.teamBId,s.timestamp||s.date),i=e.find(r=>r.gameId===n);return{isDuplicate:!!i,primaryMatch:i,gameId:n}}const _b=({tournament:s,organization:e,onBack:n,onStartMatch:i,onGenerateFixtures:r,onAddGroup:o,onUpdateGroupTeams:d,onViewTeam:u,onViewMatch:p,onAddFixture:m,onUpdateFixture:f,onRemoveFixture:b,onUpdateTournament:y,allOrganizations:N=[],embedMode:k=!1,initialTab:T="OVERVIEW",isOrgAdmin:S=!1,onSelectHubTeam:R})=>{var be,Te;const[A,I]=_.useState(T),[j,E]=_.useState("SCHEDULED"),[D,L]=_.useState(""),[G,Y]=_.useState(!1),[q,ce]=_.useState(!1),[Q,ne]=_.useState(null),[ee,se]=_.useState({groupId:"",teamAId:"",teamBId:"",date:"",venue:"",format:s.format}),[M,B]=_.useState(null),[Z,Ne]=_.useState(new Set),[ae,P]=_.useState(null),W=_.useMemo(()=>{if(!ee.groupId)return[];const $=(s.groups||[]).find(oe=>oe.id===ee.groupId);return($==null?void 0:$.teams)||[]},[s.groups,ee.groupId]),X=e.fixtures.filter($=>$.tournamentId===s.id);e.memberTeams.filter($=>(s.teamIds||[]).includes($.id));const we=_.useMemo(()=>{const $=X.filter(oe=>oe.status==="Completed"&&oe.savedState).map(oe=>{const Ae=oe.savedState,De=Ae.inningsScores.find(Ce=>Ce.teamId===oe.teamAId)||(Ae.innings===1&&Ae.battingTeamId===oe.teamAId?{score:Ae.score,wickets:Ae.wickets,overs:"0.0"}:{score:0,wickets:0,overs:"0.0"}),Me=Ae.inningsScores.find(Ce=>Ce.teamId===oe.teamBId)||(Ae.innings===2&&Ae.battingTeamId===oe.teamBId?{score:Ae.score,wickets:Ae.wickets,overs:"0.0"}:{score:0,wickets:0,overs:"0.0"}),Be=typeof De.score=="number"?De.score:parseInt(De.score),ze=typeof Me.score=="number"?Me.score:parseInt(Me.score);let Ke="NO_RESULT";return Be>ze?Ke="HOME_WIN":ze>Be?Ke="AWAY_WIN":Be===ze&&Be>0&&(Ke="TIE"),{matchId:oe.id,teamAId:oe.teamAId,teamBId:oe.teamBId,teamAName:oe.teamAName,teamBName:oe.teamBName,teamAScore:Be,teamAWkts:De.wickets,teamAOvers:parseFloat(De.overs),teamBScore:ze,teamBWkts:Me.wickets,teamBOvers:parseFloat(Me.overs),result:Ke}});return(s.groups||[]).map(oe=>{const Ae=$.filter(De=>{const Me=X.find(ze=>ze.id===De.matchId);if((Me==null?void 0:Me.groupId)===oe.id)return!0;const Be=oe.teams.map(ze=>ze.id);return Be.includes(De.teamAId)&&Be.includes(De.teamBId)});return{group:oe,rows:kb(Ae,oe.teams)}})},[X,s.groups]),te=_.useMemo(()=>{let $=[...e.memberTeams];return e.childOrgIds&&e.childOrgIds.length>0&&N.filter(Ae=>{var De;return(De=e.childOrgIds)==null?void 0:De.includes(Ae.id)}).forEach(Ae=>{$=[...$,...Ae.memberTeams]}),$},[e,N]),_e=$=>{const oe=(s.groups||[]).find(Ae=>Ae.id===$);oe&&(Ne(new Set(oe.teams.map(Ae=>Ae.id))),B($))},re=$=>{const oe=new Set(Z);oe.has($)?oe.delete($):oe.add($),Ne(oe)},Re=()=>{M&&(d(s.id,M,Array.from(Z)),B(null))},$e=()=>{const $=we.flatMap(oe=>oe.rows).sort((oe,Ae)=>Ae.points-oe.points||Ae.nrr-oe.nrr);if($.length<4){alert("Need at least 4 teams with standings data to generate Semi-Finals.");return}$.slice(0,4).map(oe=>({teamId:oe.teamId,teamName:oe.teamName,played:oe.played,won:oe.won,lost:oe.lost,drawn:oe.drawn,tied:oe.tied,points:oe.points,bonusPoints:oe.bonusPoints,nrr:oe.nrr,runsFor:oe.runsFor,oversFor:oe.oversFor,runsAgainst:oe.runsAgainst,oversAgainst:oe.oversAgainst})),alert("Knockout Generation Logic linked. (Requires parent state update implementation)")},ue=X.filter($=>j==="LIVE"?$.status==="Live":j==="SCHEDULED"?$.status==="Scheduled":$.status==="Completed");return t.jsxs("div",{className:"animate-in slide-in-from-bottom-8 duration-500 pb-20",children:[!k&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex items-center gap-6 mb-10",children:[t.jsx("button",{onClick:n,className:"w-12 h-12 rounded-full bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-50 hover:text-black transition-all shadow-sm",children:""}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("img",{src:"/logo.jpg",alt:"Logo",className:"w-16 h-16 object-contain drop-shadow-sm rounded-xl bg-white p-1 border border-slate-100"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:s.name}),t.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[t.jsxs("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:[s.format,"  ",t.jsx("span",{className:"text-indigo-500",children:s.status})]}),(s.startDate||s.endDate)&&t.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest flex items-center gap-1.5 mt-0.5",children:[t.jsx("span",{children:""}),t.jsxs("span",{children:[s.startDate?new Date(s.startDate).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}):"...",s.endDate?`  ${new Date(s.endDate).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})} `:""]})]})]})]})]})]}),t.jsx("div",{className:"flex gap-4 mb-10 overflow-x-auto pb-4 no-scrollbar",children:["OVERVIEW","GROUPS","FIXTURES","STANDINGS","BRACKET","POINTS_CONFIG"].map($=>t.jsx("button",{onClick:()=>I($),className:`px - 8 py - 4 rounded - 3xl text - xs font - black uppercase tracking - widest whitespace - nowrap transition - all border ${A===$?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-400 border-slate-200 hover:border-slate-300 hover:text-slate-900"} `,children:$},$))})]}),A==="OVERVIEW"&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border border-slate-100 shadow-sm col-span-2",children:[t.jsx("h3",{className:"text-xl font-black mb-4",children:"Season Status"}),t.jsxs("p",{className:"text-slate-500 leading-relaxed mb-4",children:["Competition in the ",s.name," is currently ",(be=s.status)==null?void 0:be.toLowerCase(),". Tracking results across ",(s.groups||[]).length," active groups."]}),s.description&&t.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-100",children:[t.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"About Tournament"}),t.jsx("p",{className:"text-slate-600 text-sm leading-relaxed whitespace-pre-wrap",children:s.description})]})]}),t.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2rem] text-white",children:[t.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest opacity-50 mb-2",children:"Total Fixtures"}),t.jsx("div",{className:"text-5xl font-black",children:X.length})]})]}),A==="GROUPS"&&t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[S&&t.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex flex-col md:flex-row gap-4 items-center",children:[t.jsx("input",{value:D,onChange:$=>L($.target.value),placeholder:"New Group Name (e.g. Group A)",className:"flex-1 bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none w-full"}),t.jsx("button",{onClick:()=>{D&&(o(s.id,D),L(""))},disabled:!D,className:"bg-indigo-600 disabled:bg-slate-200 disabled:text-slate-400 text-white px-8 py-4 rounded-xl font-black uppercase text-xs tracking-widest shadow-lg w-full md:w-auto transition-all",children:"+ Create Group"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(s.groups||[]).map($=>t.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-xl hover:shadow-2xl transition-all relative overflow-hidden",children:[t.jsxs("div",{className:"flex justify-between items-start mb-6 relative z-10",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-black text-slate-900",children:$.name}),t.jsxs("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:[$.teams.length," Teams"]})]}),S&&t.jsx("button",{onClick:()=>_e($.id),className:"bg-slate-900 text-white px-4 py-2 rounded-lg text-[10px] font-black uppercase tracking-widest hover:bg-indigo-600 transition-colors",children:"Manage Squads"})]}),t.jsx("div",{className:"space-y-2 relative z-10",children:$.teams.length===0?t.jsx("div",{className:"p-4 bg-slate-50 border border-dashed border-slate-200 rounded-xl text-center text-xs font-bold text-slate-400",children:"No teams assigned yet."}):$.teams.map(oe=>t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:()=>u(oe.id),className:"flex-1 flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-100 hover:border-indigo-200 hover:bg-indigo-50 transition-colors",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-white border border-slate-200 flex items-center justify-center text-sm",children:""}),t.jsx("span",{className:"font-bold text-slate-700 text-sm",children:oe.name})]},oe.id),R&&S&&t.jsx("button",{onClick:()=>R(oe.id),className:"w-12 h-auto bg-slate-50 border border-slate-100 rounded-xl flex items-center justify-center text-indigo-600 hover:bg-indigo-600 hover:text-white transition-all shadow-sm",title:"Open Team Hub",children:""})]}))}),t.jsx("div",{className:"absolute -bottom-6 -right-6 text-9xl opacity-[0.03] select-none pointer-events-none",children:""})]},$.id))})]}),A==="POINTS_CONFIG"&&t.jsx(sS,{config:s.pointsConfig,onSave:$=>{y&&y(s.id,{pointsConfig:$})}}),A==="FIXTURES"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 flex-wrap gap-3",children:[t.jsx("div",{className:"flex gap-2",children:["SCHEDULED","LIVE","COMPLETED"].map($=>t.jsx("button",{onClick:()=>E($),className:`px - 4 py - 2 rounded - xl text - [10px] font - black uppercase tracking - widest transition - all ${j===$?"bg-indigo-600 text-white":"bg-white text-slate-400 border border-slate-200"} `,children:$},$))}),t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[m&&S&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>Y(!0),className:"bg-indigo-600 text-white px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg hover:bg-indigo-500 transition-all",children:"+ Manual Add"}),t.jsx("button",{onClick:()=>ce(!0),className:"bg-emerald-600 text-white px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest shadow-lg hover:bg-emerald-500 transition-all",children:" CSV Upload"})]}),S&&t.jsx("button",{onClick:r,className:"bg-white border border-slate-200 text-slate-500 px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest shadow-sm hover:border-indigo-400 hover:text-indigo-600 transition-all",children:"Auto Generate"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[ue.map($=>{const oe=S,Ae=$.status==="Live",De=$.status==="Completed";return t.jsxs("div",{className:"bg-white p-4 rounded-3xl border border-slate-200 shadow-sm flex flex-col sm:flex-row items-center justify-between gap-4 hover:bg-slate-50 transition-all group",children:[t.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",onClick:()=>p($),children:[t.jsx("div",{className:`w - 12 h - 12 rounded - 2xl flex items - center justify - center shrink - 0 ${Ae?"bg-red-500/10 text-red-500 animate-pulse":De?"bg-indigo-50 text-indigo-500":"bg-slate-50 text-slate-400"} `,children:Ae?"":De?"":""}),t.jsxs("div",{className:"truncate flex-1",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-0.5",children:[t.jsxs("span",{className:"font-black text-sm truncate",children:[$.teamAName," vs ",$.teamBName]}),Ae&&t.jsxs("span",{className:"text-[9px] font-black text-red-500 uppercase tracking-widest bg-red-50 px-2 py-0.5 rounded animate-pulse",children:["LIVE: ",$.teamAScore||"0/0"," - ",$.teamBScore||"0/0"]}),$.isDuplicate&&t.jsx("span",{className:"text-[9px] font-black text-amber-700 uppercase tracking-widest bg-amber-100 px-2 py-0.5 rounded border border-amber-200",children:"DUPLICATE"}),!$.isDuplicate&&$.gameId&&t.jsx("span",{className:"text-[9px] font-black text-emerald-700 uppercase tracking-widest bg-emerald-100 px-2 py-0.5 rounded border border-emerald-200",children:"PRIMARY"})]}),t.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-400 font-bold uppercase tracking-widest flex-wrap",children:[$.tournamentName&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"text-indigo-600",children:[" ",$.tournamentName]}),t.jsx("span",{children:""})]}),$.groupName&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-slate-500",children:$.groupName}),t.jsx("span",{children:""})]}),t.jsx("span",{children:new Date($.date).toLocaleDateString()}),t.jsx("span",{children:""}),t.jsx("span",{className:"text-indigo-500/70",children:$.venue}),t.jsx("span",{children:""}),t.jsx("span",{className:"bg-slate-100 px-1.5 rounded",children:$.format})]}),$.result&&t.jsxs("div",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-widest mt-1",children:["Result: ",$.result]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[De&&t.jsx("button",{onClick:()=>P($),className:"flex-1 sm:flex-none px-4 py-2.5 bg-indigo-600 text-white text-[9px] font-black uppercase tracking-widest rounded-xl hover:bg-indigo-500 transition-all shadow-md",children:$.pointsData?"Result":"Finish"}),t.jsx("button",{onClick:()=>i($),className:`flex - 1 sm: flex - none px - 4 py - 2.5 text - [9px] font - black uppercase tracking - widest rounded - xl transition - all shadow - md ${Ae?"bg-red-600 text-white hover:bg-red-500":"bg-slate-900 text-white hover:bg-slate-800"} `,children:Ae?"Resume":De?"Details":"Claim/Start"}),t.jsx("button",{onClick:()=>p($),className:"flex-1 sm:flex-none px-4 py-2.5 bg-white border border-slate-200 text-slate-900 text-[9px] font-black uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Scorecard"}),oe&&b&&t.jsx("button",{onClick:()=>{window.confirm("Remove this fixture from tournament?")&&b($.id)},className:"w-10 h-10 flex items-center justify-center bg-red-50 text-red-400 rounded-xl hover:bg-red-500 hover:text-white transition-all border border-red-100 shrink-0",title:"Remove",children:""})]})]},$.id)}),ue.length===0&&t.jsxs("div",{className:"py-20 text-center bg-slate-50 rounded-[2rem] border-2 border-dashed border-slate-200 text-slate-400 font-bold uppercase text-xs",children:["No ",j.toLowerCase()," fixtures found"]})]})]}),A==="STANDINGS"&&t.jsxs("div",{className:"space-y-12 animate-in slide-in-from-right-8 pb-10",children:[we.map(({group:$,rows:oe})=>t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-3 mb-6 px-4",children:[t.jsx("h3",{className:"text-2xl font-black text-slate-900",children:$.name}),t.jsxs("span",{className:"bg-slate-200 text-slate-600 px-2 py-1 rounded text-[10px] font-black uppercase tracking-widest",children:[oe.length," Teams"]})]}),t.jsx(jb,{rows:oe,onViewTeam:u})]},$.id)),we.length===0&&t.jsxs("div",{className:"p-20 text-center flex flex-col items-center gap-4 opacity-20",children:[t.jsx("span",{className:"text-4xl",children:""}),t.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest",children:"No groups defined"})]})]}),A==="BRACKET"&&t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[S&&t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:$e,className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-500 shadow-lg transition-all",children:"Auto-Generate Knockouts"})}),t.jsx(tS,{fixtures:X,onViewMatch:p})]}),M&&t.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",onClick:()=>B(null),children:t.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[85vh] animate-in zoom-in-95",onClick:$=>$.stopPropagation(),children:[t.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50",children:[t.jsx("h3",{className:"text-2xl font-black text-slate-900",children:"Select Teams"}),t.jsxs("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mt-1",children:["Adding to ",(Te=(s.groups||[]).find($=>$.id===M))==null?void 0:Te.name]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h4",{className:"text-xs font-black uppercase tracking-widest text-slate-500 mb-3",children:"Internal Squads"}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:e.memberTeams.map($=>{const oe=Z.has($.id);return t.jsxs("button",{onClick:()=>re($.id),className:`p - 4 rounded - 2xl border - 2 transition - all flex items - center justify - between group ${oe?"border-indigo-600 bg-indigo-50":"border-slate-100 bg-white hover:border-slate-300"} `,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w - 10 h - 10 rounded - xl flex items - center justify - center text - lg ${oe?"bg-indigo-200":"bg-slate-50"} `,children:""}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:`font - black text - sm ${oe?"text-indigo-900":"text-slate-900"} `,children:$.name}),t.jsxs("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:[$.players.length," Players"]})]})]}),t.jsx("div",{className:`w - 6 h - 6 rounded - full border - 2 flex items - center justify - center transition - all ${oe?"bg-indigo-600 border-indigo-600":"border-slate-200 group-hover:border-slate-400"} `,children:oe&&t.jsx("span",{className:"text-white text-[10px] font-black",children:""})})]},$.id)})})]}),te.length>e.memberTeams.length&&t.jsxs("div",{children:[t.jsx("h4",{className:"text-xs font-black uppercase tracking-widest text-slate-500 mb-3",children:"Affiliated Club Teams"}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:te.filter($=>!e.memberTeams.some(oe=>oe.id===$.id)).map($=>{const oe=Z.has($.id);return t.jsxs("button",{onClick:()=>re($.id),className:`p - 4 rounded - 2xl border - 2 transition - all flex items - center justify - between group ${oe?"border-emerald-600 bg-emerald-50":"border-slate-100 bg-white hover:border-slate-300"} `,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w - 10 h - 10 rounded - xl flex items - center justify - center text - lg ${oe?"bg-emerald-200":"bg-slate-50"} `,children:""}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:`font - black text - sm ${oe?"text-emerald-900":"text-slate-900"} `,children:$.name}),t.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Affiliated"})]})]}),t.jsx("div",{className:`w - 6 h - 6 rounded - full border - 2 flex items - center justify - center transition - all ${oe?"bg-emerald-600 border-emerald-600":"border-slate-200 group-hover:border-slate-400"} `,children:oe&&t.jsx("span",{className:"text-white text-[10px] font-black",children:""})})]},$.id)})})]})]}),t.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>B(null),className:"px-6 py-4 text-slate-400 font-black uppercase text-xs hover:text-slate-600",children:"Cancel"}),t.jsxs("button",{onClick:Re,className:"px-8 py-4 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-indigo-500 transition-all",children:["Update Group (",Z.size,")"]})]})]})}),G&&m&&t.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",onClick:()=>Y(!1),children:t.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95",onClick:$=>$.stopPropagation(),children:[t.jsxs("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:[t.jsx("h3",{className:"text-2xl font-black text-slate-900",children:"Create Fixture"}),t.jsxs("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mt-1",children:["Add a new match to ",s.name]})]}),t.jsxs("div",{className:"p-8 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-slate-500 mb-2",children:"Select Group *"}),t.jsxs("select",{value:ee.groupId,onChange:$=>se({...ee,groupId:$.target.value,teamAId:"",teamBId:""}),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-400 transition-colors",children:[t.jsx("option",{value:"",children:"Choose a group first"}),(s.groups||[]).map($=>t.jsxs("option",{value:$.id,children:[$.name," (",$.teams.length," teams)"]},$.id))]}),!ee.groupId&&t.jsx("p",{className:"text-xs text-amber-600 mt-2 font-bold",children:" Select a group to see available teams"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-slate-500 mb-2",children:"Team A"}),t.jsxs("select",{value:ee.teamAId,onChange:$=>se({...ee,teamAId:$.target.value}),disabled:!ee.groupId,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx("option",{value:"",children:"Select Team A"}),W.map($=>t.jsx("option",{value:$.id,children:$.name},$.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-slate-500 mb-2",children:"Team B"}),t.jsxs("select",{value:ee.teamBId,onChange:$=>se({...ee,teamBId:$.target.value}),disabled:!ee.groupId,className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx("option",{value:"",children:"Select Team B"}),W.filter($=>$.id!==ee.teamAId).map($=>t.jsx("option",{value:$.id,children:$.name},$.id))]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-slate-500 mb-2",children:"Match Date"}),t.jsx("input",{type:"datetime-local",value:ee.date,onChange:$=>se({...ee,date:$.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-400 transition-colors"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-slate-500 mb-2",children:"Format"}),t.jsxs("select",{value:ee.format,onChange:$=>se({...ee,format:$.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-400 transition-colors",children:[t.jsx("option",{value:"T20",children:"T20"}),t.jsx("option",{value:"T10",children:"T10"}),t.jsx("option",{value:"50-over",children:"50-over"}),t.jsx("option",{value:"40-over",children:"40-over"}),t.jsx("option",{value:"Test",children:"Test"})]})]})]}),ee.teamAId&&ee.teamBId&&ee.date&&(()=>{const $=new Date(ee.date).getTime(),oe=r0({teamAId:ee.teamAId,teamBId:ee.teamBId,timestamp:$},e.fixtures);return oe.isDuplicate?t.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-4",children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-bold text-amber-900 text-sm mb-1",children:"Duplicate Match Detected"}),t.jsxs("div",{className:"text-xs text-amber-700 leading-relaxed",children:["A match between these teams on this date already exists. This will be marked as a ",t.jsx("strong",{children:"DUPLICATE"})," match and will ",t.jsx("strong",{children:"NOT count toward player statistics"}),"."]}),oe.primaryMatch&&t.jsx("button",{onClick:()=>p(oe.primaryMatch),className:"mt-2 text-amber-600 underline text-xs font-bold hover:text-amber-800",children:"View Primary Match "})]})]})}):null})(),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-slate-500 mb-2",children:"Venue"}),t.jsx("input",{type:"text",value:ee.venue,onChange:$=>se({...ee,venue:$.target.value}),placeholder:"Enter venue name",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-400 transition-colors"})]})]}),t.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{Y(!1),se({groupId:"",teamAId:"",teamBId:"",date:"",venue:"",format:s.format})},className:"px-6 py-4 text-slate-400 font-black uppercase text-xs hover:text-slate-600",children:"Cancel"}),t.jsx("button",{onClick:()=>{var ze,Ke;const $=te.find(Ce=>Ce.id===ee.teamAId),oe=te.find(Ce=>Ce.id===ee.teamBId);if(!$||!oe||!ee.date||!ee.venue){alert("Please fill all fields");return}const Ae=new Date(ee.date).getTime(),De=Sb($.id,oe.id,Ae),Me=r0({teamAId:$.id,teamBId:oe.id,timestamp:Ae},e.fixtures),Be=(ze=s.groups)==null?void 0:ze.find(Ce=>Ce.id===ee.groupId);m({id:`fix - ${Date.now()} `,tournamentId:s.id,tournamentName:s.name,groupId:ee.groupId,groupName:Be==null?void 0:Be.name,teamAId:$.id,teamBId:oe.id,teamAName:$.name,teamBName:oe.name,date:new Date(ee.date).toISOString(),timestamp:Ae,venue:ee.venue,format:ee.format,status:"Scheduled",gameId:De,isDuplicate:Me.isDuplicate,primaryMatchId:(Ke=Me.primaryMatch)==null?void 0:Ke.id,duplicateReason:Me.isDuplicate?`Duplicate of match between ${$.name} vs ${oe.name} on ${new Date(Ae).toLocaleDateString()} `:void 0}),Me.isDuplicate&&ne(Me),Y(!1),se({groupId:"",teamAId:"",teamBId:"",date:"",venue:"",format:s.format})},disabled:!ee.teamAId||!ee.teamBId||!ee.date||!ee.venue,className:"px-8 py-4 bg-indigo-600 disabled:bg-slate-300 disabled:cursor-not-allowed text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-indigo-500 transition-all",children:"Create Fixture"})]})]})}),q&&m&&t.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",onClick:()=>ce(!1),children:t.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95",onClick:$=>$.stopPropagation(),children:[t.jsxs("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-emerald-50 to-teal-50",children:[t.jsx("h3",{className:"text-2xl font-black text-slate-900",children:"Upload Fixtures (CSV)"}),t.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mt-1",children:"Bulk import fixtures from CSV file"})]}),t.jsxs("div",{className:"p-8 space-y-6",children:[t.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-6",children:[t.jsx("h4",{className:"text-sm font-black text-slate-700 mb-3",children:"CSV Format Required:"}),t.jsxs("code",{className:"block bg-white p-4 rounded-xl text-xs font-mono text-slate-600 border border-slate-200",children:["teamAId,teamBId,date,venue,format",t.jsx("br",{}),"tm-123,tm-456,2026-03-15T14:00,Stadium A,T20",t.jsx("br",{}),"tm-789,tm-123,2026-03-16T18:00,Stadium B,T20"]}),t.jsxs("p",{className:"text-xs text-slate-400 mt-3 font-bold",children:[" Date format: YYYY-MM-DDTHH:MM",t.jsx("br",{})," Format options: T20, T10, 50-over, 40-over, Test"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-slate-500 mb-2",children:"Select CSV File"}),t.jsx("input",{type:"file",accept:".csv",onChange:$=>{var De;const oe=(De=$.target.files)==null?void 0:De[0];if(!oe)return;const Ae=new FileReader;Ae.onload=Me=>{var Ce,St,Ee,Ue,qe,mt;const ze=((Ce=Me.target)==null?void 0:Ce.result).split(`
`).filter(ft=>ft.trim());ze[0].split(",");let Ke=0;for(let ft=1;ft<ze.length;ft++){const ot=ze[ft].split(","),pt=(St=ot[0])==null?void 0:St.trim(),Ze=(Ee=ot[1])==null?void 0:Ee.trim(),He=(Ue=ot[2])==null?void 0:Ue.trim(),bt=(qe=ot[3])==null?void 0:qe.trim(),_t=((mt=ot[4])==null?void 0:mt.trim())||s.format,tt=te.find(Ct=>Ct.id===pt),Tt=te.find(Ct=>Ct.id===Ze);tt&&Tt&&He&&bt&&(m({id:`fix - csv - ${Date.now()} -${ft} `,tournamentId:s.id,teamAId:tt.id,teamBId:Tt.id,teamAName:tt.name,teamBName:Tt.name,date:new Date(He).toISOString(),venue:bt,format:_t,status:"Scheduled"}),Ke++)}alert(`Successfully imported ${Ke} fixtures!`),ce(!1)},Ae.readAsText(oe)},className:"w-full bg-slate-50 border-2 border-dashed border-slate-300 rounded-xl px-5 py-8 font-bold outline-none focus:border-emerald-400 transition-colors cursor-pointer hover:bg-slate-100"})]})]}),t.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:t.jsx("button",{onClick:()=>ce(!1),className:"px-6 py-4 text-slate-400 font-black uppercase text-xs hover:text-slate-600",children:"Cancel"})})]})}),ae&&t.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[110] flex items-center justify-center p-4",children:t.jsx("div",{className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto no-scrollbar",children:t.jsx(nS,{fixture:ae,config:s.pointsConfig,onSave:($,oe)=>{f&&f($,{status:"Completed",pointsData:oe,winnerId:oe.winnerSide==="A"?ae.teamAId:oe.winnerSide==="B"?ae.teamBId:"TIE",result:oe.isIncomplete?`Incomplete - ${oe.firstInningsResult==="LEAD"?ae.teamAName:oe.firstInningsResult==="LOSS"?ae.teamBName:"Tied"} on 1st Innings`:oe.winnerSide==="TIE"?"Match Tied":`${oe.winnerSide==="A"?ae.teamAName:ae.teamBName} won by Outright Victory`}),P(null)},onCancel:()=>P(null)})})})]})},aS=({organization:s,onConfirm:e,onCancel:n})=>t.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 shadow-2xl animate-in zoom-in-95",children:[t.jsx("div",{className:"w-20 h-20 bg-red-50 text-red-500 rounded-3xl flex items-center justify-center text-4xl mx-auto mb-6",children:""}),t.jsx("h3",{className:"text-2xl font-black text-slate-900 text-center mb-4",children:"Delete Organization?"}),t.jsxs("p",{className:"text-slate-400 text-sm text-center mb-10 font-medium",children:["This will permanently remove ",t.jsx("span",{className:"text-slate-900 font-black",children:s.name})," and all its associated teams, matches, and data. This action cannot be undone."]}),t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsx("button",{onClick:e,className:"w-full py-4 bg-red-600 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl",children:"Yes, Delete Everything"}),t.jsx("button",{onClick:n,className:"w-full py-4 text-slate-400 font-black uppercase text-xs tracking-widest hover:bg-slate-50 rounded-2xl",children:"Cancel Action"})]})]})}),iS=({scorers:s})=>t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[t.jsxs("div",{className:"bg-slate-900 text-white p-10 rounded-[2.5rem] relative overflow-hidden",children:[t.jsxs("div",{className:"relative z-10",children:[t.jsx("h2",{className:"text-3xl font-black mb-2",children:"HR & Talent Acquisition"}),t.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"Find qualified scorers for your league"})]}),t.jsx("div",{className:"absolute top-0 right-0 p-8 text-8xl opacity-10",children:""})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.map(e=>{var n,i,r;return t.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] border border-slate-200 shadow-xl flex flex-col hover:border-indigo-300 transition-all group",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-14 h-14 bg-slate-900 text-white rounded-2xl flex items-center justify-center font-black text-xl shadow-lg",children:e.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-black text-lg text-slate-900 leading-tight",children:e.name}),t.jsx("p",{className:"text-xs font-bold text-slate-400",children:e.handle})]})]}),t.jsx("div",{className:"bg-emerald-100 text-emerald-700 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest",children:"Available"})]}),t.jsxs("div",{className:"flex-1 space-y-4 mb-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[t.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Rate"}),t.jsxs("div",{className:"text-xl font-black text-slate-900",children:["$",((n=e.scorerDetails)==null?void 0:n.hourlyRate)||"Neg","/hr"]})]}),t.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl border border-slate-100",children:[t.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Exp"}),t.jsxs("div",{className:"text-xl font-black text-slate-900",children:[((i=e.scorerDetails)==null?void 0:i.experienceYears)||0," Yrs"]})]})]}),t.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed italic",children:['"',((r=e.scorerDetails)==null?void 0:r.bio)||"No bio provided.",'"']})]}),t.jsx("button",{className:"w-full py-4 bg-slate-900 text-white rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-600 transition-all shadow-lg",children:"Contact / Hire"})]},e.id)}),s.length===0&&t.jsx("div",{className:"col-span-full py-20 text-center text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No scorers currently available for hire."})]})]}),lS=({player:s,isOpen:e,onClose:n,myTeams:i,onSign:r})=>{const[o,d]=_.useState(""),[u,p]=_.useState(""),[m,f]=_.useState("PERMANENT"),[b,y]=_.useState(!1),[N,k]=_.useState(null);if(!e)return null;const T=()=>{o&&(y(!0),setTimeout(()=>{y(!1),k("SUCCESS"),setTimeout(()=>{r(s.id,o),n()},1500)},2e3))};return t.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-[300] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl overflow-hidden animate-in zoom-in-95 flex flex-col",children:[t.jsxs("div",{className:"bg-slate-900 p-8 text-center relative overflow-hidden",children:[t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:"w-20 h-20 mx-auto bg-white p-1 rounded-full shadow-lg mb-4",children:t.jsx("img",{src:s.photoUrl||`https://ui-avatars.com/api/?name=${s.name}`,className:"w-full h-full rounded-full object-cover"})}),t.jsx("h2",{className:"text-2xl font-black text-white",children:s.name}),t.jsxs("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mt-1",children:[s.role,"  ",s.teamName||"Free Agent"]})]}),t.jsx("div",{className:"absolute inset-0 bg-indigo-600/20 opacity-50"})]}),t.jsxs("div",{className:"p-8 space-y-6",children:[!b&&!N&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Destination Team"}),t.jsxs("select",{value:o,onChange:S=>d(S.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500 transition-all",children:[t.jsx("option",{value:"",children:"Select a squad..."}),i.map(S=>t.jsx("option",{value:S.id,children:S.name},S.id))]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Contract Type"}),t.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[t.jsx("button",{onClick:()=>f("PERMANENT"),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase transition-all ${m==="PERMANENT"?"bg-white shadow-sm text-indigo-600":"text-slate-400"}`,children:"Full"}),t.jsx("button",{onClick:()=>f("LOAN"),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase transition-all ${m==="LOAN"?"bg-white shadow-sm text-indigo-600":"text-slate-400"}`,children:"Loan"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Fee / Salary ($)"}),t.jsx("input",{type:"number",value:u,onChange:S=>p(S.target.value),placeholder:"0.00",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500 transition-all"})]})]}),t.jsx("button",{onClick:T,disabled:!o,className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 transition-all disabled:opacity-50 disabled:shadow-none",children:"Submit Offer"})]}),b&&t.jsxs("div",{className:"py-12 text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-6"}),t.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Negotiating Terms..."}),t.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"Agent is reviewing your proposal."})]}),N==="SUCCESS"&&t.jsxs("div",{className:"py-12 text-center animate-in zoom-in",children:[t.jsx("div",{className:"w-20 h-20 bg-emerald-500 rounded-full flex items-center justify-center text-4xl text-white mx-auto mb-6 shadow-xl shadow-emerald-200",children:""}),t.jsx("h3",{className:"text-2xl font-black text-slate-900",children:"Deal Sealed!"}),t.jsxs("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-widest mt-2",children:[s.name," has joined the squad."]})]})]}),!b&&!N&&t.jsx("div",{className:"bg-slate-50 p-4 text-center border-t border-slate-100",children:t.jsx("button",{onClick:n,className:"text-slate-400 font-bold text-xs uppercase tracking-widest hover:text-slate-600",children:"Cancel Negotiation"})})]})})},rS=({players:s,myTeams:e,onTransfer:n,onBack:i})=>{const[r,o]=_.useState("ALL"),[d,u]=_.useState(""),[p,m]=_.useState(null),f=_.useMemo(()=>s.filter(b=>{var y,N;return((y=b.playerDetails)==null?void 0:y.lookingForClub)||((N=b.playerDetails)==null?void 0:N.isHireable)}).filter(b=>!(r!=="ALL"&&b.role!==r||d&&!b.name.toLowerCase().includes(d.toLowerCase()))).sort((b,y)=>y.stats.runs+y.stats.wickets*20-(b.stats.runs+b.stats.wickets*20)),[s,r,d]);return t.jsxs("div",{className:"animate-in fade-in duration-500 pb-20",children:[t.jsx(lS,{player:p,isOpen:!!p,onClose:()=>m(null),myTeams:e,onSign:n}),t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end gap-6 mb-10",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx("button",{onClick:i,className:"w-12 h-12 rounded-full bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-50 hover:text-black transition-all shadow-sm",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:"Transfer Market"}),t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Scout & Sign Talent"})]})]}),t.jsx("div",{className:"flex gap-2 bg-white p-1.5 rounded-2xl border border-slate-200 shadow-sm overflow-x-auto max-w-full",children:["ALL","Batsman","Bowler","All-rounder","Wicket-keeper"].map(b=>t.jsx("button",{onClick:()=>o(b),className:`px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${r===b?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:bg-slate-50"}`,children:b},b))})]}),t.jsx("div",{className:"mb-8",children:t.jsx("input",{value:d,onChange:b=>u(b.target.value),placeholder:"Search players...",className:"w-full bg-white border border-slate-200 rounded-[2rem] px-8 py-5 font-bold outline-none shadow-sm focus:ring-2 focus:ring-indigo-500 transition-all text-sm"})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[f.map(b=>{var y;return t.jsxs("div",{className:"bg-white rounded-[2.5rem] border border-slate-200 shadow-xl hover:shadow-2xl hover:scale-[1.02] transition-all flex flex-col overflow-hidden group",children:[t.jsxs("div",{className:"h-24 bg-slate-900 relative",children:[t.jsx("div",{className:`absolute inset-0 bg-gradient-to-br opacity-80 ${b.role==="Batsman"?"from-indigo-600 to-blue-900":b.role==="Bowler"?"from-emerald-600 to-teal-900":"from-purple-600 to-pink-900"}`}),t.jsx("div",{className:"absolute -bottom-10 left-6",children:t.jsx("div",{className:"w-20 h-20 rounded-2xl bg-white p-1 shadow-lg",children:t.jsx("img",{src:b.photoUrl||`https://ui-avatars.com/api/?name=${b.name}`,className:"w-full h-full rounded-xl object-cover"})})}),t.jsx("div",{className:"absolute top-4 right-4",children:t.jsx("span",{className:"bg-black/30 backdrop-blur-md text-white px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest border border-white/10",children:(y=b.playerDetails)!=null&&y.isHireable?"For Hire":"Free Agent"})})]}),t.jsxs("div",{className:"pt-12 px-6 pb-6 flex-1 flex flex-col",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-slate-900 leading-tight",children:b.name}),t.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest mt-1",children:b.role})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 my-6",children:[t.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 text-center border border-slate-100",children:[t.jsx("div",{className:"text-xl font-black text-slate-900",children:b.stats.runs}),t.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Runs"})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 text-center border border-slate-100",children:[t.jsx("div",{className:"text-xl font-black text-slate-900",children:b.stats.wickets}),t.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Wkts"})]})]}),t.jsx("div",{className:"mt-auto",children:t.jsx("button",{onClick:()=>m(b),className:"w-full py-4 bg-slate-900 text-white rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-600 transition-all shadow-lg",children:"Initiate Offer"})})]})]},b.id)}),f.length===0&&t.jsxs("div",{className:"col-span-full py-20 text-center",children:[t.jsx("div",{className:"text-6xl mb-4 opacity-20",children:""}),t.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"No players found matching your criteria."})]})]})]})},oS=({organization:s,onUpdateOrg:e})=>{var I;const[n,i]=_.useState(!1),[r,o]=_.useState({name:"",logoUrl:"",website:"",isActive:!0,placements:[]}),[d,u]=_.useState(null),[p,m]=_.useState(!1),f=s.sponsorSettings||{mediaTopHeight:320,mediaBottomHeight:320,scoreboardTopHeight:400,scoreboardBottomHeight:480},b=(j,E)=>{e(s.id,{sponsorSettings:{...f,[j]:E}})},y=j=>{var D;const E=(D=j.target.files)==null?void 0:D[0];if(E){m(!0);const L=new FileReader;L.onload=G=>{var q;const Y=new Image;Y.onload=()=>{const ce=document.createElement("canvas"),Q=ce.getContext("2d"),ne=3e3;let ee=Y.width,se=Y.height;ee>se?ee>ne&&(se*=ne/ee,ee=ne):se>ne&&(ee*=ne/se,se=ne),ce.width=ee,ce.height=se,Q==null||Q.drawImage(Y,0,0,ee,se);const M=ce.toDataURL("image/png");o(B=>({...B,logoUrl:M})),m(!1)},Y.src=(q=G.target)==null?void 0:q.result},L.readAsDataURL(E)}},N=j=>{o(E=>{const D=E.placements||[];return D.includes(j)?{...E,placements:D.filter(L=>L!==j)}:{...E,placements:[...D,j]}})},k=()=>{if(!(!r.name||!r.logoUrl)){if(d){const j=(s.sponsors||[]).map(E=>E.id===d?{...E,name:r.name,logoUrl:r.logoUrl,website:r.website,placements:r.placements||[]}:E);e(s.id,{sponsors:j})}else{const j={id:`sp-${Date.now()}`,name:r.name,logoUrl:r.logoUrl,website:r.website,isActive:r.isActive??!0,placements:r.placements||[]},E=[...s.sponsors||[],j];e(s.id,{sponsors:E})}i(!1),u(null),o({name:"",logoUrl:"",website:"",isActive:!0,placements:[]})}},T=j=>{o({name:j.name,logoUrl:j.logoUrl,website:j.website,isActive:j.isActive,placements:j.placements}),u(j.id),i(!0)},S=()=>{i(!1),u(null),o({name:"",logoUrl:"",website:"",isActive:!0,placements:[]})},R=j=>{const E=(s.sponsors||[]).filter(D=>D.id!==j);e(s.id,{sponsors:E})},A=j=>{const E=(s.sponsors||[]).map(D=>D.id===j?{...D,isActive:!D.isActive}:D);e(s.id,{sponsors:E})};return t.jsxs("div",{className:"space-y-8 animate-in fade-in",children:[t.jsxs("div",{className:"bg-slate-900 text-white p-10 rounded-[2.5rem] relative overflow-hidden",children:[t.jsxs("div",{className:"relative z-10",children:[t.jsx("h2",{className:"text-3xl font-black mb-2",children:"Sponsors Console"}),t.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"Manage Partners & Ad Placements"})]}),t.jsx("div",{className:"absolute top-0 right-0 p-8 text-8xl opacity-10",children:""})]}),t.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-xl overflow-hidden relative",children:[t.jsx("div",{className:"absolute top-0 right-0 p-6 text-4xl opacity-5",children:""}),t.jsxs("h3",{className:"text-xl font-black text-slate-900 mb-6 flex items-center gap-3",children:["Display Sizing",t.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest bg-slate-100 px-2 py-1 rounded-full",children:"Adjust Dimensions (px)"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{label:"Media Center Top",key:"mediaTopHeight"},{label:"Media Center Bottom",key:"mediaBottomHeight"},{label:"Scoreboard Top",key:"scoreboardTopHeight"},{label:"Scoreboard Bottom",key:"scoreboardBottomHeight"}].map(j=>t.jsxs("div",{className:"space-y-3",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block",children:j.label}),t.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 border border-slate-200 p-1 rounded-xl",children:[t.jsx("input",{type:"number",value:f[j.key]||0,onChange:E=>b(j.key,parseInt(E.target.value)||0),className:"w-full bg-transparent p-3 font-black text-slate-900 outline-none"}),t.jsx("span",{className:"pr-4 text-[10px] font-black text-slate-400",children:"PX"})]})]},j.key))}),t.jsx("div",{className:"mt-6 p-4 bg-indigo-50 rounded-2xl border border-indigo-100",children:t.jsx("p",{className:"text-[10px] font-bold text-indigo-700 leading-relaxed uppercase tracking-tight",children:" These heights define the vertical container for sponsor logos. Logos will scale proportionally to fit within this height while maintaining their aspect ratio."})})]}),n?t.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-xl",children:[t.jsx("h3",{className:"text-xl font-black text-slate-900 mb-6",children:d?"Edit Sponsor":"Add New Sponsor"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsxs("div",{className:"w-80 h-80 rounded-[2.5rem] bg-slate-50 border border-slate-200 flex items-center justify-center overflow-hidden shrink-0 relative group",children:[p?t.jsx("div",{className:"w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin"}):r.logoUrl?t.jsx("img",{src:r.logoUrl,className:"w-full h-full object-contain p-2"}):t.jsx("span",{className:"text-4xl text-slate-300 font-black",children:"+"}),t.jsx("input",{type:"file",accept:"image/*",onChange:y,className:"absolute inset-0 opacity-0 cursor-pointer"})]}),t.jsxs("div",{className:"flex-1 space-y-4",children:[t.jsx("input",{value:r.name,onChange:j=>o({...r,name:j.target.value}),placeholder:"Sponsor Name",className:"w-full bg-slate-50 border border-slate-200 p-4 rounded-xl font-bold outline-none"}),t.jsx("input",{value:r.website,onChange:j=>o({...r,website:j.target.value}),placeholder:"Website URL (Optional)",className:"w-full bg-slate-50 border border-slate-200 p-4 rounded-xl font-medium text-sm outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-xs font-black text-slate-500 uppercase tracking-widest mb-3 block",children:"Ad Placements"}),t.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{id:"MEDIA_TOP",label:"Media Feed (Top)"},{id:"MEDIA_BOTTOM",label:"Media Feed (Bottom)"},{id:"SCOREBOARD_TOP",label:"Scoreboard (Top)"},{id:"SCOREBOARD_BOTTOM",label:"Scoreboard (Bottom)"}].map(j=>{var E;return t.jsx("button",{onClick:()=>N(j.id),className:`p-3 rounded-xl text-[10px] font-black uppercase tracking-widest border transition-all ${(E=r.placements)!=null&&E.includes(j.id)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-400 border-slate-200 hover:border-slate-300"}`,children:j.label},j.id)})})]}),t.jsxs("div",{className:"flex gap-4 pt-4",children:[t.jsx("button",{onClick:S,className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs",children:"Cancel"}),t.jsx("button",{onClick:k,disabled:!r.name||!r.logoUrl,className:"flex-1 py-4 bg-slate-900 text-white rounded-xl font-black uppercase text-xs shadow-xl disabled:opacity-50",children:d?"Save Changes":"Save Sponsor"})]})]})]}):t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("button",{onClick:()=>i(!0),className:"bg-slate-50 border-2 border-dashed border-slate-200 rounded-[2.5rem] flex flex-col items-center justify-center p-8 hover:bg-white hover:border-indigo-400 hover:text-indigo-600 transition-all text-slate-400 gap-4 min-h-[250px]",children:[t.jsx("span",{className:"text-5xl font-thin",children:"+"}),t.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Add Sponsor"})]}),(I=s.sponsors)==null?void 0:I.map(j=>t.jsxs("div",{className:`bg-white p-6 rounded-[2.5rem] border shadow-xl flex flex-col transition-all ${j.isActive?"border-slate-200":"border-slate-100 opacity-60"}`,children:[t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsx("div",{className:"w-64 h-64 bg-white border border-slate-100 rounded-[2rem] p-4 flex items-center justify-center",children:t.jsx("img",{src:j.logoUrl,className:"max-w-full max-h-full"})}),t.jsx("div",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${j.isActive?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:j.isActive?"Active":"Paused"})]}),t.jsx("h3",{className:"text-lg font-black text-slate-900 mb-1",children:j.name}),t.jsxs("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-4",children:[j.placements.length," Placements"]}),t.jsxs("div",{className:"mt-auto flex gap-2 pt-4 border-t border-slate-50",children:[t.jsx("button",{onClick:()=>A(j.id),className:"flex-1 py-2 bg-slate-50 text-slate-600 rounded-lg text-[9px] font-black uppercase hover:bg-slate-100",children:j.isActive?"Pause":"Activate"}),t.jsx("button",{onClick:()=>T(j),className:"w-8 h-8 flex items-center justify-center bg-indigo-50 text-indigo-400 rounded-lg hover:bg-indigo-100",children:""}),t.jsx("button",{onClick:()=>R(j.id),className:"w-8 h-8 flex items-center justify-center bg-red-50 text-red-400 rounded-lg hover:bg-red-100",children:""})]})]},j.id))]})]})},cS=({isOpen:s,onClose:e,onCreate:n,userRole:i})=>{const[r,o]=_.useState(""),[d,u]=_.useState("CLUB"),[p,m]=_.useState(""),[f,b]=_.useState("");if(!s)return null;const y=()=>{r&&(n({name:r,type:d,groundLocation:p,country:f}),e())},N=i==="Administrator";return t.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"bg-slate-900 p-8 text-white",children:[t.jsx("h3",{className:"text-xl font-black mb-1",children:"Establish New Entity"}),t.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Create a Club or Organization"})]}),t.jsxs("div",{className:"p-8 space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Entity Name"}),t.jsx("input",{value:r,onChange:k=>o(k.target.value),placeholder:"e.g. Royal Strikers CC",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500",autoFocus:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Type"}),t.jsxs("select",{value:d,onChange:k=>u(k.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500",children:[t.jsx("option",{value:"CLUB",children:"Cricket Club"}),t.jsx("option",{value:"UMPIRE_ASSOCIATION",children:"Umpire Association"}),t.jsx("option",{value:"COACHES_ASSOCIATION",children:"Coaches Association"}),N&&t.jsx("option",{value:"GOVERNING_BODY",children:"Governing Body"})]}),!N&&t.jsx("p",{className:"text-[9px] text-slate-400 px-1",children:"Governing Bodies restricted to Admins."})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Country"}),t.jsx("input",{value:f,onChange:k=>b(k.target.value),placeholder:"e.g. Australia",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Home Ground / City"}),t.jsx("input",{value:p,onChange:k=>m(k.target.value),placeholder:"e.g. Melbourne",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:border-indigo-500"})]}),t.jsxs("div",{className:"pt-4 flex gap-4",children:[t.jsx("button",{onClick:e,className:"flex-1 py-3 text-slate-400 font-black uppercase text-xs hover:text-slate-600 transition-all",children:"Cancel"}),t.jsxs("button",{onClick:y,disabled:!r,className:"flex-1 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-indigo-500 disabled:opacity-50 transition-all",children:["Create ",d==="CLUB"?"Club":"Org"]})]})]})]})})},dS=({issue:s,isOpen:e,onClose:n,onResolve:i})=>{const[r,o]=_.useState("");if(!e||!s)return null;const d=u=>{i(s.id,u,r),n(),o("")};return t.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 duration-300 flex flex-col max-h-[90vh]",children:[t.jsx("div",{className:"p-8 pb-4 shrink-0",children:t.jsxs("div",{className:"flex justify-between items-start mb-4",children:[t.jsxs("div",{children:[t.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest mb-3 ${s.type==="PROTEST"?"bg-red-100 text-red-600":"bg-orange-100 text-orange-600"}`,children:s.type}),t.jsx("h2",{className:"text-3xl font-black text-slate-900 leading-tight",children:s.title}),t.jsxs("p",{className:"text-slate-400 font-bold text-xs uppercase tracking-widest mt-1",children:[new Date(s.timestamp).toLocaleString(),"  ID: ",s.id]})]}),t.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 flex items-center justify-center transition-colors font-bold",children:""})]})}),t.jsxs("div",{className:"px-8 overflow-y-auto custom-scrollbar space-y-8 pb-8",children:[t.jsx("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100",children:t.jsx("p",{className:"font-bold text-slate-700 leading-relaxed whitespace-pre-wrap",children:s.description})}),s.evidenceUrls&&s.evidenceUrls.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3",children:"Evidence Attached"}),t.jsx("div",{className:"grid gap-4",children:s.evidenceUrls.map((u,p)=>t.jsxs("div",{className:"rounded-2xl overflow-hidden border border-slate-200 bg-slate-100",children:[u.toLowerCase().endsWith(".pdf")||u.includes("application/pdf")?t.jsx("iframe",{src:u,className:"w-full h-64 bg-white",title:"Evidence PDF"}):t.jsx("img",{src:u,className:"w-full h-auto object-contain max-h-96",alt:"Evidence"}),t.jsx("div",{className:"px-4 py-2 bg-white flex justify-end",children:t.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest hover:text-indigo-700",children:"Open Original "})})]},p))})]}),s.status!=="RESOLVED"&&s.status!=="DISMISSED"?t.jsxs("div",{className:"pt-6 border-t-2 border-slate-100",children:[t.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4",children:"Official Resolution"}),t.jsx("textarea",{value:r,onChange:u=>o(u.target.value),placeholder:"Enter your official response or reasoning here...",className:"w-full bg-slate-50 border-2 border-slate-200 focus:border-indigo-500 rounded-2xl p-4 font-bold text-slate-700 outline-none focus:ring-4 focus:ring-indigo-50 h-32 resize-none mb-6 active:scale-[0.99] transition-transform"}),s.type==="PROTEST"?t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx("button",{onClick:()=>d("DISMISSED"),disabled:!r.trim(),className:"py-4 bg-red-100 text-red-600 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-red-200 transition-colors disabled:opacity-50 disabled:grayscale",children:" Dismiss Protest (Lost)"}),t.jsx("button",{onClick:()=>d("UPHELD"),disabled:!r.trim(),className:"py-4 bg-emerald-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-emerald-400 transition-colors disabled:opacity-50 disabled:grayscale",children:" Uphold Protest (Won)"})]}):t.jsx("button",{onClick:()=>d("ACKNOWLEDGED"),disabled:!r.trim(),className:"w-full py-4 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-indigo-500 transition-colors disabled:opacity-50 disabled:grayscale",children:" Mark as Resolved"})]}):t.jsx("div",{className:"pt-6 border-t-2 border-slate-100",children:t.jsxs("div",{className:`p-6 rounded-2xl border ${s.resolution==="UPHELD"?"bg-emerald-50 border-emerald-100":s.resolution==="DISMISSED"?"bg-red-50 border-red-100":"bg-slate-50 border-slate-200"}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("span",{className:`text-xs font-black uppercase tracking-widest ${s.resolution==="UPHELD"?"text-emerald-600":s.resolution==="DISMISSED"?"text-red-600":"text-slate-500"}`,children:["Resolution: ",s.resolution]}),s.resolvedAt&&t.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:new Date(s.resolvedAt).toLocaleString()})]}),t.jsx("p",{className:"font-bold text-slate-700",children:s.adminResponse})]})})]})]})})},uS=({isOpen:s,onClose:e,activeOrg:n,activeTournament:i})=>{const[r,o]=_.useState("player_search"),[d,u]=_.useState(""),[p,m]=_.useState("");return _.useEffect(()=>{let b=`${window.location.origin}/?mode=embed&view=${r}`;n&&(b+=`&orgId=${n.id}`),i&&(b+=`&tournamentId=${i.id}`),r==="team_list"&&n&&(b+=`&id=${n.id}`),u(b),m(`<iframe src="${b}" width="100%" height="800" frameborder="0" style="border:0; width:100%; height:800px; display:block;"></iframe>`)},[r,n,i]),_.useEffect(()=>{o(i?"standings":n?"team_list":"player_search")},[n==null?void 0:n.id,i==null?void 0:i.id]),s?t.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-in fade-in duration-200",children:t.jsxs("div",{className:"bg-white rounded-[2rem] p-8 w-full max-w-2xl shadow-2xl animate-in zoom-in-95 duration-200",children:[t.jsxs("div",{className:"flex justify-between items-start mb-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-black text-slate-900",children:"Embed & Share"}),t.jsx("p",{className:"text-slate-500 font-bold uppercase text-xs tracking-widest mt-1",children:"Generate links for your website"})]}),t.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 hover:text-slate-600 font-black transition-colors flex items-center justify-center",children:""})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-black uppercase tracking-widest text-slate-500 mb-2",children:"Select View to Embed"}),t.jsxs("select",{value:r,onChange:f=>o(f.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none focus:border-indigo-500 transition-all",children:[t.jsx("option",{value:"player_search",children:"Global Player Registry"}),n&&t.jsxs("option",{value:"team_list",children:["Team List (",n.name,")"]}),i&&t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"tournament",children:"Full Tournament Dashboard"}),t.jsx("option",{value:"standings",children:"Standings Table"}),t.jsx("option",{value:"fixtures",children:"Fixtures List"}),t.jsx("option",{value:"bracket",children:"Knockout Bracket"}),t.jsx("option",{value:"groups",children:"Groups Overview"})]})]})]}),t.jsxs("div",{className:"bg-slate-900 rounded-xl p-6 text-white overflow-hidden relative group",children:[t.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest opacity-50 mb-2",children:"Direct Link"}),t.jsx("code",{className:"text-sm font-mono break-all block mb-4",children:d}),t.jsx("button",{onClick:()=>navigator.clipboard.writeText(d),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg text-xs font-black uppercase tracking-widest transition-colors w-full",children:"Copy Link"})]}),t.jsxs("div",{className:"bg-slate-50 rounded-xl p-6 border border-slate-200 relative group",children:[t.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-2",children:"WordPress / Iframe Code"}),t.jsx("textarea",{readOnly:!0,value:p,className:"w-full bg-white border border-slate-200 rounded-lg p-3 text-xs font-mono text-slate-600 h-24 focus:outline-none mb-4 resize-none"}),t.jsx("button",{onClick:()=>navigator.clipboard.writeText(p),className:"bg-white border-2 border-slate-200 hover:border-indigo-600 hover:text-indigo-600 text-slate-500 px-4 py-2 rounded-lg text-xs font-black uppercase tracking-widest transition-colors w-full",children:"Copy Code"})]})]}),t.jsx("div",{className:"mt-8 text-center",children:t.jsx("p",{className:"text-xs text-slate-400",children:"Paste this code into any HTML page or WordPress site to display this view."})})]})}):null},Fu=({organizations:s,standaloneMatches:e,userRole:n,onStartMatch:i,onViewMatch:r,onRequestSetup:o,onUpdateOrgs:d,onCreateOrg:u,onAddTeam:p,onRemoveTeam:m,onBulkAddPlayers:f,onAddGroup:b,onUpdateGroupTeams:y,onAddTournament:N,mediaPosts:k,onAddMediaPost:T,onViewTeam:S,onOpenMediaStudio:R,following:A,onToggleFollow:I,mockGlobalUsers:j=[],onAddMemberToOrg:E=()=>{},onProcessApplication:D,hireableScorers:L=[],currentUserId:G,onApplyForOrg:Y,onUpgradeProfile:q,onTransferPlayer:ce,currentUserProfile:Q,showCaptainHub:ne,onOpenCaptainHub:ee,onRequestMatchReports:se,onUpdateProfile:M,onRequestTransferMarket:B,issues:Z=[],onUpdateIssues:Ne,onRemoveTournament:ae,onUpdateTournament:P,onUpdateFixture:W,onRemoveFixture:X,allOrganizations:we=[],onSelectHubTeam:te,onRequestAffiliation:_e,onViewOrg:re,onCreateUser:Re,activeViewRole:$e,onSwitchViewRole:ue})=>{const[be,Te]=_.useState("GLOBAL"),[$,oe]=_.useState(null),[Ae,De]=_.useState(null),[Me,Be]=_.useState({createOrg:!1,deleteOrg:!1,addTeam:!1,addTournament:!1}),[ze,Ke]=_.useState(null),[Ce,St]=_.useState(null),[Ee,Ue]=_.useState(!1),[qe,mt]=_.useState(!1),[ft,ot]=_.useState({name:"",location:""}),[pt,Ze]=_.useState({name:"",format:"T20",startDate:"",endDate:"",gameStartTime:"",description:""}),He=_.useMemo(()=>s.find(de=>de.id===$),[s,$]),bt=_.useMemo(()=>He==null?void 0:He.tournaments.find(de=>de.id===Ae),[He,Ae]);_.useMemo(()=>s.flatMap(de=>de.memberTeams),[s]);const _t=_.useMemo(()=>s.flatMap(de=>de.memberTeams.flatMap(Ie=>Ie.players.map(Ye=>({...Ye,teamName:Ie.name,teamId:Ie.id,orgId:de.id,orgName:de.name})))),[s]),tt=_.useMemo(()=>[...s.flatMap(de=>de.fixtures),...e].sort((de,Ie)=>{const Ye={Live:0,Scheduled:1,Completed:2},H=(Ye[de.status]||1)-(Ye[Ie.status]||1);return H!==0?H:de.status==="Completed"?new Date(Ie.date).getTime()-new Date(de.date).getTime():new Date(de.date).getTime()-new Date(Ie.date).getTime()}),[s,e]),Tt=_.useMemo(()=>tt.filter(de=>de.status==="Live"&&de.scorerId===G),[tt,G]),Ct=_.useMemo(()=>[..._t].sort((de,Ie)=>Ie.stats.runs-de.stats.runs).slice(0,5),[_t]),Ns=_.useMemo(()=>[..._t].sort((de,Ie)=>Ie.stats.wickets-de.stats.wickets).slice(0,5),[_t]),fs=_.useMemo(()=>He?He.memberTeams.flatMap(de=>de.players.map(Ie=>({...Ie,teamName:de.name,teamId:de.id,orgId:He.id,orgName:He.name}))):[],[He]),We=_.useMemo(()=>He==null?void 0:He.members.find(de=>de.userId===G),[He,G]),Bt=(We==null?void 0:We.role)==="Administrator"&&!We.managedTeamId||n==="Administrator";(We==null?void 0:We.role)==="Administrator"&&We.managedTeamId,_.useMemo(()=>n==="Administrator"?s:s.filter(de=>de.members.some(Ie=>Ie.userId===G)),[s,n,G]);const Pt=_.useMemo(()=>s.filter(de=>de.members.some(Ie=>Ie.userId===G&&Ie.role==="Administrator")).flatMap(de=>de.memberTeams),[s,G]),xt=()=>{ze&&(d(s.filter(de=>de.id!==ze.id)),Be({...Me,deleteOrg:!1}),Ke(null),$===ze.id&&oe(null))},Ot=()=>{Be({...Me,createOrg:!0})},js=()=>{$&&ft.name&&(p($,{...ft,players:[]}),Be({...Me,addTeam:!1}),ot({name:"",location:""}))},ps=()=>{$&&(N($,{id:`trn-${Date.now()}`,name:pt.name,format:pt.format,startDate:pt.startDate,endDate:pt.endDate,gameStartTime:pt.gameStartTime,description:pt.description,overs:pt.format==="Test"?90:20,groups:[],teamIds:[],pointsConfig:pt.format==="Test"?xb:br,status:"Upcoming",createdBy:G}),Be({...Me,addTournament:!1}),Ze({name:"",format:"T20",startDate:"",endDate:"",gameStartTime:"",description:""}))},Ms=(de,Ie)=>{if(!He)return;const Ye={id:`grp-${Date.now()}`,name:Ie,teams:[]};d(s.map(H=>H.id===He.id?{...H,tournaments:H.tournaments.map(ve=>ve.id===de?{...ve,groups:[...ve.groups||[],Ye]}:ve)}:H))},ks=(de,Ie,Ye)=>{if(!He)return;const ve=s.flatMap(Se=>Se.memberTeams).filter(Se=>Ye.includes(Se.id));d(s.map(Se=>Se.id===He.id?{...Se,tournaments:Se.tournaments.map(nt=>nt.id===de?{...nt,groups:(nt.groups||[]).map(gt=>gt.id===Ie?{...gt,teams:ve}:gt)}:nt)}:Se))},it=()=>{if(!He||!bt)return;const de=(bt.groups||[]).flatMap(Ie=>Pk(Ie.teams,bt.id,Ie.id));d(s.map(Ie=>Ie.id===He.id?{...Ie,fixtures:[...Ie.fixtures,...de]}:Ie))},Yt=de=>{if(!He)return;const Ie={tournamentId:(bt==null?void 0:bt.id)||"",teamAId:"",teamBId:"",teamAName:"",teamBName:"",date:new Date().toISOString(),venue:"",format:"T20",status:"Scheduled",...de,id:de.id||`fix-${Date.now()}`};d(s.map(Ye=>Ye.id===He.id?{...Ye,fixtures:[...Ye.fixtures,Ie]}:Ye))},Ds=(de,Ie)=>{d(s.map(Ye=>Ye.id===de?{...Ye,...Ie}:Ye))},on=(de,Ie,Ye,H)=>{const ve=s.find(pe=>pe.id===de),Se=ve==null?void 0:ve.applications.find(pe=>pe.id===Ie);if(!ve||!Se)return;const nt=Se.type==="ORG_AFFILIATE",gt=Se.applicantId,Rt=s.map(pe=>{if(pe.id===de){const Oe=pe.applications.map(Mt=>Mt.id===Ie?{...Mt,status:Ye}:Mt);let Xe=pe.childOrgIds||[];Ye==="APPROVED"&&nt&&!Xe.includes(gt)&&(Xe=[...Xe,gt]);let lt=pe.members,zt=pe.memberTeams;if(Ye==="APPROVED"&&!nt&&H&&(pe.members.some(Mt=>Mt.userId===Se.applicantId)||(lt=[...pe.members,{userId:Se.applicantId,name:Se.applicantName,handle:Se.applicantHandle||"",role:H,addedAt:Date.now()}]),H==="Player"&&pe.memberTeams.length>0)){const Mt=pe.memberTeams[0],ct={id:Se.applicantId,name:Se.applicantName,role:"All-rounder",photoUrl:Se.applicantImage,stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}};zt=pe.memberTeams.map(wt=>wt.id===Mt.id?{...wt,players:[...wt.players,ct]}:wt)}return{...pe,applications:Oe,childOrgIds:Xe,members:lt,memberTeams:zt}}if(pe.id===gt&&Ye==="APPROVED"&&nt){const Oe=pe.parentOrgIds||[];if(!Oe.includes(de))return{...pe,parentOrgIds:[...Oe,de]}}return pe});D?D(de,Ie,Ye,H):d(Rt)},cn=(de,Ie,Ye)=>{const H=Ie==="DISMISSED"?"DISMISSED":"RESOLVED",ve=Z.map(Se=>Se.id===de?{...Se,status:H,resolution:Ie,adminResponse:Ye,resolvedAt:Date.now()}:Se);Ne&&Ne(ve),Ue(!1)},xs=s.find(de=>de.id==="org-central-zone"),vs=xs==null?void 0:xs.members.find(de=>de.userId===G),Ss=de=>{var Ie;return n==="Administrator"||!!((Ie=vs==null?void 0:vs.permissions)!=null&&Ie[de])};return t.jsxs("div",{className:"max-w-7xl mx-auto px-1.5 py-4 md:p-8 min-h-screen",children:[t.jsx(cS,{isOpen:Me.createOrg,onClose:()=>Be({...Me,createOrg:!1}),onCreate:u,userRole:n}),t.jsx(dS,{issue:Ce,isOpen:Ee,onClose:()=>Ue(!1),onResolve:cn}),Tt.length>0&&t.jsxs("div",{className:"mb-8 bg-red-500/10 border-2 border-red-500/30 rounded-[2.5rem] p-6 flex flex-col md:flex-row items-center justify-between gap-4 animate-in slide-in-from-top-4 duration-500",children:[t.jsxs("div",{className:"flex items-center gap-4 text-center md:text-left",children:[t.jsx("div",{className:"w-12 h-12 bg-red-500 text-white rounded-2xl flex items-center justify-center text-xl animate-pulse",children:""}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-red-600 dark:text-red-400 font-black uppercase text-xs tracking-widest mb-1",children:"Incomplete Games Detected"}),t.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-sm font-bold",children:["You have ",Tt.length," match",Tt.length>1?"es":""," in progress. Pick back up where you left off!"]})]})]}),t.jsx("div",{className:"flex gap-3",children:t.jsx("button",{onClick:()=>ue&&ue("Scorer"),className:"px-6 py-3 bg-red-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-red-500 transition-all shadow-lg",children:"Continue Scoring"})})]}),t.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6 mb-10 bg-white dark:bg-slate-900 p-8 rounded-[3rem] shadow-xl border border-slate-100 dark:border-slate-800 animate-in slide-in-from-top-4 duration-500",children:[t.jsxs("div",{children:[t.jsxs("h2",{className:"text-3xl font-black text-slate-900 dark:text-white mb-1 italic",children:["Welcome Back, ",Q==null?void 0:Q.name]}),t.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Unified Profile Active"]})]}),t.jsx("div",{className:"md:hidden w-full",children:t.jsx("select",{value:$e,onChange:de=>ue&&ue(de.target.value),className:"w-full bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl px-4 py-3 font-black text-slate-900 dark:text-white outline-none focus:ring-2 ring-indigo-500/20",children:["Administrator","Scorer","Player","Umpire","Captain","Coach"].map(de=>t.jsx("option",{value:de,children:de},de))})}),t.jsx("div",{className:"hidden md:flex flex-wrap bg-slate-50 dark:bg-slate-800 p-1.5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-inner gap-1",children:["Administrator","Scorer","Player","Umpire","Captain","Coach"].map(de=>t.jsx("button",{onClick:()=>ue&&ue(de),className:`px-4 md:px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${$e===de?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300"}`,children:de},de))})]}),be==="GLOBAL"&&(n==="Administrator"||Ss("view_protests"))&&t.jsxs("div",{className:"mb-8",children:[t.jsx("div",{className:"md:hidden mb-4",children:t.jsxs("div",{className:"relative",children:[t.jsxs("select",{value:be,onChange:de=>Te(de.target.value),className:"w-full appearance-none bg-slate-900 text-white rounded-xl px-6 py-4 font-black uppercase tracking-widest outline-none border border-slate-800 shadow-lg",children:[t.jsx("option",{value:"GLOBAL",children:"Dashboard"}),n==="Administrator"&&t.jsxs(t.Fragment,{children:[t.jsx("option",{value:"HR",children:"HR & Talent"}),t.jsx("option",{value:"MARKET",children:"Transfer Market"}),t.jsx("option",{value:"SPONSORS",children:"Sponsors"}),t.jsxs("option",{value:"REPORTS",children:["Reports ",tt.some(de=>{var Ie;return((Ie=de.reportSubmission)==null?void 0:Ie.status)==="PENDING"})?"(Pending!)":""]})]}),Ss("view_protests")&&t.jsx("option",{value:"ISSUES",children:"Issues"})]}),t.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-white pointer-events-none text-xs",children:""})]})}),t.jsxs("div",{className:"hidden md:flex gap-4",children:[t.jsx("button",{onClick:()=>Te("GLOBAL"),className:"text-2xl font-black text-slate-900 border-b-4 border-slate-900 pb-1",children:"Dashboard"}),n==="Administrator"&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>Te("HR"),className:"text-2xl font-black text-slate-300 hover:text-slate-500 border-b-4 border-transparent hover:border-slate-200 pb-1 transition-all",children:"HR & Talent"}),t.jsx("button",{onClick:()=>Te("MARKET"),className:"text-2xl font-black text-slate-300 hover:text-slate-500 border-b-4 border-transparent hover:border-slate-200 pb-1 transition-all",children:"Transfer Market"}),t.jsx("button",{onClick:()=>Te("SPONSORS"),className:"text-2xl font-black text-slate-300 hover:text-slate-500 border-b-4 border-transparent hover:border-slate-200 pb-1 transition-all",children:"Sponsors"}),s.some(de=>de.members.length===0)&&t.jsx("button",{onClick:()=>{if(confirm("Found orphaned organizations. Claim them to your account?")){const de=s.map(Ie=>Ie.members.length===0?{...Ie,members:[{userId:G||"unknown",name:(Q==null?void 0:Q.name)||"Admin",handle:(Q==null?void 0:Q.handle)||"@admin",role:"Administrator",addedAt:Date.now()}]}:Ie);d(de),alert("Orphaned organizations claimed! They should now appear in your dashboard.")}},className:"text-2xl font-black text-red-500 hover:text-red-700 border-b-4 border-transparent hover:border-red-200 pb-1 transition-all animate-pulse",children:" Fix Profile Pinning"})]}),Ss("view_protests")&&t.jsxs("button",{onClick:()=>Te("ISSUES"),className:"text-2xl font-black text-slate-300 hover:text-slate-500 border-b-4 border-transparent hover:border-slate-200 pb-1 transition-all relative",children:["Issues",t.jsx("span",{className:"absolute -top-1 -right-2 w-3 h-3 bg-indigo-500 rounded-full border-2 border-white"})]}),n==="Administrator"&&t.jsxs("button",{onClick:()=>Te("REPORTS"),className:"text-2xl font-black text-slate-300 hover:text-slate-500 border-b-4 border-transparent hover:border-slate-200 pb-1 relative transition-all",children:["Reports",tt.some(de=>{var Ie;return((Ie=de.reportSubmission)==null?void 0:Ie.status)==="PENDING"})&&t.jsx("span",{className:"absolute -top-1 -right-2 w-3 h-3 bg-red-500 rounded-full border-2 border-white animate-pulse"})]})]})]}),be==="HR"&&t.jsxs("div",{children:[t.jsx("button",{onClick:()=>Te("GLOBAL"),className:"mb-6 text-slate-400 font-bold uppercase text-xs tracking-widest hover:text-slate-900",children:" Back to Dashboard"}),t.jsx(iS,{scorers:L})]}),be==="MARKET"&&t.jsxs("div",{children:[t.jsx("button",{onClick:()=>Te("GLOBAL"),className:"mb-6 text-slate-400 font-bold uppercase text-xs tracking-widest hover:text-slate-900",children:" Back to Dashboard"}),t.jsx(rS,{players:_t,myTeams:Pt,onTransfer:(de,Ie)=>ce&&ce(de,Ie),onBack:()=>Te("GLOBAL")})]}),be==="SPONSORS"&&t.jsxs("div",{children:[t.jsx("button",{onClick:()=>Te("GLOBAL"),className:"mb-6 text-slate-400 font-bold uppercase text-xs tracking-widest hover:text-slate-900",children:" Back to Dashboard"}),t.jsx(oS,{organization:s.find(de=>de.id==="org-central-zone")||s[0],onUpdateOrg:Ds})]}),be==="ISSUES"&&t.jsxs("div",{className:"animate-in fade-in duration-500",children:[t.jsx("button",{onClick:()=>Te("GLOBAL"),className:"mb-6 text-slate-400 font-bold uppercase text-xs tracking-widest hover:text-slate-900",children:" Back to Dashboard"}),t.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[t.jsx("h3",{className:"text-3xl font-black text-slate-900 mb-8 italic",children:"Protests & Issues"}),t.jsx("div",{className:"space-y-4",children:Z.length===0?t.jsx("div",{className:"p-10 text-center bg-slate-50 rounded-[2rem] border border-slate-100",children:t.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"No Active Issues or Protests"})}):Z.filter(de=>(xs==null?void 0:xs.memberTeams.some(Ie=>Ie.id===de.teamId))||!0).map(de=>{var Ie;return t.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-50 rounded-[2rem] border border-slate-100 hover:border-indigo-200 transition-all",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-xl font-black ${de.type==="PROTEST"?"bg-red-100 text-red-500":"bg-orange-100 text-orange-500"}`,children:de.type==="PROTEST"?"!":""}),t.jsxs("div",{children:[t.jsx("p",{className:"font-black text-slate-900 text-lg",children:de.title}),t.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[((Ie=s.flatMap(Ye=>Ye.memberTeams).find(Ye=>Ye.id===de.teamId))==null?void 0:Ie.name)||"Unknown Team","  ",new Date(de.timestamp).toLocaleString()]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:`px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${de.status==="OPEN"?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"}`,children:de.status}),t.jsx("button",{onClick:()=>{St(de),Ue(!0)},className:"px-6 py-2 bg-white text-slate-900 border border-slate-200 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-sm hover:shadow-md transition-all",children:"View Details"})]})]},de.id)})})]})]}),be==="REPORTS"&&t.jsxs("div",{className:"animate-in fade-in duration-500",children:[t.jsx("button",{onClick:()=>Te("GLOBAL"),className:"mb-6 text-slate-400 font-bold uppercase text-xs tracking-widest hover:text-slate-900",children:" Back to Dashboard"}),t.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[t.jsx("h3",{className:"text-3xl font-black text-slate-900 mb-8 italic",children:"Match Report Submissions"}),t.jsxs("div",{className:"space-y-4",children:[tt.filter(de=>de.reportSubmission).length===0&&t.jsx("p",{className:"text-slate-400 text-center py-20 font-black uppercase text-xs tracking-widest",children:"No match reports submitted yet"}),tt.filter(de=>de.reportSubmission).map(de=>{var Ie,Ye,H,ve,Se,nt;return t.jsxs("div",{className:"flex items-center justify-between p-6 bg-slate-50 rounded-[2rem] border border-slate-100 hover:border-indigo-200 transition-all",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-2xl flex items-center justify-center text-indigo-500 text-xl font-black",children:((Ie=de.reportSubmission)==null?void 0:Ie.status)==="PENDING"?"?":((Ye=de.reportSubmission)==null?void 0:Ye.status)==="VERIFIED"?"":""}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-black text-slate-900 text-lg",children:[de.teamAName," vs ",de.teamBName]}),t.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:["Submitted on ",new Date(de.reportSubmission.timestamp).toLocaleDateString()]})]})]}),t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx("span",{className:`px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${((H=de.reportSubmission)==null?void 0:H.status)==="VERIFIED"?"bg-emerald-100 text-emerald-600":((ve=de.reportSubmission)==null?void 0:ve.status)==="REJECTED"?"bg-red-100 text-red-600":"bg-indigo-100 text-indigo-600"}`,children:(Se=de.reportSubmission)==null?void 0:Se.status}),t.jsx("button",{onClick:()=>r(de),className:"px-6 py-2 bg-white text-slate-900 border border-slate-200 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-sm hover:shadow-md transition-all",children:((nt=de.reportSubmission)==null?void 0:nt.status)==="PENDING"?"Review & Verify":"View Details"})]})]},de.id)})]})]})]}),be==="GLOBAL"&&t.jsx(qk,{organizations:s,onSelectOrg:de=>{oe(de),Te("ORG_LEVEL")},onRequestDeleteOrg:de=>{Ke(de),Be({...Me,deleteOrg:!0})},onRequestCreateOrg:Ot,onRequestQuickMatch:o,onOpenMediaStudio:R,fixtures:tt,topBatsmen:Ct,topBowlers:Ns,onStartMatch:i,onViewMatch:r,onViewTeam:S,currentUserId:G,onApplyForOrg:Y,onUpgradeProfile:q,following:A,onToggleFollow:I,onRequestCaptainHub:ee,onRequestMatchReports:se,showCaptainHub:ne,profile:Q,onUpdateProfile:M,onRequestTransferMarket:B,onViewOrg:re,onCreateUser:Re,globalUsers:j,onRemoveFixture:de=>{const Ie=s.find(Ye=>Ye.fixtures.some(H=>H.id===de));Ie&&X&&X(Ie.id,de)}}),be==="ORG_LEVEL"&&He&&t.jsx(sc,{organization:He,userRole:n,onBack:()=>Te("GLOBAL"),onViewTournament:de=>{De(de),Te("TOURNAMENT_LEVEL")},onViewPlayer:()=>{},onRequestAddTeam:()=>Be({...Me,addTeam:!0}),onRequestAddTournament:()=>Be({...Me,addTournament:!0}),players:fs,onViewTeam:S,isFollowed:A.orgs.includes(He.id),onToggleFollow:()=>I("ORG",He.id),globalUsers:j||[],onAddMember:de=>E&&E(He.id,de),onUpdateOrg:Ds,onRemoveTeam:m,onProcessApplication:on,allOrganizations:s,currentUserProfile:Q,onRequestCaptainHub:ee,onSelectHubTeam:te,onUpdateFixture:W,onRemoveFixture:X,onApplyForOrg:Y,onRequestAffiliation:_e,onRemoveTournament:ae,onUpdateTournament:P,onCreateUser:Re}),be==="TOURNAMENT_LEVEL"&&bt&&He&&t.jsx(_b,{tournament:bt,organization:He,onBack:()=>Te("ORG_LEVEL"),onStartMatch:i,onGenerateFixtures:it,onAddGroup:Ms,onUpdateGroupTeams:ks,onViewTeam:S,onViewMatch:r,onAddFixture:Yt,onUpdateFixture:(de,Ie)=>W&&W(He.id,de,Ie),onUpdateTournament:(de,Ie)=>P&&P(He.id,de,Ie),allOrganizations:s,isOrgAdmin:Bt,onSelectHubTeam:te}),Me.deleteOrg&&ze&&t.jsx(aS,{organization:ze,onConfirm:xt,onCancel:()=>Be({...Me,deleteOrg:!1})}),Me.addTeam&&t.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] p-10 shadow-2xl",children:[t.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-8",children:"New Squad"}),t.jsx("input",{value:ft.name,onChange:de=>ot({...ft,name:de.target.value}),placeholder:"Squad Name",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none mb-4"}),t.jsx("input",{value:ft.location,onChange:de=>ot({...ft,location:de.target.value}),placeholder:"Home Ground",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none mb-8"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{onClick:()=>Be({...Me,addTeam:!1}),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs",children:"Cancel"}),t.jsx("button",{onClick:js,className:"flex-1 py-4 bg-indigo-600 text-white font-black uppercase text-xs rounded-xl shadow-xl",children:"Confirm"})]})]})}),Me.addTournament&&t.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-[2.5rem] p-10 shadow-2xl max-h-[90vh] overflow-y-auto",children:[t.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-8",children:"Tournament Management"}),He&&He.tournaments.length>0&&t.jsxs("div",{className:"mb-8",children:[t.jsx("h4",{className:"text-sm font-black text-slate-400 uppercase tracking-widest mb-4",children:"Existing Tournaments"}),t.jsx("div",{className:"space-y-3",children:He.tournaments.map(de=>t.jsxs("div",{className:"relative bg-slate-50 border border-slate-200 rounded-xl p-4 hover:border-indigo-300 transition-all group",children:[t.jsx("button",{onClick:()=>{confirm(`Delete "${de.name}"? This action cannot be undone.`)&&ae&&ae(He.id,de.id)},className:"absolute top-2 right-2 w-6 h-6 bg-red-100 hover:bg-red-500 text-red-500 hover:text-white rounded-full flex items-center justify-center font-black text-sm transition-all opacity-0 group-hover:opacity-100",title:"Delete Tournament",children:""}),t.jsxs("div",{className:"pr-8",children:[t.jsx("p",{className:"font-black text-slate-900",children:de.name}),t.jsxs("p",{className:"text-xs text-slate-400 uppercase tracking-widest",children:[de.format,"  ",de.status]})]})]},de.id))}),t.jsx("div",{className:"border-t border-slate-200 my-6"})]}),t.jsx("h4",{className:"text-sm font-black text-slate-400 uppercase tracking-widest mb-4",children:"Create New Tournament"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Tournament Name"}),t.jsx("input",{value:pt.name,onChange:de=>Ze({...pt,name:de.target.value}),placeholder:"e.g. Summer League 2026",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Format"}),t.jsxs("select",{value:pt.format,onChange:de=>Ze({...pt,format:de.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none",children:[t.jsx("option",{value:"T20",children:"Twenty20"}),t.jsx("option",{value:"T10",children:"T10 Series"}),t.jsx("option",{value:"50-over",children:"One Day Series"}),t.jsx("option",{value:"Test",children:"Multi-day Series"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Default Start Time"}),t.jsx("input",{type:"time",value:pt.gameStartTime,onChange:de=>Ze({...pt,gameStartTime:de.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Start Date"}),t.jsx("input",{type:"date",value:pt.startDate,onChange:de=>Ze({...pt,startDate:de.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"End Date"}),t.jsx("input",{type:"date",value:pt.endDate,onChange:de=>Ze({...pt,endDate:de.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-1",children:"Description / About"}),t.jsx("textarea",{value:pt.description,onChange:de=>Ze({...pt,description:de.target.value}),placeholder:"Details about this tournament...",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none min-h-[80px] resize-none"})]})]}),t.jsxs("div",{className:"flex gap-4 mt-8",children:[t.jsx("button",{onClick:()=>Be({...Me,addTournament:!1}),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs",children:"Cancel"}),t.jsx("button",{onClick:ps,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs rounded-xl shadow-xl",children:"Deploy"})]})]})}),t.jsx(uS,{isOpen:qe,onClose:()=>mt(!1),activeOrg:He,activeTournament:bt}),t.jsxs("button",{onClick:()=>mt(!0),className:"fixed bottom-6 right-6 bg-slate-900 text-white p-4 rounded-full shadow-2xl hover:bg-indigo-600 transition-colors z-40 flex items-center gap-2 group",title:"Generate Embed Codes",children:[t.jsx("span",{className:"text-xl",children:""}),t.jsx("span",{className:"max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-300 whitespace-nowrap text-xs font-black uppercase tracking-widest",children:"Embed & Share"})]})]})},hS=({teams:s,existingFixture:e,onMatchReady:n,onCancel:i,onTeamUpdate:r,onCreateTeam:o,availableOfficials:d=[]})=>{var ne,ee,se,M;const[u,p]=_.useState("team_select"),[m,f]=_.useState("HOME"),[b,y]=_.useState({teamAId:"",teamBId:"",venue:"Main Oval",format:"T20",overs:20,followOnMargin:200,matchDays:5,teamASquad:[],teamBSquad:[],tossWinnerId:"",tossDecision:"Bat",strikerId:"",nonStrikerId:"",bowlerId:"",allowFlexibleSquad:!1,isOfficial:!0,umpires:[]});_.useEffect(()=>{if(e){const B=s.find(P=>P.id===e.teamAId),Z=s.find(P=>P.id===e.teamBId),ae=e.format==="Test"?Math.ceil((e.customOvers||450)/90):5;y({teamAId:e.teamAId,teamBId:e.teamBId,venue:e.venue,format:e.format||"T20",overs:e.customOvers||20,followOnMargin:e.followOnMargin||200,matchDays:ae,teamASquad:e.teamASquadIds||(B?B.players.slice(0,11).map(P=>P.id):[]),teamBSquad:e.teamBSquadIds||(Z?Z.players.slice(0,11).map(P=>P.id):[]),tossWinnerId:e.tossWinnerId||"",tossDecision:e.tossDecision||"Bat",strikerId:"",nonStrikerId:"",bowlerId:"",allowFlexibleSquad:e.allowFlexibleSquad||!1,isOfficial:e.isOfficial!==!1,umpires:e.umpires||[]}),p("squads")}},[e,s]);const N=s.find(B=>B.id===b.teamAId),k=s.find(B=>B.id===b.teamBId),[T,S]=_.useState(!1),[R,A]=_.useState(""),[I,j]=_.useState(""),E=B=>{if(m==="HOME")y(Z=>({...Z,teamAId:B})),f("AWAY");else{if(B===b.teamAId)return;const Z=s.find(ae=>ae.id===b.teamAId),Ne=s.find(ae=>ae.id===B);y(ae=>({...ae,teamBId:B,teamASquad:Z?Z.players.slice(0,11).map(P=>P.id):[],teamBSquad:Ne?Ne.players.slice(0,11).map(P=>P.id):[],tossWinnerId:"",strikerId:"",nonStrikerId:"",bowlerId:""})),p("squads")}},D=(B,Z)=>{const Ne=B==="A"?"teamASquad":"teamBSquad";y(ae=>{const P=ae[Ne];return{...ae,[Ne]:P.includes(Z)?P.filter(W=>W!==Z):[...P,Z]}})},L=B=>{y(Z=>({...Z,...B,strikerId:"",nonStrikerId:"",bowlerId:""}))},G=()=>{if(!b.tossWinnerId)return null;const B=b.tossWinnerId===b.teamAId?N:k,Z=b.tossWinnerId===b.teamAId?k:N;return b.tossDecision==="Bat"?B:Z},Y=()=>{if(!b.tossWinnerId)return null;const B=b.tossWinnerId===b.teamAId?N:k,Z=b.tossWinnerId===b.teamAId?k:N;return b.tossDecision==="Bat"?Z:B},q=B=>{y(Z=>{const Ne=Z.umpires.includes(B);return{...Z,umpires:Ne?Z.umpires.filter(ae=>ae!==B):[...Z.umpires,B]}})},ce=()=>{if(!N||!k)return;const B={id:e?e.id:`match-${Date.now()}`,teamAId:N.id,teamBId:k.id,teamAName:N.name,teamBName:k.name,date:e?e.date:new Date().toISOString().split("T")[0],venue:b.venue,status:"Live",format:b.format,customOvers:b.overs,followOnMargin:b.followOnMargin,teamASquadIds:b.teamASquad,teamBSquadIds:b.teamBSquad,tossWinnerId:b.tossWinnerId,tossDecision:b.tossDecision,allowFlexibleSquad:b.allowFlexibleSquad,isOfficial:b.isOfficial,isArchived:!1,umpires:b.umpires,initialPlayers:{strikerId:b.strikerId,nonStrikerId:b.nonStrikerId,bowlerId:b.bowlerId}};n(B)},Q=()=>{if(!R.trim()||!o)return;const B=I.split(`
`).filter(Z=>Z.trim()!=="");o(R,B),A(""),j(""),S(!1)};return t.jsxs("div",{className:"h-full flex flex-col relative overflow-hidden bg-slate-50 w-full",children:[T&&t.jsx("div",{className:"fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-[2rem] p-8 w-full max-w-sm shadow-2xl animate-in zoom-in-95 flex flex-col max-h-[80vh]",children:[t.jsx("h3",{className:"text-xl font-black text-slate-900 mb-4 shrink-0",children:"Add New Team"}),t.jsx("input",{value:R,onChange:B=>A(B.target.value),placeholder:"Team Name",autoFocus:!0,className:"w-full bg-slate-50 border border-slate-200 p-4 rounded-xl font-bold text-slate-800 outline-none focus:ring-2 focus:ring-indigo-500 mb-4 shrink-0"}),t.jsxs("div",{className:"flex-1 min-h-0 flex flex-col mb-6",children:[t.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2 px-1",children:"Quick Add Players (Optional)"}),t.jsx("textarea",{value:I,onChange:B=>j(B.target.value),placeholder:"Enter player names (one per line)...",className:"w-full bg-slate-50 border border-slate-200 p-4 rounded-xl font-medium text-sm text-slate-800 outline-none focus:ring-2 focus:ring-indigo-500 resize-none flex-1"})]}),t.jsxs("div",{className:"flex gap-3 shrink-0",children:[t.jsx("button",{onClick:()=>S(!1),className:"flex-1 py-3 text-slate-400 font-black uppercase text-xs hover:bg-slate-50 rounded-xl transition-all",children:"Cancel"}),t.jsx("button",{onClick:Q,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs rounded-xl shadow-lg hover:bg-indigo-500 transition-all",children:"Create"})]})]})}),t.jsxs("div",{className:"p-4 md:p-6 border-b border-slate-200 bg-white z-10 shrink-0 shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 max-w-6xl mx-auto w-full",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-black text-slate-900 tracking-tight",children:e?"Claim & Configure Match":"Match Setup"}),t.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest mt-0.5",children:[u==="team_select"&&"Match Configuration & Teams",u==="squads"&&"Confirm Playing 11",u==="toss"&&"The Toss",u==="officials"&&"Match Officials",u==="openers"&&"Openers"]})]}),t.jsx("button",{onClick:i,className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center text-slate-400 hover:bg-slate-200",children:""})]}),t.jsx("div",{className:"h-1 w-full max-w-6xl mx-auto bg-slate-100 rounded-full overflow-hidden flex",children:t.jsx("div",{className:`h-full bg-indigo-600 transition-all duration-500 ${u==="team_select"?"w-[10%]":u==="squads"?"w-[30%]":u==="toss"?"w-[50%]":u==="officials"?"w-[75%]":"w-full"}`})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto scroll-container custom-scrollbar p-4 md:p-6 pb-32",children:t.jsxs("div",{className:"max-w-6xl mx-auto min-h-0",children:[u==="team_select"&&t.jsxs("div",{className:"animate-in fade-in duration-300",children:[t.jsxs("div",{className:"bg-white p-6 rounded-[2.5rem] border border-slate-200 shadow-sm mb-8",children:[t.jsxs("h3",{className:"font-black text-sm text-slate-900 mb-6 uppercase tracking-widest flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full"}),"Match Settings"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block",children:["Format ",e&&"(Locked)"]}),t.jsxs("select",{value:b.format,disabled:!!e,onChange:B=>{const Z=B.target.value;let Ne=20,ae=1,P=0;Z==="T10"&&(Ne=10),Z==="50-over"&&(Ne=50),Z==="Test"&&(Ne=450,ae=5,P=200),y(W=>({...W,format:Z,overs:Ne,matchDays:ae,followOnMargin:P}))},className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm text-slate-900 outline-none focus:border-indigo-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[t.jsx("option",{value:"T20",children:"Twenty20 (T20)"}),t.jsx("option",{value:"T10",children:"Ten10 (T10)"}),t.jsx("option",{value:"50-over",children:"One Day (50)"}),t.jsx("option",{value:"Test",children:"Test Match"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block",children:b.format==="Test"?"Match Duration":"Overs per Innings"}),b.format==="Test"?t.jsxs("div",{className:"w-full bg-slate-100 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm text-slate-500 cursor-not-allowed flex items-center justify-between",children:[t.jsxs("span",{children:[b.matchDays," Days"]}),t.jsxs("span",{className:"text-[10px] bg-slate-200 px-2 py-1 rounded uppercase tracking-wider",children:["~",b.overs," Ov"]})]}):t.jsx("input",{type:"number",value:b.overs,disabled:!!e,onChange:B=>y(Z=>({...Z,overs:parseInt(B.target.value)||0})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm text-slate-900 outline-none focus:border-indigo-500 transition-colors disabled:opacity-50"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest block",children:"Match Type"}),t.jsxs("div",{onClick:()=>y(B=>({...B,isOfficial:!B.isOfficial})),className:`flex items-center justify-between bg-slate-50 border border-slate-200 rounded-xl px-4 py-2 cursor-pointer transition-colors ${b.isOfficial?"bg-indigo-50 border-indigo-200":"bg-amber-50 border-amber-200"}`,children:[t.jsxs("div",{children:[t.jsx("div",{className:`font-bold text-xs ${b.isOfficial?"text-indigo-900":"text-amber-900"}`,children:b.isOfficial?"Official Match":"Unofficial / Friendly"}),t.jsx("div",{className:"text-[8px] font-bold text-slate-400 uppercase tracking-widest",children:b.isOfficial?"Counts to Stats":"Practice Only"})]}),t.jsx("div",{className:`w-10 h-6 rounded-full transition-all relative ${b.isOfficial?"bg-indigo-600":"bg-amber-500"}`,children:t.jsx("div",{className:`w-4 h-4 bg-white rounded-full absolute top-1 transition-all shadow-sm ${b.isOfficial?"left-5":"left-1"}`})})]})]})]}),b.format==="Test"&&t.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-100 grid grid-cols-1 md:grid-cols-3 gap-6 animate-in slide-in-from-top-2",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-widest block",children:"Scheduled Days"}),t.jsxs("select",{value:b.matchDays,disabled:!!e,onChange:B=>{const Z=parseInt(B.target.value);let Ne=200;Z>=5?Ne=200:Z>=3?Ne=150:Z===2?Ne=100:Ne=75,y(ae=>({...ae,matchDays:Z,followOnMargin:Ne,overs:Z*90}))},className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm text-slate-900 outline-none focus:border-indigo-500 transition-colors disabled:opacity-50",children:[t.jsx("option",{value:5,children:"5 Days (Standard)"}),t.jsx("option",{value:4,children:"4 Days"}),t.jsx("option",{value:3,children:"3 Days"}),t.jsx("option",{value:2,children:"2 Days"}),t.jsx("option",{value:1,children:"1 Day"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-widest block",children:"Follow-On Margin"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",value:b.followOnMargin,disabled:!!e,onChange:B=>y(Z=>({...Z,followOnMargin:parseInt(B.target.value)||0})),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 font-bold text-sm text-slate-900 outline-none focus:border-indigo-500 transition-colors disabled:opacity-50"}),t.jsx("span",{className:"absolute right-4 top-3.5 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Runs"})]}),t.jsx("p",{className:"text-[9px] text-slate-400 italic",children:"Adjustable based on league rules"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-4 px-2",children:[t.jsxs("h3",{className:"font-black text-sm text-slate-900 uppercase tracking-widest",children:["Select ",m," Team"]}),t.jsx("span",{className:"h-px bg-slate-200 flex-1"})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:[t.jsxs("button",{onClick:()=>{S(!0),j("")},className:"aspect-square rounded-2xl border-2 border-dashed border-slate-200 flex flex-col items-center justify-center text-slate-400 hover:border-indigo-400 hover:text-indigo-600 hover:bg-white transition-all group",children:[t.jsx("span",{className:"text-3xl mb-1 group-hover:scale-110 transition-transform",children:"+"}),t.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Add Team"})]}),s.map(B=>{const Z=b.teamAId===B.id,Ne=b.teamBId===B.id,ae=m==="HOME"&&Ne||m==="AWAY"&&Z;return t.jsxs("button",{disabled:ae,onClick:()=>E(B.id),className:`aspect-square rounded-2xl p-4 flex flex-col items-center justify-center border transition-all relative overflow-hidden group ${Z?"bg-indigo-600 border-indigo-600 text-white":Ne?"bg-purple-600 border-purple-600 text-white":"bg-white border-slate-200 hover:border-indigo-300 hover:shadow-lg"} ${ae?"opacity-30 grayscale cursor-not-allowed":""}`,children:[t.jsx("img",{src:B.logoUrl||`https://ui-avatars.com/api/?name=${B.name}`,alt:B.name,className:"w-12 h-12 rounded-full mb-3 object-cover shadow-sm bg-white"}),t.jsx("h3",{className:`font-black text-center text-xs leading-tight ${Z||Ne?"text-white":"text-slate-900"}`,children:B.name}),t.jsxs("div",{className:`text-[8px] font-bold mt-1 ${Z||Ne?"text-white/70":"text-slate-400"}`,children:[B.players.length," Players"]}),(Z||Ne)&&t.jsx("div",{className:"absolute top-2 right-2 bg-white text-black text-[8px] font-black px-1.5 py-0.5 rounded uppercase tracking-widest",children:Z?"Home":"Away"})]},B.id)})]}),b.teamAId&&m==="AWAY"&&t.jsxs("div",{className:"fixed bottom-24 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-5 py-2 rounded-full shadow-2xl flex items-center gap-3 z-50 animate-in slide-in-from-bottom-10",children:[t.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Home:"}),t.jsx("span",{className:"text-xs font-black",children:(ne=s.find(B=>B.id===b.teamAId))==null?void 0:ne.name}),t.jsx("button",{onClick:()=>{y(B=>({...B,teamAId:""})),f("HOME")},className:"ml-2 w-5 h-5 rounded-full bg-slate-800 flex items-center justify-center text-[10px]",children:""})]})]}),u==="squads"&&N&&k&&t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 pb-24 animate-in slide-in-from-right-8 duration-300 min-h-0",children:[N,k].map((B,Z)=>{const Ne=Z===0?"A":"B",ae=Ne==="A"?b.teamASquad:b.teamBSquad;return t.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 flex flex-col min-h-0 shadow-sm overflow-hidden",children:[t.jsxs("div",{className:"px-5 py-4 border-b border-slate-100 flex items-center gap-3 bg-slate-50/50",children:[t.jsx("img",{src:B.logoUrl,className:"w-8 h-8 rounded-full bg-white border border-slate-100"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-black text-sm text-slate-900",children:B.name}),t.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:[ae.length," Selected ",b.allowFlexibleSquad?"(Flexible)":"/ 11"]})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-3 max-h-[60vh]",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[B.players.map(P=>{const W=ae.includes(P.id);return t.jsxs("div",{onClick:()=>D(Ne,P.id),className:`flex items-center gap-3 p-2 rounded-xl cursor-pointer transition-all border ${W?"bg-indigo-50 border-indigo-200":"bg-white border-transparent hover:bg-slate-50"}`,children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center shrink-0 border ${W?"border-indigo-300 bg-white":"border-slate-200 bg-slate-100"}`,children:t.jsx("img",{src:P.photoUrl||`https://ui-avatars.com/api/?name=${P.name}&background=random`,className:"w-full h-full rounded-full object-cover opacity-90"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("div",{className:`text-xs font-bold truncate ${W?"text-indigo-900":"text-slate-700"}`,children:P.name}),t.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase",children:P.role})]}),t.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${W?"bg-indigo-600 border-indigo-600":"border-slate-300"}`,children:W&&t.jsx("span",{className:"text-white text-[8px] font-black",children:""})})]},P.id)}),B.players.length===0&&t.jsx("div",{className:"col-span-full p-4 text-center text-slate-400 text-xs font-bold uppercase",children:"No players in this team."})]})})]},B.id)})}),u==="toss"&&N&&k&&t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[50vh] pb-24 animate-in zoom-in-95 duration-500",children:[t.jsxs("div",{className:"flex items-center justify-center gap-8 md:gap-20 mb-12",children:[t.jsxs("div",{className:`text-center transition-all ${b.tossWinnerId===N.id?"scale-110 opacity-100":b.tossWinnerId?"opacity-40 scale-90":"opacity-100"}`,children:[t.jsx("img",{src:N.logoUrl,className:"w-20 h-20 md:w-28 md:h-28 rounded-full bg-white shadow-xl mb-4 object-cover border-4 border-white"}),t.jsx("h3",{className:"font-black text-sm md:text-lg text-slate-900",children:N.name}),t.jsx("button",{onClick:()=>L({tossWinnerId:N.id}),className:"mt-4 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-full text-[10px] font-black uppercase tracking-widest transition-colors",children:"Won Toss"})]}),t.jsxs("div",{className:"flex flex-col items-center gap-4",children:[t.jsxs("div",{className:"w-20 h-20 md:w-24 md:h-24 rounded-full bg-amber-400 border-4 border-amber-500 flex items-center justify-center shadow-xl animate-[spin_3s_ease-in-out_infinite] relative",children:[t.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-amber-300/50"}),t.jsx("span",{className:"text-4xl font-serif font-black text-amber-700 opacity-80",children:"$"})]}),t.jsx("div",{className:"text-[10px] font-black uppercase text-slate-300 tracking-[0.2em]",children:"VS"})]}),t.jsxs("div",{className:`text-center transition-all ${b.tossWinnerId===k.id?"scale-110 opacity-100":b.tossWinnerId?"opacity-40 scale-90":"opacity-100"}`,children:[t.jsx("img",{src:k.logoUrl,className:"w-20 h-20 md:w-28 md:h-28 rounded-full bg-white shadow-xl mb-4 object-cover border-4 border-white"}),t.jsx("h3",{className:"font-black text-sm md:text-lg text-slate-900",children:k.name}),t.jsx("button",{onClick:()=>L({tossWinnerId:k.id}),className:"mt-4 px-4 py-2 bg-slate-100 hover:bg-slate-200 rounded-full text-[10px] font-black uppercase tracking-widest transition-colors",children:"Won Toss"})]})]}),b.tossWinnerId&&t.jsxs("div",{className:"bg-white p-6 rounded-3xl shadow-xl border border-slate-100 animate-in slide-in-from-bottom-8",children:[t.jsx("h3",{className:"text-center font-black text-slate-900 mb-4 uppercase tracking-widest text-xs",children:"Decision"}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:()=>L({tossDecision:"Bat"}),className:`px-8 py-3 rounded-xl font-black uppercase text-xs tracking-widest border transition-all ${b.tossDecision==="Bat"?"bg-slate-900 text-white border-slate-900 shadow-lg":"bg-white text-slate-400 border-slate-200 hover:bg-slate-50"}`,children:"Bat First"}),t.jsx("button",{onClick:()=>L({tossDecision:"Bowl"}),className:`px-8 py-3 rounded-xl font-black uppercase text-xs tracking-widest border transition-all ${b.tossDecision==="Bowl"?"bg-slate-900 text-white border-slate-900 shadow-lg":"bg-white text-slate-400 border-slate-200 hover:bg-slate-50"}`,children:"Bowl First"})]})]})]}),u==="officials"&&t.jsx("div",{className:"animate-in slide-in-from-right-8 duration-300 min-h-0 max-w-4xl mx-auto",children:t.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-sm",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h3",{className:"font-black text-slate-900 text-lg",children:"Appoint Officials"}),t.jsx("span",{className:"bg-slate-100 text-slate-500 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest",children:"Optional"})]}),d.length===0?t.jsx("div",{className:"text-center py-10 bg-slate-50 rounded-2xl border-2 border-dashed border-slate-200",children:t.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"No registered officials found in this organization."})}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(B=>{const Z=b.umpires.includes(B.id);return t.jsxs("button",{onClick:()=>q(B.id),className:`p-4 rounded-2xl border text-left flex items-center justify-between transition-all group ${Z?"bg-indigo-600 border-indigo-600 text-white shadow-lg":"bg-white border-slate-200 text-slate-700 hover:border-indigo-300"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black text-sm ${Z?"bg-white/20":"bg-slate-100 text-slate-500"}`,children:B.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold",children:B.name}),t.jsx("div",{className:`text-[10px] font-bold uppercase ${Z?"text-indigo-200":"text-slate-400"}`,children:"Official"})]})]}),Z&&t.jsx("span",{className:"text-xl",children:""})]},B.id)})}),t.jsx("p",{className:"mt-6 text-[10px] text-slate-400 italic text-center",children:"Selected officials will have write access to the match if they log in."})]})}),u==="openers"&&G()&&Y()&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 pb-24 animate-in slide-in-from-right-8 duration-300 min-h-0",children:[t.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-slate-200 shadow-sm flex flex-col min-h-0",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-slate-100",children:[t.jsx("img",{src:G().logoUrl,className:"w-10 h-10 rounded-full bg-slate-50 border border-slate-100"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-black text-base text-slate-900",children:"Batting Openers"}),t.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:G().name})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4 shrink-0",children:[t.jsxs("div",{className:"bg-indigo-50/50 p-3 rounded-2xl border border-indigo-100",children:[t.jsx("div",{className:"text-[8px] font-black uppercase text-indigo-400 tracking-widest mb-1",children:"Striker"}),t.jsx("div",{className:"font-black text-sm text-slate-900 truncate",children:((ee=G().players.find(B=>B.id===b.strikerId))==null?void 0:ee.name)||"Select below"})]}),t.jsxs("div",{className:"bg-slate-50 p-3 rounded-2xl border border-slate-100",children:[t.jsx("div",{className:"text-[8px] font-black uppercase text-slate-400 tracking-widest mb-1",children:"Non-Striker"}),t.jsx("div",{className:"font-black text-sm text-slate-900 truncate",children:((se=G().players.find(B=>B.id===b.nonStrikerId))==null?void 0:se.name)||"Select below"})]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar max-h-[50vh]",children:t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:G().players.filter(B=>(G().id===N.id?b.teamASquad:b.teamBSquad).includes(B.id)).map(B=>{const Z=b.strikerId===B.id,Ne=b.nonStrikerId===B.id,ae=Z||Ne,P=!!b.strikerId&&!!b.nonStrikerId;return t.jsxs("button",{disabled:!ae&&P,onClick:()=>{Z?y(W=>({...W,strikerId:""})):Ne?y(W=>({...W,nonStrikerId:""})):b.strikerId?b.nonStrikerId||y(W=>({...W,nonStrikerId:B.id})):y(W=>({...W,strikerId:B.id}))},className:`p-2 rounded-xl border text-left transition-all flex items-center gap-3 ${ae?"bg-slate-50 border-slate-200 opacity-100 ring-1 ring-indigo-200":"bg-white border-slate-100 hover:border-indigo-300"} ${!ae&&P?"opacity-40 cursor-not-allowed":""}`,children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 shrink-0",children:t.jsx("img",{src:B.photoUrl||`https://ui-avatars.com/api/?name=${B.name}`,className:"w-full h-full rounded-full object-cover opacity-80"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("div",{className:"font-bold text-xs text-slate-900 truncate",children:B.name}),t.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase",children:B.role})]}),Z&&t.jsx("span",{className:"text-[8px] font-black bg-indigo-600 text-white px-1.5 py-0.5 rounded uppercase",children:"STR"}),Ne&&t.jsx("span",{className:"text-[8px] font-black bg-slate-500 text-white px-1.5 py-0.5 rounded uppercase",children:"NON"})]},B.id)})})}),t.jsx("button",{onClick:()=>y(B=>({...B,strikerId:"",nonStrikerId:""})),className:"mt-3 text-[9px] font-bold text-slate-400 uppercase tracking-widest hover:text-red-500 text-center transition-colors shrink-0",children:"Reset Selection"})]}),t.jsxs("div",{className:"bg-white p-5 rounded-3xl border border-slate-200 shadow-sm flex flex-col min-h-0",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-slate-100",children:[t.jsx("img",{src:Y().logoUrl,className:"w-10 h-10 rounded-full bg-slate-50 border border-slate-100"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-black text-base text-slate-900",children:"Opening Bowler"}),t.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:Y().name})]})]}),t.jsxs("div",{className:"mb-4 bg-emerald-50/50 p-3 rounded-2xl border border-emerald-100 shrink-0",children:[t.jsx("div",{className:"text-[8px] font-black uppercase text-emerald-500 tracking-widest mb-1",children:"Bowler"}),t.jsx("div",{className:"font-black text-sm text-slate-900 truncate",children:((M=Y().players.find(B=>B.id===b.bowlerId))==null?void 0:M.name)||"Select below"})]}),t.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar max-h-[50vh]",children:t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:Y().players.filter(B=>(Y().id===N.id?b.teamASquad:b.teamBSquad).includes(B.id)).map(B=>{const Z=b.bowlerId===B.id;return t.jsxs("button",{onClick:()=>y(Ne=>({...Ne,bowlerId:B.id})),className:`p-2 rounded-xl border text-left transition-all flex items-center gap-3 ${Z?"bg-emerald-50 border-emerald-300":"bg-white border-slate-100 hover:border-emerald-300"}`,children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 shrink-0",children:t.jsx("img",{src:B.photoUrl||`https://ui-avatars.com/api/?name=${B.name}`,className:"w-full h-full rounded-full object-cover opacity-80"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsx("div",{className:`font-bold text-xs truncate ${Z?"text-emerald-900":"text-slate-900"}`,children:B.name}),t.jsx("div",{className:"text-[9px] font-bold text-slate-400 uppercase",children:B.role})]}),Z&&t.jsx("div",{className:"w-4 h-4 rounded-full bg-emerald-500 flex items-center justify-center text-white text-[8px]",children:""})]},B.id)})})})]})]})]})}),t.jsxs("div",{className:"p-4 md:p-6 bg-white border-t border-slate-200 flex justify-between z-10 shrink-0 shadow-[0_-10px_40px_rgba(0,0,0,0.05)] absolute bottom-0 left-0 right-0",children:[u==="team_select"?t.jsx("button",{onClick:i,className:"px-6 py-3 rounded-xl text-slate-400 font-black uppercase text-xs tracking-widest hover:bg-slate-50",children:"Cancel Setup"}):t.jsx("button",{onClick:()=>{u==="squads"&&p("team_select"),u==="toss"&&p("squads"),u==="officials"&&p("toss"),u==="openers"&&p("officials")},disabled:u==="squads"&&!!e,className:"px-6 py-3 rounded-xl text-slate-500 font-black uppercase text-xs tracking-widest hover:bg-slate-50 disabled:opacity-30 disabled:cursor-not-allowed",children:"Back"}),u==="squads"&&t.jsx("button",{disabled:b.teamASquad.length<2||b.teamBSquad.length<2,onClick:()=>p("toss"),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 hover:scale-105 transition-all disabled:opacity-50 disabled:scale-100",children:"Confirm Squads"}),u==="toss"&&t.jsx("button",{disabled:!b.tossWinnerId,onClick:()=>p("officials"),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 hover:scale-105 transition-all disabled:opacity-50 disabled:scale-100",children:"Set Logistics"}),u==="officials"&&t.jsx("button",{onClick:()=>p("openers"),className:"px-8 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-200 hover:bg-indigo-500 hover:scale-105 transition-all",children:"Continue"}),u==="openers"&&t.jsx("button",{disabled:!b.strikerId||!b.nonStrikerId||!b.bowlerId,onClick:ce,className:"px-10 py-3 bg-emerald-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-emerald-200 hover:bg-emerald-400 hover:scale-105 transition-all disabled:opacity-50 disabled:scale-100",children:"Start Match"})]})]})},Tb=({teams:s,onBack:e,hideHeader:n})=>{const[i,r]=_.useState(null),[o,d]=_.useState(!1),[u,p]=_.useState({score:150,wickets:4,overs:12.4,target:200,weather:"Overcast with light drizzle"}),m=async()=>{d(!0),setTimeout(()=>{const y=20-u.overs,N=Gk(u.target-1,y,u.wickets,20);r({revisedTarget:N,tacticalAdvice:"Based on current mathematical trends, maintain the run rate and protect wickets to stay ahead of the par score.",winningProbability:Math.min(100,Math.max(0,50+u.score/u.target*50-u.wickets*10))}),d(!1)},600)},f=[{coords:{x:45,y:30},color:"red"},{coords:{x:55,y:150},color:"green"},{coords:{x:50,y:170},color:"blue"},{coords:{x:20,y:40},color:"yellow"}],b=[{coords:{x:10,y:10},color:"red"},{coords:{x:90,y:90},color:"green"},{coords:{x:50,y:10},color:"white"},{coords:{x:20,y:50},color:"yellow"}];return t.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 animate-in slide-in-from-right-8 duration-500",children:[!n&&t.jsxs("header",{className:"flex items-center gap-6",children:[e&&t.jsx("button",{onClick:e,className:"w-12 h-12 rounded-full bg-slate-800 text-white flex items-center justify-center hover:bg-slate-700 transition-all shadow-lg border border-slate-700",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-black text-slate-900 dark:text-white",children:"Advanced Analytics"}),t.jsx("p",{className:"text-slate-400 text-sm font-bold uppercase tracking-widest mt-1",children:"Moneyball Insights & DLS Logic"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-slate-800 rounded-3xl p-6 border border-slate-700 shadow-xl",children:[t.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest mb-6",children:"Spatial Analysis"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-slate-900 p-4 rounded-2xl border border-slate-700/50 flex flex-col items-center",children:[t.jsx("h4",{className:"text-xs font-black text-indigo-400 uppercase tracking-widest mb-4",children:"Pitch Map"}),t.jsx(yr,{deliveries:f,readonly:!0})]}),t.jsxs("div",{className:"bg-slate-900 p-4 rounded-2xl border border-slate-700/50 flex flex-col items-center",children:[t.jsx("h4",{className:"text-xs font-black text-emerald-400 uppercase tracking-widest mb-4",children:"Wagon Wheel"}),t.jsx(vr,{shots:b,readonly:!0})]})]}),t.jsxs("div",{className:"mt-4 flex gap-4 text-[10px] uppercase font-bold text-slate-500 justify-center",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500"})," Wicket"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"})," Dot"]}),t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"})," 4s/6s"]})]})]}),t.jsxs("div",{className:"bg-slate-800 rounded-3xl p-6 border border-slate-700 shadow-xl space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:"DLS Target Calculator"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Current Score"}),t.jsx("input",{type:"number",value:u.score,onChange:y=>p({...u,score:Number(y.target.value)}),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-2 text-white"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Wickets Down"}),t.jsx("input",{type:"number",value:u.wickets,onChange:y=>p({...u,wickets:Number(y.target.value)}),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-2 text-white"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Overs Completed"}),t.jsx("input",{type:"number",value:u.overs,onChange:y=>p({...u,overs:Number(y.target.value)}),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-2 text-white"})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-xs font-bold text-slate-500",children:"Initial Target"}),t.jsx("input",{type:"number",value:u.target,onChange:y=>p({...u,target:Number(y.target.value)}),className:"w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-2 text-white"})]})]}),t.jsx("button",{onClick:m,disabled:o,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-2xl transition-all shadow-lg shadow-indigo-500/20",children:o?"Processing Standard Logic...":"Calculate Revised Target"}),i&&t.jsxs("div",{className:"p-6 rounded-2xl bg-indigo-500/10 border border-indigo-500/30 animate-in zoom-in duration-300",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("span",{className:"text-sm font-bold text-indigo-400",children:"REVISED TARGET"}),t.jsx("span",{className:"text-4xl font-black text-white",children:i.revisedTarget})]}),t.jsx("p",{className:"text-xs font-bold text-slate-400 mb-2 uppercase tracking-widest",children:"Mathematical Analysis"}),t.jsxs("p",{className:"text-sm text-slate-300 italic mb-4",children:['"',i.tacticalAdvice,'"']}),t.jsx("div",{className:"w-full bg-slate-700 h-2 rounded-full overflow-hidden",children:t.jsx("div",{className:"bg-green-500 h-full transition-all duration-1000",style:{width:`${i.winningProbability}%`}})}),t.jsxs("p",{className:"text-[10px] text-slate-500 mt-2 font-bold uppercase text-right",children:["Win Probability: ",Math.round(i.winningProbability),"%"]})]})]})]})]})},o0=({onComplete:s,onCancel:e,initialMode:n="CREATE",existingProfile:i})=>{var qe,mt,ft,ot,pt,Ze,He,bt,_t,tt,Tt,Ct,Ns,fs,We,Bt,Pt,xt,Ot,js,ps,Ms,ks;const[r,o]=_.useState(n),[d,u]=_.useState((i==null?void 0:i.name)||""),[p,m]=_.useState((i==null?void 0:i.handle)||""),[f,b]=_.useState((i==null?void 0:i.email)||""),[y,N]=_.useState((i==null?void 0:i.password)||""),[k,T]=_.useState((i==null?void 0:i.role)||"Administrator"),[S,R]=_.useState(""),[A,I]=_.useState(""),[j,E]=_.useState(!1),[D,L]=_.useState(!1),G=(qe=window.wpApiSettings)==null?void 0:qe.google_client_id,Y=(mt=window.wpApiSettings)!=null&&mt.plugin_url?`${window.wpApiSettings.plugin_url}logo.jpg`:"logo.jpg",[q,ce]=_.useState(((ot=(ft=i==null?void 0:i.scorerDetails)==null?void 0:ft.hourlyRate)==null?void 0:ot.toString())||""),[Q,ne]=_.useState(((Ze=(pt=i==null?void 0:i.scorerDetails)==null?void 0:pt.experienceYears)==null?void 0:Ze.toString())||((bt=(He=i==null?void 0:i.coachDetails)==null?void 0:He.experienceYears)==null?void 0:bt.toString())||""),[ee,se]=_.useState(((_t=i==null?void 0:i.scorerDetails)==null?void 0:_t.bio)||""),[M,B]=_.useState(((tt=i==null?void 0:i.coachDetails)==null?void 0:tt.level)||"Level 1"),[Z,Ne]=_.useState(((Tt=i==null?void 0:i.coachDetails)==null?void 0:Tt.specialty)||"General"),[ae,P]=_.useState(((Ct=i==null?void 0:i.playerDetails)==null?void 0:Ct.battingStyle)||"Right-hand"),[W,X]=_.useState(((Ns=i==null?void 0:i.playerDetails)==null?void 0:Ns.bowlingStyle)||"Right-arm Medium"),[we,te]=_.useState(((fs=i==null?void 0:i.playerDetails)==null?void 0:fs.primaryRole)||"Batsman"),[_e,re]=_.useState(((We=i==null?void 0:i.playerDetails)==null?void 0:We.isHireable)||((Bt=i==null?void 0:i.scorerDetails)==null?void 0:Bt.isHireable)||!1),[Re,$e]=_.useState(((Pt=i==null?void 0:i.playerDetails)==null?void 0:Pt.nickname)||""),[ue,be]=_.useState(((xt=i==null?void 0:i.playerDetails)==null?void 0:xt.age)||""),[Te,$]=_.useState(((js=(Ot=i==null?void 0:i.playerDetails)==null?void 0:Ot.jerseyNumber)==null?void 0:js.toString())||""),[oe,Ae]=_.useState(((ps=i==null?void 0:i.playerDetails)==null?void 0:ps.favoritePlayer)||""),[De,Me]=_.useState(((Ms=i==null?void 0:i.playerDetails)==null?void 0:Ms.favoriteWorldCupMoment)||""),[Be,ze]=_.useState(((ks=i==null?void 0:i.playerDetails)==null?void 0:ks.favoriteGround)||""),Ke=async it=>{it.preventDefault(),R(""),I(""),r==="LOGIN"?St():r==="RECOVER"?Ce():Ee()},Ce=async()=>{if(!p){R("Please enter your User Handle to reset.");return}E(!0),setTimeout(()=>{E(!1),I(`Recovery request sent for ${p}. Please contact your Org Admin.`)},1500)},St=async()=>{if(!p||!y){R("Please enter your handle and password");return}if(p.toLowerCase()==="trinity"&&y==="123#"){const Yt={id:"dev-dennis-trinity",name:"Dennis",handle:"Trinity",role:"Administrator",createdAt:Date.now(),password:"123#"};s(Yt);return}E(!0);const it=p.startsWith("@")?p:`@${p}`;try{const Yt=it.replace("@","").toLowerCase(),Ds=await fb(Yt);Ds&&Ds.profile?Ds.profile.password===y?s(Ds.profile):R("Incorrect password for this handle."):R("Account not found. Ensure you are using the correct handle.")}catch{R("Connection error. Please try again.")}finally{E(!1)}},Ee=()=>{if(!d||!p||!y){R("All fields are required.");return}const it=p.startsWith("@")?p:`@${p}`;Ue({id:it.replace("@","").toLowerCase(),name:d,handle:it,password:y,email:f})},Ue=it=>{const Yt={id:it.id||$n("user"),name:it.name||"Anonymous",handle:it.handle||"@anon",password:it.password,role:k,email:it.email,googleId:it.googleId,avatarUrl:it.avatarUrl,createdAt:Date.now(),scorerDetails:k==="Scorer"?{isHireable:!0,hourlyRate:Number(q)||20,experienceYears:Number(Q)||0,bio:ee||"Professional Scorer available for league matches."}:void 0,coachDetails:k==="Coach"?{level:M,specialty:Z,experienceYears:Number(Q)||0}:void 0,playerDetails:k==="Player"||k==="Captain"?{battingStyle:ae,bowlingStyle:W,primaryRole:we,lookingForClub:!0,isHireable:_e,nickname:Re,age:ue,favoritePlayer:oe,favoriteWorldCupMoment:De,favoriteGround:Be,jerseyNumber:Number(Te)||void 0}:void 0};s(Yt)};return _.useEffect(()=>{},[G,r]),t.jsxs("div",{className:"min-h-screen flex items-center justify-center p-6 bg-slate-900 overflow-hidden relative",children:[t.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-indigo-600/20 rounded-full blur-[120px] -translate-x-1/2 -translate-y-1/2"}),t.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-emerald-600/10 rounded-full blur-[120px] translate-x-1/2 translate-y-1/2"}),t.jsxs("div",{className:"max-w-md w-full bg-slate-800 rounded-[32px] p-10 border border-slate-700 shadow-2xl relative z-10 animate-in zoom-in-95 duration-500 max-h-[90vh] overflow-y-auto custom-scrollbar",children:[t.jsxs("div",{className:"flex flex-col items-center mb-8 relative",children:[e&&t.jsx("button",{onClick:e,className:"absolute left-0 top-0 text-slate-400 hover:text-white transition-colors text-xl font-black",title:"Go Back",children:""}),t.jsx("img",{src:Y,alt:"Cricket Core",className:"w-32 h-32 object-contain mb-4 drop-shadow-2xl"}),t.jsx("h1",{className:"text-3xl font-black text-white text-center",children:"Cricket-Core 2026"}),t.jsx("p",{className:"text-slate-400 text-center mt-2",children:r==="CREATE"?"Join the global network":r==="RECOVER"?"Recover Account":"Resume your career"})]}),t.jsxs("div",{className:"bg-slate-900/50 p-1 rounded-2xl flex mb-8 border border-white/5",children:[t.jsx("button",{onClick:()=>{o("CREATE"),R(""),I("")},className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] transition-all ${r==="CREATE"?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Create"}),t.jsx("button",{onClick:()=>{o("LOGIN"),R(""),I("")},className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-[0.2em] transition-all ${r==="LOGIN"||r==="RECOVER"?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:text-slate-300"}`,children:"Login"})]}),t.jsxs("form",{onSubmit:Ke,className:"space-y-6",children:[S&&t.jsx("div",{className:"bg-red-500/10 border border-red-500/30 text-red-400 p-3 rounded-xl text-xs font-bold text-center animate-in shake",children:S}),A&&t.jsx("div",{className:"bg-emerald-500/10 border border-emerald-500/30 text-emerald-400 p-3 rounded-xl text-xs font-bold text-center animate-in zoom-in",children:A}),r==="CREATE"&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Full Name"}),t.jsx("input",{type:"text",required:!0,value:d,onChange:it=>u(it.target.value),placeholder:"e.g. Dennis",className:"w-full bg-slate-900 border border-slate-700 rounded-2xl px-5 py-4 text-white font-bold focus:ring-2 focus:ring-indigo-500 transition-all outline-none"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"System Handle"}),t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-5 top-4 text-slate-500 font-bold",children:"@"}),t.jsx("input",{type:"text",required:!0,value:p.replace("@",""),onChange:it=>m(it.target.value),placeholder:"Trinity",className:"w-full bg-slate-900 border border-slate-700 rounded-2xl pl-10 pr-5 py-4 text-white font-bold focus:ring-2 focus:ring-indigo-500 transition-all outline-none"})]})]}),r==="CREATE"&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Email Address"}),t.jsx("input",{type:"email",required:!0,value:f,onChange:it=>b(it.target.value),placeholder:"you@example.com",className:"w-full bg-slate-900 border border-slate-700 rounded-2xl px-5 py-4 text-white font-bold focus:ring-2 focus:ring-indigo-500 transition-all outline-none"})]}),r!=="RECOVER"&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1",children:"Secure Password"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:D?"text":"password",required:!0,value:y,onChange:it=>N(it.target.value),placeholder:"",className:"w-full bg-slate-900 border border-slate-700 rounded-2xl px-5 py-4 pr-12 text-white font-bold focus:ring-2 focus:ring-indigo-500 transition-all outline-none"}),t.jsx("button",{type:"button",onClick:()=>L(!D),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",title:D?"Hide password":"Show password",children:D?t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"})}):t.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})]}),r==="LOGIN"&&t.jsxs("div",{className:"flex items-center gap-3 px-1",children:[t.jsx("input",{type:"checkbox",id:"keepSignedIn",className:"w-4 h-4 rounded border-slate-700 bg-slate-900 text-indigo-600 focus:ring-indigo-500 bg-slate-800",defaultChecked:!0}),t.jsx("label",{htmlFor:"keepSignedIn",className:"text-xs font-bold text-slate-400 select-none cursor-pointer",children:"Keep me signed in"})]}),r==="LOGIN"&&t.jsx("div",{className:"text-right",children:t.jsx("button",{type:"button",onClick:()=>{o("RECOVER"),R("")},className:"text-[10px] font-bold text-slate-400 hover:text-indigo-400 transition-colors",children:"Forgot Password?"})}),t.jsxs("div",{className:"space-y-3 mt-4",children:[t.jsx("button",{type:"submit",disabled:j,className:"w-full bg-white text-slate-900 font-black py-5 rounded-2xl transition-all shadow-xl hover:bg-slate-200 active:scale-95 uppercase tracking-[0.2em] text-xs disabled:opacity-50",children:j?"Processing...":r==="LOGIN"?"Login":r==="RECOVER"?"Reset Password":"Create Account"}),(e||r==="RECOVER")&&t.jsx("button",{type:"button",onClick:()=>{r==="RECOVER"?o("LOGIN"):e&&e()},className:"w-full bg-transparent text-slate-500 font-bold py-3 rounded-2xl hover:text-white hover:bg-slate-800 transition-all uppercase tracking-widest text-[10px]",children:r==="RECOVER"?"Back to Login":"Cancel"})]})]})]})]})};var mS={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let fS,pS;function xS(){return{geminiUrl:fS,vertexUrl:pS}}function gS(s,e,n,i){var r,o;if(!(s!=null&&s.baseUrl)){const d=xS();return e?(r=d.vertexUrl)!==null&&r!==void 0?r:n:(o=d.geminiUrl)!==null&&o!==void 0?o:i}return s.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ua{}function Le(s,e){const n=/\{([^}]+)\}/g;return s.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function g(s,e,n){for(let o=0;o<e.length-1;o++){const d=e[o];if(d.endsWith("[]")){const u=d.slice(0,-2);if(!(u in s))if(Array.isArray(n))s[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(s[u])){const p=s[u];if(Array.isArray(n))for(let m=0;m<p.length;m++){const f=p[m];g(f,e.slice(o+1),n[m])}else for(const m of p)g(m,e.slice(o+1),n)}return}else if(d.endsWith("[0]")){const u=d.slice(0,-3);u in s||(s[u]=[{}]);const p=s[u];g(p[0],e.slice(o+1),n);return}(!s[d]||typeof s[d]!="object")&&(s[d]={}),s=s[d]}const i=e[e.length-1],r=s[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(s,n):s[i]=n}function x(s,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return s;for(let i=0;i<e.length;i++){if(typeof s!="object"||s===null)return n;const r=e[i];if(r.endsWith("[]")){const o=r.slice(0,-2);if(o in s){const d=s[o];return Array.isArray(d)?d.map(u=>x(u,e.slice(i+1),n)):n}else return n}else s=s[r]}return s}catch(i){if(i instanceof TypeError)return n;throw i}}function bS(s,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),o=i.split("."),d=new Set;let u=-1;for(let p=0;p<r.length;p++)if(r[p]==="*"){u=p;break}if(u!==-1&&o.length>u)for(let p=u;p<o.length;p++){const m=o[p];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&d.add(m)}ih(s,r,o,0,d)}}function ih(s,e,n,i,r){if(i>=e.length||typeof s!="object"||s===null)return;const o=e[i];if(o.endsWith("[]")){const d=o.slice(0,-2),u=s;if(d in u&&Array.isArray(u[d]))for(const p of u[d])ih(p,e,n,i+1,r)}else if(o==="*"){if(typeof s=="object"&&s!==null&&!Array.isArray(s)){const d=s,u=Object.keys(d).filter(m=>!m.startsWith("_")&&!r.has(m)),p={};for(const m of u)p[m]=d[m];for(const[m,f]of Object.entries(p)){const b=[];for(const y of n.slice(i))y==="*"?b.push(m):b.push(y);g(d,b,f)}for(const m of u)delete d[m]}}else{const d=s;o in d&&ih(d[o],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Sh(s){if(typeof s!="string")throw new Error("fromImageBytes must be a string");return s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vS(s){const e={},n=x(s,["operationName"]);n!=null&&g(e,["operationName"],n);const i=x(s,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function yS(s){const e={},n=x(s,["name"]);n!=null&&g(e,["name"],n);const i=x(s,["metadata"]);i!=null&&g(e,["metadata"],i);const r=x(s,["done"]);r!=null&&g(e,["done"],r);const o=x(s,["error"]);o!=null&&g(e,["error"],o);const d=x(s,["response","generateVideoResponse"]);return d!=null&&g(e,["response"],NS(d)),e}function wS(s){const e={},n=x(s,["name"]);n!=null&&g(e,["name"],n);const i=x(s,["metadata"]);i!=null&&g(e,["metadata"],i);const r=x(s,["done"]);r!=null&&g(e,["done"],r);const o=x(s,["error"]);o!=null&&g(e,["error"],o);const d=x(s,["response"]);return d!=null&&g(e,["response"],jS(d)),e}function NS(s){const e={},n=x(s,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(d=>kS(d))),g(e,["generatedVideos"],o)}const i=x(s,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=x(s,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function jS(s){const e={},n=x(s,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(d=>SS(d))),g(e,["generatedVideos"],o)}const i=x(s,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=x(s,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function kS(s){const e={},n=x(s,["video"]);return n!=null&&g(e,["video"],IS(n)),e}function SS(s){const e={},n=x(s,["_self"]);return n!=null&&g(e,["video"],RS(n)),e}function _S(s){const e={},n=x(s,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function TS(s){const e={},n=x(s,["operationName"]);return n!=null&&g(e,["_url","operationName"],n),e}function CS(s){const e={},n=x(s,["name"]);n!=null&&g(e,["name"],n);const i=x(s,["metadata"]);i!=null&&g(e,["metadata"],i);const r=x(s,["done"]);r!=null&&g(e,["done"],r);const o=x(s,["error"]);o!=null&&g(e,["error"],o);const d=x(s,["response"]);return d!=null&&g(e,["response"],ES(d)),e}function ES(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["parent"]);i!=null&&g(e,["parent"],i);const r=x(s,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function Cb(s){const e={},n=x(s,["name"]);n!=null&&g(e,["name"],n);const i=x(s,["metadata"]);i!=null&&g(e,["metadata"],i);const r=x(s,["done"]);r!=null&&g(e,["done"],r);const o=x(s,["error"]);o!=null&&g(e,["error"],o);const d=x(s,["response"]);return d!=null&&g(e,["response"],AS(d)),e}function AS(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["parent"]);i!=null&&g(e,["parent"],i);const r=x(s,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function IS(s){const e={},n=x(s,["uri"]);n!=null&&g(e,["uri"],n);const i=x(s,["encodedVideo"]);i!=null&&g(e,["videoBytes"],Sh(i));const r=x(s,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function RS(s){const e={},n=x(s,["gcsUri"]);n!=null&&g(e,["uri"],n);const i=x(s,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],Sh(i));const r=x(s,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var c0;(function(s){s.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",s.OUTCOME_OK="OUTCOME_OK",s.OUTCOME_FAILED="OUTCOME_FAILED",s.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(c0||(c0={}));var d0;(function(s){s.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",s.PYTHON="PYTHON"})(d0||(d0={}));var u0;(function(s){s.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",s.SILENT="SILENT",s.WHEN_IDLE="WHEN_IDLE",s.INTERRUPT="INTERRUPT"})(u0||(u0={}));var rn;(function(s){s.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",s.STRING="STRING",s.NUMBER="NUMBER",s.INTEGER="INTEGER",s.BOOLEAN="BOOLEAN",s.ARRAY="ARRAY",s.OBJECT="OBJECT",s.NULL="NULL"})(rn||(rn={}));var h0;(function(s){s.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",s.SIMPLE_SEARCH="SIMPLE_SEARCH",s.ELASTIC_SEARCH="ELASTIC_SEARCH"})(h0||(h0={}));var m0;(function(s){s.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",s.NO_AUTH="NO_AUTH",s.API_KEY_AUTH="API_KEY_AUTH",s.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",s.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",s.OAUTH="OAUTH",s.OIDC_AUTH="OIDC_AUTH"})(m0||(m0={}));var f0;(function(s){s.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",s.HTTP_IN_QUERY="HTTP_IN_QUERY",s.HTTP_IN_HEADER="HTTP_IN_HEADER",s.HTTP_IN_PATH="HTTP_IN_PATH",s.HTTP_IN_BODY="HTTP_IN_BODY",s.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(f0||(f0={}));var p0;(function(s){s.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",s.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",s.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",s.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(p0||(p0={}));var x0;(function(s){s.UNSPECIFIED="UNSPECIFIED",s.BLOCKING="BLOCKING",s.NON_BLOCKING="NON_BLOCKING"})(x0||(x0={}));var g0;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.MODE_DYNAMIC="MODE_DYNAMIC"})(g0||(g0={}));var b0;(function(s){s.MODE_UNSPECIFIED="MODE_UNSPECIFIED",s.AUTO="AUTO",s.ANY="ANY",s.NONE="NONE",s.VALIDATED="VALIDATED"})(b0||(b0={}));var v0;(function(s){s.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH",s.MINIMAL="MINIMAL"})(v0||(v0={}));var y0;(function(s){s.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",s.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",s.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",s.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",s.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",s.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",s.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",s.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",s.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",s.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(y0||(y0={}));var w0;(function(s){s.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",s.SEVERITY="SEVERITY",s.PROBABILITY="PROBABILITY"})(w0||(w0={}));var N0;(function(s){s.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE",s.OFF="OFF"})(N0||(N0={}));var j0;(function(s){s.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",s.STOP="STOP",s.MAX_TOKENS="MAX_TOKENS",s.SAFETY="SAFETY",s.RECITATION="RECITATION",s.LANGUAGE="LANGUAGE",s.OTHER="OTHER",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.SPII="SPII",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.IMAGE_SAFETY="IMAGE_SAFETY",s.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",s.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",s.NO_IMAGE="NO_IMAGE",s.IMAGE_RECITATION="IMAGE_RECITATION",s.IMAGE_OTHER="IMAGE_OTHER"})(j0||(j0={}));var k0;(function(s){s.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",s.NEGLIGIBLE="NEGLIGIBLE",s.LOW="LOW",s.MEDIUM="MEDIUM",s.HIGH="HIGH"})(k0||(k0={}));var S0;(function(s){s.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",s.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",s.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",s.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",s.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(S0||(S0={}));var _0;(function(s){s.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",s.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",s.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",s.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",s.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(_0||(_0={}));var T0;(function(s){s.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",s.SAFETY="SAFETY",s.OTHER="OTHER",s.BLOCKLIST="BLOCKLIST",s.PROHIBITED_CONTENT="PROHIBITED_CONTENT",s.IMAGE_SAFETY="IMAGE_SAFETY",s.MODEL_ARMOR="MODEL_ARMOR",s.JAILBREAK="JAILBREAK"})(T0||(T0={}));var C0;(function(s){s.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",s.ON_DEMAND="ON_DEMAND",s.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(C0||(C0={}));var nc;(function(s){s.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",s.TEXT="TEXT",s.IMAGE="IMAGE",s.AUDIO="AUDIO"})(nc||(nc={}));var E0;(function(s){s.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",s.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",s.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",s.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(E0||(E0={}));var A0;(function(s){s.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",s.TUNING_MODE_FULL="TUNING_MODE_FULL",s.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(A0||(A0={}));var I0;(function(s){s.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",s.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",s.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",s.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",s.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",s.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",s.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(I0||(I0={}));var lh;(function(s){s.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",s.JOB_STATE_QUEUED="JOB_STATE_QUEUED",s.JOB_STATE_PENDING="JOB_STATE_PENDING",s.JOB_STATE_RUNNING="JOB_STATE_RUNNING",s.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",s.JOB_STATE_FAILED="JOB_STATE_FAILED",s.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",s.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",s.JOB_STATE_PAUSED="JOB_STATE_PAUSED",s.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",s.JOB_STATE_UPDATING="JOB_STATE_UPDATING",s.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(lh||(lh={}));var R0;(function(s){s.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",s.TUNING_TASK_I2V="TUNING_TASK_I2V",s.TUNING_TASK_T2V="TUNING_TASK_T2V",s.TUNING_TASK_R2V="TUNING_TASK_R2V"})(R0||(R0={}));var M0;(function(s){s.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",s.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",s.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",s.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",s.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(M0||(M0={}));var rh;(function(s){s.COLLECTION="COLLECTION"})(rh||(rh={}));var D0;(function(s){s.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",s.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",s.BALANCED="BALANCED",s.PRIORITIZE_COST="PRIORITIZE_COST"})(D0||(D0={}));var O0;(function(s){s.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",s.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(O0||(O0={}));var U0;(function(s){s.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",s.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",s.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",s.BLOCK_NONE="BLOCK_NONE"})(U0||(U0={}));var L0;(function(s){s.DONT_ALLOW="DONT_ALLOW",s.ALLOW_ADULT="ALLOW_ADULT",s.ALLOW_ALL="ALLOW_ALL"})(L0||(L0={}));var B0;(function(s){s.auto="auto",s.en="en",s.ja="ja",s.ko="ko",s.hi="hi",s.zh="zh",s.pt="pt",s.es="es"})(B0||(B0={}));var P0;(function(s){s.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",s.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",s.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",s.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",s.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(P0||(P0={}));var G0;(function(s){s.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",s.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",s.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",s.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(G0||(G0={}));var $0;(function(s){s.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",s.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",s.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",s.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})($0||($0={}));var F0;(function(s){s.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",s.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",s.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",s.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",s.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",s.EDIT_MODE_STYLE="EDIT_MODE_STYLE",s.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",s.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(F0||(F0={}));var H0;(function(s){s.FOREGROUND="FOREGROUND",s.BACKGROUND="BACKGROUND",s.PROMPT="PROMPT",s.SEMANTIC="SEMANTIC",s.INTERACTIVE="INTERACTIVE"})(H0||(H0={}));var q0;(function(s){s.ASSET="ASSET",s.STYLE="STYLE"})(q0||(q0={}));var V0;(function(s){s.INSERT="INSERT",s.REMOVE="REMOVE",s.REMOVE_STATIC="REMOVE_STATIC",s.OUTPAINT="OUTPAINT"})(V0||(V0={}));var z0;(function(s){s.OPTIMIZED="OPTIMIZED",s.LOSSLESS="LOSSLESS"})(z0||(z0={}));var W0;(function(s){s.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",s.PREFERENCE_TUNING="PREFERENCE_TUNING",s.DISTILLATION="DISTILLATION"})(W0||(W0={}));var J0;(function(s){s.STATE_UNSPECIFIED="STATE_UNSPECIFIED",s.STATE_PENDING="STATE_PENDING",s.STATE_ACTIVE="STATE_ACTIVE",s.STATE_FAILED="STATE_FAILED"})(J0||(J0={}));var Y0;(function(s){s.STATE_UNSPECIFIED="STATE_UNSPECIFIED",s.PROCESSING="PROCESSING",s.ACTIVE="ACTIVE",s.FAILED="FAILED"})(Y0||(Y0={}));var K0;(function(s){s.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",s.UPLOADED="UPLOADED",s.GENERATED="GENERATED",s.REGISTERED="REGISTERED"})(K0||(K0={}));var X0;(function(s){s.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",s.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",s.RESPONSE_REJECTED="RESPONSE_REJECTED",s.NEED_MORE_INPUT="NEED_MORE_INPUT"})(X0||(X0={}));var Q0;(function(s){s.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",s.TEXT="TEXT",s.IMAGE="IMAGE",s.VIDEO="VIDEO",s.AUDIO="AUDIO",s.DOCUMENT="DOCUMENT"})(Q0||(Q0={}));var Z0;(function(s){s.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",s.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",s.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Z0||(Z0={}));var eg;(function(s){s.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",s.ACTIVITY_START="ACTIVITY_START",s.ACTIVITY_END="ACTIVITY_END"})(eg||(eg={}));var tg;(function(s){s.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",s.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",s.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(tg||(tg={}));var sg;(function(s){s.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",s.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",s.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(sg||(sg={}));var ng;(function(s){s.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",s.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",s.NO_INTERRUPTION="NO_INTERRUPTION"})(ng||(ng={}));var ag;(function(s){s.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",s.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",s.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ag||(ag={}));var ig;(function(s){s.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",s.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",s.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",s.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",s.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",s.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",s.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",s.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",s.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",s.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",s.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",s.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",s.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ig||(ig={}));var lg;(function(s){s.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",s.QUALITY="QUALITY",s.DIVERSITY="DIVERSITY",s.VOCALIZATION="VOCALIZATION"})(lg||(lg={}));var tl;(function(s){s.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",s.PLAY="PLAY",s.PAUSE="PAUSE",s.STOP="STOP",s.RESET_CONTEXT="RESET_CONTEXT"})(tl||(tl={}));class oh{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class sr{get text(){var e,n,i,r,o,d,u,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",f=!1;const b=[];for(const y of(p=(u=(d=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||d===void 0?void 0:d.content)===null||u===void 0?void 0:u.parts)!==null&&p!==void 0?p:[]){for(const[N,k]of Object.entries(y))N!=="text"&&N!=="thought"&&N!=="thoughtSignature"&&(k!==null||k!==void 0)&&b.push(N);if(typeof y.text=="string"){if(typeof y.thought=="boolean"&&y.thought)continue;f=!0,m+=y.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?m:void 0}get data(){var e,n,i,r,o,d,u,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const f=[];for(const b of(p=(u=(d=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||d===void 0?void 0:d.content)===null||u===void 0?void 0:u.parts)!==null&&p!==void 0?p:[]){for(const[y,N]of Object.entries(b))y!=="inlineData"&&(N!==null||N!==void 0)&&f.push(y);b.inlineData&&typeof b.inlineData.data=="string"&&(m+=atob(b.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,n,i,r,o,d,u,p;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(p=(u=(d=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||d===void 0?void 0:d.content)===null||u===void 0?void 0:u.parts)===null||p===void 0?void 0:p.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,n,i,r,o,d,u,p,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(p=(u=(d=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||d===void 0?void 0:d.content)===null||u===void 0?void 0:u.parts)===null||p===void 0?void 0:p.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((f==null?void 0:f.length)!==0)return(m=f==null?void 0:f[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,n,i,r,o,d,u,p,m;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(p=(u=(d=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||d===void 0?void 0:d.content)===null||u===void 0?void 0:u.parts)===null||p===void 0?void 0:p.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((f==null?void 0:f.length)!==0)return(m=f==null?void 0:f[0])===null||m===void 0?void 0:m.output}}class rg{}class og{}class MS{}class DS{}class OS{}class US{}class cg{}class dg{}class ug{}class LS{}class ac{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new ac;let r;const o=e;return n?r=wS(o):r=yS(o),Object.assign(i,r),i}}class hg{}class mg{}class fg{}class pg{}class BS{}class PS{}class GS{}class _h{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new _h,o=CS(e);return Object.assign(i,o),i}}class $S{}class FS{}class HS{}class qS{}class xg{}class VS{get text(){var e,n,i;let r="",o=!1;const d=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[p,m]of Object.entries(u))p!=="text"&&p!=="thought"&&m!==null&&d.push(p);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;o=!0,r+=u.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?r:void 0}get data(){var e,n,i;let r="";const o=[];for(const d of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[u,p]of Object.entries(d))u!=="inlineData"&&p!==null&&o.push(u);d.inlineData&&typeof d.inlineData.data=="string"&&(r+=atob(d.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class zS{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Th{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Th,o=Cb(e);return Object.assign(i,o),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function It(s,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(s.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Eb(s,e){const n=It(s,e);return n?n.startsWith("publishers/")&&s.isVertexAI()?`projects/${s.getProject()}/locations/${s.getLocation()}/${n}`:n.startsWith("models/")&&s.isVertexAI()?`projects/${s.getProject()}/locations/${s.getLocation()}/publishers/google/${n}`:n:""}function Ab(s){return Array.isArray(s)?s.map(e=>ic(e)):[ic(s)]}function ic(s){if(typeof s=="object"&&s!==null)return s;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof s}`)}function Ib(s){const e=ic(s);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Rb(s){const e=ic(s);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function gg(s){if(s==null)throw new Error("PartUnion is required");if(typeof s=="object")return s;if(typeof s=="string")return{text:s};throw new Error(`Unsupported part type: ${typeof s}`)}function Mb(s){if(s==null||Array.isArray(s)&&s.length===0)throw new Error("PartListUnion is required");return Array.isArray(s)?s.map(e=>gg(e)):[gg(s)]}function ch(s){return s!=null&&typeof s=="object"&&"parts"in s&&Array.isArray(s.parts)}function bg(s){return s!=null&&typeof s=="object"&&"functionCall"in s}function vg(s){return s!=null&&typeof s=="object"&&"functionResponse"in s}function Ls(s){if(s==null)throw new Error("ContentUnion is required");return ch(s)?s:{role:"user",parts:Mb(s)}}function Ch(s,e){if(!e)return[];if(s.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=Ls(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(s.isVertexAI()){const n=Ls(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Ls(n)):[Ls(e)]}function wn(s){if(s==null||Array.isArray(s)&&s.length===0)throw new Error("contents are required");if(!Array.isArray(s)){if(bg(s)||vg(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ls(s)]}const e=[],n=[],i=ch(s[0]);for(const r of s){const o=ch(r);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(r);else{if(bg(r)||vg(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:Mb(n)}),e}function WS(s,e){s.includes("null")&&(e.nullable=!0);const n=s.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(rn).includes(n[0].toUpperCase())?n[0].toUpperCase():rn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(rn).includes(i.toUpperCase())?i.toUpperCase():rn.TYPE_UNSPECIFIED})}}function al(s){const e={},n=["items"],i=["anyOf"],r=["properties"];if(s.type&&s.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=s.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,s=o[1]):o[1].type==="null"&&(e.nullable=!0,s=o[0])),s.type instanceof Array&&WS(s.type,e);for(const[d,u]of Object.entries(s))if(u!=null)if(d=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(rn).includes(u.toUpperCase())?u.toUpperCase():rn.TYPE_UNSPECIFIED}else if(n.includes(d))e[d]=al(u);else if(i.includes(d)){const p=[];for(const m of u){if(m.type=="null"){e.nullable=!0;continue}p.push(al(m))}e[d]=p}else if(r.includes(d)){const p={};for(const[m,f]of Object.entries(u))p[m]=al(f);e[d]=p}else{if(d==="additionalProperties")continue;e[d]=u}return e}function Eh(s){return al(s)}function Ah(s){if(typeof s=="object")return s;if(typeof s=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:s}}};throw new Error(`Unsupported speechConfig type: ${typeof s}`)}function Ih(s){if("multiSpeakerVoiceConfig"in s)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return s}function cl(s){if(s.functionDeclarations)for(const e of s.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=al(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=al(e.response));return s}function dl(s){if(s==null)throw new Error("tools is required");if(!Array.isArray(s))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of s)e.push(n);return e}function JS(s,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return s.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${s.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${s.getProject()}/locations/${s.getLocation()}/${e}`:r?`projects/${s.getProject()}/locations/${s.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function ha(s,e){if(typeof e!="string")throw new Error("name must be a string");return JS(s,e,"cachedContents")}function Db(s){switch(s){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return s}}function Ba(s){return Sh(s)}function YS(s){return s!=null&&typeof s=="object"&&"name"in s}function KS(s){return s!=null&&typeof s=="object"&&"video"in s}function XS(s){return s!=null&&typeof s=="object"&&"uri"in s}function Ob(s){var e;let n;if(YS(s)&&(n=s.name),!(XS(s)&&(n=s.uri,n===void 0))&&!(KS(s)&&(n=(e=s.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof s=="string"&&(n=s),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function Ub(s,e){let n;return s.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function Lb(s){for(const e of["models","tunedModels","publisherModels"])if(QS(s,e))return s[e];return[]}function QS(s,e){return s!==null&&typeof s=="object"&&e in s}function ZS(s,e={}){const n=s,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function e_(s,e={}){const n=[],i=new Set;for(const r of s){const o=r.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const d=ZS(r,e);d.functionDeclarations&&n.push(...d.functionDeclarations)}return{functionDeclarations:n}}function Bb(s,e){let n;if(typeof e=="string")if(s.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(s.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(s.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function t_(s){if(typeof s!="string")return s;const e=s;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Pb(s){if(typeof s!="object"||s===null)return{};const e=s,n=e.inlinedResponses;if(typeof n!="object"||n===null)return s;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return s;let o=!1;for(const d of r){if(typeof d!="object"||d===null)continue;const p=d.response;if(typeof p!="object"||p===null)continue;if(p.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),s}function ul(s,e){const n=e;if(!s.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function Gb(s){const e=s;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s_(s){const e={},n=x(s,["responsesFile"]);n!=null&&g(e,["fileName"],n);const i=x(s,["inlinedResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(d=>U_(d))),g(e,["inlinedResponses"],o)}const r=x(s,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),g(e,["inlinedEmbedContentResponses"],o)}return e}function n_(s){const e={},n=x(s,["predictionsFormat"]);n!=null&&g(e,["format"],n);const i=x(s,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const r=x(s,["bigqueryDestination","outputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function a_(s){const e={},n=x(s,["format"]);n!=null&&g(e,["predictionsFormat"],n);const i=x(s,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const r=x(s,["bigqueryUri"]);if(r!=null&&g(e,["bigqueryDestination","outputUri"],r),x(s,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(s,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(x(s,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Jo(s){const e={},n=x(s,["name"]);n!=null&&g(e,["name"],n);const i=x(s,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const r=x(s,["metadata","state"]);r!=null&&g(e,["state"],Gb(r));const o=x(s,["metadata","createTime"]);o!=null&&g(e,["createTime"],o);const d=x(s,["metadata","endTime"]);d!=null&&g(e,["endTime"],d);const u=x(s,["metadata","updateTime"]);u!=null&&g(e,["updateTime"],u);const p=x(s,["metadata","model"]);p!=null&&g(e,["model"],p);const m=x(s,["metadata","output"]);return m!=null&&g(e,["dest"],s_(Pb(m))),e}function dh(s){const e={},n=x(s,["name"]);n!=null&&g(e,["name"],n);const i=x(s,["displayName"]);i!=null&&g(e,["displayName"],i);const r=x(s,["state"]);r!=null&&g(e,["state"],Gb(r));const o=x(s,["error"]);o!=null&&g(e,["error"],o);const d=x(s,["createTime"]);d!=null&&g(e,["createTime"],d);const u=x(s,["startTime"]);u!=null&&g(e,["startTime"],u);const p=x(s,["endTime"]);p!=null&&g(e,["endTime"],p);const m=x(s,["updateTime"]);m!=null&&g(e,["updateTime"],m);const f=x(s,["model"]);f!=null&&g(e,["model"],f);const b=x(s,["inputConfig"]);b!=null&&g(e,["src"],i_(b));const y=x(s,["outputConfig"]);y!=null&&g(e,["dest"],n_(Pb(y)));const N=x(s,["completionStats"]);return N!=null&&g(e,["completionStats"],N),e}function i_(s){const e={},n=x(s,["instancesFormat"]);n!=null&&g(e,["format"],n);const i=x(s,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const r=x(s,["bigquerySource","inputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function l_(s,e){const n={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=x(e,["fileName"]);i!=null&&g(n,["fileName"],i);const r=x(e,["inlinedRequests"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>O_(s,d))),g(n,["requests","requests"],o)}return n}function r_(s){const e={},n=x(s,["format"]);n!=null&&g(e,["instancesFormat"],n);const i=x(s,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const r=x(s,["bigqueryUri"]);if(r!=null&&g(e,["bigquerySource","inputUri"],r),x(s,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(s,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function o_(s){const e={},n=x(s,["data"]);if(n!=null&&g(e,["data"],n),x(s,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=x(s,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function c_(s,e){const n={},i=x(e,["name"]);return i!=null&&g(n,["_url","name"],ul(s,i)),n}function d_(s,e){const n={},i=x(e,["name"]);return i!=null&&g(n,["_url","name"],ul(s,i)),n}function u_(s){const e={},n=x(s,["content"]);n!=null&&g(e,["content"],n);const i=x(s,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],h_(i));const r=x(s,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const o=x(s,["finishReason"]);o!=null&&g(e,["finishReason"],o);const d=x(s,["avgLogprobs"]);d!=null&&g(e,["avgLogprobs"],d);const u=x(s,["groundingMetadata"]);u!=null&&g(e,["groundingMetadata"],u);const p=x(s,["index"]);p!=null&&g(e,["index"],p);const m=x(s,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const f=x(s,["safetyRatings"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(N=>N)),g(e,["safetyRatings"],y)}const b=x(s,["urlContextMetadata"]);return b!=null&&g(e,["urlContextMetadata"],b),e}function h_(s){const e={},n=x(s,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["citations"],i)}return e}function $b(s){const e={},n=x(s,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>H_(o))),g(e,["parts"],r)}const i=x(s,["role"]);return i!=null&&g(e,["role"],i),e}function m_(s,e){const n={},i=x(s,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),x(s,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function f_(s,e){const n={},i=x(s,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=x(s,["dest"]);return e!==void 0&&r!=null&&g(e,["outputConfig"],a_(t_(r))),n}function yg(s,e){const n={},i=x(e,["model"]);i!=null&&g(n,["_url","model"],It(s,i));const r=x(e,["src"]);r!=null&&g(n,["batch","inputConfig"],l_(s,Bb(s,r)));const o=x(e,["config"]);return o!=null&&m_(o,n),n}function p_(s,e){const n={},i=x(e,["model"]);i!=null&&g(n,["model"],It(s,i));const r=x(e,["src"]);r!=null&&g(n,["inputConfig"],r_(Bb(s,r)));const o=x(e,["config"]);return o!=null&&f_(o,n),n}function x_(s,e){const n={},i=x(s,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),n}function g_(s,e){const n={},i=x(e,["model"]);i!=null&&g(n,["_url","model"],It(s,i));const r=x(e,["src"]);r!=null&&g(n,["batch","inputConfig"],k_(s,r));const o=x(e,["config"]);return o!=null&&x_(o,n),n}function b_(s,e){const n={},i=x(e,["name"]);return i!=null&&g(n,["_url","name"],ul(s,i)),n}function v_(s,e){const n={},i=x(e,["name"]);return i!=null&&g(n,["_url","name"],ul(s,i)),n}function y_(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["name"]);i!=null&&g(e,["name"],i);const r=x(s,["done"]);r!=null&&g(e,["done"],r);const o=x(s,["error"]);return o!=null&&g(e,["error"],o),e}function w_(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["name"]);i!=null&&g(e,["name"],i);const r=x(s,["done"]);r!=null&&g(e,["done"],r);const o=x(s,["error"]);return o!=null&&g(e,["error"],o),e}function N_(s,e){const n={},i=x(e,["contents"]);if(i!=null){let o=Ch(s,i);Array.isArray(o)&&(o=o.map(d=>d)),g(n,["requests[]","request","content"],o)}const r=x(e,["config"]);return r!=null&&(g(n,["_self"],j_(r,n)),bS(n,{"requests[].*":"requests[].request.*"})),n}function j_(s,e){const n={},i=x(s,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const r=x(s,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const o=x(s,["outputDimensionality"]);if(e!==void 0&&o!=null&&g(e,["requests[]","outputDimensionality"],o),x(s,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(s,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function k_(s,e){const n={},i=x(e,["fileName"]);i!=null&&g(n,["file_name"],i);const r=x(e,["inlinedRequests"]);return r!=null&&g(n,["requests"],N_(s,r)),n}function S_(s){const e={};if(x(s,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(s,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=x(s,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function __(s){const e={},n=x(s,["id"]);n!=null&&g(e,["id"],n);const i=x(s,["args"]);i!=null&&g(e,["args"],i);const r=x(s,["name"]);if(r!=null&&g(e,["name"],r),x(s,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(s,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function T_(s){const e={},n=x(s,["allowedFunctionNames"]);n!=null&&g(e,["allowedFunctionNames"],n);const i=x(s,["mode"]);if(i!=null&&g(e,["mode"],i),x(s,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function C_(s,e,n){const i={},r=x(e,["systemInstruction"]);n!==void 0&&r!=null&&g(n,["systemInstruction"],$b(Ls(r)));const o=x(e,["temperature"]);o!=null&&g(i,["temperature"],o);const d=x(e,["topP"]);d!=null&&g(i,["topP"],d);const u=x(e,["topK"]);u!=null&&g(i,["topK"],u);const p=x(e,["candidateCount"]);p!=null&&g(i,["candidateCount"],p);const m=x(e,["maxOutputTokens"]);m!=null&&g(i,["maxOutputTokens"],m);const f=x(e,["stopSequences"]);f!=null&&g(i,["stopSequences"],f);const b=x(e,["responseLogprobs"]);b!=null&&g(i,["responseLogprobs"],b);const y=x(e,["logprobs"]);y!=null&&g(i,["logprobs"],y);const N=x(e,["presencePenalty"]);N!=null&&g(i,["presencePenalty"],N);const k=x(e,["frequencyPenalty"]);k!=null&&g(i,["frequencyPenalty"],k);const T=x(e,["seed"]);T!=null&&g(i,["seed"],T);const S=x(e,["responseMimeType"]);S!=null&&g(i,["responseMimeType"],S);const R=x(e,["responseSchema"]);R!=null&&g(i,["responseSchema"],Eh(R));const A=x(e,["responseJsonSchema"]);if(A!=null&&g(i,["responseJsonSchema"],A),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const I=x(e,["safetySettings"]);if(n!==void 0&&I!=null){let ne=I;Array.isArray(ne)&&(ne=ne.map(ee=>q_(ee))),g(n,["safetySettings"],ne)}const j=x(e,["tools"]);if(n!==void 0&&j!=null){let ne=dl(j);Array.isArray(ne)&&(ne=ne.map(ee=>z_(cl(ee)))),g(n,["tools"],ne)}const E=x(e,["toolConfig"]);if(n!==void 0&&E!=null&&g(n,["toolConfig"],V_(E)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=x(e,["cachedContent"]);n!==void 0&&D!=null&&g(n,["cachedContent"],ha(s,D));const L=x(e,["responseModalities"]);L!=null&&g(i,["responseModalities"],L);const G=x(e,["mediaResolution"]);G!=null&&g(i,["mediaResolution"],G);const Y=x(e,["speechConfig"]);if(Y!=null&&g(i,["speechConfig"],Ah(Y)),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const q=x(e,["thinkingConfig"]);q!=null&&g(i,["thinkingConfig"],q);const ce=x(e,["imageConfig"]);ce!=null&&g(i,["imageConfig"],D_(ce));const Q=x(e,["enableEnhancedCivicAnswers"]);if(Q!=null&&g(i,["enableEnhancedCivicAnswers"],Q),x(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function E_(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["candidates"]);if(i!=null){let p=i;Array.isArray(p)&&(p=p.map(m=>u_(m))),g(e,["candidates"],p)}const r=x(s,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const o=x(s,["promptFeedback"]);o!=null&&g(e,["promptFeedback"],o);const d=x(s,["responseId"]);d!=null&&g(e,["responseId"],d);const u=x(s,["usageMetadata"]);return u!=null&&g(e,["usageMetadata"],u),e}function A_(s,e){const n={},i=x(e,["name"]);return i!=null&&g(n,["_url","name"],ul(s,i)),n}function I_(s,e){const n={},i=x(e,["name"]);return i!=null&&g(n,["_url","name"],ul(s,i)),n}function R_(s){const e={};if(x(s,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(s,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function M_(s){const e={};if(x(s,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(s,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=x(s,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function D_(s){const e={},n=x(s,["aspectRatio"]);n!=null&&g(e,["aspectRatio"],n);const i=x(s,["imageSize"]);if(i!=null&&g(e,["imageSize"],i),x(s,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(x(s,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(x(s,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function O_(s,e){const n={},i=x(e,["model"]);i!=null&&g(n,["request","model"],It(s,i));const r=x(e,["contents"]);if(r!=null){let u=wn(r);Array.isArray(u)&&(u=u.map(p=>$b(p))),g(n,["request","contents"],u)}const o=x(e,["metadata"]);o!=null&&g(n,["metadata"],o);const d=x(e,["config"]);return d!=null&&g(n,["request","generationConfig"],C_(s,d,x(n,["request"],{}))),n}function U_(s){const e={},n=x(s,["response"]);n!=null&&g(e,["response"],E_(n));const i=x(s,["metadata"]);i!=null&&g(e,["metadata"],i);const r=x(s,["error"]);return r!=null&&g(e,["error"],r),e}function L_(s,e){const n={},i=x(s,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=x(s,["pageToken"]);if(e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),x(s,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function B_(s,e){const n={},i=x(s,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=x(s,["pageToken"]);e!==void 0&&r!=null&&g(e,["_query","pageToken"],r);const o=x(s,["filter"]);return e!==void 0&&o!=null&&g(e,["_query","filter"],o),n}function P_(s){const e={},n=x(s,["config"]);return n!=null&&L_(n,e),e}function G_(s){const e={},n=x(s,["config"]);return n!=null&&B_(n,e),e}function $_(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=x(s,["operations"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>Jo(d))),g(e,["batchJobs"],o)}return e}function F_(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=x(s,["batchPredictionJobs"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>dh(d))),g(e,["batchJobs"],o)}return e}function H_(s){const e={},n=x(s,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=x(s,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=x(s,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=x(s,["fileData"]);o!=null&&g(e,["fileData"],S_(o));const d=x(s,["functionCall"]);d!=null&&g(e,["functionCall"],__(d));const u=x(s,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const p=x(s,["inlineData"]);p!=null&&g(e,["inlineData"],o_(p));const m=x(s,["text"]);m!=null&&g(e,["text"],m);const f=x(s,["thought"]);f!=null&&g(e,["thought"],f);const b=x(s,["thoughtSignature"]);b!=null&&g(e,["thoughtSignature"],b);const y=x(s,["videoMetadata"]);return y!=null&&g(e,["videoMetadata"],y),e}function q_(s){const e={},n=x(s,["category"]);if(n!=null&&g(e,["category"],n),x(s,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=x(s,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function V_(s){const e={},n=x(s,["retrievalConfig"]);n!=null&&g(e,["retrievalConfig"],n);const i=x(s,["functionCallingConfig"]);return i!=null&&g(e,["functionCallingConfig"],T_(i)),e}function z_(s){const e={};if(x(s,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(s,["computerUse"]);n!=null&&g(e,["computerUse"],n);const i=x(s,["fileSearch"]);i!=null&&g(e,["fileSearch"],i);const r=x(s,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),x(s,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=x(s,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(b=>b)),g(e,["functionDeclarations"],f)}const d=x(s,["googleMaps"]);d!=null&&g(e,["googleMaps"],R_(d));const u=x(s,["googleSearch"]);u!=null&&g(e,["googleSearch"],M_(u));const p=x(s,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=x(s,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ca;(function(s){s.PAGED_ITEM_BATCH_JOBS="batchJobs",s.PAGED_ITEM_MODELS="models",s.PAGED_ITEM_TUNING_JOBS="tuningJobs",s.PAGED_ITEM_FILES="files",s.PAGED_ITEM_CACHED_CONTENTS="cachedContents",s.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",s.PAGED_ITEM_DOCUMENTS="documents"})(ca||(ca={}));class ui{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!i||Object.keys(i).length===0?d={config:{}}:typeof i=="object"?d=Object.assign({},i):d=i,d.config&&(d.config.pageToken=n.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(o=(r=d.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W_ extends ua{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ui(ca.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=yg(this.apiClient,e),i=n._url,r=Le("{model}:batchGenerateContent",i),u=n.batch.inputConfig.requests,p=u.requests,m=[];for(const f of p){const b=Object.assign({},f);if(b.systemInstruction){const y=b.systemInstruction;delete b.systemInstruction;const N=b.request;N.systemInstruction=y,b.request=N}m.push(b)}return u.requests=m,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const o=this.getGcsUri(e),d=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?i.dest=`${o.slice(0,-6)}/dest`:i.dest=`${o}_dest_${r}`;else if(d)i.dest=`${d}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=p_(this.apiClient,e);return u=Le("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),d.then(f=>dh(f))}else{const m=yg(this.apiClient,e);return u=Le("{model}:batchGenerateContent",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),d.then(f=>Jo(f))}}async createEmbeddingsInternal(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=g_(this.apiClient,e);return o=Le("{model}:asyncBatchEmbedContent",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>Jo(p))}}async get(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=I_(this.apiClient,e);return u=Le("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),d.then(f=>dh(f))}else{const m=A_(this.apiClient,e);return u=Le("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),d.then(f=>Jo(f))}}async cancel(e){var n,i,r,o;let d="",u={};if(this.apiClient.isVertexAI()){const p=d_(this.apiClient,e);d=Le("batchPredictionJobs/{name}:cancel",p._url),u=p._query,delete p._url,delete p._query,await this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const p=c_(this.apiClient,e);d=Le("batches/{name}:cancel",p._url),u=p._query,delete p._url,delete p._query,await this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=G_(e);return u=Le("batchPredictionJobs",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=F_(f),y=new xg;return Object.assign(y,b),y})}else{const m=P_(e);return u=Le("batches",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=$_(f),y=new xg;return Object.assign(y,b),y})}}async delete(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=v_(this.apiClient,e);return u=Le("batchPredictionJobs/{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>w_(f))}else{const m=b_(this.apiClient,e);return u=Le("batches/{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>y_(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function J_(s){const e={},n=x(s,["data"]);if(n!=null&&g(e,["data"],n),x(s,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=x(s,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function wg(s){const e={},n=x(s,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>g1(o))),g(e,["parts"],r)}const i=x(s,["role"]);return i!=null&&g(e,["role"],i),e}function Y_(s,e){const n={},i=x(s,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=x(s,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const o=x(s,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const d=x(s,["contents"]);if(e!==void 0&&d!=null){let f=wn(d);Array.isArray(f)&&(f=f.map(b=>wg(b))),g(e,["contents"],f)}const u=x(s,["systemInstruction"]);e!==void 0&&u!=null&&g(e,["systemInstruction"],wg(Ls(u)));const p=x(s,["tools"]);if(e!==void 0&&p!=null){let f=p;Array.isArray(f)&&(f=f.map(b=>v1(b))),g(e,["tools"],f)}const m=x(s,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],b1(m)),x(s,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function K_(s,e){const n={},i=x(s,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=x(s,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const o=x(s,["displayName"]);e!==void 0&&o!=null&&g(e,["displayName"],o);const d=x(s,["contents"]);if(e!==void 0&&d!=null){let b=wn(d);Array.isArray(b)&&(b=b.map(y=>y)),g(e,["contents"],b)}const u=x(s,["systemInstruction"]);e!==void 0&&u!=null&&g(e,["systemInstruction"],Ls(u));const p=x(s,["tools"]);if(e!==void 0&&p!=null){let b=p;Array.isArray(b)&&(b=b.map(y=>y1(y))),g(e,["tools"],b)}const m=x(s,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const f=x(s,["kmsKeyName"]);return e!==void 0&&f!=null&&g(e,["encryption_spec","kmsKeyName"],f),n}function X_(s,e){const n={},i=x(e,["model"]);i!=null&&g(n,["model"],Eb(s,i));const r=x(e,["config"]);return r!=null&&Y_(r,n),n}function Q_(s,e){const n={},i=x(e,["model"]);i!=null&&g(n,["model"],Eb(s,i));const r=x(e,["config"]);return r!=null&&K_(r,n),n}function Z_(s,e){const n={},i=x(e,["name"]);return i!=null&&g(n,["_url","name"],ha(s,i)),n}function e1(s,e){const n={},i=x(e,["name"]);return i!=null&&g(n,["_url","name"],ha(s,i)),n}function t1(s){const e={},n=x(s,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function s1(s){const e={},n=x(s,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function n1(s){const e={};if(x(s,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(s,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=x(s,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function a1(s){const e={},n=x(s,["id"]);n!=null&&g(e,["id"],n);const i=x(s,["args"]);i!=null&&g(e,["args"],i);const r=x(s,["name"]);if(r!=null&&g(e,["name"],r),x(s,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(s,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function i1(s){const e={},n=x(s,["allowedFunctionNames"]);n!=null&&g(e,["allowedFunctionNames"],n);const i=x(s,["mode"]);if(i!=null&&g(e,["mode"],i),x(s,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function l1(s){const e={},n=x(s,["description"]);n!=null&&g(e,["description"],n);const i=x(s,["name"]);i!=null&&g(e,["name"],i);const r=x(s,["parameters"]);r!=null&&g(e,["parameters"],r);const o=x(s,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const d=x(s,["response"]);d!=null&&g(e,["response"],d);const u=x(s,["responseJsonSchema"]);if(u!=null&&g(e,["responseJsonSchema"],u),x(s,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function r1(s,e){const n={},i=x(e,["name"]);return i!=null&&g(n,["_url","name"],ha(s,i)),n}function o1(s,e){const n={},i=x(e,["name"]);return i!=null&&g(n,["_url","name"],ha(s,i)),n}function c1(s){const e={};if(x(s,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(s,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function d1(s){const e={};if(x(s,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(s,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=x(s,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function u1(s,e){const n={},i=x(s,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=x(s,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function h1(s,e){const n={},i=x(s,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=x(s,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function m1(s){const e={},n=x(s,["config"]);return n!=null&&u1(n,e),e}function f1(s){const e={},n=x(s,["config"]);return n!=null&&h1(n,e),e}function p1(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=x(s,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),g(e,["cachedContents"],o)}return e}function x1(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=x(s,["cachedContents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),g(e,["cachedContents"],o)}return e}function g1(s){const e={},n=x(s,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=x(s,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=x(s,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=x(s,["fileData"]);o!=null&&g(e,["fileData"],n1(o));const d=x(s,["functionCall"]);d!=null&&g(e,["functionCall"],a1(d));const u=x(s,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const p=x(s,["inlineData"]);p!=null&&g(e,["inlineData"],J_(p));const m=x(s,["text"]);m!=null&&g(e,["text"],m);const f=x(s,["thought"]);f!=null&&g(e,["thought"],f);const b=x(s,["thoughtSignature"]);b!=null&&g(e,["thoughtSignature"],b);const y=x(s,["videoMetadata"]);return y!=null&&g(e,["videoMetadata"],y),e}function b1(s){const e={},n=x(s,["retrievalConfig"]);n!=null&&g(e,["retrievalConfig"],n);const i=x(s,["functionCallingConfig"]);return i!=null&&g(e,["functionCallingConfig"],i1(i)),e}function v1(s){const e={};if(x(s,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(s,["computerUse"]);n!=null&&g(e,["computerUse"],n);const i=x(s,["fileSearch"]);i!=null&&g(e,["fileSearch"],i);const r=x(s,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),x(s,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=x(s,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(b=>b)),g(e,["functionDeclarations"],f)}const d=x(s,["googleMaps"]);d!=null&&g(e,["googleMaps"],c1(d));const u=x(s,["googleSearch"]);u!=null&&g(e,["googleSearch"],d1(u));const p=x(s,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=x(s,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function y1(s){const e={},n=x(s,["retrieval"]);n!=null&&g(e,["retrieval"],n);const i=x(s,["computerUse"]);if(i!=null&&g(e,["computerUse"],i),x(s,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=x(s,["codeExecution"]);r!=null&&g(e,["codeExecution"],r);const o=x(s,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const d=x(s,["functionDeclarations"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(y=>l1(y))),g(e,["functionDeclarations"],b)}const u=x(s,["googleMaps"]);u!=null&&g(e,["googleMaps"],u);const p=x(s,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const m=x(s,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const f=x(s,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function w1(s,e){const n={},i=x(s,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=x(s,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),n}function N1(s,e){const n={},i=x(s,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=x(s,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),n}function j1(s,e){const n={},i=x(e,["name"]);i!=null&&g(n,["_url","name"],ha(s,i));const r=x(e,["config"]);return r!=null&&w1(r,n),n}function k1(s,e){const n={},i=x(e,["name"]);i!=null&&g(n,["_url","name"],ha(s,i));const r=x(e,["config"]);return r!=null&&N1(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S1 extends ua{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ui(ca.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=Q_(this.apiClient,e);return u=Le("cachedContents",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),d.then(f=>f)}else{const m=X_(this.apiClient,e);return u=Le("cachedContents",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),d.then(f=>f)}}async get(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=o1(this.apiClient,e);return u=Le("{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),d.then(f=>f)}else{const m=r1(this.apiClient,e);return u=Le("{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),d.then(f=>f)}}async delete(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=e1(this.apiClient,e);return u=Le("{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=s1(f),y=new fg;return Object.assign(y,b),y})}else{const m=Z_(this.apiClient,e);return u=Le("{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=t1(f),y=new fg;return Object.assign(y,b),y})}}async update(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=k1(this.apiClient,e);return u=Le("{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),d.then(f=>f)}else{const m=j1(this.apiClient,e);return u=Le("{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),d.then(f=>f)}}async listInternal(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=f1(e);return u=Le("cachedContents",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=x1(f),y=new pg;return Object.assign(y,b),y})}else{const m=m1(e);return u=Le("cachedContents",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=p1(f),y=new pg;return Object.assign(y,b),y})}}}function lc(s,e){var n={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(n[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(s);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(s,i[r])&&(n[i[r]]=s[i[r]]);return n}function Ng(s){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&s[e],i=0;if(n)return n.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&i>=s.length&&(s=void 0),{value:s&&s[i++],done:!s}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function at(s){return this instanceof at?(this.v=s,this):new at(s)}function Dn(s,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(s,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",d),r[Symbol.asyncIterator]=function(){return this},r;function d(N){return function(k){return Promise.resolve(k).then(N,b)}}function u(N,k){i[N]&&(r[N]=function(T){return new Promise(function(S,R){o.push([N,T,S,R])>1||p(N,T)})},k&&(r[N]=k(r[N])))}function p(N,k){try{m(i[N](k))}catch(T){y(o[0][3],T)}}function m(N){N.value instanceof at?Promise.resolve(N.value.v).then(f,b):y(o[0][2],N)}function f(N){p("next",N)}function b(N){p("throw",N)}function y(N,k){N(k),o.shift(),o.length&&p(o[0][0],o[0][1])}}function On(s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=s[Symbol.asyncIterator],n;return e?e.call(s):(s=typeof Ng=="function"?Ng(s):s[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=s[o]&&function(d){return new Promise(function(u,p){d=s[o](d),r(u,p,d.done,d.value)})}}function r(o,d,u,p){Promise.resolve(p).then(function(m){o({value:m,done:u})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _1(s){var e;if(s.candidates==null||s.candidates.length===0)return!1;const n=(e=s.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:Fb(n)}function Fb(s){if(s.parts===void 0||s.parts.length===0)return!1;for(const e of s.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function T1(s){if(s.length!==0){for(const e of s)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function jg(s){if(s===void 0||s.length===0)return[];const e=[],n=s.length;let i=0;for(;i<n;)if(s[i].role==="user")e.push(s[i]),i++;else{const r=[];let o=!0;for(;i<n&&s[i].role==="model";)r.push(s[i]),o&&!Fb(s[i])&&(o=!1),i++;o?e.push(...r):e.pop()}return e}class C1{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new E1(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class E1{constructor(e,n,i,r={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),T1(o)}async sendMessage(e){var n;await this.sendPromise;const i=Ls(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,d,u;const p=await r,m=(d=(o=p.candidates)===null||o===void 0?void 0:o[0])===null||d===void 0?void 0:d.content,f=p.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let y=[];f!=null&&(y=(u=f.slice(b))!==null&&u!==void 0?u:[]);const N=m?[m]:[];this.recordHistory(i,N,y)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=Ls(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){const n=e?jg(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return Dn(this,arguments,function*(){var r,o,d,u,p,m;const f=[];try{for(var b=!0,y=On(e),N;N=yield at(y.next()),r=N.done,!r;b=!0){u=N.value,b=!1;const k=u;if(_1(k)){const T=(m=(p=k.candidates)===null||p===void 0?void 0:p[0])===null||m===void 0?void 0:m.content;T!==void 0&&f.push(T)}yield yield at(k)}}catch(k){o={error:k}}finally{try{!b&&!r&&(d=y.return)&&(yield at(d.call(y)))}finally{if(o)throw o.error}}this.recordHistory(n,f)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(o=>o.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...jg(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pr extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,pr.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function A1(s){const e={},n=x(s,["file"]);return n!=null&&g(e,["file"],n),e}function I1(s){const e={},n=x(s,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function R1(s){const e={},n=x(s,["name"]);return n!=null&&g(e,["_url","file"],Ob(n)),e}function M1(s){const e={},n=x(s,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}function D1(s){const e={},n=x(s,["name"]);return n!=null&&g(e,["_url","file"],Ob(n)),e}function O1(s){const e={},n=x(s,["uris"]);return n!=null&&g(e,["uris"],n),e}function U1(s,e){const n={},i=x(s,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=x(s,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function L1(s){const e={},n=x(s,["config"]);return n!=null&&U1(n,e),e}function B1(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=x(s,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),g(e,["files"],o)}return e}function P1(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),g(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G1 extends ua{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ui(ca.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=L1(e);return o=Le("files",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const f=m;return f.sdkHttpResponse={headers:p.headers},f})),r.then(p=>{const m=B1(p),f=new $S;return Object.assign(f,m),f})}}async createInternal(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=A1(e);return o=Le("upload/v1beta/files",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const m=I1(p),f=new FS;return Object.assign(f,m),f})}}async get(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=D1(e);return o=Le("files/{file}",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=R1(e);return o=Le("files/{file}",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const f=m;return f.sdkHttpResponse={headers:p.headers},f})),r.then(p=>{const m=M1(p),f=new HS;return Object.assign(f,m),f})}}async registerFilesInternal(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=O1(e);return o=Le("files:register",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const m=P1(p),f=new qS;return Object.assign(f,m),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yo(s){const e={},n=x(s,["data"]);if(n!=null&&g(e,["data"],n),x(s,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=x(s,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function $1(s){const e={},n=x(s,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>nT(o))),g(e,["parts"],r)}const i=x(s,["role"]);return i!=null&&g(e,["role"],i),e}function F1(s){const e={};if(x(s,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(s,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=x(s,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function H1(s){const e={},n=x(s,["id"]);n!=null&&g(e,["id"],n);const i=x(s,["args"]);i!=null&&g(e,["args"],i);const r=x(s,["name"]);if(r!=null&&g(e,["name"],r),x(s,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(s,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function q1(s){const e={},n=x(s,["description"]);n!=null&&g(e,["description"],n);const i=x(s,["name"]);i!=null&&g(e,["name"],i);const r=x(s,["parameters"]);r!=null&&g(e,["parameters"],r);const o=x(s,["parametersJsonSchema"]);o!=null&&g(e,["parametersJsonSchema"],o);const d=x(s,["response"]);d!=null&&g(e,["response"],d);const u=x(s,["responseJsonSchema"]);if(u!=null&&g(e,["responseJsonSchema"],u),x(s,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function V1(s){const e={},n=x(s,["modelSelectionConfig"]);n!=null&&g(e,["modelConfig"],n);const i=x(s,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const r=x(s,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const o=x(s,["candidateCount"]);o!=null&&g(e,["candidateCount"],o);const d=x(s,["enableAffectiveDialog"]);d!=null&&g(e,["enableAffectiveDialog"],d);const u=x(s,["frequencyPenalty"]);u!=null&&g(e,["frequencyPenalty"],u);const p=x(s,["logprobs"]);p!=null&&g(e,["logprobs"],p);const m=x(s,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const f=x(s,["mediaResolution"]);f!=null&&g(e,["mediaResolution"],f);const b=x(s,["presencePenalty"]);b!=null&&g(e,["presencePenalty"],b);const y=x(s,["responseLogprobs"]);y!=null&&g(e,["responseLogprobs"],y);const N=x(s,["responseMimeType"]);N!=null&&g(e,["responseMimeType"],N);const k=x(s,["responseModalities"]);k!=null&&g(e,["responseModalities"],k);const T=x(s,["responseSchema"]);T!=null&&g(e,["responseSchema"],T);const S=x(s,["routingConfig"]);S!=null&&g(e,["routingConfig"],S);const R=x(s,["seed"]);R!=null&&g(e,["seed"],R);const A=x(s,["speechConfig"]);A!=null&&g(e,["speechConfig"],A);const I=x(s,["stopSequences"]);I!=null&&g(e,["stopSequences"],I);const j=x(s,["temperature"]);j!=null&&g(e,["temperature"],j);const E=x(s,["thinkingConfig"]);E!=null&&g(e,["thinkingConfig"],E);const D=x(s,["topK"]);D!=null&&g(e,["topK"],D);const L=x(s,["topP"]);if(L!=null&&g(e,["topP"],L),x(s,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function z1(s){const e={};if(x(s,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(s,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function W1(s){const e={};if(x(s,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(s,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=x(s,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function J1(s,e){const n={},i=x(s,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const r=x(s,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const o=x(s,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const d=x(s,["topP"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topP"],d);const u=x(s,["topK"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topK"],u);const p=x(s,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=x(s,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const f=x(s,["seed"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","seed"],f);const b=x(s,["speechConfig"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","speechConfig"],Ih(b));const y=x(s,["thinkingConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","thinkingConfig"],y);const N=x(s,["enableAffectiveDialog"]);e!==void 0&&N!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],N);const k=x(s,["systemInstruction"]);e!==void 0&&k!=null&&g(e,["setup","systemInstruction"],$1(Ls(k)));const T=x(s,["tools"]);if(e!==void 0&&T!=null){let D=dl(T);Array.isArray(D)&&(D=D.map(L=>iT(cl(L)))),g(e,["setup","tools"],D)}const S=x(s,["sessionResumption"]);e!==void 0&&S!=null&&g(e,["setup","sessionResumption"],aT(S));const R=x(s,["inputAudioTranscription"]);e!==void 0&&R!=null&&g(e,["setup","inputAudioTranscription"],R);const A=x(s,["outputAudioTranscription"]);e!==void 0&&A!=null&&g(e,["setup","outputAudioTranscription"],A);const I=x(s,["realtimeInputConfig"]);e!==void 0&&I!=null&&g(e,["setup","realtimeInputConfig"],I);const j=x(s,["contextWindowCompression"]);e!==void 0&&j!=null&&g(e,["setup","contextWindowCompression"],j);const E=x(s,["proactivity"]);if(e!==void 0&&E!=null&&g(e,["setup","proactivity"],E),x(s,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Y1(s,e){const n={},i=x(s,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],V1(i));const r=x(s,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const o=x(s,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const d=x(s,["topP"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topP"],d);const u=x(s,["topK"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topK"],u);const p=x(s,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=x(s,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const f=x(s,["seed"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","seed"],f);const b=x(s,["speechConfig"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","speechConfig"],Ih(b));const y=x(s,["thinkingConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","thinkingConfig"],y);const N=x(s,["enableAffectiveDialog"]);e!==void 0&&N!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],N);const k=x(s,["systemInstruction"]);e!==void 0&&k!=null&&g(e,["setup","systemInstruction"],Ls(k));const T=x(s,["tools"]);if(e!==void 0&&T!=null){let L=dl(T);Array.isArray(L)&&(L=L.map(G=>lT(cl(G)))),g(e,["setup","tools"],L)}const S=x(s,["sessionResumption"]);e!==void 0&&S!=null&&g(e,["setup","sessionResumption"],S);const R=x(s,["inputAudioTranscription"]);e!==void 0&&R!=null&&g(e,["setup","inputAudioTranscription"],R);const A=x(s,["outputAudioTranscription"]);e!==void 0&&A!=null&&g(e,["setup","outputAudioTranscription"],A);const I=x(s,["realtimeInputConfig"]);e!==void 0&&I!=null&&g(e,["setup","realtimeInputConfig"],I);const j=x(s,["contextWindowCompression"]);e!==void 0&&j!=null&&g(e,["setup","contextWindowCompression"],j);const E=x(s,["proactivity"]);e!==void 0&&E!=null&&g(e,["setup","proactivity"],E);const D=x(s,["explicitVadSignal"]);return e!==void 0&&D!=null&&g(e,["setup","explicitVadSignal"],D),n}function K1(s,e){const n={},i=x(e,["model"]);i!=null&&g(n,["setup","model"],It(s,i));const r=x(e,["config"]);return r!=null&&g(n,["config"],J1(r,n)),n}function X1(s,e){const n={},i=x(e,["model"]);i!=null&&g(n,["setup","model"],It(s,i));const r=x(e,["config"]);return r!=null&&g(n,["config"],Y1(r,n)),n}function Q1(s){const e={},n=x(s,["musicGenerationConfig"]);return n!=null&&g(e,["musicGenerationConfig"],n),e}function Z1(s){const e={},n=x(s,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["weightedPrompts"],i)}return e}function eT(s){const e={},n=x(s,["media"]);if(n!=null){let m=Ab(n);Array.isArray(m)&&(m=m.map(f=>Yo(f))),g(e,["mediaChunks"],m)}const i=x(s,["audio"]);i!=null&&g(e,["audio"],Yo(Rb(i)));const r=x(s,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const o=x(s,["video"]);o!=null&&g(e,["video"],Yo(Ib(o)));const d=x(s,["text"]);d!=null&&g(e,["text"],d);const u=x(s,["activityStart"]);u!=null&&g(e,["activityStart"],u);const p=x(s,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function tT(s){const e={},n=x(s,["media"]);if(n!=null){let m=Ab(n);Array.isArray(m)&&(m=m.map(f=>f)),g(e,["mediaChunks"],m)}const i=x(s,["audio"]);i!=null&&g(e,["audio"],Rb(i));const r=x(s,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const o=x(s,["video"]);o!=null&&g(e,["video"],Ib(o));const d=x(s,["text"]);d!=null&&g(e,["text"],d);const u=x(s,["activityStart"]);u!=null&&g(e,["activityStart"],u);const p=x(s,["activityEnd"]);return p!=null&&g(e,["activityEnd"],p),e}function sT(s){const e={},n=x(s,["setupComplete"]);n!=null&&g(e,["setupComplete"],n);const i=x(s,["serverContent"]);i!=null&&g(e,["serverContent"],i);const r=x(s,["toolCall"]);r!=null&&g(e,["toolCall"],r);const o=x(s,["toolCallCancellation"]);o!=null&&g(e,["toolCallCancellation"],o);const d=x(s,["usageMetadata"]);d!=null&&g(e,["usageMetadata"],rT(d));const u=x(s,["goAway"]);u!=null&&g(e,["goAway"],u);const p=x(s,["sessionResumptionUpdate"]);p!=null&&g(e,["sessionResumptionUpdate"],p);const m=x(s,["voiceActivityDetectionSignal"]);m!=null&&g(e,["voiceActivityDetectionSignal"],m);const f=x(s,["voiceActivity"]);return f!=null&&g(e,["voiceActivity"],oT(f)),e}function nT(s){const e={},n=x(s,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=x(s,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=x(s,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=x(s,["fileData"]);o!=null&&g(e,["fileData"],F1(o));const d=x(s,["functionCall"]);d!=null&&g(e,["functionCall"],H1(d));const u=x(s,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const p=x(s,["inlineData"]);p!=null&&g(e,["inlineData"],Yo(p));const m=x(s,["text"]);m!=null&&g(e,["text"],m);const f=x(s,["thought"]);f!=null&&g(e,["thought"],f);const b=x(s,["thoughtSignature"]);b!=null&&g(e,["thoughtSignature"],b);const y=x(s,["videoMetadata"]);return y!=null&&g(e,["videoMetadata"],y),e}function aT(s){const e={},n=x(s,["handle"]);if(n!=null&&g(e,["handle"],n),x(s,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function iT(s){const e={};if(x(s,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(s,["computerUse"]);n!=null&&g(e,["computerUse"],n);const i=x(s,["fileSearch"]);i!=null&&g(e,["fileSearch"],i);const r=x(s,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),x(s,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=x(s,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(b=>b)),g(e,["functionDeclarations"],f)}const d=x(s,["googleMaps"]);d!=null&&g(e,["googleMaps"],z1(d));const u=x(s,["googleSearch"]);u!=null&&g(e,["googleSearch"],W1(u));const p=x(s,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=x(s,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function lT(s){const e={},n=x(s,["retrieval"]);n!=null&&g(e,["retrieval"],n);const i=x(s,["computerUse"]);if(i!=null&&g(e,["computerUse"],i),x(s,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=x(s,["codeExecution"]);r!=null&&g(e,["codeExecution"],r);const o=x(s,["enterpriseWebSearch"]);o!=null&&g(e,["enterpriseWebSearch"],o);const d=x(s,["functionDeclarations"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(y=>q1(y))),g(e,["functionDeclarations"],b)}const u=x(s,["googleMaps"]);u!=null&&g(e,["googleMaps"],u);const p=x(s,["googleSearch"]);p!=null&&g(e,["googleSearch"],p);const m=x(s,["googleSearchRetrieval"]);m!=null&&g(e,["googleSearchRetrieval"],m);const f=x(s,["urlContext"]);return f!=null&&g(e,["urlContext"],f),e}function rT(s){const e={},n=x(s,["promptTokenCount"]);n!=null&&g(e,["promptTokenCount"],n);const i=x(s,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const r=x(s,["candidatesTokenCount"]);r!=null&&g(e,["responseTokenCount"],r);const o=x(s,["toolUsePromptTokenCount"]);o!=null&&g(e,["toolUsePromptTokenCount"],o);const d=x(s,["thoughtsTokenCount"]);d!=null&&g(e,["thoughtsTokenCount"],d);const u=x(s,["totalTokenCount"]);u!=null&&g(e,["totalTokenCount"],u);const p=x(s,["promptTokensDetails"]);if(p!=null){let N=p;Array.isArray(N)&&(N=N.map(k=>k)),g(e,["promptTokensDetails"],N)}const m=x(s,["cacheTokensDetails"]);if(m!=null){let N=m;Array.isArray(N)&&(N=N.map(k=>k)),g(e,["cacheTokensDetails"],N)}const f=x(s,["candidatesTokensDetails"]);if(f!=null){let N=f;Array.isArray(N)&&(N=N.map(k=>k)),g(e,["responseTokensDetails"],N)}const b=x(s,["toolUsePromptTokensDetails"]);if(b!=null){let N=b;Array.isArray(N)&&(N=N.map(k=>k)),g(e,["toolUsePromptTokensDetails"],N)}const y=x(s,["trafficType"]);return y!=null&&g(e,["trafficType"],y),e}function oT(s){const e={},n=x(s,["type"]);return n!=null&&g(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cT(s,e){const n={},i=x(s,["data"]);if(i!=null&&g(n,["data"],i),x(s,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(s,["mimeType"]);return r!=null&&g(n,["mimeType"],r),n}function dT(s,e){const n={},i=x(s,["content"]);i!=null&&g(n,["content"],i);const r=x(s,["citationMetadata"]);r!=null&&g(n,["citationMetadata"],uT(r));const o=x(s,["tokenCount"]);o!=null&&g(n,["tokenCount"],o);const d=x(s,["finishReason"]);d!=null&&g(n,["finishReason"],d);const u=x(s,["avgLogprobs"]);u!=null&&g(n,["avgLogprobs"],u);const p=x(s,["groundingMetadata"]);p!=null&&g(n,["groundingMetadata"],p);const m=x(s,["index"]);m!=null&&g(n,["index"],m);const f=x(s,["logprobsResult"]);f!=null&&g(n,["logprobsResult"],f);const b=x(s,["safetyRatings"]);if(b!=null){let N=b;Array.isArray(N)&&(N=N.map(k=>k)),g(n,["safetyRatings"],N)}const y=x(s,["urlContextMetadata"]);return y!=null&&g(n,["urlContextMetadata"],y),n}function uT(s,e){const n={},i=x(s,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),g(n,["citations"],r)}return n}function hT(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["contents"]);if(o!=null){let d=wn(o);Array.isArray(d)&&(d=d.map(u=>u)),g(i,["contents"],d)}return i}function mT(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["tokensInfo"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),g(n,["tokensInfo"],o)}return n}function fT(s,e){const n={},i=x(s,["values"]);i!=null&&g(n,["values"],i);const r=x(s,["statistics"]);return r!=null&&g(n,["statistics"],pT(r)),n}function pT(s,e){const n={},i=x(s,["truncated"]);i!=null&&g(n,["truncated"],i);const r=x(s,["token_count"]);return r!=null&&g(n,["tokenCount"],r),n}function mc(s,e){const n={},i=x(s,["parts"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(d=>kC(d))),g(n,["parts"],o)}const r=x(s,["role"]);return r!=null&&g(n,["role"],r),n}function xT(s,e){const n={},i=x(s,["controlType"]);i!=null&&g(n,["controlType"],i);const r=x(s,["enableControlImageComputation"]);return r!=null&&g(n,["computeControl"],r),n}function gT(s,e){const n={};if(x(s,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(s,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(s,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function bT(s,e,n){const i={},r=x(s,["systemInstruction"]);e!==void 0&&r!=null&&g(e,["systemInstruction"],Ls(r));const o=x(s,["tools"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(p=>zb(p))),g(e,["tools"],u)}const d=x(s,["generationConfig"]);return e!==void 0&&d!=null&&g(e,["generationConfig"],cC(d)),i}function vT(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["contents"]);if(o!=null){let u=wn(o);Array.isArray(u)&&(u=u.map(p=>mc(p))),g(i,["contents"],u)}const d=x(e,["config"]);return d!=null&&gT(d),i}function yT(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["contents"]);if(o!=null){let u=wn(o);Array.isArray(u)&&(u=u.map(p=>p)),g(i,["contents"],u)}const d=x(e,["config"]);return d!=null&&bT(d,i),i}function wT(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["totalTokens"]);r!=null&&g(n,["totalTokens"],r);const o=x(s,["cachedContentTokenCount"]);return o!=null&&g(n,["cachedContentTokenCount"],o),n}function NT(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["totalTokens"]);return r!=null&&g(n,["totalTokens"],r),n}function jT(s,e,n){const i={},r=x(e,["model"]);return r!=null&&g(i,["_url","name"],It(s,r)),i}function kT(s,e,n){const i={},r=x(e,["model"]);return r!=null&&g(i,["_url","name"],It(s,r)),i}function ST(s,e){const n={},i=x(s,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function _T(s,e){const n={},i=x(s,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function TT(s,e,n){const i={},r=x(s,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const o=x(s,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const d=x(s,["numberOfImages"]);e!==void 0&&d!=null&&g(e,["parameters","sampleCount"],d);const u=x(s,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const p=x(s,["guidanceScale"]);e!==void 0&&p!=null&&g(e,["parameters","guidanceScale"],p);const m=x(s,["seed"]);e!==void 0&&m!=null&&g(e,["parameters","seed"],m);const f=x(s,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const b=x(s,["personGeneration"]);e!==void 0&&b!=null&&g(e,["parameters","personGeneration"],b);const y=x(s,["includeSafetyAttributes"]);e!==void 0&&y!=null&&g(e,["parameters","includeSafetyAttributes"],y);const N=x(s,["includeRaiReason"]);e!==void 0&&N!=null&&g(e,["parameters","includeRaiReason"],N);const k=x(s,["language"]);e!==void 0&&k!=null&&g(e,["parameters","language"],k);const T=x(s,["outputMimeType"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","mimeType"],T);const S=x(s,["outputCompressionQuality"]);e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S);const R=x(s,["addWatermark"]);e!==void 0&&R!=null&&g(e,["parameters","addWatermark"],R);const A=x(s,["labels"]);e!==void 0&&A!=null&&g(e,["labels"],A);const I=x(s,["editMode"]);e!==void 0&&I!=null&&g(e,["parameters","editMode"],I);const j=x(s,["baseSteps"]);return e!==void 0&&j!=null&&g(e,["parameters","editConfig","baseSteps"],j),i}function CT(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["prompt"]);o!=null&&g(i,["instances[0]","prompt"],o);const d=x(e,["referenceImages"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>AC(m))),g(i,["instances[0]","referenceImages"],p)}const u=x(e,["config"]);return u!=null&&TT(u,i),i}function ET(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>fc(d))),g(n,["generatedImages"],o)}return n}function AT(s,e,n){const i={},r=x(s,["taskType"]);e!==void 0&&r!=null&&g(e,["requests[]","taskType"],r);const o=x(s,["title"]);e!==void 0&&o!=null&&g(e,["requests[]","title"],o);const d=x(s,["outputDimensionality"]);if(e!==void 0&&d!=null&&g(e,["requests[]","outputDimensionality"],d),x(s,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(s,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function IT(s,e,n){const i={},r=x(s,["taskType"]);e!==void 0&&r!=null&&g(e,["instances[]","task_type"],r);const o=x(s,["title"]);e!==void 0&&o!=null&&g(e,["instances[]","title"],o);const d=x(s,["outputDimensionality"]);e!==void 0&&d!=null&&g(e,["parameters","outputDimensionality"],d);const u=x(s,["mimeType"]);e!==void 0&&u!=null&&g(e,["instances[]","mimeType"],u);const p=x(s,["autoTruncate"]);return e!==void 0&&p!=null&&g(e,["parameters","autoTruncate"],p),i}function RT(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["contents"]);if(o!=null){let p=Ch(s,o);Array.isArray(p)&&(p=p.map(m=>m)),g(i,["requests[]","content"],p)}const d=x(e,["config"]);d!=null&&AT(d,i);const u=x(e,["model"]);return u!==void 0&&g(i,["requests[]","model"],It(s,u)),i}function MT(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["contents"]);if(o!=null){let u=Ch(s,o);Array.isArray(u)&&(u=u.map(p=>p)),g(i,["instances[]","content"],u)}const d=x(e,["config"]);return d!=null&&IT(d,i),i}function DT(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["embeddings"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>u)),g(n,["embeddings"],d)}const o=x(s,["metadata"]);return o!=null&&g(n,["metadata"],o),n}function OT(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["predictions[]","embeddings"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>fT(u))),g(n,["embeddings"],d)}const o=x(s,["metadata"]);return o!=null&&g(n,["metadata"],o),n}function UT(s,e){const n={},i=x(s,["endpoint"]);i!=null&&g(n,["name"],i);const r=x(s,["deployedModelId"]);return r!=null&&g(n,["deployedModelId"],r),n}function LT(s,e){const n={};if(x(s,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=x(s,["fileUri"]);i!=null&&g(n,["fileUri"],i);const r=x(s,["mimeType"]);return r!=null&&g(n,["mimeType"],r),n}function BT(s,e){const n={},i=x(s,["id"]);i!=null&&g(n,["id"],i);const r=x(s,["args"]);r!=null&&g(n,["args"],r);const o=x(s,["name"]);if(o!=null&&g(n,["name"],o),x(s,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(s,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function PT(s,e){const n={},i=x(s,["allowedFunctionNames"]);i!=null&&g(n,["allowedFunctionNames"],i);const r=x(s,["mode"]);if(r!=null&&g(n,["mode"],r),x(s,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function GT(s,e){const n={},i=x(s,["description"]);i!=null&&g(n,["description"],i);const r=x(s,["name"]);r!=null&&g(n,["name"],r);const o=x(s,["parameters"]);o!=null&&g(n,["parameters"],o);const d=x(s,["parametersJsonSchema"]);d!=null&&g(n,["parametersJsonSchema"],d);const u=x(s,["response"]);u!=null&&g(n,["response"],u);const p=x(s,["responseJsonSchema"]);if(p!=null&&g(n,["responseJsonSchema"],p),x(s,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function $T(s,e,n,i){const r={},o=x(e,["systemInstruction"]);n!==void 0&&o!=null&&g(n,["systemInstruction"],mc(Ls(o)));const d=x(e,["temperature"]);d!=null&&g(r,["temperature"],d);const u=x(e,["topP"]);u!=null&&g(r,["topP"],u);const p=x(e,["topK"]);p!=null&&g(r,["topK"],p);const m=x(e,["candidateCount"]);m!=null&&g(r,["candidateCount"],m);const f=x(e,["maxOutputTokens"]);f!=null&&g(r,["maxOutputTokens"],f);const b=x(e,["stopSequences"]);b!=null&&g(r,["stopSequences"],b);const y=x(e,["responseLogprobs"]);y!=null&&g(r,["responseLogprobs"],y);const N=x(e,["logprobs"]);N!=null&&g(r,["logprobs"],N);const k=x(e,["presencePenalty"]);k!=null&&g(r,["presencePenalty"],k);const T=x(e,["frequencyPenalty"]);T!=null&&g(r,["frequencyPenalty"],T);const S=x(e,["seed"]);S!=null&&g(r,["seed"],S);const R=x(e,["responseMimeType"]);R!=null&&g(r,["responseMimeType"],R);const A=x(e,["responseSchema"]);A!=null&&g(r,["responseSchema"],Eh(A));const I=x(e,["responseJsonSchema"]);if(I!=null&&g(r,["responseJsonSchema"],I),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=x(e,["safetySettings"]);if(n!==void 0&&j!=null){let ee=j;Array.isArray(ee)&&(ee=ee.map(se=>IC(se))),g(n,["safetySettings"],ee)}const E=x(e,["tools"]);if(n!==void 0&&E!=null){let ee=dl(E);Array.isArray(ee)&&(ee=ee.map(se=>BC(cl(se)))),g(n,["tools"],ee)}const D=x(e,["toolConfig"]);if(n!==void 0&&D!=null&&g(n,["toolConfig"],LC(D)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=x(e,["cachedContent"]);n!==void 0&&L!=null&&g(n,["cachedContent"],ha(s,L));const G=x(e,["responseModalities"]);G!=null&&g(r,["responseModalities"],G);const Y=x(e,["mediaResolution"]);Y!=null&&g(r,["mediaResolution"],Y);const q=x(e,["speechConfig"]);if(q!=null&&g(r,["speechConfig"],Ah(q)),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ce=x(e,["thinkingConfig"]);ce!=null&&g(r,["thinkingConfig"],ce);const Q=x(e,["imageConfig"]);Q!=null&&g(r,["imageConfig"],fC(Q));const ne=x(e,["enableEnhancedCivicAnswers"]);if(ne!=null&&g(r,["enableEnhancedCivicAnswers"],ne),x(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function FT(s,e,n,i){const r={},o=x(e,["systemInstruction"]);n!==void 0&&o!=null&&g(n,["systemInstruction"],Ls(o));const d=x(e,["temperature"]);d!=null&&g(r,["temperature"],d);const u=x(e,["topP"]);u!=null&&g(r,["topP"],u);const p=x(e,["topK"]);p!=null&&g(r,["topK"],p);const m=x(e,["candidateCount"]);m!=null&&g(r,["candidateCount"],m);const f=x(e,["maxOutputTokens"]);f!=null&&g(r,["maxOutputTokens"],f);const b=x(e,["stopSequences"]);b!=null&&g(r,["stopSequences"],b);const y=x(e,["responseLogprobs"]);y!=null&&g(r,["responseLogprobs"],y);const N=x(e,["logprobs"]);N!=null&&g(r,["logprobs"],N);const k=x(e,["presencePenalty"]);k!=null&&g(r,["presencePenalty"],k);const T=x(e,["frequencyPenalty"]);T!=null&&g(r,["frequencyPenalty"],T);const S=x(e,["seed"]);S!=null&&g(r,["seed"],S);const R=x(e,["responseMimeType"]);R!=null&&g(r,["responseMimeType"],R);const A=x(e,["responseSchema"]);A!=null&&g(r,["responseSchema"],Eh(A));const I=x(e,["responseJsonSchema"]);I!=null&&g(r,["responseJsonSchema"],I);const j=x(e,["routingConfig"]);j!=null&&g(r,["routingConfig"],j);const E=x(e,["modelSelectionConfig"]);E!=null&&g(r,["modelConfig"],E);const D=x(e,["safetySettings"]);if(n!==void 0&&D!=null){let Z=D;Array.isArray(Z)&&(Z=Z.map(Ne=>Ne)),g(n,["safetySettings"],Z)}const L=x(e,["tools"]);if(n!==void 0&&L!=null){let Z=dl(L);Array.isArray(Z)&&(Z=Z.map(Ne=>zb(cl(Ne)))),g(n,["tools"],Z)}const G=x(e,["toolConfig"]);n!==void 0&&G!=null&&g(n,["toolConfig"],G);const Y=x(e,["labels"]);n!==void 0&&Y!=null&&g(n,["labels"],Y);const q=x(e,["cachedContent"]);n!==void 0&&q!=null&&g(n,["cachedContent"],ha(s,q));const ce=x(e,["responseModalities"]);ce!=null&&g(r,["responseModalities"],ce);const Q=x(e,["mediaResolution"]);Q!=null&&g(r,["mediaResolution"],Q);const ne=x(e,["speechConfig"]);ne!=null&&g(r,["speechConfig"],Ah(ne));const ee=x(e,["audioTimestamp"]);ee!=null&&g(r,["audioTimestamp"],ee);const se=x(e,["thinkingConfig"]);se!=null&&g(r,["thinkingConfig"],se);const M=x(e,["imageConfig"]);if(M!=null&&g(r,["imageConfig"],pC(M)),x(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const B=x(e,["modelArmorConfig"]);return n!==void 0&&B!=null&&g(n,["modelArmorConfig"],B),r}function kg(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["contents"]);if(o!=null){let u=wn(o);Array.isArray(u)&&(u=u.map(p=>mc(p))),g(i,["contents"],u)}const d=x(e,["config"]);return d!=null&&g(i,["generationConfig"],$T(s,d,i)),i}function Sg(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["contents"]);if(o!=null){let u=wn(o);Array.isArray(u)&&(u=u.map(p=>p)),g(i,["contents"],u)}const d=x(e,["config"]);return d!=null&&g(i,["generationConfig"],FT(s,d,i)),i}function _g(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(f=>dT(f))),g(n,["candidates"],m)}const o=x(s,["modelVersion"]);o!=null&&g(n,["modelVersion"],o);const d=x(s,["promptFeedback"]);d!=null&&g(n,["promptFeedback"],d);const u=x(s,["responseId"]);u!=null&&g(n,["responseId"],u);const p=x(s,["usageMetadata"]);return p!=null&&g(n,["usageMetadata"],p),n}function Tg(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(b=>b)),g(n,["candidates"],f)}const o=x(s,["createTime"]);o!=null&&g(n,["createTime"],o);const d=x(s,["modelVersion"]);d!=null&&g(n,["modelVersion"],d);const u=x(s,["promptFeedback"]);u!=null&&g(n,["promptFeedback"],u);const p=x(s,["responseId"]);p!=null&&g(n,["responseId"],p);const m=x(s,["usageMetadata"]);return m!=null&&g(n,["usageMetadata"],m),n}function HT(s,e,n){const i={};if(x(s,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(s,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=x(s,["numberOfImages"]);e!==void 0&&r!=null&&g(e,["parameters","sampleCount"],r);const o=x(s,["aspectRatio"]);e!==void 0&&o!=null&&g(e,["parameters","aspectRatio"],o);const d=x(s,["guidanceScale"]);if(e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d),x(s,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=x(s,["safetyFilterLevel"]);e!==void 0&&u!=null&&g(e,["parameters","safetySetting"],u);const p=x(s,["personGeneration"]);e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p);const m=x(s,["includeSafetyAttributes"]);e!==void 0&&m!=null&&g(e,["parameters","includeSafetyAttributes"],m);const f=x(s,["includeRaiReason"]);e!==void 0&&f!=null&&g(e,["parameters","includeRaiReason"],f);const b=x(s,["language"]);e!==void 0&&b!=null&&g(e,["parameters","language"],b);const y=x(s,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);const N=x(s,["outputCompressionQuality"]);if(e!==void 0&&N!=null&&g(e,["parameters","outputOptions","compressionQuality"],N),x(s,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(s,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=x(s,["imageSize"]);if(e!==void 0&&k!=null&&g(e,["parameters","sampleImageSize"],k),x(s,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function qT(s,e,n){const i={},r=x(s,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const o=x(s,["negativePrompt"]);e!==void 0&&o!=null&&g(e,["parameters","negativePrompt"],o);const d=x(s,["numberOfImages"]);e!==void 0&&d!=null&&g(e,["parameters","sampleCount"],d);const u=x(s,["aspectRatio"]);e!==void 0&&u!=null&&g(e,["parameters","aspectRatio"],u);const p=x(s,["guidanceScale"]);e!==void 0&&p!=null&&g(e,["parameters","guidanceScale"],p);const m=x(s,["seed"]);e!==void 0&&m!=null&&g(e,["parameters","seed"],m);const f=x(s,["safetyFilterLevel"]);e!==void 0&&f!=null&&g(e,["parameters","safetySetting"],f);const b=x(s,["personGeneration"]);e!==void 0&&b!=null&&g(e,["parameters","personGeneration"],b);const y=x(s,["includeSafetyAttributes"]);e!==void 0&&y!=null&&g(e,["parameters","includeSafetyAttributes"],y);const N=x(s,["includeRaiReason"]);e!==void 0&&N!=null&&g(e,["parameters","includeRaiReason"],N);const k=x(s,["language"]);e!==void 0&&k!=null&&g(e,["parameters","language"],k);const T=x(s,["outputMimeType"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","mimeType"],T);const S=x(s,["outputCompressionQuality"]);e!==void 0&&S!=null&&g(e,["parameters","outputOptions","compressionQuality"],S);const R=x(s,["addWatermark"]);e!==void 0&&R!=null&&g(e,["parameters","addWatermark"],R);const A=x(s,["labels"]);e!==void 0&&A!=null&&g(e,["labels"],A);const I=x(s,["imageSize"]);e!==void 0&&I!=null&&g(e,["parameters","sampleImageSize"],I);const j=x(s,["enhancePrompt"]);return e!==void 0&&j!=null&&g(e,["parameters","enhancePrompt"],j),i}function VT(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["prompt"]);o!=null&&g(i,["instances[0]","prompt"],o);const d=x(e,["config"]);return d!=null&&HT(d,i),i}function zT(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["prompt"]);o!=null&&g(i,["instances[0]","prompt"],o);const d=x(e,["config"]);return d!=null&&qT(d,i),i}function WT(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["predictions"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>iC(u))),g(n,["generatedImages"],d)}const o=x(s,["positivePromptSafetyAttributes"]);return o!=null&&g(n,["positivePromptSafetyAttributes"],qb(o)),n}function JT(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["predictions"]);if(r!=null){let d=r;Array.isArray(d)&&(d=d.map(u=>fc(u))),g(n,["generatedImages"],d)}const o=x(s,["positivePromptSafetyAttributes"]);return o!=null&&g(n,["positivePromptSafetyAttributes"],Vb(o)),n}function YT(s,e,n){const i={},r=x(s,["numberOfVideos"]);if(e!==void 0&&r!=null&&g(e,["parameters","sampleCount"],r),x(s,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(s,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const o=x(s,["durationSeconds"]);if(e!==void 0&&o!=null&&g(e,["parameters","durationSeconds"],o),x(s,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=x(s,["aspectRatio"]);e!==void 0&&d!=null&&g(e,["parameters","aspectRatio"],d);const u=x(s,["resolution"]);e!==void 0&&u!=null&&g(e,["parameters","resolution"],u);const p=x(s,["personGeneration"]);if(e!==void 0&&p!=null&&g(e,["parameters","personGeneration"],p),x(s,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=x(s,["negativePrompt"]);e!==void 0&&m!=null&&g(e,["parameters","negativePrompt"],m);const f=x(s,["enhancePrompt"]);if(e!==void 0&&f!=null&&g(e,["parameters","enhancePrompt"],f),x(s,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const b=x(s,["lastFrame"]);e!==void 0&&b!=null&&g(e,["instances[0]","lastFrame"],pc(b));const y=x(s,["referenceImages"]);if(e!==void 0&&y!=null){let N=y;Array.isArray(N)&&(N=N.map(k=>XC(k))),g(e,["instances[0]","referenceImages"],N)}if(x(s,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(x(s,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function KT(s,e,n){const i={},r=x(s,["numberOfVideos"]);e!==void 0&&r!=null&&g(e,["parameters","sampleCount"],r);const o=x(s,["outputGcsUri"]);e!==void 0&&o!=null&&g(e,["parameters","storageUri"],o);const d=x(s,["fps"]);e!==void 0&&d!=null&&g(e,["parameters","fps"],d);const u=x(s,["durationSeconds"]);e!==void 0&&u!=null&&g(e,["parameters","durationSeconds"],u);const p=x(s,["seed"]);e!==void 0&&p!=null&&g(e,["parameters","seed"],p);const m=x(s,["aspectRatio"]);e!==void 0&&m!=null&&g(e,["parameters","aspectRatio"],m);const f=x(s,["resolution"]);e!==void 0&&f!=null&&g(e,["parameters","resolution"],f);const b=x(s,["personGeneration"]);e!==void 0&&b!=null&&g(e,["parameters","personGeneration"],b);const y=x(s,["pubsubTopic"]);e!==void 0&&y!=null&&g(e,["parameters","pubsubTopic"],y);const N=x(s,["negativePrompt"]);e!==void 0&&N!=null&&g(e,["parameters","negativePrompt"],N);const k=x(s,["enhancePrompt"]);e!==void 0&&k!=null&&g(e,["parameters","enhancePrompt"],k);const T=x(s,["generateAudio"]);e!==void 0&&T!=null&&g(e,["parameters","generateAudio"],T);const S=x(s,["lastFrame"]);e!==void 0&&S!=null&&g(e,["instances[0]","lastFrame"],Un(S));const R=x(s,["referenceImages"]);if(e!==void 0&&R!=null){let j=R;Array.isArray(j)&&(j=j.map(E=>QC(E))),g(e,["instances[0]","referenceImages"],j)}const A=x(s,["mask"]);e!==void 0&&A!=null&&g(e,["instances[0]","mask"],KC(A));const I=x(s,["compressionQuality"]);return e!==void 0&&I!=null&&g(e,["parameters","compressionQuality"],I),i}function XT(s,e){const n={},i=x(s,["name"]);i!=null&&g(n,["name"],i);const r=x(s,["metadata"]);r!=null&&g(n,["metadata"],r);const o=x(s,["done"]);o!=null&&g(n,["done"],o);const d=x(s,["error"]);d!=null&&g(n,["error"],d);const u=x(s,["response","generateVideoResponse"]);return u!=null&&g(n,["response"],tC(u)),n}function QT(s,e){const n={},i=x(s,["name"]);i!=null&&g(n,["name"],i);const r=x(s,["metadata"]);r!=null&&g(n,["metadata"],r);const o=x(s,["done"]);o!=null&&g(n,["done"],o);const d=x(s,["error"]);d!=null&&g(n,["error"],d);const u=x(s,["response"]);return u!=null&&g(n,["response"],sC(u)),n}function ZT(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["prompt"]);o!=null&&g(i,["instances[0]","prompt"],o);const d=x(e,["image"]);d!=null&&g(i,["instances[0]","image"],pc(d));const u=x(e,["video"]);u!=null&&g(i,["instances[0]","video"],Wb(u));const p=x(e,["source"]);p!=null&&nC(p,i);const m=x(e,["config"]);return m!=null&&YT(m,i),i}function eC(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["prompt"]);o!=null&&g(i,["instances[0]","prompt"],o);const d=x(e,["image"]);d!=null&&g(i,["instances[0]","image"],Un(d));const u=x(e,["video"]);u!=null&&g(i,["instances[0]","video"],Jb(u));const p=x(e,["source"]);p!=null&&aC(p,i);const m=x(e,["config"]);return m!=null&&KT(m,i),i}function tC(s,e){const n={},i=x(s,["generatedSamples"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(u=>rC(u))),g(n,["generatedVideos"],d)}const r=x(s,["raiMediaFilteredCount"]);r!=null&&g(n,["raiMediaFilteredCount"],r);const o=x(s,["raiMediaFilteredReasons"]);return o!=null&&g(n,["raiMediaFilteredReasons"],o),n}function sC(s,e){const n={},i=x(s,["videos"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(u=>oC(u))),g(n,["generatedVideos"],d)}const r=x(s,["raiMediaFilteredCount"]);r!=null&&g(n,["raiMediaFilteredCount"],r);const o=x(s,["raiMediaFilteredReasons"]);return o!=null&&g(n,["raiMediaFilteredReasons"],o),n}function nC(s,e,n){const i={},r=x(s,["prompt"]);e!==void 0&&r!=null&&g(e,["instances[0]","prompt"],r);const o=x(s,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],pc(o));const d=x(s,["video"]);return e!==void 0&&d!=null&&g(e,["instances[0]","video"],Wb(d)),i}function aC(s,e,n){const i={},r=x(s,["prompt"]);e!==void 0&&r!=null&&g(e,["instances[0]","prompt"],r);const o=x(s,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Un(o));const d=x(s,["video"]);return e!==void 0&&d!=null&&g(e,["instances[0]","video"],Jb(d)),i}function iC(s,e){const n={},i=x(s,["_self"]);i!=null&&g(n,["image"],xC(i));const r=x(s,["raiFilteredReason"]);r!=null&&g(n,["raiFilteredReason"],r);const o=x(s,["_self"]);return o!=null&&g(n,["safetyAttributes"],qb(o)),n}function fc(s,e){const n={},i=x(s,["_self"]);i!=null&&g(n,["image"],Hb(i));const r=x(s,["raiFilteredReason"]);r!=null&&g(n,["raiFilteredReason"],r);const o=x(s,["_self"]);o!=null&&g(n,["safetyAttributes"],Vb(o));const d=x(s,["prompt"]);return d!=null&&g(n,["enhancedPrompt"],d),n}function lC(s,e){const n={},i=x(s,["_self"]);i!=null&&g(n,["mask"],Hb(i));const r=x(s,["labels"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),g(n,["labels"],o)}return n}function rC(s,e){const n={},i=x(s,["video"]);return i!=null&&g(n,["video"],JC(i)),n}function oC(s,e){const n={},i=x(s,["_self"]);return i!=null&&g(n,["video"],YC(i)),n}function cC(s,e){const n={},i=x(s,["modelSelectionConfig"]);i!=null&&g(n,["modelConfig"],i);const r=x(s,["responseJsonSchema"]);r!=null&&g(n,["responseJsonSchema"],r);const o=x(s,["audioTimestamp"]);o!=null&&g(n,["audioTimestamp"],o);const d=x(s,["candidateCount"]);d!=null&&g(n,["candidateCount"],d);const u=x(s,["enableAffectiveDialog"]);u!=null&&g(n,["enableAffectiveDialog"],u);const p=x(s,["frequencyPenalty"]);p!=null&&g(n,["frequencyPenalty"],p);const m=x(s,["logprobs"]);m!=null&&g(n,["logprobs"],m);const f=x(s,["maxOutputTokens"]);f!=null&&g(n,["maxOutputTokens"],f);const b=x(s,["mediaResolution"]);b!=null&&g(n,["mediaResolution"],b);const y=x(s,["presencePenalty"]);y!=null&&g(n,["presencePenalty"],y);const N=x(s,["responseLogprobs"]);N!=null&&g(n,["responseLogprobs"],N);const k=x(s,["responseMimeType"]);k!=null&&g(n,["responseMimeType"],k);const T=x(s,["responseModalities"]);T!=null&&g(n,["responseModalities"],T);const S=x(s,["responseSchema"]);S!=null&&g(n,["responseSchema"],S);const R=x(s,["routingConfig"]);R!=null&&g(n,["routingConfig"],R);const A=x(s,["seed"]);A!=null&&g(n,["seed"],A);const I=x(s,["speechConfig"]);I!=null&&g(n,["speechConfig"],I);const j=x(s,["stopSequences"]);j!=null&&g(n,["stopSequences"],j);const E=x(s,["temperature"]);E!=null&&g(n,["temperature"],E);const D=x(s,["thinkingConfig"]);D!=null&&g(n,["thinkingConfig"],D);const L=x(s,["topK"]);L!=null&&g(n,["topK"],L);const G=x(s,["topP"]);if(G!=null&&g(n,["topP"],G),x(s,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function dC(s,e,n){const i={},r=x(e,["model"]);return r!=null&&g(i,["_url","name"],It(s,r)),i}function uC(s,e,n){const i={},r=x(e,["model"]);return r!=null&&g(i,["_url","name"],It(s,r)),i}function hC(s,e){const n={};if(x(s,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=x(s,["enableWidget"]);return i!=null&&g(n,["enableWidget"],i),n}function mC(s,e){const n={};if(x(s,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(s,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=x(s,["timeRangeFilter"]);return i!=null&&g(n,["timeRangeFilter"],i),n}function fC(s,e){const n={},i=x(s,["aspectRatio"]);i!=null&&g(n,["aspectRatio"],i);const r=x(s,["imageSize"]);if(r!=null&&g(n,["imageSize"],r),x(s,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(x(s,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(x(s,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function pC(s,e){const n={},i=x(s,["aspectRatio"]);i!=null&&g(n,["aspectRatio"],i);const r=x(s,["imageSize"]);r!=null&&g(n,["imageSize"],r);const o=x(s,["personGeneration"]);o!=null&&g(n,["personGeneration"],o);const d=x(s,["outputMimeType"]);d!=null&&g(n,["imageOutputOptions","mimeType"],d);const u=x(s,["outputCompressionQuality"]);return u!=null&&g(n,["imageOutputOptions","compressionQuality"],u),n}function xC(s,e){const n={},i=x(s,["bytesBase64Encoded"]);i!=null&&g(n,["imageBytes"],Ba(i));const r=x(s,["mimeType"]);return r!=null&&g(n,["mimeType"],r),n}function Hb(s,e){const n={},i=x(s,["gcsUri"]);i!=null&&g(n,["gcsUri"],i);const r=x(s,["bytesBase64Encoded"]);r!=null&&g(n,["imageBytes"],Ba(r));const o=x(s,["mimeType"]);return o!=null&&g(n,["mimeType"],o),n}function pc(s,e){const n={};if(x(s,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=x(s,["imageBytes"]);i!=null&&g(n,["bytesBase64Encoded"],Ba(i));const r=x(s,["mimeType"]);return r!=null&&g(n,["mimeType"],r),n}function Un(s,e){const n={},i=x(s,["gcsUri"]);i!=null&&g(n,["gcsUri"],i);const r=x(s,["imageBytes"]);r!=null&&g(n,["bytesBase64Encoded"],Ba(r));const o=x(s,["mimeType"]);return o!=null&&g(n,["mimeType"],o),n}function gC(s,e,n,i){const r={},o=x(e,["pageSize"]);n!==void 0&&o!=null&&g(n,["_query","pageSize"],o);const d=x(e,["pageToken"]);n!==void 0&&d!=null&&g(n,["_query","pageToken"],d);const u=x(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const p=x(e,["queryBase"]);return n!==void 0&&p!=null&&g(n,["_url","models_url"],Ub(s,p)),r}function bC(s,e,n,i){const r={},o=x(e,["pageSize"]);n!==void 0&&o!=null&&g(n,["_query","pageSize"],o);const d=x(e,["pageToken"]);n!==void 0&&d!=null&&g(n,["_query","pageToken"],d);const u=x(e,["filter"]);n!==void 0&&u!=null&&g(n,["_query","filter"],u);const p=x(e,["queryBase"]);return n!==void 0&&p!=null&&g(n,["_url","models_url"],Ub(s,p)),r}function vC(s,e,n){const i={},r=x(e,["config"]);return r!=null&&gC(s,r,i),i}function yC(s,e,n){const i={},r=x(e,["config"]);return r!=null&&bC(s,r,i),i}function wC(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["nextPageToken"]);r!=null&&g(n,["nextPageToken"],r);const o=x(s,["_self"]);if(o!=null){let d=Lb(o);Array.isArray(d)&&(d=d.map(u=>uh(u))),g(n,["models"],d)}return n}function NC(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["nextPageToken"]);r!=null&&g(n,["nextPageToken"],r);const o=x(s,["_self"]);if(o!=null){let d=Lb(o);Array.isArray(d)&&(d=d.map(u=>hh(u))),g(n,["models"],d)}return n}function jC(s,e){const n={},i=x(s,["maskMode"]);i!=null&&g(n,["maskMode"],i);const r=x(s,["segmentationClasses"]);r!=null&&g(n,["maskClasses"],r);const o=x(s,["maskDilation"]);return o!=null&&g(n,["dilation"],o),n}function uh(s,e){const n={},i=x(s,["name"]);i!=null&&g(n,["name"],i);const r=x(s,["displayName"]);r!=null&&g(n,["displayName"],r);const o=x(s,["description"]);o!=null&&g(n,["description"],o);const d=x(s,["version"]);d!=null&&g(n,["version"],d);const u=x(s,["_self"]);u!=null&&g(n,["tunedModelInfo"],PC(u));const p=x(s,["inputTokenLimit"]);p!=null&&g(n,["inputTokenLimit"],p);const m=x(s,["outputTokenLimit"]);m!=null&&g(n,["outputTokenLimit"],m);const f=x(s,["supportedGenerationMethods"]);f!=null&&g(n,["supportedActions"],f);const b=x(s,["temperature"]);b!=null&&g(n,["temperature"],b);const y=x(s,["maxTemperature"]);y!=null&&g(n,["maxTemperature"],y);const N=x(s,["topP"]);N!=null&&g(n,["topP"],N);const k=x(s,["topK"]);k!=null&&g(n,["topK"],k);const T=x(s,["thinking"]);return T!=null&&g(n,["thinking"],T),n}function hh(s,e){const n={},i=x(s,["name"]);i!=null&&g(n,["name"],i);const r=x(s,["displayName"]);r!=null&&g(n,["displayName"],r);const o=x(s,["description"]);o!=null&&g(n,["description"],o);const d=x(s,["versionId"]);d!=null&&g(n,["version"],d);const u=x(s,["deployedModels"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(N=>UT(N))),g(n,["endpoints"],y)}const p=x(s,["labels"]);p!=null&&g(n,["labels"],p);const m=x(s,["_self"]);m!=null&&g(n,["tunedModelInfo"],GC(m));const f=x(s,["defaultCheckpointId"]);f!=null&&g(n,["defaultCheckpointId"],f);const b=x(s,["checkpoints"]);if(b!=null){let y=b;Array.isArray(y)&&(y=y.map(N=>N)),g(n,["checkpoints"],y)}return n}function kC(s,e){const n={},i=x(s,["mediaResolution"]);i!=null&&g(n,["mediaResolution"],i);const r=x(s,["codeExecutionResult"]);r!=null&&g(n,["codeExecutionResult"],r);const o=x(s,["executableCode"]);o!=null&&g(n,["executableCode"],o);const d=x(s,["fileData"]);d!=null&&g(n,["fileData"],LT(d));const u=x(s,["functionCall"]);u!=null&&g(n,["functionCall"],BT(u));const p=x(s,["functionResponse"]);p!=null&&g(n,["functionResponse"],p);const m=x(s,["inlineData"]);m!=null&&g(n,["inlineData"],cT(m));const f=x(s,["text"]);f!=null&&g(n,["text"],f);const b=x(s,["thought"]);b!=null&&g(n,["thought"],b);const y=x(s,["thoughtSignature"]);y!=null&&g(n,["thoughtSignature"],y);const N=x(s,["videoMetadata"]);return N!=null&&g(n,["videoMetadata"],N),n}function SC(s,e){const n={},i=x(s,["productImage"]);return i!=null&&g(n,["image"],Un(i)),n}function _C(s,e,n){const i={},r=x(s,["numberOfImages"]);e!==void 0&&r!=null&&g(e,["parameters","sampleCount"],r);const o=x(s,["baseSteps"]);e!==void 0&&o!=null&&g(e,["parameters","baseSteps"],o);const d=x(s,["outputGcsUri"]);e!==void 0&&d!=null&&g(e,["parameters","storageUri"],d);const u=x(s,["seed"]);e!==void 0&&u!=null&&g(e,["parameters","seed"],u);const p=x(s,["safetyFilterLevel"]);e!==void 0&&p!=null&&g(e,["parameters","safetySetting"],p);const m=x(s,["personGeneration"]);e!==void 0&&m!=null&&g(e,["parameters","personGeneration"],m);const f=x(s,["addWatermark"]);e!==void 0&&f!=null&&g(e,["parameters","addWatermark"],f);const b=x(s,["outputMimeType"]);e!==void 0&&b!=null&&g(e,["parameters","outputOptions","mimeType"],b);const y=x(s,["outputCompressionQuality"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","compressionQuality"],y);const N=x(s,["enhancePrompt"]);e!==void 0&&N!=null&&g(e,["parameters","enhancePrompt"],N);const k=x(s,["labels"]);return e!==void 0&&k!=null&&g(e,["labels"],k),i}function TC(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["source"]);o!=null&&EC(o,i);const d=x(e,["config"]);return d!=null&&_C(d,i),i}function CC(s,e){const n={},i=x(s,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>fc(o))),g(n,["generatedImages"],r)}return n}function EC(s,e,n){const i={},r=x(s,["prompt"]);e!==void 0&&r!=null&&g(e,["instances[0]","prompt"],r);const o=x(s,["personImage"]);e!==void 0&&o!=null&&g(e,["instances[0]","personImage","image"],Un(o));const d=x(s,["productImages"]);if(e!==void 0&&d!=null){let u=d;Array.isArray(u)&&(u=u.map(p=>SC(p))),g(e,["instances[0]","productImages"],u)}return i}function AC(s,e){const n={},i=x(s,["referenceImage"]);i!=null&&g(n,["referenceImage"],Un(i));const r=x(s,["referenceId"]);r!=null&&g(n,["referenceId"],r);const o=x(s,["referenceType"]);o!=null&&g(n,["referenceType"],o);const d=x(s,["maskImageConfig"]);d!=null&&g(n,["maskImageConfig"],jC(d));const u=x(s,["controlImageConfig"]);u!=null&&g(n,["controlImageConfig"],xT(u));const p=x(s,["styleImageConfig"]);p!=null&&g(n,["styleImageConfig"],p);const m=x(s,["subjectImageConfig"]);return m!=null&&g(n,["subjectImageConfig"],m),n}function qb(s,e){const n={},i=x(s,["safetyAttributes","categories"]);i!=null&&g(n,["categories"],i);const r=x(s,["safetyAttributes","scores"]);r!=null&&g(n,["scores"],r);const o=x(s,["contentType"]);return o!=null&&g(n,["contentType"],o),n}function Vb(s,e){const n={},i=x(s,["safetyAttributes","categories"]);i!=null&&g(n,["categories"],i);const r=x(s,["safetyAttributes","scores"]);r!=null&&g(n,["scores"],r);const o=x(s,["contentType"]);return o!=null&&g(n,["contentType"],o),n}function IC(s,e){const n={},i=x(s,["category"]);if(i!=null&&g(n,["category"],i),x(s,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(s,["threshold"]);return r!=null&&g(n,["threshold"],r),n}function RC(s,e){const n={},i=x(s,["image"]);return i!=null&&g(n,["image"],Un(i)),n}function MC(s,e,n){const i={},r=x(s,["mode"]);e!==void 0&&r!=null&&g(e,["parameters","mode"],r);const o=x(s,["maxPredictions"]);e!==void 0&&o!=null&&g(e,["parameters","maxPredictions"],o);const d=x(s,["confidenceThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","confidenceThreshold"],d);const u=x(s,["maskDilation"]);e!==void 0&&u!=null&&g(e,["parameters","maskDilation"],u);const p=x(s,["binaryColorThreshold"]);e!==void 0&&p!=null&&g(e,["parameters","binaryColorThreshold"],p);const m=x(s,["labels"]);return e!==void 0&&m!=null&&g(e,["labels"],m),i}function DC(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["source"]);o!=null&&UC(o,i);const d=x(e,["config"]);return d!=null&&MC(d,i),i}function OC(s,e){const n={},i=x(s,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>lC(o))),g(n,["generatedMasks"],r)}return n}function UC(s,e,n){const i={},r=x(s,["prompt"]);e!==void 0&&r!=null&&g(e,["instances[0]","prompt"],r);const o=x(s,["image"]);e!==void 0&&o!=null&&g(e,["instances[0]","image"],Un(o));const d=x(s,["scribbleImage"]);return e!==void 0&&d!=null&&g(e,["instances[0]","scribble"],RC(d)),i}function LC(s,e){const n={},i=x(s,["retrievalConfig"]);i!=null&&g(n,["retrievalConfig"],i);const r=x(s,["functionCallingConfig"]);return r!=null&&g(n,["functionCallingConfig"],PT(r)),n}function BC(s,e){const n={};if(x(s,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=x(s,["computerUse"]);i!=null&&g(n,["computerUse"],i);const r=x(s,["fileSearch"]);r!=null&&g(n,["fileSearch"],r);const o=x(s,["codeExecution"]);if(o!=null&&g(n,["codeExecution"],o),x(s,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=x(s,["functionDeclarations"]);if(d!=null){let b=d;Array.isArray(b)&&(b=b.map(y=>y)),g(n,["functionDeclarations"],b)}const u=x(s,["googleMaps"]);u!=null&&g(n,["googleMaps"],hC(u));const p=x(s,["googleSearch"]);p!=null&&g(n,["googleSearch"],mC(p));const m=x(s,["googleSearchRetrieval"]);m!=null&&g(n,["googleSearchRetrieval"],m);const f=x(s,["urlContext"]);return f!=null&&g(n,["urlContext"],f),n}function zb(s,e){const n={},i=x(s,["retrieval"]);i!=null&&g(n,["retrieval"],i);const r=x(s,["computerUse"]);if(r!=null&&g(n,["computerUse"],r),x(s,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=x(s,["codeExecution"]);o!=null&&g(n,["codeExecution"],o);const d=x(s,["enterpriseWebSearch"]);d!=null&&g(n,["enterpriseWebSearch"],d);const u=x(s,["functionDeclarations"]);if(u!=null){let y=u;Array.isArray(y)&&(y=y.map(N=>GT(N))),g(n,["functionDeclarations"],y)}const p=x(s,["googleMaps"]);p!=null&&g(n,["googleMaps"],p);const m=x(s,["googleSearch"]);m!=null&&g(n,["googleSearch"],m);const f=x(s,["googleSearchRetrieval"]);f!=null&&g(n,["googleSearchRetrieval"],f);const b=x(s,["urlContext"]);return b!=null&&g(n,["urlContext"],b),n}function PC(s,e){const n={},i=x(s,["baseModel"]);i!=null&&g(n,["baseModel"],i);const r=x(s,["createTime"]);r!=null&&g(n,["createTime"],r);const o=x(s,["updateTime"]);return o!=null&&g(n,["updateTime"],o),n}function GC(s,e){const n={},i=x(s,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&g(n,["baseModel"],i);const r=x(s,["createTime"]);r!=null&&g(n,["createTime"],r);const o=x(s,["updateTime"]);return o!=null&&g(n,["updateTime"],o),n}function $C(s,e,n){const i={},r=x(s,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const o=x(s,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const d=x(s,["defaultCheckpointId"]);return e!==void 0&&d!=null&&g(e,["defaultCheckpointId"],d),i}function FC(s,e,n){const i={},r=x(s,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const o=x(s,["description"]);e!==void 0&&o!=null&&g(e,["description"],o);const d=x(s,["defaultCheckpointId"]);return e!==void 0&&d!=null&&g(e,["defaultCheckpointId"],d),i}function HC(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","name"],It(s,r));const o=x(e,["config"]);return o!=null&&$C(o,i),i}function qC(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["config"]);return o!=null&&FC(o,i),i}function VC(s,e,n){const i={},r=x(s,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const o=x(s,["safetyFilterLevel"]);e!==void 0&&o!=null&&g(e,["parameters","safetySetting"],o);const d=x(s,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const u=x(s,["includeRaiReason"]);e!==void 0&&u!=null&&g(e,["parameters","includeRaiReason"],u);const p=x(s,["outputMimeType"]);e!==void 0&&p!=null&&g(e,["parameters","outputOptions","mimeType"],p);const m=x(s,["outputCompressionQuality"]);e!==void 0&&m!=null&&g(e,["parameters","outputOptions","compressionQuality"],m);const f=x(s,["enhanceInputImage"]);e!==void 0&&f!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],f);const b=x(s,["imagePreservationFactor"]);e!==void 0&&b!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],b);const y=x(s,["labels"]);e!==void 0&&y!=null&&g(e,["labels"],y);const N=x(s,["numberOfImages"]);e!==void 0&&N!=null&&g(e,["parameters","sampleCount"],N);const k=x(s,["mode"]);return e!==void 0&&k!=null&&g(e,["parameters","mode"],k),i}function zC(s,e,n){const i={},r=x(e,["model"]);r!=null&&g(i,["_url","model"],It(s,r));const o=x(e,["image"]);o!=null&&g(i,["instances[0]","image"],Un(o));const d=x(e,["upscaleFactor"]);d!=null&&g(i,["parameters","upscaleConfig","upscaleFactor"],d);const u=x(e,["config"]);return u!=null&&VC(u,i),i}function WC(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>fc(d))),g(n,["generatedImages"],o)}return n}function JC(s,e){const n={},i=x(s,["uri"]);i!=null&&g(n,["uri"],i);const r=x(s,["encodedVideo"]);r!=null&&g(n,["videoBytes"],Ba(r));const o=x(s,["encoding"]);return o!=null&&g(n,["mimeType"],o),n}function YC(s,e){const n={},i=x(s,["gcsUri"]);i!=null&&g(n,["uri"],i);const r=x(s,["bytesBase64Encoded"]);r!=null&&g(n,["videoBytes"],Ba(r));const o=x(s,["mimeType"]);return o!=null&&g(n,["mimeType"],o),n}function KC(s,e){const n={},i=x(s,["image"]);i!=null&&g(n,["_self"],Un(i));const r=x(s,["maskMode"]);return r!=null&&g(n,["maskMode"],r),n}function XC(s,e){const n={},i=x(s,["image"]);i!=null&&g(n,["image"],pc(i));const r=x(s,["referenceType"]);return r!=null&&g(n,["referenceType"],r),n}function QC(s,e){const n={},i=x(s,["image"]);i!=null&&g(n,["image"],Un(i));const r=x(s,["referenceType"]);return r!=null&&g(n,["referenceType"],r),n}function Wb(s,e){const n={},i=x(s,["uri"]);i!=null&&g(n,["uri"],i);const r=x(s,["videoBytes"]);r!=null&&g(n,["encodedVideo"],Ba(r));const o=x(s,["mimeType"]);return o!=null&&g(n,["encoding"],o),n}function Jb(s,e){const n={},i=x(s,["uri"]);i!=null&&g(n,["gcsUri"],i);const r=x(s,["videoBytes"]);r!=null&&g(n,["bytesBase64Encoded"],Ba(r));const o=x(s,["mimeType"]);return o!=null&&g(n,["mimeType"],o),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZC(s,e){const n={},i=x(s,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),n}function eE(s){const e={},n=x(s,["config"]);return n!=null&&ZC(n,e),e}function tE(s,e){const n={},i=x(s,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function sE(s){const e={},n=x(s,["name"]);n!=null&&g(e,["_url","name"],n);const i=x(s,["config"]);return i!=null&&tE(i,e),e}function nE(s){const e={},n=x(s,["name"]);return n!=null&&g(e,["_url","name"],n),e}function aE(s,e){const n={},i=x(s,["customMetadata"]);if(e!==void 0&&i!=null){let o=i;Array.isArray(o)&&(o=o.map(d=>d)),g(e,["customMetadata"],o)}const r=x(s,["chunkingConfig"]);return e!==void 0&&r!=null&&g(e,["chunkingConfig"],r),n}function iE(s){const e={},n=x(s,["name"]);n!=null&&g(e,["name"],n);const i=x(s,["metadata"]);i!=null&&g(e,["metadata"],i);const r=x(s,["done"]);r!=null&&g(e,["done"],r);const o=x(s,["error"]);o!=null&&g(e,["error"],o);const d=x(s,["response"]);return d!=null&&g(e,["response"],rE(d)),e}function lE(s){const e={},n=x(s,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=x(s,["fileName"]);i!=null&&g(e,["fileName"],i);const r=x(s,["config"]);return r!=null&&aE(r,e),e}function rE(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["parent"]);i!=null&&g(e,["parent"],i);const r=x(s,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function oE(s,e){const n={},i=x(s,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=x(s,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function cE(s){const e={},n=x(s,["config"]);return n!=null&&oE(n,e),e}function dE(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=x(s,["fileSearchStores"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),g(e,["fileSearchStores"],o)}return e}function Yb(s,e){const n={},i=x(s,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const r=x(s,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const o=x(s,["customMetadata"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(p=>p)),g(e,["customMetadata"],u)}const d=x(s,["chunkingConfig"]);return e!==void 0&&d!=null&&g(e,["chunkingConfig"],d),n}function uE(s){const e={},n=x(s,["fileSearchStoreName"]);n!=null&&g(e,["_url","file_search_store_name"],n);const i=x(s,["config"]);return i!=null&&Yb(i,e),e}function hE(s){const e={},n=x(s,["sdkHttpResponse"]);return n!=null&&g(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mE="Content-Type",fE="X-Server-Timeout",pE="User-Agent",mh="x-goog-api-client",xE="1.39.0",gE=`google-genai-sdk/${xE}`,bE="v1beta1",vE="v1beta";class yE{constructor(e){var n,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const o={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const u=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!u?(o.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?o.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(o.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),o.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:bE}else{if(!this.clientOptions.apiKey)throw new pr({message:"API key must be set when using the Gemini API.",status:403});o.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:vE,o.baseUrl="https://generativelanguage.googleapis.com/"}o.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=o,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(o,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===rh.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[d,u]of Object.entries(e.queryParams))r.searchParams.append(d,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,o]of Object.entries(n))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,n),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,r.toString(),e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const o=new AbortController,d=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const u=setTimeout(()=>o.abort(),n.timeout);u&&typeof u.unref=="function"&&u.unref()}r&&r.addEventListener("abort",()=>{o.abort()}),e.signal=d}return n&&n.extraBody!==null&&wE(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Cg(r),new oh(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Cg(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Dn(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let d="";const u="data:",p=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:f}=yield at(r.read());if(m){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=o.decode(f,{stream:!0});try{const k=JSON.parse(b);if("error"in k){const T=JSON.parse(JSON.stringify(k.error)),S=T.status,R=T.code,A=`got status: ${S}. ${JSON.stringify(k)}`;if(R>=400&&R<600)throw new pr({message:A,status:R})}}catch(k){if(k.name==="ApiError")throw k}d+=b;let y=-1,N=0;for(;;){y=-1,N=0;for(const S of p){const R=d.indexOf(S);R!==-1&&(y===-1||R<y)&&(y=R,N=S.length)}if(y===-1)break;const k=d.substring(0,y);d=d.substring(y+N);const T=k.trim();if(T.startsWith(u)){const S=T.substring(u.length).trim();try{const R=new Response(S,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield at(new oh(R))}catch(R){throw new Error(`exception parsing stream chunk ${S}. ${R}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=gE+" "+this.clientOptions.userAgentExtra;return e[pE]=n,e[mh]=n,e[mE]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,o]of Object.entries(e.headers))i.append(r,o);e.timeout&&e.timeout>0&&i.append(fE,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const o=this.clientOptions.uploader,d=await o.stat(e);r.sizeBytes=String(d.size);const u=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:d.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const p={file:r},m=this.getFileName(e),f=Le("upload/v1beta/files",p._url),b=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,m,p,n==null?void 0:n.httpOptions);return o.upload(e,b,this)}async uploadFileToFileSearchStore(e,n,i){var r;const o=this.clientOptions.uploader,d=await o.stat(n),u=String(d.size),p=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:d.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),b={};i!=null&&Yb(i,b);const y=await this.fetchUploadUrl(m,u,p,f,b,i==null?void 0:i.httpOptions);return o.uploadToFileSearchStore(n,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,o,d){var u;let p={};d?p=d:p={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:p});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(u=m==null?void 0:m.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Cg(s){var e;if(s===void 0)throw new Error("response is undefined");if(!s.ok){const n=s.status;let i;!((e=s.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await s.json():i={error:{message:await s.text(),code:s.status,status:s.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new pr({message:r,status:n}):new Error(r)}}function wE(s,e){if(!e||Object.keys(e).length===0)return;if(s.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof s.body=="string"&&s.body.length>0)try{const o=JSON.parse(s.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,d){const u=Object.assign({},o);for(const p in d)if(Object.prototype.hasOwnProperty.call(d,p)){const m=d[p],f=u[p];m&&typeof m=="object"&&!Array.isArray(m)&&f&&typeof f=="object"&&!Array.isArray(f)?u[p]=i(f,m):(f&&m&&typeof f!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${p}". Original type: ${typeof f}, New type: ${typeof m}. Overwriting.`),u[p]=m)}return u}const r=i(n,e);s.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const NE="mcp_used/unknown";let jE=!1;function Kb(s){for(const e of s)if(kE(e)||typeof e=="object"&&"inputSchema"in e)return!0;return jE}function Xb(s){var e;const n=(e=s[mh])!==null&&e!==void 0?e:"";s[mh]=(n+` ${NE}`).trimStart()}function kE(s){return s!==null&&typeof s=="object"&&s instanceof Rh}function SE(s){return Dn(this,arguments,function*(n,i=100){let r,o=0;for(;o<i;){const d=yield at(n.listTools({cursor:r}));for(const u of d.tools)yield yield at(u),o++;if(!d.nextCursor)break;r=d.nextCursor}})}class Rh{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Rh(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const o={},d=[];for(const f of this.mcpClients)try{for(var u=!0,p=(n=void 0,On(SE(f))),m;m=await p.next(),e=m.done,!e;u=!0){r=m.value,u=!1;const b=r;d.push(b);const y=b.name;if(o[y])throw new Error(`Duplicate function name ${y} found in MCP tools. Please ensure function names are unique.`);o[y]=f}}catch(b){n={error:b}}finally{try{!u&&!e&&(i=p.return)&&await i.call(p)}finally{if(n)throw n.error}}this.mcpTools=d,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),e_(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const d=await r.callTool({name:i.name,arguments:i.args},void 0,o);n.push({functionResponse:{name:i.name,response:d.isError?{error:d}:d}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function _E(s,e,n){const i=new zS;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class TE{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),d=AE(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),p=`${r}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${u}`;let m=()=>{};const f=new Promise(I=>{m=I}),b=e.callbacks,y=function(){m({})},N=this.apiClient,k={onopen:y,onmessage:I=>{_E(N,b.onmessage,I)},onerror:(n=b==null?void 0:b.onerror)!==null&&n!==void 0?n:function(I){},onclose:(i=b==null?void 0:b.onclose)!==null&&i!==void 0?i:function(I){}},T=this.webSocketFactory.create(p,EE(d),k);T.connect(),await f;const A={setup:{model:It(this.apiClient,e.model)}};return T.send(JSON.stringify(A)),new CE(T,this.apiClient)}}class CE{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=Z1(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=Q1(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(tl.PLAY)}pause(){this.sendPlaybackControl(tl.PAUSE)}stop(){this.sendPlaybackControl(tl.STOP)}resetContext(){this.sendPlaybackControl(tl.RESET_CONTEXT)}close(){this.conn.close()}}function EE(s){const e={};return s.forEach((n,i)=>{e[i]=n}),e}function AE(s){const e=new Headers;for(const[n,i]of Object.entries(s))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IE="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function RE(s,e,n){const i=new VS;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const o=JSON.parse(r);if(s.isVertexAI()){const d=sT(o);Object.assign(i,d)}else Object.assign(i,o);e(i)}class ME{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new TE(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,o,d,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const p=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let f;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&Kb(e.config.tools)&&Xb(b);const y=LE(b);if(this.apiClient.isVertexAI()){const Y=this.apiClient.getProject(),q=this.apiClient.getLocation(),ce=this.apiClient.getApiKey(),Q=!!Y&&!!q||!!ce;this.apiClient.getCustomBaseUrl()&&!Q?f=p:(f=`${p}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(y,f))}else{const Y=this.apiClient.getApiKey();let q="BidiGenerateContent",ce="key";Y!=null&&Y.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),q="BidiGenerateContentConstrained",ce="access_token"),f=`${p}/ws/google.ai.generativelanguage.${m}.GenerativeService.${q}?${ce}=${Y}`}let N=()=>{};const k=new Promise(Y=>{N=Y}),T=e.callbacks,S=function(){var Y;(Y=T==null?void 0:T.onopen)===null||Y===void 0||Y.call(T),N({})},R=this.apiClient,A={onopen:S,onmessage:Y=>{RE(R,T.onmessage,Y)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(Y){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(Y){}},I=this.webSocketFactory.create(f,UE(y),A);I.connect(),await k;let j=It(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&j.startsWith("publishers/")){const Y=this.apiClient.getProject(),q=this.apiClient.getLocation();Y&&q&&(j=`projects/${Y}/locations/${q}/`+j)}let E={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[nc.AUDIO]}:e.config.responseModalities=[nc.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const D=(u=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&u!==void 0?u:[],L=[];for(const Y of D)if(this.isCallableTool(Y)){const q=Y;L.push(await q.tool())}else L.push(Y);L.length>0&&(e.config.tools=L);const G={model:j,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?E=X1(this.apiClient,G):E=K1(this.apiClient,G),delete E.config,I.send(JSON.stringify(E)),new OE(I,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const DE={turnComplete:!0};class OE{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=wn(n.turns),e.isVertexAI()||(i=i.map(r=>mc(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(IE)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},DE),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:tT(e)}:n={realtimeInput:eT(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function UE(s){const e={};return s.forEach((n,i)=>{e[i]=n}),e}function LE(s){const e=new Headers;for(const[n,i]of Object.entries(s))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Eg=10;function Ag(s){var e,n,i;if(!((e=s==null?void 0:s.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const d of(n=s==null?void 0:s.tools)!==null&&n!==void 0?n:[])if(il(d)){r=!0;break}if(!r)return!0;const o=(i=s==null?void 0:s.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function il(s){return"callTool"in s&&typeof s.callTool=="function"}function BE(s){var e,n,i;return(i=(n=(e=s.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>il(r)))!==null&&i!==void 0?i:!1}function Ig(s){var e;const n=[];return!((e=s==null?void 0:s.config)===null||e===void 0)&&e.tools&&s.config.tools.forEach((i,r)=>{if(il(i))return;const o=i;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(r)}),n}function Rg(s){var e;return!(!((e=s==null?void 0:s.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PE extends ua{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,o,d,u;const p=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!BE(n)||Ag(n.config))return await this.generateContentInternal(p);const m=Ig(n);if(m.length>0){const T=m.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${T}.`)}let f,b;const y=wn(p.contents),N=(o=(r=(i=p.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Eg;let k=0;for(;k<N&&(f=await this.generateContentInternal(p),!(!f.functionCalls||f.functionCalls.length===0));){const T=f.candidates[0].content,S=[];for(const R of(u=(d=n.config)===null||d===void 0?void 0:d.tools)!==null&&u!==void 0?u:[])if(il(R)){const I=await R.callTool(f.functionCalls);S.push(...I)}k++,b={role:"user",parts:S},p.contents=wn(p.contents),p.contents.push(T),p.contents.push(b),Rg(p.config)&&(y.push(T),y.push(b))}return Rg(p.config)&&(f.automaticFunctionCallingHistory=y),f},this.generateContentStream=async n=>{var i,r,o,d,u;if(this.maybeMoveToResponseJsonSchem(n),Ag(n.config)){const b=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(b)}const p=Ig(n);if(p.length>0){const b=p.map(y=>`tools[${y}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(o=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,f=(u=(d=n==null?void 0:n.config)===null||d===void 0?void 0:d.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(m&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let o;const d=[];if(i!=null&&i.generatedImages)for(const p of i.generatedImages)p&&(p!=null&&p.safetyAttributes)&&((r=p==null?void 0:p.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=p==null?void 0:p.safetyAttributes:d.push(p);let u;return o?u={generatedImages:d,positivePromptSafetyAttributes:o,sdkHttpResponse:i.sdkHttpResponse}:u={generatedImages:d,sdkHttpResponse:i.sdkHttpResponse},u}),this.list=async n=>{var i;const d={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((i=d.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new ui(ca.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(d),d)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,o,d,u,p;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((d=(o=n.source)===null||o===void 0?void 0:o.video)===null||d===void 0)&&d.uri&&(!((p=(u=n.source)===null||u===void 0?void 0:u.video)===null||p===void 0)&&p.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const d=await Promise.all(o.map(async p=>il(p)?await p.tool():p)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(u.config.tools=d,e.config&&e.config.tools&&Kb(e.config.tools)){const p=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},p);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),Xb(m),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return u}async initAfcToolsMap(e){var n,i,r;const o=new Map;for(const d of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(il(d)){const u=d,p=await u.tool();for(const m of(r=p.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(o.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);o.set(m.name,u)}}return o}async processAfcStream(e){var n,i,r;const o=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:Eg;let d=!1,u=0;const p=await this.initAfcToolsMap(e);return(function(m,f,b){return Dn(this,arguments,function*(){for(var y,N,k,T,S,R;u<o;){d&&(u++,d=!1);const E=yield at(m.processParamsMaybeAddMcpUsage(b)),D=yield at(m.generateContentStreamInternal(E)),L=[],G=[];try{for(var A=!0,I=(N=void 0,On(D)),j;j=yield at(I.next()),y=j.done,!y;A=!0){T=j.value,A=!1;const Y=T;if(yield yield at(Y),Y.candidates&&(!((S=Y.candidates[0])===null||S===void 0)&&S.content)){G.push(Y.candidates[0].content);for(const q of(R=Y.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(u<o&&q.functionCall){if(!q.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(q.functionCall.name)){const ce=yield at(f.get(q.functionCall.name).callTool([q.functionCall]));L.push(...ce)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${q.functionCall.name}`)}}}}catch(Y){N={error:Y}}finally{try{!A&&!y&&(k=I.return)&&(yield at(k.call(I)))}finally{if(N)throw N.error}}if(L.length>0){d=!0;const Y=new sr;Y.candidates=[{content:{role:"user",parts:L}}],yield yield at(Y);const q=[];q.push(...G),q.push({role:"user",parts:L});const ce=wn(b.contents).concat(q);b.contents=ce}else break}})})(this,p,e)}async generateContentInternal(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=Sg(this.apiClient,e);return u=Le("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=Tg(f),y=new sr;return Object.assign(y,b),y})}else{const m=kg(this.apiClient,e);return u=Le("{model}:generateContent",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=_g(f),y=new sr;return Object.assign(y,b),y})}}async generateContentStreamInternal(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=Sg(this.apiClient,e);return u=Le("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.requestStream({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),d.then(function(b){return Dn(this,arguments,function*(){var y,N,k,T;try{for(var S=!0,R=On(b),A;A=yield at(R.next()),y=A.done,!y;S=!0){T=A.value,S=!1;const I=T,j=Tg(yield at(I.json()),e);j.sdkHttpResponse={headers:I.headers};const E=new sr;Object.assign(E,j),yield yield at(E)}}catch(I){N={error:I}}finally{try{!S&&!y&&(k=R.return)&&(yield at(k.call(R)))}finally{if(N)throw N.error}}})})}else{const m=kg(this.apiClient,e);return u=Le("{model}:streamGenerateContent?alt=sse",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.requestStream({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),d.then(function(b){return Dn(this,arguments,function*(){var y,N,k,T;try{for(var S=!0,R=On(b),A;A=yield at(R.next()),y=A.done,!y;S=!0){T=A.value,S=!1;const I=T,j=_g(yield at(I.json()),e);j.sdkHttpResponse={headers:I.headers};const E=new sr;Object.assign(E,j),yield yield at(E)}}catch(I){N={error:I}}finally{try{!S&&!y&&(k=R.return)&&(yield at(k.call(R)))}finally{if(N)throw N.error}}})})}}async embedContent(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=MT(this.apiClient,e);return u=Le("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=OT(f),y=new rg;return Object.assign(y,b),y})}else{const m=RT(this.apiClient,e);return u=Le("{model}:batchEmbedContents",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=DT(f),y=new rg;return Object.assign(y,b),y})}}async generateImagesInternal(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=zT(this.apiClient,e);return u=Le("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=JT(f),y=new og;return Object.assign(y,b),y})}else{const m=VT(this.apiClient,e);return u=Le("{model}:predict",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=WT(f),y=new og;return Object.assign(y,b),y})}}async editImageInternal(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const u=CT(this.apiClient,e);return o=Le("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const f=m;return f.sdkHttpResponse={headers:p.headers},f})),r.then(p=>{const m=ET(p),f=new MS;return Object.assign(f,m),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const u=zC(this.apiClient,e);return o=Le("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const f=m;return f.sdkHttpResponse={headers:p.headers},f})),r.then(p=>{const m=WC(p),f=new DS;return Object.assign(f,m),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const u=TC(this.apiClient,e);return o=Le("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const m=CC(p),f=new OS;return Object.assign(f,m),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const u=DC(this.apiClient,e);return o=Le("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const m=OC(p),f=new US;return Object.assign(f,m),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=uC(this.apiClient,e);return u=Le("{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),d.then(f=>hh(f))}else{const m=dC(this.apiClient,e);return u=Le("{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),d.then(f=>uh(f))}}async listInternal(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=yC(this.apiClient,e);return u=Le("{models_url}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=NC(f),y=new cg;return Object.assign(y,b),y})}else{const m=vC(this.apiClient,e);return u=Le("{models_url}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=wC(f),y=new cg;return Object.assign(y,b),y})}}async update(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=qC(this.apiClient,e);return u=Le("{model}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),d.then(f=>hh(f))}else{const m=HC(this.apiClient,e);return u=Le("{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),d.then(f=>uh(f))}}async delete(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=kT(this.apiClient,e);return u=Le("{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=_T(f),y=new dg;return Object.assign(y,b),y})}else{const m=jT(this.apiClient,e);return u=Le("{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=ST(f),y=new dg;return Object.assign(y,b),y})}}async countTokens(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=yT(this.apiClient,e);return u=Le("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=NT(f),y=new ug;return Object.assign(y,b),y})}else{const m=vT(this.apiClient,e);return u=Le("{model}:countTokens",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=wT(f),y=new ug;return Object.assign(y,b),y})}}async computeTokens(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const u=hT(this.apiClient,e);return o=Le("{model}:computeTokens",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const f=m;return f.sdkHttpResponse={headers:p.headers},f})),r.then(p=>{const m=mT(p),f=new LS;return Object.assign(f,m),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=eC(this.apiClient,e);return u=Le("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),d.then(f=>{const b=QT(f),y=new ac;return Object.assign(y,b),y})}else{const m=ZT(this.apiClient,e);return u=Le("{model}:predictLongRunning",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),d.then(f=>{const b=XT(f),y=new ac;return Object.assign(y,b),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class GE extends ua{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=TS(e);return u=Le("{operationName}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),d}else{const m=_S(e);return u=Le("{operationName}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),d}}async fetchPredictVideosOperationInternal(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const u=vS(e);return o=Le("{resourceName}:fetchPredictOperation",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $E(s){const e={},n=x(s,["data"]);if(n!=null&&g(e,["data"],n),x(s,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=x(s,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function FE(s){const e={},n=x(s,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>XE(o))),g(e,["parts"],r)}const i=x(s,["role"]);return i!=null&&g(e,["role"],i),e}function HE(s,e,n){const i={},r=x(e,["expireTime"]);n!==void 0&&r!=null&&g(n,["expireTime"],r);const o=x(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&g(n,["newSessionExpireTime"],o);const d=x(e,["uses"]);n!==void 0&&d!=null&&g(n,["uses"],d);const u=x(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&g(n,["bidiGenerateContentSetup"],KE(s,u));const p=x(e,["lockAdditionalFields"]);return n!==void 0&&p!=null&&g(n,["fieldMask"],p),i}function qE(s,e){const n={},i=x(e,["config"]);return i!=null&&g(n,["config"],HE(s,i,n)),n}function VE(s){const e={};if(x(s,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(s,["fileUri"]);n!=null&&g(e,["fileUri"],n);const i=x(s,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function zE(s){const e={},n=x(s,["id"]);n!=null&&g(e,["id"],n);const i=x(s,["args"]);i!=null&&g(e,["args"],i);const r=x(s,["name"]);if(r!=null&&g(e,["name"],r),x(s,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(s,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WE(s){const e={};if(x(s,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(s,["enableWidget"]);return n!=null&&g(e,["enableWidget"],n),e}function JE(s){const e={};if(x(s,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(s,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=x(s,["timeRangeFilter"]);return n!=null&&g(e,["timeRangeFilter"],n),e}function YE(s,e){const n={},i=x(s,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const r=x(s,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const o=x(s,["temperature"]);e!==void 0&&o!=null&&g(e,["setup","generationConfig","temperature"],o);const d=x(s,["topP"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topP"],d);const u=x(s,["topK"]);e!==void 0&&u!=null&&g(e,["setup","generationConfig","topK"],u);const p=x(s,["maxOutputTokens"]);e!==void 0&&p!=null&&g(e,["setup","generationConfig","maxOutputTokens"],p);const m=x(s,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const f=x(s,["seed"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","seed"],f);const b=x(s,["speechConfig"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","speechConfig"],Ih(b));const y=x(s,["thinkingConfig"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","thinkingConfig"],y);const N=x(s,["enableAffectiveDialog"]);e!==void 0&&N!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],N);const k=x(s,["systemInstruction"]);e!==void 0&&k!=null&&g(e,["setup","systemInstruction"],FE(Ls(k)));const T=x(s,["tools"]);if(e!==void 0&&T!=null){let D=dl(T);Array.isArray(D)&&(D=D.map(L=>ZE(cl(L)))),g(e,["setup","tools"],D)}const S=x(s,["sessionResumption"]);e!==void 0&&S!=null&&g(e,["setup","sessionResumption"],QE(S));const R=x(s,["inputAudioTranscription"]);e!==void 0&&R!=null&&g(e,["setup","inputAudioTranscription"],R);const A=x(s,["outputAudioTranscription"]);e!==void 0&&A!=null&&g(e,["setup","outputAudioTranscription"],A);const I=x(s,["realtimeInputConfig"]);e!==void 0&&I!=null&&g(e,["setup","realtimeInputConfig"],I);const j=x(s,["contextWindowCompression"]);e!==void 0&&j!=null&&g(e,["setup","contextWindowCompression"],j);const E=x(s,["proactivity"]);if(e!==void 0&&E!=null&&g(e,["setup","proactivity"],E),x(s,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function KE(s,e){const n={},i=x(e,["model"]);i!=null&&g(n,["setup","model"],It(s,i));const r=x(e,["config"]);return r!=null&&g(n,["config"],YE(r,n)),n}function XE(s){const e={},n=x(s,["mediaResolution"]);n!=null&&g(e,["mediaResolution"],n);const i=x(s,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=x(s,["executableCode"]);r!=null&&g(e,["executableCode"],r);const o=x(s,["fileData"]);o!=null&&g(e,["fileData"],VE(o));const d=x(s,["functionCall"]);d!=null&&g(e,["functionCall"],zE(d));const u=x(s,["functionResponse"]);u!=null&&g(e,["functionResponse"],u);const p=x(s,["inlineData"]);p!=null&&g(e,["inlineData"],$E(p));const m=x(s,["text"]);m!=null&&g(e,["text"],m);const f=x(s,["thought"]);f!=null&&g(e,["thought"],f);const b=x(s,["thoughtSignature"]);b!=null&&g(e,["thoughtSignature"],b);const y=x(s,["videoMetadata"]);return y!=null&&g(e,["videoMetadata"],y),e}function QE(s){const e={},n=x(s,["handle"]);if(n!=null&&g(e,["handle"],n),x(s,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ZE(s){const e={};if(x(s,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(s,["computerUse"]);n!=null&&g(e,["computerUse"],n);const i=x(s,["fileSearch"]);i!=null&&g(e,["fileSearch"],i);const r=x(s,["codeExecution"]);if(r!=null&&g(e,["codeExecution"],r),x(s,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=x(s,["functionDeclarations"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(b=>b)),g(e,["functionDeclarations"],f)}const d=x(s,["googleMaps"]);d!=null&&g(e,["googleMaps"],WE(d));const u=x(s,["googleSearch"]);u!=null&&g(e,["googleSearch"],JE(u));const p=x(s,["googleSearchRetrieval"]);p!=null&&g(e,["googleSearchRetrieval"],p);const m=x(s,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eA(s){const e=[];for(const n in s)if(Object.prototype.hasOwnProperty.call(s,n)){const i=s[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(o=>`${n}.${o}`);e.push(...r)}else e.push(n)}return e.join(",")}function tA(s,e){let n=null;const i=s.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(s.bidiGenerateContentSetup=o,n=o):delete s.bidiGenerateContentSetup}else i!==void 0&&delete s.bidiGenerateContentSetup;const r=s.fieldMask;if(n){const o=eA(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?s.fieldMask=o:delete s.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(m=>d.includes(m)?`generationConfig.${m}`:m));const p=[];o&&p.push(o),u.length>0&&p.push(...u),p.length>0?s.fieldMask=p.join(","):delete s.fieldMask}else delete s.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?s.fieldMask=r.join(","):delete s.fieldMask;return s}class sA extends ua{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=qE(this.apiClient,e);o=Le("auth_tokens",u._url),d=u._query,delete u.config,delete u._url,delete u._query;const p=tA(u,e.config);return r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nA(s,e){const n={},i=x(s,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),n}function aA(s){const e={},n=x(s,["name"]);n!=null&&g(e,["_url","name"],n);const i=x(s,["config"]);return i!=null&&nA(i,e),e}function iA(s){const e={},n=x(s,["name"]);return n!=null&&g(e,["_url","name"],n),e}function lA(s,e){const n={},i=x(s,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=x(s,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),n}function rA(s){const e={},n=x(s,["parent"]);n!=null&&g(e,["_url","parent"],n);const i=x(s,["config"]);return i!=null&&lA(i,e),e}function oA(s){const e={},n=x(s,["sdkHttpResponse"]);n!=null&&g(e,["sdkHttpResponse"],n);const i=x(s,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=x(s,["documents"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(d=>d)),g(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cA extends ua{constructor(e){super(),this.apiClient=e,this.list=async n=>new ui(ca.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=iA(e);return o=Le("{name}",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=aA(e);r=Le("{name}",d._url),o=d._query,delete d._url,delete d._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=rA(e);return o=Le("{parent}/documents",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const m=oA(p),f=new BS;return Object.assign(f,m),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dA extends ua{constructor(e,n=new cA(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new ui(ca.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=eE(e);return o=Le("fileSearchStores",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async get(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=nE(e);return o=Le("{name}",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>p)}}async delete(e){var n,i;let r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sE(e);r=Le("{name}",d._url),o=d._query,delete d._url,delete d._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=cE(e);return o=Le("fileSearchStores",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const m=dE(p),f=new PS;return Object.assign(f,m),f})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=uE(e);return o=Le("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const m=hE(p),f=new GS;return Object.assign(f,m),f})}}async importFile(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lE(e);return o=Le("{file_search_store_name}:importFile",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),r.then(p=>{const m=iE(p),f=new _h;return Object.assign(f,m),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Qb=function(){const{crypto:s}=globalThis;if(s!=null&&s.randomUUID)return Qb=s.randomUUID.bind(s),s.randomUUID();const e=new Uint8Array(1),n=s?()=>s.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const uA=()=>Qb();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fh(s){return typeof s=="object"&&s!==null&&("name"in s&&s.name==="AbortError"||"message"in s&&String(s.message).includes("FetchRequestCanceledException"))}const ph=s=>{if(s instanceof Error)return s;if(typeof s=="object"&&s!==null){try{if(Object.prototype.toString.call(s)==="[object Error]"){const e=new Error(s.message,s.cause?{cause:s.cause}:{});return s.stack&&(e.stack=s.stack),s.cause&&!e.cause&&(e.cause=s.cause),s.name&&(e.name=s.name),e}}catch{}try{return new Error(JSON.stringify(s))}catch{}}return new Error(s)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Nn extends Error{}class Gs extends Nn{constructor(e,n,i,r){super(`${Gs.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new xc({message:i,cause:ph(n)});const o=n;return e===400?new ev(e,o,i,r):e===401?new tv(e,o,i,r):e===403?new sv(e,o,i,r):e===404?new nv(e,o,i,r):e===409?new av(e,o,i,r):e===422?new iv(e,o,i,r):e===429?new lv(e,o,i,r):e>=500?new rv(e,o,i,r):new Gs(e,o,i,r)}}class xh extends Gs{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class xc extends Gs{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class Zb extends xc{constructor({message:e}={}){super({message:e??"Request timed out."})}}class ev extends Gs{}class tv extends Gs{}class sv extends Gs{}class nv extends Gs{}class av extends Gs{}class iv extends Gs{}class lv extends Gs{}class rv extends Gs{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hA=/^[a-z][a-z0-9+.-]*:/i,mA=s=>hA.test(s);let gh=s=>(gh=Array.isArray,gh(s));const fA=gh;let pA=fA;const Mg=pA;function xA(s){if(!s)return!0;for(const e in s)return!1;return!0}function gA(s,e){return Object.prototype.hasOwnProperty.call(s,e)}const bA=(s,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Nn(`${s} must be an integer`);if(e<0)throw new Nn(`${s} must be a positive integer`);return e},vA=s=>{try{return JSON.parse(s)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yA=s=>new Promise(e=>setTimeout(e,s));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zi="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wA(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const NA=()=>{var s,e,n,i,r;const o=wA();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":Og(Deno.build.os),"X-Stainless-Arch":Dg(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(s=Deno.version)===null||s===void 0?void 0:s.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":Og((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Dg((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const d=jA();return d?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${d.browser}`,"X-Stainless-Runtime-Version":d.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Zi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function jA(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of s){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,o=i[2]||0,d=i[3]||0;return{browser:e,version:`${r}.${o}.${d}`}}}return null}const Dg=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",Og=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let Fo;const kA=()=>Fo??(Fo=NA());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SA(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function ov(...s){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...s)}function _A(s){let e=Symbol.asyncIterator in s?s[Symbol.asyncIterator]():s[Symbol.iterator]();return ov({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function cv(s){if(s[Symbol.asyncIterator])return s;const e=s.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function TA(s){var e,n;if(s===null||typeof s!="object")return;if(s[Symbol.asyncIterator]){await((n=(e=s[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=s.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CA=({headers:s,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dv=()=>{var s;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((s=e==null?void 0:e.versions)===null||s===void 0?void 0:s.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Hu(s,e,n){return dv(),new File(s,e??"unknown_file",n)}function EA(s){return(typeof s=="object"&&s!==null&&("name"in s&&s.name&&String(s.name)||"url"in s&&s.url&&String(s.url)||"filename"in s&&s.filename&&String(s.filename)||"path"in s&&s.path&&String(s.path))||"").split(/[\\/]/).pop()||void 0}const AA=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uv=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",IA=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&uv(s),RA=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function";async function MA(s,e,n){if(dv(),s=await s,IA(s))return s instanceof File?s:Hu([await s.arrayBuffer()],s.name);if(RA(s)){const r=await s.blob();return e||(e=new URL(s.url).pathname.split(/[\\/]/).pop()),Hu(await bh(r),e,n)}const i=await bh(s);if(e||(e=EA(s)),!(n!=null&&n.type)){const r=i.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Hu(i,e,n)}async function bh(s){var e,n,i,r,o;let d=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)d.push(s);else if(uv(s))d.push(s instanceof Blob?s:await s.arrayBuffer());else if(AA(s))try{for(var u=!0,p=On(s),m;m=await p.next(),e=m.done,!e;u=!0){r=m.value,u=!1;const f=r;d.push(...await bh(f))}}catch(f){n={error:f}}finally{try{!u&&!e&&(i=p.return)&&await i.call(p)}finally{if(n)throw n.error}}else{const f=(o=s==null?void 0:s.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof s}${f?`; constructor: ${f}`:""}${DA(s)}`)}return d}function DA(s){return typeof s!="object"||s===null?"":`; props: [${Object.getOwnPropertyNames(s).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hv{constructor(e){this._client=e}}hv._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mv(s){return s.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Ug=Object.freeze(Object.create(null)),OA=(s=mv)=>(function(n,...i){if(n.length===1)return n[0];let r=!1;const o=[],d=n.reduce((f,b,y)=>{var N,k,T;/[?#]/.test(b)&&(r=!0);const S=i[y];let R=(r?encodeURIComponent:s)(""+S);return y!==i.length&&(S==null||typeof S=="object"&&S.toString===((T=Object.getPrototypeOf((k=Object.getPrototypeOf((N=S.hasOwnProperty)!==null&&N!==void 0?N:Ug))!==null&&k!==void 0?k:Ug))===null||T===void 0?void 0:T.toString))&&(R=S+"",o.push({start:f.length+b.length,length:R.length,error:`Value of type ${Object.prototype.toString.call(S).slice(8,-1)} is not a valid path parameter`})),f+b+(y===i.length?"":R)},""),u=d.split(/[?#]/,1)[0],p=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=p.exec(u))!==null;)o.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(o.sort((f,b)=>f.start-b.start),o.length>0){let f=0;const b=o.reduce((y,N)=>{const k=" ".repeat(N.start-f),T="^".repeat(N.length);return f=N.start+N.length,y+k+T},"");throw new Nn(`Path parameters result in path with invalid segments:
${o.map(y=>y.error).join(`
`)}
${d}
${b}`)}return d}),Ho=OA(mv);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fv extends hv{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,o=lc(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new Nn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new Nn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ho`/${r}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Ho`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Ho`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const o=n??{},{api_version:d=this._client.apiVersion}=o,u=lc(o,["api_version"]);return this._client.get(Ho`/${d}/interactions/${e}`,Object.assign(Object.assign({query:u},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}fv._key=Object.freeze(["interactions"]);class pv extends fv{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UA(s){let e=0;for(const r of s)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of s)n.set(r,i),i+=r.length;return n}let qo;function Mh(s){let e;return(qo??(e=new globalThis.TextEncoder,qo=e.encode.bind(e)))(s)}let Vo;function Lg(s){let e;return(Vo??(e=new globalThis.TextDecoder,Vo=e.decode.bind(e)))(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Mh(e):e;this.buffer=UA([this.buffer,n]);const i=[];let r;for(;(r=LA(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(Lg(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,d=Lg(this.buffer.subarray(0,o));i.push(d),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}gc.NEWLINE_CHARS=new Set([`
`,"\r"]);gc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function LA(s,e){for(let r=e??0;r<s.length;r++){if(s[r]===10)return{preceding:r,index:r+1,carriage:!1};if(s[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function BA(s){for(let i=0;i<s.length-1;i++){if(s[i]===10&&s[i+1]===10||s[i]===13&&s[i+1]===13)return i+2;if(s[i]===13&&s[i+1]===10&&i+3<s.length&&s[i+2]===13&&s[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rc={off:0,error:200,warn:300,info:400,debug:500},Bg=(s,e,n)=>{if(s){if(gA(rc,s))return s;Ps(n).warn(`${e} was set to ${JSON.stringify(s)}, expected one of ${JSON.stringify(Object.keys(rc))}`)}};function ir(){}function zo(s,e,n){return!e||rc[s]>rc[n]?ir:e[s].bind(e)}const PA={error:ir,warn:ir,info:ir,debug:ir};let Pg=new WeakMap;function Ps(s){var e;const n=s.logger,i=(e=s.logLevel)!==null&&e!==void 0?e:"off";if(!n)return PA;const r=Pg.get(n);if(r&&r[0]===i)return r[1];const o={error:zo("error",n,i),warn:zo("warn",n,i),info:zo("info",n,i),debug:zo("debug",n,i)};return Pg.set(n,[i,o]),o}const ri=s=>(s.options&&(s.options=Object.assign({},s.options),delete s.options.headers),s.headers&&(s.headers=Object.fromEntries((s.headers instanceof Headers?[...s.headers]:Object.entries(s.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in s&&(s.retryOfRequestLogID&&(s.retryOf=s.retryOfRequestLogID),delete s.retryOfRequestLogID),s);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sl{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const o=i?Ps(i):console;function d(){return Dn(this,arguments,function*(){var p,m,f,b;if(r)throw new Nn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let y=!1;try{try{for(var N=!0,k=On(GA(e,n)),T;T=yield at(k.next()),p=T.done,!p;N=!0){b=T.value,N=!1;const S=b;if(!y)if(S.data.startsWith("[DONE]")){y=!0;continue}else try{yield yield at(JSON.parse(S.data))}catch(R){throw o.error("Could not parse message into JSON:",S.data),o.error("From chunk:",S.raw),R}}}catch(S){m={error:S}}finally{try{!N&&!p&&(f=k.return)&&(yield at(f.call(k)))}finally{if(m)throw m.error}}y=!0}catch(S){if(fh(S))return yield at(void 0);throw S}finally{y||n.abort()}})}return new sl(d,n,i)}static fromReadableStream(e,n,i){let r=!1;function o(){return Dn(this,arguments,function*(){var p,m,f,b;const y=new gc,N=cv(e);try{for(var k=!0,T=On(N),S;S=yield at(T.next()),p=S.done,!p;k=!0){b=S.value,k=!1;const R=b;for(const A of y.decode(R))yield yield at(A)}}catch(R){m={error:R}}finally{try{!k&&!p&&(f=T.return)&&(yield at(f.call(T)))}finally{if(m)throw m.error}}for(const R of y.flush())yield yield at(R)})}function d(){return Dn(this,arguments,function*(){var p,m,f,b;if(r)throw new Nn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let y=!1;try{try{for(var N=!0,k=On(o()),T;T=yield at(k.next()),p=T.done,!p;N=!0){b=T.value,N=!1;const S=b;y||S&&(yield yield at(JSON.parse(S)))}}catch(S){m={error:S}}finally{try{!N&&!p&&(f=k.return)&&(yield at(f.call(k)))}finally{if(m)throw m.error}}y=!0}catch(S){if(fh(S))return yield at(void 0);throw S}finally{y||n.abort()}})}return new sl(d,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=o=>({next:()=>{if(o.length===0){const d=i.next();e.push(d),n.push(d)}return o.shift()}});return[new sl(()=>r(e),this.controller,this.client),new sl(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return ov({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:o}=await n.next();if(o)return i.close();const d=Mh(JSON.stringify(r)+`
`);i.enqueue(d)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function GA(s,e){return Dn(this,arguments,function*(){var i,r,o,d;if(!s.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Nn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Nn("Attempted to iterate over a response with no body");const u=new FA,p=new gc,m=cv(s.body);try{for(var f=!0,b=On($A(m)),y;y=yield at(b.next()),i=y.done,!i;f=!0){d=y.value,f=!1;const N=d;for(const k of p.decode(N)){const T=u.decode(k);T&&(yield yield at(T))}}}catch(N){r={error:N}}finally{try{!f&&!i&&(o=b.return)&&(yield at(o.call(b)))}finally{if(r)throw r.error}}for(const N of p.flush()){const k=u.decode(N);k&&(yield yield at(k))}})}function $A(s){return Dn(this,arguments,function*(){var n,i,r,o;let d=new Uint8Array;try{for(var u=!0,p=On(s),m;m=yield at(p.next()),n=m.done,!n;u=!0){o=m.value,u=!1;const f=o;if(f==null)continue;const b=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?Mh(f):f;let y=new Uint8Array(d.length+b.length);y.set(d),y.set(b,d.length),d=y;let N;for(;(N=BA(d))!==-1;)yield yield at(d.slice(0,N)),d=d.slice(N)}}catch(f){i={error:f}}finally{try{!u&&!n&&(r=p.return)&&(yield at(r.call(p)))}finally{if(i)throw i.error}}d.length>0&&(yield yield at(d))})}class FA{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=HA(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function HA(s,e){const n=s.indexOf(e);return n!==-1?[s.substring(0,n),e,s.substring(n+e.length)]:[s,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function qA(s,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:o}=e,d=await(async()=>{var u;if(e.options.stream)return Ps(s).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,s):sl.fromSSEResponse(n,e.controller,s);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const p=n.headers.get("content-type"),m=(u=p==null?void 0:p.split(";")[0])===null||u===void 0?void 0:u.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await n.json():await n.text()})();return Ps(s).debug(`[${i}] response parsed`,ri({retryOfRequestLogID:r,url:n.url,status:n.status,body:d,durationMs:Date.now()-o})),d}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dh extends Promise{constructor(e,n,i=qA){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Dh(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xv=Symbol("brand.privateNullableHeaders");function*VA(s){if(!s)return;if(xv in s){const{values:i,nulls:r}=s;yield*i.entries();for(const o of r)yield[o,null];return}let e=!1,n;s instanceof Headers?n=s.entries():Mg(s)?n=s:(e=!0,n=Object.entries(s??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const o=Mg(i[1])?i[1]:[i[1]];let d=!1;for(const u of o)u!==void 0&&(e&&!d&&(d=!0,yield[r,null]),yield[r,u])}}const nr=s=>{const e=new Headers,n=new Set;for(const i of s){const r=new Set;for(const[o,d]of VA(i)){const u=o.toLowerCase();r.has(u)||(e.delete(o),r.add(u)),d===null?(e.delete(o),n.add(u)):(e.append(o,d),n.delete(u))}}return{[xv]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qu=s=>{var e,n,i,r,o,d;if(typeof globalThis.process<"u")return(i=(n=(e=mS)===null||e===void 0?void 0:e[s])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(d=(o=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||o===void 0?void 0:o.call(r,s))===null||d===void 0?void 0:d.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var gv;class bc{constructor(e){var n,i,r,o,d,u,p,{baseURL:m=qu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:f=(n=qu("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:b="v1beta"}=e,y=lc(e,["baseURL","apiKey","apiVersion"]);const N=Object.assign(Object.assign({apiKey:f,apiVersion:b},y),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=N.baseURL,this.timeout=(i=N.timeout)!==null&&i!==void 0?i:bc.DEFAULT_TIMEOUT,this.logger=(r=N.logger)!==null&&r!==void 0?r:console;const k="warn";this.logLevel=k,this.logLevel=(d=(o=Bg(N.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:Bg(qu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&d!==void 0?d:k,this.fetchOptions=N.fetchOptions,this.maxRetries=(u=N.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(p=N.fetch)!==null&&p!==void 0?p:SA(),this.encoder=CA,this._options=N,this.apiKey=f,this.apiVersion=b,this.clientAdapter=N.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=nr([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return nr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return nr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new Nn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Zi}`}defaultIdempotencyKey(){return`stainless-node-retry-${uA()}`}makeStatusError(e,n,i,r){return Gs.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,o=mA(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),d=this.defaultQuery();return xA(d)||(n=Object.assign(Object.assign({},d),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new Dh(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,o,d;const u=await e,p=(r=u.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=p),await this.prepareOptions(u);const{req:m,url:f,timeout:b}=await this.buildRequest(u,{retryCount:p-n});await this.prepareRequest(m,{url:f,options:u});const y="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),N=i===void 0?"":`, retryOf: ${i}`,k=Date.now();if(Ps(this).debug(`[${y}] sending request`,ri({retryOfRequestLogID:i,method:u.method,url:f,options:u,headers:m.headers})),!((o=u.signal)===null||o===void 0)&&o.aborted)throw new xh;const T=new AbortController,S=await this.fetchWithTimeout(f,m,b,T).catch(ph),R=Date.now();if(S instanceof globalThis.Error){const I=`retrying, ${n} attempts remaining`;if(!((d=u.signal)===null||d===void 0)&&d.aborted)throw new xh;const j=fh(S)||/timed? ?out/i.test(String(S)+("cause"in S?String(S.cause):""));if(n)return Ps(this).info(`[${y}] connection ${j?"timed out":"failed"} - ${I}`),Ps(this).debug(`[${y}] connection ${j?"timed out":"failed"} (${I})`,ri({retryOfRequestLogID:i,url:f,durationMs:R-k,message:S.message})),this.retryRequest(u,n,i??y);throw Ps(this).info(`[${y}] connection ${j?"timed out":"failed"} - error; no more retries left`),Ps(this).debug(`[${y}] connection ${j?"timed out":"failed"} (error; no more retries left)`,ri({retryOfRequestLogID:i,url:f,durationMs:R-k,message:S.message})),j?new Zb:new xc({cause:S})}const A=`[${y}${N}] ${m.method} ${f} ${S.ok?"succeeded":"failed"} with status ${S.status} in ${R-k}ms`;if(!S.ok){const I=await this.shouldRetry(S);if(n&&I){const Y=`retrying, ${n} attempts remaining`;return await TA(S.body),Ps(this).info(`${A} - ${Y}`),Ps(this).debug(`[${y}] response error (${Y})`,ri({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,durationMs:R-k})),this.retryRequest(u,n,i??y,S.headers)}const j=I?"error; no more retries left":"error; not retryable";Ps(this).info(`${A} - ${j}`);const E=await S.text().catch(Y=>ph(Y).message),D=vA(E),L=D?void 0:E;throw Ps(this).debug(`[${y}] response error (${j})`,ri({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,message:L,durationMs:Date.now()-k})),this.makeStatusError(S.status,D,L,S.headers)}return Ps(this).info(A),Ps(this).debug(`[${y}] response start`,ri({retryOfRequestLogID:i,url:S.url,status:S.status,headers:S.headers,durationMs:R-k})),{response:S,options:u,controller:T,requestLogID:y,retryOfRequestLogID:i,startTime:k}}async fetchWithTimeout(e,n,i,r){const o=n||{},{signal:d,method:u}=o,p=lc(o,["signal","method"]);d&&d.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),i),f=globalThis.ReadableStream&&p.body instanceof globalThis.ReadableStream||typeof p.body=="object"&&p.body!==null&&Symbol.asyncIterator in p.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},f?{duplex:"half"}:{}),{method:"GET"}),p);u&&(b.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(m)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var o;let d;const u=r==null?void 0:r.get("retry-after-ms");if(u){const m=parseFloat(u);Number.isNaN(m)||(d=m)}const p=r==null?void 0:r.get("retry-after");if(p&&!d){const m=parseFloat(p);Number.isNaN(m)?d=Date.parse(p)-Date.now():d=m*1e3}if(!(d&&0<=d&&d<60*1e3)){const m=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;d=this.calculateDefaultRetryTimeoutMillis(n,m)}return await yA(d),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,d=Math.min(.5*Math.pow(2,o),8),u=1-Math.random()*.25;return d*u*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,o;const d=Object.assign({},e),{method:u,path:p,query:m,defaultBaseURL:f}=d,b=this.buildURL(p,m,f);"timeout"in d&&bA("timeout",d.timeout),d.timeout=(i=d.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:y,body:N}=this.buildBody({options:d}),k=await this.buildHeaders({options:e,method:u,bodyHeaders:y,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:k},d.signal&&{signal:d.signal}),globalThis.ReadableStream&&N instanceof globalThis.ReadableStream&&{duplex:"half"}),N&&{body:N}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(o=d.fetchOptions)!==null&&o!==void 0?o:{}),url:b,timeout:d.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const d=await this.authHeaders(e);let u=nr([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),kA()),this._options.defaultHeaders,i,e.headers,d]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=nr([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:_A(e)}:this.encoder({body:e,headers:i})}}bc.DEFAULT_TIMEOUT=6e4;class ws extends bc{constructor(){super(...arguments),this.interactions=new pv(this)}}gv=ws;ws.GeminiNextGenAPIClient=gv;ws.GeminiNextGenAPIClientError=Nn;ws.APIError=Gs;ws.APIConnectionError=xc;ws.APIConnectionTimeoutError=Zb;ws.APIUserAbortError=xh;ws.NotFoundError=nv;ws.ConflictError=av;ws.RateLimitError=lv;ws.BadRequestError=ev;ws.AuthenticationError=tv;ws.InternalServerError=rv;ws.PermissionDeniedError=sv;ws.UnprocessableEntityError=iv;ws.toFile=MA;ws.Interactions=pv;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zA(s,e){const n={},i=x(s,["name"]);return i!=null&&g(n,["_url","name"],i),n}function WA(s,e){const n={},i=x(s,["name"]);return i!=null&&g(n,["_url","name"],i),n}function JA(s,e){const n={},i=x(s,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function YA(s,e){const n={},i=x(s,["sdkHttpResponse"]);return i!=null&&g(n,["sdkHttpResponse"],i),n}function KA(s,e,n){const i={};if(x(s,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=x(s,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&g(e,["displayName"],r),x(s,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=x(s,["epochCount"]);e!==void 0&&o!=null&&g(e,["tuningTask","hyperparameters","epochCount"],o);const d=x(s,["learningRateMultiplier"]);if(d!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],d),x(s,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(s,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(x(s,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(x(s,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(x(s,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const u=x(s,["batchSize"]);e!==void 0&&u!=null&&g(e,["tuningTask","hyperparameters","batchSize"],u);const p=x(s,["learningRate"]);if(e!==void 0&&p!=null&&g(e,["tuningTask","hyperparameters","learningRate"],p),x(s,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(x(s,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(x(s,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(x(s,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(x(s,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(x(s,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return i}function XA(s,e,n){const i={};let r=x(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const E=x(s,["validationDataset"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec"],Vu(E))}else if(r==="PREFERENCE_TUNING"){const E=x(s,["validationDataset"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec"],Vu(E))}else if(r==="DISTILLATION"){const E=x(s,["validationDataset"]);e!==void 0&&E!=null&&g(e,["distillationSpec"],Vu(E))}const o=x(s,["tunedModelDisplayName"]);e!==void 0&&o!=null&&g(e,["tunedModelDisplayName"],o);const d=x(s,["description"]);e!==void 0&&d!=null&&g(e,["description"],d);let u=x(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const E=x(s,["epochCount"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],E)}else if(u==="PREFERENCE_TUNING"){const E=x(s,["epochCount"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],E)}else if(u==="DISTILLATION"){const E=x(s,["epochCount"]);e!==void 0&&E!=null&&g(e,["distillationSpec","hyperParameters","epochCount"],E)}let p=x(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const E=x(s,["learningRateMultiplier"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],E)}else if(p==="PREFERENCE_TUNING"){const E=x(s,["learningRateMultiplier"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],E)}else if(p==="DISTILLATION"){const E=x(s,["learningRateMultiplier"]);e!==void 0&&E!=null&&g(e,["distillationSpec","hyperParameters","learningRateMultiplier"],E)}let m=x(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const E=x(s,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],E)}else if(m==="PREFERENCE_TUNING"){const E=x(s,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],E)}else if(m==="DISTILLATION"){const E=x(s,["exportLastCheckpointOnly"]);e!==void 0&&E!=null&&g(e,["distillationSpec","exportLastCheckpointOnly"],E)}let f=x(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const E=x(s,["adapterSize"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],E)}else if(f==="PREFERENCE_TUNING"){const E=x(s,["adapterSize"]);e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],E)}else if(f==="DISTILLATION"){const E=x(s,["adapterSize"]);e!==void 0&&E!=null&&g(e,["distillationSpec","hyperParameters","adapterSize"],E)}let b=x(n,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const E=x(s,["tuningMode"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","tuningMode"],E)}const y=x(s,["customBaseModel"]);e!==void 0&&y!=null&&g(e,["customBaseModel"],y);let N=x(n,["config","method"]);if(N===void 0&&(N="SUPERVISED_FINE_TUNING"),N==="SUPERVISED_FINE_TUNING"){const E=x(s,["batchSize"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","batchSize"],E)}let k=x(n,["config","method"]);if(k===void 0&&(k="SUPERVISED_FINE_TUNING"),k==="SUPERVISED_FINE_TUNING"){const E=x(s,["learningRate"]);e!==void 0&&E!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRate"],E)}const T=x(s,["labels"]);e!==void 0&&T!=null&&g(e,["labels"],T);const S=x(s,["beta"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],S);const R=x(s,["baseTeacherModel"]);e!==void 0&&R!=null&&g(e,["distillationSpec","baseTeacherModel"],R);const A=x(s,["tunedTeacherModelSource"]);e!==void 0&&A!=null&&g(e,["distillationSpec","tunedTeacherModelSource"],A);const I=x(s,["sftLossWeightMultiplier"]);e!==void 0&&I!=null&&g(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],I);const j=x(s,["outputUri"]);return e!==void 0&&j!=null&&g(e,["outputUri"],j),i}function QA(s,e){const n={},i=x(s,["baseModel"]);i!=null&&g(n,["baseModel"],i);const r=x(s,["preTunedModel"]);r!=null&&g(n,["preTunedModel"],r);const o=x(s,["trainingDataset"]);o!=null&&c2(o);const d=x(s,["config"]);return d!=null&&KA(d,n),n}function ZA(s,e){const n={},i=x(s,["baseModel"]);i!=null&&g(n,["baseModel"],i);const r=x(s,["preTunedModel"]);r!=null&&g(n,["preTunedModel"],r);const o=x(s,["trainingDataset"]);o!=null&&d2(o,n,e);const d=x(s,["config"]);return d!=null&&XA(d,n,e),n}function e2(s,e){const n={},i=x(s,["name"]);return i!=null&&g(n,["_url","name"],i),n}function t2(s,e){const n={},i=x(s,["name"]);return i!=null&&g(n,["_url","name"],i),n}function s2(s,e,n){const i={},r=x(s,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const o=x(s,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const d=x(s,["filter"]);return e!==void 0&&d!=null&&g(e,["_query","filter"],d),i}function n2(s,e,n){const i={},r=x(s,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const o=x(s,["pageToken"]);e!==void 0&&o!=null&&g(e,["_query","pageToken"],o);const d=x(s,["filter"]);return e!==void 0&&d!=null&&g(e,["_query","filter"],d),i}function a2(s,e){const n={},i=x(s,["config"]);return i!=null&&s2(i,n),n}function i2(s,e){const n={},i=x(s,["config"]);return i!=null&&n2(i,n),n}function l2(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["nextPageToken"]);r!=null&&g(n,["nextPageToken"],r);const o=x(s,["tunedModels"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(u=>bv(u))),g(n,["tuningJobs"],d)}return n}function r2(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["nextPageToken"]);r!=null&&g(n,["nextPageToken"],r);const o=x(s,["tuningJobs"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(u=>vh(u))),g(n,["tuningJobs"],d)}return n}function o2(s,e){const n={},i=x(s,["name"]);i!=null&&g(n,["model"],i);const r=x(s,["name"]);return r!=null&&g(n,["endpoint"],r),n}function c2(s,e){const n={};if(x(s,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(s,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=x(s,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>o)),g(n,["examples","examples"],r)}return n}function d2(s,e,n){const i={};let r=x(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const d=x(s,["gcsUri"]);e!==void 0&&d!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(r==="PREFERENCE_TUNING"){const d=x(s,["gcsUri"]);e!==void 0&&d!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(r==="DISTILLATION"){const d=x(s,["gcsUri"]);e!==void 0&&d!=null&&g(e,["distillationSpec","promptDatasetUri"],d)}let o=x(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const d=x(s,["vertexDatasetResource"]);e!==void 0&&d!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(o==="PREFERENCE_TUNING"){const d=x(s,["vertexDatasetResource"]);e!==void 0&&d!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}else if(o==="DISTILLATION"){const d=x(s,["vertexDatasetResource"]);e!==void 0&&d!=null&&g(e,["distillationSpec","promptDatasetUri"],d)}if(x(s,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function bv(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["name"]);r!=null&&g(n,["name"],r);const o=x(s,["state"]);o!=null&&g(n,["state"],Db(o));const d=x(s,["createTime"]);d!=null&&g(n,["createTime"],d);const u=x(s,["tuningTask","startTime"]);u!=null&&g(n,["startTime"],u);const p=x(s,["tuningTask","completeTime"]);p!=null&&g(n,["endTime"],p);const m=x(s,["updateTime"]);m!=null&&g(n,["updateTime"],m);const f=x(s,["description"]);f!=null&&g(n,["description"],f);const b=x(s,["baseModel"]);b!=null&&g(n,["baseModel"],b);const y=x(s,["_self"]);return y!=null&&g(n,["tunedModel"],o2(y)),n}function vh(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["name"]);r!=null&&g(n,["name"],r);const o=x(s,["state"]);o!=null&&g(n,["state"],Db(o));const d=x(s,["createTime"]);d!=null&&g(n,["createTime"],d);const u=x(s,["startTime"]);u!=null&&g(n,["startTime"],u);const p=x(s,["endTime"]);p!=null&&g(n,["endTime"],p);const m=x(s,["updateTime"]);m!=null&&g(n,["updateTime"],m);const f=x(s,["error"]);f!=null&&g(n,["error"],f);const b=x(s,["description"]);b!=null&&g(n,["description"],b);const y=x(s,["baseModel"]);y!=null&&g(n,["baseModel"],y);const N=x(s,["tunedModel"]);N!=null&&g(n,["tunedModel"],N);const k=x(s,["preTunedModel"]);k!=null&&g(n,["preTunedModel"],k);const T=x(s,["supervisedTuningSpec"]);T!=null&&g(n,["supervisedTuningSpec"],T);const S=x(s,["preferenceOptimizationSpec"]);S!=null&&g(n,["preferenceOptimizationSpec"],S);const R=x(s,["distillationSpec"]);R!=null&&g(n,["distillationSpec"],R);const A=x(s,["tuningDataStats"]);A!=null&&g(n,["tuningDataStats"],A);const I=x(s,["encryptionSpec"]);I!=null&&g(n,["encryptionSpec"],I);const j=x(s,["partnerModelTuningSpec"]);j!=null&&g(n,["partnerModelTuningSpec"],j);const E=x(s,["customBaseModel"]);E!=null&&g(n,["customBaseModel"],E);const D=x(s,["experiment"]);D!=null&&g(n,["experiment"],D);const L=x(s,["labels"]);L!=null&&g(n,["labels"],L);const G=x(s,["outputUri"]);G!=null&&g(n,["outputUri"],G);const Y=x(s,["pipelineJob"]);Y!=null&&g(n,["pipelineJob"],Y);const q=x(s,["serviceAccount"]);q!=null&&g(n,["serviceAccount"],q);const ce=x(s,["tunedModelDisplayName"]);ce!=null&&g(n,["tunedModelDisplayName"],ce);const Q=x(s,["veoTuningSpec"]);return Q!=null&&g(n,["veoTuningSpec"],Q),n}function u2(s,e){const n={},i=x(s,["sdkHttpResponse"]);i!=null&&g(n,["sdkHttpResponse"],i);const r=x(s,["name"]);r!=null&&g(n,["name"],r);const o=x(s,["metadata"]);o!=null&&g(n,["metadata"],o);const d=x(s,["done"]);d!=null&&g(n,["done"],d);const u=x(s,["error"]);return u!=null&&g(n,["error"],u),n}function Vu(s,e){const n={},i=x(s,["gcsUri"]);i!=null&&g(n,["validationDatasetUri"],i);const r=x(s,["vertexDatasetResource"]);return r!=null&&g(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h2 extends ua{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ui(ca.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:r});return o.baseModel=void 0,await this.tuneInternal(o)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),o=await this.tuneMldevInternal(r);let d="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?d=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(d=o.name.split("/operations/")[0]),{name:d,state:lh.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=t2(e);return u=Le("{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>vh(f))}else{const m=e2(e);return u=Le("{name}",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>bv(f))}}async listInternal(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=i2(e);return u=Le("tuningJobs",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=r2(f),y=new hg;return Object.assign(y,b),y})}else{const m=a2(e);return u=Le("tunedModels",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=l2(f),y=new hg;return Object.assign(y,b),y})}}async cancel(e){var n,i,r,o;let d,u="",p={};if(this.apiClient.isVertexAI()){const m=WA(e);return u=Le("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=YA(f),y=new mg;return Object.assign(y,b),y})}else{const m=zA(e);return u=Le("{name}:cancel",m._url),p=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:p,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(b=>{const y=b;return y.sdkHttpResponse={headers:f.headers},y})),d.then(f=>{const b=JA(f),y=new mg;return Object.assign(y,b),y})}}async tuneInternal(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI()){const u=ZA(e,e);return o=Le("tuningJobs",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const f=m;return f.sdkHttpResponse={headers:p.headers},f})),r.then(p=>vh(p))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,o="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=QA(e);return o=Le("tunedModels",u._url),d=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json().then(m=>{const f=m;return f.sdkHttpResponse={headers:p.headers},f})),r.then(p=>u2(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m2{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const f2=1024*1024*8,p2=3,x2=1e3,g2=2,oc="x-goog-upload-status";async function b2(s,e,n){var i;const r=await vv(s,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[oc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function v2(s,e,n){var i;const r=await vv(s,e,n),o=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[oc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const d=Cb(o),u=new Th;return Object.assign(u,d),u}async function vv(s,e,n){var i,r;let o=0,d=0,u=new oh(new Response),p="upload";for(o=s.size;d<o;){const m=Math.min(f2,o-d),f=s.slice(d,d+m);d+m>=o&&(p+=", finalize");let b=0,y=x2;for(;b<p2&&(u=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":String(d),"Content-Length":String(m)}}}),!(!((i=u==null?void 0:u.headers)===null||i===void 0)&&i[oc]));)b++,await w2(y),y=y*g2;if(d+=m,((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r[oc])!=="active")break;if(o<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function y2(s){return{size:s.size,type:s.type}}function w2(s){return new Promise(e=>setTimeout(e,s))}class N2{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await b2(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await v2(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await y2(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j2{create(e,n,i){return new k2(e,n,i)}}class k2{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gg="x-goog-api-key";class S2{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(Gg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Gg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _2="gl-node/";class T2{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new ws({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=gS(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new S2(this.apiKey);this.apiClient=new yE({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:_2+"web",uploader:new N2,downloader:new m2}),this.models=new PE(this.apiClient),this.live=new ME(this.apiClient,r,new j2),this.batches=new W_(this.apiClient),this.chats=new C1(this.models,this.apiClient),this.caches=new S1(this.apiClient),this.files=new G1(this.apiClient),this.operations=new GE(this.apiClient),this.authTokens=new sA(this.apiClient),this.tunings=new h2(this.apiClient),this.fileSearchStores=new dA(this.apiClient)}}var C2={};const E2=async(s,e)=>{const n=C2.API_KEY;if(!n)return null;const i=new T2({apiKey:n});try{const r=await i.models.generateContent({model:"gemini-3-flash-preview",contents:`
        Write a press kit for this cricket match:
        ${s.teamAName} vs ${s.teamBName}
        Result: ${s.result||"Match in progress"}
        Scores: ${s.teamAScore} vs ${s.teamBScore}
        Venue: ${s.venue}
        
        Generate:
        1. A catchy headline.
        2. A 100-word dramatic match summary.
        3. 3 viral style social media posts (Twitter/Instagram) with hashtags.
      `,config:{responseMimeType:"application/json",responseSchema:{type:rn.OBJECT,properties:{headline:{type:rn.STRING},summary:{type:rn.STRING},socialPosts:{type:rn.ARRAY,items:{type:rn.STRING}}}}}});return JSON.parse(r.text||"{}")}catch(r){return console.error("Press Kit AI Error:",r),null}},A2=({onBack:s,fixtures:e,isEmbedded:n=!1})=>{var k;const[i,r]=_.useState(null),[o,d]=_.useState("LIGHT"),[u,p]=_.useState("VISUAL"),[m,f]=_.useState(!1),[b,y]=_.useState(null),N=async()=>{if(!i||!i.savedState)return;f(!0);const T=await E2(i,i.savedState);y(T),f(!1)};return t.jsxs("div",{className:`animate-in slide-in-from-bottom-8 duration-500 pb-20 ${n?"":"pt-0"}`,children:[!n&&t.jsxs("div",{className:"flex items-center gap-6 mb-10",children:[t.jsx("button",{onClick:s,className:"w-12 h-12 rounded-full bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-50 hover:text-black transition-all shadow-sm",children:""}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-4xl font-black text-slate-900 tracking-tight",children:["Media ",t.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-purple-500",children:"Studio"})]}),t.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Generate engaging league assets"})]})]}),t.jsxs("div",{className:"flex gap-4 mb-8",children:[t.jsx("button",{onClick:()=>p("VISUAL"),className:`px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${u==="VISUAL"?"bg-slate-900 text-white":"bg-white border border-slate-200 text-slate-400"}`,children:"Visual Generator"}),t.jsx("button",{onClick:()=>p("AI_PRESS"),className:`px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${u==="AI_PRESS"?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-400"}`,children:"AI Press Room"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[t.jsx("div",{className:"space-y-8",children:t.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border border-slate-200 shadow-lg",children:[t.jsx("h3",{className:"text-xl font-black text-slate-900 mb-6",children:"Source Selection"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest mb-2 block",children:"Source Match"}),t.jsxs("select",{onChange:T=>r(e.find(S=>S.id===T.target.value)||null),className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-5 py-4 font-bold outline-none",children:[t.jsx("option",{value:"",children:"-- Choose Fixture --"}),e.map(T=>t.jsxs("option",{value:T.id,children:[T.teamAName," vs ",T.teamBName]},T.id))]})]}),u==="VISUAL"&&t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest mb-2 block",children:"Visual Theme"}),t.jsx("div",{className:"flex gap-2",children:["LIGHT","DARK","NEON"].map(T=>t.jsx("button",{onClick:()=>d(T),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase border transition-all ${o===T?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-500 border-slate-200"}`,children:T},T))})]}),u==="AI_PRESS"&&t.jsx("button",{onClick:N,disabled:!i||m,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl transition-all active:scale-95 disabled:opacity-50",children:m?"AI is Writing...":"Generate Press Kit"})]})]})}),t.jsx("div",{className:"bg-slate-100 p-8 rounded-[2.5rem] border border-slate-200 flex items-center justify-center relative overflow-hidden min-h-[400px]",children:i?u==="VISUAL"?t.jsx("div",{className:`aspect-[4/5] w-full max-w-sm rounded-xl p-8 flex flex-col justify-between relative overflow-hidden shadow-2xl transition-all duration-500 ${o==="LIGHT"?"bg-white text-black":o==="NEON"?"bg-black border-2 border-pink-500 text-white":"bg-slate-900 text-white"}`,children:t.jsxs("div",{className:"z-10 text-center",children:[t.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.4em] opacity-60 mb-8",children:"Match Day Live"}),t.jsxs("div",{className:"flex justify-between items-center mb-6 px-4",children:[t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:"w-14 h-14 rounded-full bg-slate-100 flex items-center justify-center text-2xl font-black mb-2 text-black",children:i.teamAName.charAt(0)}),t.jsx("span",{className:"font-black text-xl leading-none",children:i.teamAScore||"0/0"})]}),t.jsx("div",{className:"text-3xl font-black opacity-30",children:"VS"}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:"w-14 h-14 rounded-full bg-slate-100 flex items-center justify-center text-2xl font-black mb-2 text-black",children:i.teamBName.charAt(0)}),t.jsx("span",{className:"font-black text-xl leading-none",children:i.teamBScore||"0/0"})]})]}),t.jsx("div",{className:"py-2 px-6 rounded-lg inline-block text-[10px] font-black uppercase tracking-widest bg-black text-white",children:i.status})]})}):t.jsxs("div",{className:"w-full max-w-md space-y-4 h-full overflow-y-auto custom-scrollbar",children:[m&&t.jsxs("div",{className:"text-center py-20",children:[t.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Drafting Article..."})]}),b&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[t.jsx("div",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest mb-2",children:"Headline"}),t.jsx("h3",{className:"text-xl font-serif font-black text-slate-900",children:b.headline})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[t.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Social Posts"}),t.jsx("div",{className:"space-y-3",children:(k=b.socialPosts)==null?void 0:k.map((T,S)=>t.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl text-xs font-medium text-slate-700 italic border border-slate-100",children:['"',T,'"']},S))})]}),t.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-slate-200",children:[t.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Match Report"}),t.jsx("p",{className:"text-sm leading-relaxed text-slate-600",children:b.summary})]})]}),!m&&!b&&t.jsx("div",{className:"text-center py-20 text-slate-400 text-xs font-bold uppercase",children:"Ready to generate"})]}):t.jsx("div",{className:"text-slate-400 font-bold uppercase text-xs",children:"Select a match to begin"})})]})]})};function vc(s,e,n,i,r){const o=new Map,d={wides:0,noBalls:0,byes:0,legByes:0,penalty:0,total:0},u=[];let p=0,m=0,f=0;e.forEach(A=>{o.set(A.id,{playerId:A.id,name:A.name,runs:0,balls:0,fours:0,sixes:0,strikeRate:0,scoringSequence:[],isOut:!1,dismissal:"",bowlerName:"",atCrease:A.id===i||A.id===r})}),[...s].filter(A=>A.innings===n).reverse().forEach(A=>{var j;if((j=A.commentary)!=null&&j.startsWith("EVENT"))return;if(A.extraType==="Wide"){const E=1+(A.extraRuns||0);d.wides+=E,d.total+=E,p+=E}else A.extraType==="NoBall"?(d.noBalls+=1,d.total+=1,A.batRuns===0&&A.extraRuns&&A.extraRuns>0&&(d.noBalls+=A.extraRuns,d.total+=A.extraRuns),p+=1+(A.batRuns||0)+(A.extraRuns||0)):A.extraType==="Bye"?(d.byes+=A.extraRuns||0,d.total+=A.extraRuns||0,p+=A.extraRuns||0):A.extraType==="LegBye"?(d.legByes+=A.extraRuns||0,d.total+=A.extraRuns||0,p+=A.extraRuns||0):p+=A.runs;Mn(A.extraType)&&f++;const I=o.get(A.strikerId);if(I){const E=Mn(A.extraType),D=A.extraType==="NoBall";if(E||D){let L="";if(A.isWicket&&A.outPlayerId===A.strikerId)L="W";else{const G=A.batRuns??A.runs??0;G===0?L="":L=G.toString()}if(I.scoringSequence.push(L),E||D&&(A.batRuns||0)>0){const G=A.batRuns??A.runs??0;I.runs+=G,G===4&&(I.fours+=1),G===6&&(I.sixes+=1)}(E||D)&&(I.balls+=1)}}if(A.isWicket&&A.outPlayerId){m++;const E=o.get(A.outPlayerId);E&&(E.isOut=!0,E.dismissal=A.dismissalType||A.wicketType||"Out",E.atCrease=!1,e.find(D=>!1),u.push({score:p,wicketNumber:m,over:ll(f),batterName:E.name}))}});const y=Array.from(o.values());y.forEach(A=>{A.strikeRate=A.balls>0?parseFloat((A.runs/A.balls*100).toFixed(2)):0});const N=y.filter(A=>A.balls>0||A.isOut||A.atCrease),k=y.filter(A=>!A.balls&&!A.isOut&&!A.atCrease),T=ll(f),S=f/6,R=S>0?(p/S).toFixed(2):"0.00";return{rows:N,extras:d,totalScore:`${p}/${m}`,overs:T,runRate:R,fow:u,didNotBat:k.map(A=>e.find(I=>I.id===A.playerId)).filter(Boolean)}}function Oh(s,e,n){const i=new Map;e.forEach(u=>{i.set(u.id,{playerId:u.id,name:u.name,balls:0,runs:0,wickets:0,maidens:0,overs:"0.0",economy:0,oversHistory:[]})});const o=[...s.filter(u=>{var p;return u.innings===n&&!((p=u.commentary)!=null&&p.startsWith("EVENT"))})].sort((u,p)=>u.timestamp-p.timestamp),d=new Map;return o.forEach(u=>{const p=i.get(u.bowlerId);if(!p)return;if(u.extraType!=="Bye"&&u.extraType!=="LegBye"){const f=u.extraType==="Wide"||u.extraType==="NoBall"?1:0;p.runs+=u.runs+(u.extraRuns||0)+f}Mn(u.extraType)&&(p.balls+=1),u.isWicket&&u.creditBowler!==!1&&(p.wickets+=1),d.has(u.bowlerId)||d.set(u.bowlerId,new Map);const m=d.get(u.bowlerId);m.has(u.over)||m.set(u.over,[]),m.get(u.over).push(u)}),i.forEach((u,p)=>{const m=d.get(p);if(m){const f=Array.from(m.keys()).sort((b,y)=>b-y);u.oversHistory=f.map(b=>m.get(b))}}),Array.from(i.values()).filter(u=>u.balls>0||u.oversHistory.length>0).map(u=>{const p=u.balls/6;return{...u,overs:ll(u.balls),economy:p>0?parseFloat((u.runs/p).toFixed(2)):0}})}const I2=({data:s})=>{const{rows:e,extras:n,totalScore:i,overs:r,runRate:o,fow:d,didNotBat:u}=s;return t.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-xl overflow-hidden shadow-xl flex flex-col w-full",children:[t.jsx("div",{className:"overflow-x-auto no-scrollbar",children:t.jsxs("table",{className:"w-full text-left border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-800/50 text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] border-b border-slate-800",children:[t.jsx("th",{className:"px-3 py-2",children:"Batter"}),t.jsx("th",{className:"px-2 py-2 text-center",children:"R"}),t.jsx("th",{className:"px-2 py-2 text-center",children:"B"}),t.jsx("th",{className:"px-2 py-2 text-center",children:"4s"}),t.jsx("th",{className:"px-2 py-2 text-center",children:"6s"}),t.jsx("th",{className:"px-2 py-2 text-right pr-3",children:"SR"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-800/50",children:e.map(p=>t.jsxs("tr",{className:`group hover:bg-white/5 transition-colors ${p.atCrease?"bg-indigo-500/5":""}`,children:[t.jsx("td",{className:"px-3 py-1.5",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("span",{className:`text-[11px] font-black ${p.atCrease?"text-indigo-400":"text-slate-200"}`,children:[p.name,p.atCrease?"*":""]}),t.jsx("span",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-tighter mt-0.5 italic",children:p.isOut?p.dismissal:p.atCrease?"not out":"did not bat"})]})}),t.jsx("td",{className:"px-2 py-1.5 text-center font-black text-white text-[11px]",children:p.runs}),t.jsx("td",{className:"px-2 py-1.5 text-center text-slate-400 font-bold text-[11px]",children:p.balls}),t.jsx("td",{className:"px-2 py-1.5 text-center text-slate-500 font-medium text-[10px]",children:p.fours}),t.jsx("td",{className:"px-2 py-1.5 text-center text-slate-500 font-medium text-[10px]",children:p.sixes}),t.jsx("td",{className:"px-2 py-1.5 text-right pr-3 text-indigo-500 font-black tabular-nums text-[10px]",children:p.strikeRate})]},p.playerId))})]})}),t.jsxs("div",{className:"border-t border-slate-800 bg-slate-800/20 px-3 py-2 space-y-1",children:[t.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[t.jsx("span",{className:"font-bold text-slate-400 uppercase tracking-widest",children:"Extras"}),t.jsxs("span",{className:"font-black text-white",children:[n.total," ",t.jsxs("span",{className:"text-slate-500 font-medium ml-1",children:["(b ",n.byes,", lb ",n.legByes,", w ",n.wides,", nb ",n.noBalls,", p ",n.penalty,")"]})]})]}),t.jsxs("div",{className:"flex justify-between items-center border-t border-slate-800/50 pt-1",children:[t.jsx("span",{className:"font-black text-sm text-white uppercase tracking-widest",children:"Total"}),t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"font-black text-lg text-white leading-none",children:i}),t.jsxs("span",{className:"text-[10px] font-bold text-slate-400 ml-2",children:["(",r," Ov, RR: ",o,")"]})]})]})]}),u.length>0&&t.jsxs("div",{className:"px-3 py-2 border-t border-slate-800 bg-slate-900",children:[t.jsx("div",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest mb-0.5",children:"Did Not Bat"}),t.jsx("div",{className:"text-[10px] text-slate-400 font-medium leading-relaxed",children:u.map(p=>p.name).join(", ")})]}),d.length>0&&t.jsxs("div",{className:"px-3 py-2 border-t border-slate-800 bg-slate-900/50",children:[t.jsx("div",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Fall of Wickets"}),t.jsx("div",{className:"flex flex-wrap gap-1.5",children:d.map((p,m)=>t.jsxs("span",{className:"text-[9px] text-slate-300 bg-slate-800 px-1.5 py-0.5 rounded border border-slate-700",children:[t.jsxs("span",{className:"font-black text-white",children:[p.score,"-",p.wicketNumber]})," (",p.batterName,", ",p.over,")"]},m))})]})]})},R2=({rows:s})=>t.jsx("div",{className:"bg-slate-900 border border-slate-800 rounded-xl overflow-hidden shadow-xl w-full",children:t.jsx("div",{className:"overflow-x-auto no-scrollbar",children:t.jsxs("table",{className:"w-full text-left border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-800/50 text-[9px] font-black text-slate-500 uppercase tracking-[0.2em] border-b border-slate-800",children:[t.jsx("th",{className:"px-3 py-2",children:"Bowler"}),t.jsx("th",{className:"px-2 py-2 text-center",children:"O"}),t.jsx("th",{className:"px-2 py-2 text-center",children:"M"}),t.jsx("th",{className:"px-2 py-2 text-center",children:"R"}),t.jsx("th",{className:"px-2 py-2 text-center",children:"W"}),t.jsx("th",{className:"px-2 py-2 text-right pr-3",children:"Econ"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-800/50",children:s.map(e=>t.jsxs("tr",{className:"group hover:bg-white/5 transition-colors",children:[t.jsx("td",{className:"px-3 py-1.5",children:t.jsx("span",{className:"text-[11px] font-black text-slate-200 group-hover:text-emerald-400 transition-colors",children:e.name})}),t.jsx("td",{className:"px-2 py-1.5 text-center text-slate-300 font-bold text-[11px]",children:e.overs}),t.jsx("td",{className:"px-2 py-1.5 text-center text-slate-500 font-medium text-[11px]",children:e.maidens}),t.jsx("td",{className:"px-2 py-1.5 text-center text-white font-black text-[11px]",children:e.runs}),t.jsx("td",{className:"px-2 py-1.5 text-center text-emerald-500 font-black text-[11px]",children:e.wickets}),t.jsx("td",{className:"px-2 py-1.5 text-right pr-3 text-amber-500 font-black tabular-nums text-[10px]",children:e.economy})]},e.playerId))})]})})}),M2=({data:s})=>{const{rows:e,extras:n,totalScore:i,overs:r,runRate:o,fow:d,didNotBat:u,bowlingRows:p=[]}=s,m=b=>b.bowlerName||"",f=b=>{let y=t.jsx("span",{className:"font-bold text-slate-400",children:"."});return b.isWicket?y=t.jsx("span",{className:"font-black text-red-600",children:"W"}):b.extraType==="Wide"?y=t.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[t.jsx("span",{className:"text-indigo-600 text-[10px] font-black",children:"+"}),b.extraRuns>0&&t.jsx("span",{className:"absolute -top-1 -right-1 text-[7px] text-indigo-600",children:b.extraRuns})]}):b.extraType==="NoBall"?y=t.jsx("div",{className:"relative w-full h-full flex items-center justify-center",children:t.jsx("div",{className:"w-3 h-3 rounded-full border border-purple-600 flex items-center justify-center",children:t.jsx("span",{className:"text-[6px] text-purple-600 font-bold",children:b.batRuns>0?b.batRuns:""})})}):b.extraType==="Bye"||b.extraType==="LegBye"?y=t.jsxs("span",{className:"text-[8px] font-black text-slate-500",children:["",t.jsx("span",{className:"text-[6px] align-top",children:b.extraRuns})]}):b.runs>0&&(y=t.jsx("span",{className:"font-bold text-slate-900",children:b.runs})),y};return t.jsxs("div",{className:"bg-white rounded-none md:rounded-[4px] border border-slate-300 shadow-xl overflow-hidden font-mono text-xs text-slate-800 max-w-6xl mx-auto",children:[t.jsxs("div",{className:"bg-[#fdfbf7] p-4 border-b-2 border-slate-800 flex justify-between items-end",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-xl font-serif font-black text-slate-900 uppercase tracking-widest",children:"Official Scorecard"}),t.jsx("p",{className:"text-[10px] uppercase tracking-wider text-slate-500",children:"Innings Details & Analysis"})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-3xl font-black text-slate-900 leading-none",children:i}),t.jsxs("div",{className:"text-xs font-bold text-slate-600 mt-1",children:[r," Overs  RR ",o]})]})]}),t.jsx("div",{className:"w-full overflow-x-auto",children:t.jsxs("table",{className:"w-full text-left border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"bg-slate-100 text-[10px] font-bold text-slate-600 uppercase border-b border-slate-400",children:[t.jsx("th",{className:"px-3 py-2 w-10 border-r border-slate-300 text-center",children:"#"}),t.jsx("th",{className:"px-4 py-2 border-r border-slate-300 w-48",children:"Batsman"}),t.jsx("th",{className:"px-4 py-2 border-r border-slate-300 w-32",children:"How Out"}),t.jsx("th",{className:"px-4 py-2 border-r border-slate-300 w-32",children:"Bowler"}),t.jsx("th",{className:"px-3 py-2 border-r border-slate-300 min-w-[350px]",children:"Runs Scored"}),t.jsx("th",{className:"px-4 py-2 border-r border-slate-300 text-center w-16",children:"Runs"}),t.jsx("th",{className:"px-2 py-2 border-r border-slate-300 text-center text-[9px] w-12",children:"4s"}),t.jsx("th",{className:"px-2 py-2 border-r border-slate-300 text-center text-[9px] w-12",children:"6s"}),t.jsx("th",{className:"px-2 py-2 text-center text-[9px] w-12",children:"Balls"})]})}),t.jsxs("tbody",{children:[e.map((b,y)=>t.jsxs("tr",{className:"border-b border-slate-200 hover:bg-yellow-50/30 transition-colors h-12",children:[t.jsx("td",{className:"border-r border-slate-300 text-center text-slate-400 font-bold",children:y+1}),t.jsx("td",{className:"px-4 border-r border-slate-300 font-bold text-slate-900 flex items-center h-12",children:t.jsxs("div",{className:"truncate",children:[b.name," ",b.atCrease&&t.jsx("span",{className:"ml-1 text-indigo-600 text-lg leading-none",children:"*"})]})}),t.jsx("td",{className:"px-4 border-r border-slate-300 text-slate-600 italic text-[10px]",children:b.isOut?b.dismissal:b.atCrease?"not out":""}),t.jsx("td",{className:"px-4 border-r border-slate-300 text-slate-600 text-[10px] uppercase",children:m(b)}),t.jsx("td",{className:"px-2 border-r border-slate-300 bg-white align-middle",children:t.jsxs("div",{className:"flex flex-wrap items-center gap-1 leading-none py-1",children:[b.scoringSequence.length===0&&t.jsx("span",{className:"text-slate-300 text-[10px] italic",children:"Did not face"}),b.scoringSequence.map((N,k)=>t.jsx("div",{className:`
                               flex items-center justify-center w-5 h-5 text-[10px] font-bold rounded-sm border select-none
                               ${N===""?"border-slate-100 text-slate-400":N==="W"?"border-red-200 bg-red-50 text-red-600":N==="4"?"border-indigo-200 bg-indigo-50 text-indigo-700":N==="6"?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 text-slate-800"}
                            `,children:N},k))]})}),t.jsx("td",{className:"px-4 border-r border-slate-300 text-center font-black text-lg bg-slate-50/50",children:b.runs}),t.jsx("td",{className:"border-r border-slate-300 text-center text-slate-500",children:b.fours}),t.jsx("td",{className:"border-r border-slate-300 text-center text-slate-500",children:b.sixes}),t.jsx("td",{className:"text-center text-slate-500",children:b.balls})]},b.playerId)),t.jsxs("tr",{className:"border-b border-slate-800 bg-slate-50 h-10 font-bold",children:[t.jsx("td",{className:"border-r border-slate-300"}),t.jsx("td",{className:"px-4 border-r border-slate-300 uppercase tracking-widest text-slate-500",children:"Extras"}),t.jsxs("td",{className:"px-4 border-r border-slate-300 col-span-2 text-[10px] text-slate-500",colSpan:2,children:["(b ",n.byes,", lb ",n.legByes,", w ",n.wides,", nb ",n.noBalls,", p ",n.penalty,")"]}),t.jsx("td",{className:"px-4 border-r border-slate-300 text-slate-400 text-[10px] uppercase tracking-widest italic flex items-center",children:"Total Extras"}),t.jsx("td",{className:"px-4 border-r border-slate-300 text-center font-black text-lg",children:n.total}),t.jsx("td",{colSpan:3})]}),u.map((b,y)=>t.jsxs("tr",{className:"border-b border-slate-200 h-10 opacity-60",children:[t.jsx("td",{className:"border-r border-slate-300 text-center text-slate-300 font-bold",children:e.length+y+1}),t.jsx("td",{className:"px-4 border-r border-slate-300 text-slate-500 italic",children:b.name}),t.jsx("td",{className:"px-4 border-r border-slate-300 text-[10px] text-slate-400",children:"Did not bat"}),t.jsx("td",{className:"px-4 border-r border-slate-300"}),t.jsx("td",{className:"px-4 border-r border-slate-300 bg-slate-50/30"}),t.jsx("td",{className:"border-r border-slate-300 bg-slate-100/50"}),t.jsx("td",{className:"border-r border-slate-300 bg-slate-100/50"}),t.jsx("td",{className:"border-r border-slate-300 bg-slate-100/50"}),t.jsx("td",{className:"bg-slate-100/50"})]},b.id))]})]})}),d.length>0&&t.jsxs("div",{className:"border-b-2 border-slate-800 p-4 bg-[#fdfbf7]",children:[t.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest mb-2 text-slate-500",children:"Fall of Wickets"}),t.jsx("div",{className:"flex flex-wrap gap-4",children:d.map((b,y)=>t.jsxs("div",{className:"flex flex-col items-center border border-slate-300 bg-white px-3 py-1 rounded-sm shadow-sm",children:[t.jsx("span",{className:"font-black text-sm",children:b.score}),t.jsx("div",{className:"w-full h-px bg-slate-200 my-0.5"}),t.jsxs("span",{className:"text-[9px] font-bold text-slate-500",children:["for ",b.wicketNumber]})]},y))})]}),t.jsxs("div",{className:"bg-white",children:[t.jsx("div",{className:"bg-slate-800 text-white p-2 text-xs font-bold uppercase tracking-widest border-b border-slate-900",children:"Bowling Analysis"}),t.jsx("div",{className:"w-full overflow-x-auto",children:t.jsxs("div",{className:"w-full overflow-x-auto",children:[t.jsxs("div",{className:"flex border-b border-slate-300 bg-slate-100",children:[t.jsx("div",{className:"w-40 shrink-0 p-2 font-bold border-r border-slate-300 text-[10px] uppercase",children:"Bowler"}),t.jsxs("div",{className:"flex-1 flex",children:[Array.from({length:12}).map((b,y)=>t.jsxs("div",{className:"w-16 shrink-0 border-r border-slate-200 text-center p-1 text-[9px] text-slate-400",children:["Ov ",y+1]},y)),t.jsx("div",{className:"flex-1 text-[9px] text-slate-400 p-1 italic",children:"..."})]}),t.jsxs("div",{className:"w-24 shrink-0 flex text-[9px] text-center font-bold bg-slate-50 border-l border-slate-300",children:[t.jsx("div",{className:"flex-1 py-2 border-r border-slate-200",children:"O"}),t.jsx("div",{className:"flex-1 py-2 border-r border-slate-200",children:"M"}),t.jsx("div",{className:"flex-1 py-2 border-r border-slate-200",children:"R"}),t.jsx("div",{className:"flex-1 py-2",children:"W"})]})]}),p.map(b=>t.jsxs("div",{className:"flex border-b border-slate-300 h-14",children:[t.jsx("div",{className:"w-40 shrink-0 p-3 font-bold border-r border-slate-300 flex items-center text-sm truncate bg-white",children:b.name}),t.jsxs("div",{className:"flex-1 flex bg-white overflow-hidden",children:[b.oversHistory.map((y,N)=>t.jsxs("div",{className:"w-16 shrink-0 border-r border-slate-200 border-dashed flex flex-wrap content-start p-0.5 gap-px relative",children:[y.map((k,T)=>t.jsx("div",{className:"w-4 h-4 flex items-center justify-center text-[9px] bg-slate-50 border border-slate-100 rounded-[2px]",title:k.commentary,children:f(k)},T)),t.jsx("div",{className:"absolute bottom-0.5 right-0.5 text-[7px] text-slate-300 font-mono",children:N+1})]},N)),Array.from({length:Math.max(0,12-b.oversHistory.length)}).map((y,N)=>t.jsx("div",{className:"w-16 shrink-0 border-r border-slate-100 border-dashed bg-slate-50/30"},`empty-${N}`))]}),t.jsxs("div",{className:"w-24 shrink-0 flex text-sm text-center font-bold bg-slate-50 border-l border-slate-300 items-center",children:[t.jsx("div",{className:"flex-1 text-slate-600",children:b.overs}),t.jsx("div",{className:"flex-1 text-slate-400 font-normal",children:b.maidens}),t.jsx("div",{className:"flex-1 text-slate-900",children:b.runs}),t.jsx("div",{className:"flex-1 text-red-600 font-black",children:b.wickets})]})]},b.playerId)),p.length===0&&t.jsx("div",{className:"p-8 text-center text-slate-400 text-xs uppercase italic",children:"No bowling data recorded yet."})]})})]})]})},yc=({matchState:s,teamA:e,teamB:n,onBack:i})=>{const r=_.useMemo(()=>{const k=[];return s.inningsScores.forEach(T=>{k.includes(T.innings)||k.push(T.innings)}),k.includes(s.innings)||(s.innings===1||s.history.some(T=>T.innings===s.innings))&&k.push(s.innings),k.sort((T,S)=>T-S)},[s]),[o,d]=_.useState(r[r.length-1]||1),[u,p]=_.useState("SUMMARY"),[m,f]=_.useState(1),b=k=>{const T=s.inningsScores.find(G=>G.innings===k);let S=T==null?void 0:T.teamId;if(!S&&s.innings===k&&(S=s.battingTeamId),!S){const G=s.history.find(q=>q.innings===k),Y=G==null?void 0:G.strikerId;if(Y&&(e.players.some(q=>q.id===Y)?S=e.id:n.players.some(q=>q.id===Y)&&(S=n.id)),!S)return null}const R=S===e.id?e:n,A=S===e.id?n:e,I=s.innings===k&&!s.isCompleted,j=I?s.strikerId:"",E=I?s.nonStrikerId:"",D=vc(s.history,R.players,k,j,E),L=Oh(s.history,A.players,k);return{battingTeam:R,bowlingTeam:A,battingCard:D,bowlingCard:L}},y=b(o),N=k=>{f(T=>{const S=k==="in"?T+.1:T-.1;return Math.max(.5,Math.min(S,1.5))})};return t.jsxs("div",{className:"flex flex-col h-full bg-slate-950 text-white animate-in zoom-in-95 duration-300",children:[t.jsx("div",{className:"flex items-center justify-between p-3 border-b border-slate-800 bg-slate-900 shrink-0",children:t.jsxs("div",{className:"flex items-center gap-3",children:[i&&t.jsx("button",{onClick:i,className:"w-8 h-8 rounded-full bg-slate-800 hover:bg-slate-700 flex items-center justify-center text-slate-400 hover:text-white transition-all text-sm",children:""}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:"/logo.jpg",alt:"Logo",className:"w-8 h-8 object-contain"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-sm font-black uppercase tracking-tight",children:"Scorecard"}),t.jsxs("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest",children:[e.name," vs ",n.name]})]})]}),s.isCompleted?t.jsxs("div",{className:"flex items-center gap-2 bg-emerald-950/30 border border-emerald-500/20 px-3 py-1 rounded-full",children:[t.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full"}),t.jsx("span",{className:"text-[9px] font-black text-emerald-500 uppercase tracking-widest",children:"Completed"})]}):t.jsxs("div",{className:"flex items-center gap-2 bg-indigo-950/30 border border-indigo-500/20 px-3 py-1 rounded-full animate-pulse",children:[t.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full"}),t.jsx("span",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-widest",children:"Live Cloud Match"})]})]})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("div",{className:"flex bg-slate-800 p-0.5 rounded-lg border border-slate-700",children:[t.jsx("button",{onClick:()=>N("out"),className:"w-7 h-7 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700 rounded text-xs",children:"-"}),t.jsxs("span",{className:"w-8 flex items-center justify-center text-[9px] font-mono text-slate-500",children:[Math.round(m*100),"%"]}),t.jsx("button",{onClick:()=>N("in"),className:"w-7 h-7 flex items-center justify-center text-slate-400 hover:text-white hover:bg-slate-700 rounded text-xs",children:"+"})]}),t.jsxs("div",{className:"flex bg-slate-800 p-0.5 rounded-lg border border-slate-700",children:[t.jsx("button",{onClick:()=>p("SUMMARY"),className:`px-3 py-1 rounded-md text-[9px] font-black uppercase tracking-widest transition-all ${u==="SUMMARY"?"bg-indigo-600 text-white shadow-sm":"text-slate-400 hover:text-white"}`,children:"Summary"}),t.jsx("button",{onClick:()=>p("BOOK"),className:`px-3 py-1 rounded-md text-[9px] font-black uppercase tracking-widest transition-all ${u==="BOOK"?"bg-indigo-600 text-white shadow-sm":"text-slate-400 hover:text-white"}`,children:"Book"})]})]}),t.jsx("div",{className:"flex bg-slate-900 border-b border-slate-800 overflow-x-auto no-scrollbar shrink-0",children:r.map(k=>{const T=b(k);return T?t.jsxs("button",{onClick:()=>d(k),className:`px-4 py-3 text-[10px] font-black uppercase tracking-widest whitespace-nowrap border-b-2 transition-all ${o===k?"border-indigo-500 text-white bg-slate-800":"border-transparent text-slate-500 hover:text-slate-300 hover:bg-slate-800/50"}`,children:["Inn ",k," (",T.battingTeam.name.substring(0,3).toUpperCase(),")"]},k):null})}),t.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 bg-slate-950",children:t.jsx("div",{style:{transform:`scale(${m})`,transformOrigin:"top center",transition:"transform 0.2s ease"},children:y?u==="SUMMARY"?t.jsxs("div",{className:"space-y-4 max-w-4xl mx-auto",children:[t.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-300",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"text-xs font-black text-indigo-400 uppercase tracking-widest",children:"Batting"}),t.jsx("div",{className:"text-[10px] font-bold text-slate-400",children:y.battingTeam.name})]}),t.jsx(I2,{data:y.battingCard})]}),t.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-500",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"text-xs font-black text-emerald-400 uppercase tracking-widest",children:"Bowling"}),t.jsx("div",{className:"text-[10px] font-bold text-slate-400",children:y.bowlingTeam.name})]}),t.jsx(R2,{rows:y.bowlingCard})]})]}):t.jsxs("div",{className:"animate-in slide-in-from-right-4 duration-300 max-w-6xl mx-auto",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"text-xs font-black text-indigo-400 uppercase tracking-widest",children:"Scorebook View"}),t.jsx("div",{className:"text-[10px] font-bold text-slate-400",children:y.battingTeam.name})]}),t.jsx(M2,{data:{...y.battingCard,bowlingRows:y.bowlingCard}})]}):t.jsx("div",{className:"text-center py-20 text-slate-500 font-bold uppercase text-xs tracking-widest",children:"No data for this innings"})})})]})},yh=({isOpen:s,onClose:e,onUpload:n})=>{const i=_.useRef(null),r=_.useRef(null),[o,d]=_.useState(null),[u,p]=_.useState("PHOTO"),[m,f]=_.useState(null),[b,y]=_.useState(!1),[N,k]=_.useState("IDLE"),T=_.useRef(null),S=_.useRef([]);_.useEffect(()=>(s?R():(A(),f(null),k("IDLE")),()=>A()),[s]);const R=async()=>{try{const E=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:u==="VIDEO"});d(E),i.current&&(i.current.srcObject=E)}catch(E){console.error("Camera access denied:",E)}},A=()=>{o&&(o.getTracks().forEach(E=>E.stop()),d(null))},I=()=>{var E;if(u==="PHOTO"){if(i.current&&r.current){const D=r.current.getContext("2d");if(D){r.current.width=i.current.videoWidth,r.current.height=i.current.videoHeight,D.drawImage(i.current,0,0);const L=r.current.toDataURL("image/jpeg");f(L),A()}}}else if(b)(E=T.current)==null||E.stop(),y(!1);else{if(!o)return;S.current=[];const D=new MediaRecorder(o);D.ondataavailable=L=>S.current.push(L.data),D.onstop=()=>{const L=new Blob(S.current,{type:"video/webm"}),G=URL.createObjectURL(L);f(G),A()},D.start(),y(!0),T.current=D}},j=()=>{k("UPLOADING"),setTimeout(()=>{n&&m&&n(m,u==="PHOTO"?"IMAGE":"VIDEO"),k("SUCCESS"),setTimeout(()=>{e()},1500)},1500)};return s?t.jsxs("div",{className:"fixed inset-0 bg-black z-[300] flex flex-col animate-in fade-in duration-300",children:[t.jsxs("div",{className:"flex justify-between items-center p-6 bg-gradient-to-b from-black/80 to-transparent absolute top-0 left-0 right-0 z-20",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse shadow-[0_0_10px_red]"}),t.jsx("span",{className:"text-xs font-black text-white uppercase tracking-widest",children:"Media Center Live"})]}),t.jsx("button",{onClick:e,className:"text-white bg-white/20 hover:bg-white/30 w-8 h-8 rounded-full flex items-center justify-center backdrop-blur-md",children:""})]}),t.jsxs("div",{className:"flex-1 relative bg-black flex items-center justify-center overflow-hidden",children:[m?u==="PHOTO"?t.jsx("img",{src:m,alt:"Capture",className:"w-full h-full object-contain"}):t.jsx("video",{src:m,controls:!0,className:"w-full h-full object-contain"}):t.jsx("video",{ref:i,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),t.jsx("canvas",{ref:r,className:"hidden"}),N!=="IDLE"&&t.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm flex flex-col items-center justify-center z-30",children:N==="UPLOADING"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mb-4"}),t.jsx("p",{className:"text-white font-black uppercase tracking-widest text-xs",children:"Uploading to Media Center..."})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-20 h-20 bg-emerald-500 rounded-full flex items-center justify-center text-4xl mb-4 animate-in zoom-in shadow-[0_0_30px_#10b981]",children:""}),t.jsx("p",{className:"text-white font-black uppercase tracking-widest text-xs",children:"Asset Secured"})]})})]}),!m&&N==="IDLE"&&t.jsxs("div",{className:"bg-black/80 backdrop-blur-md p-8 pb-12 flex flex-col gap-6",children:[t.jsxs("div",{className:"flex justify-center gap-8",children:[t.jsx("button",{onClick:()=>p("PHOTO"),className:`text-xs font-black uppercase tracking-widest transition-all ${u==="PHOTO"?"text-yellow-400 scale-110":"text-slate-500"}`,children:"Photo"}),t.jsx("button",{onClick:()=>p("VIDEO"),className:`text-xs font-black uppercase tracking-widest transition-all ${u==="VIDEO"?"text-red-500 scale-110":"text-slate-500"}`,children:"Video"})]}),t.jsx("div",{className:"flex justify-center items-center",children:t.jsx("button",{onClick:I,className:`w-20 h-20 rounded-full border-4 flex items-center justify-center transition-all active:scale-95 ${u==="VIDEO"&&b?"border-red-500 bg-red-500/20":"border-white bg-white/20 hover:bg-white/30"}`,children:t.jsx("div",{className:`transition-all duration-300 ${u==="VIDEO"&&b?"w-8 h-8 bg-red-500 rounded-sm":"w-16 h-16 bg-white rounded-full"}`})})})]}),m&&N==="IDLE"&&t.jsxs("div",{className:"bg-black/90 p-6 flex gap-4",children:[t.jsx("button",{onClick:()=>{f(null),R()},className:"flex-1 py-4 bg-slate-800 text-white rounded-2xl font-black uppercase text-xs tracking-widest",children:"Discard"}),t.jsx("button",{onClick:j,className:"flex-1 py-4 bg-indigo-600 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-lg shadow-indigo-600/30",children:"Upload Asset"})]})]}):null},D2=({fixtures:s,teams:e,mediaPosts:n,onAddMediaPost:i,onDeletePost:r,selectedMatch:o,onSelectMatch:d,canPost:u=!0,isAdmin:p=!1,organizations:m=[],onUpdatePost:f,currentUser:b})=>{const[y,N]=_.useState(null),[k,T]=_.useState(""),[S,R]=_.useState("MEDIA"),[A,I]=_.useState(!1),j=s.filter(Q=>Q.status==="Live"),E=_.useMemo(()=>n.filter(Q=>Q.type!=="NEWS").sort((Q,ne)=>ne.timestamp-Q.timestamp),[n]),D=(Q,ne)=>{if(!b||!f)return;const ee=n.find(Ne=>Ne.id===Q);if(!ee)return;const se=ee.reactions||{};let B=[...se[ne]||[]];B.includes(b.id)?B=B.filter(Ne=>Ne!==b.id):B.push(b.id);const Z={...se,[ne]:B};f({...ee,reactions:Z})},L=Q=>{navigator.share?navigator.share({title:"Cricket Core Moment",text:Q.caption,url:window.location.href}).catch(console.error):alert(`Shared "${Q.caption}" to clipboard!`)},G=Q=>{if(!k.trim()||!b||!f)return;const ne=n.find(se=>se.id===Q);if(!ne)return;const ee={id:`c-${Date.now()}`,userId:b.id,author:b.name,text:k.trim(),timestamp:Date.now()};f({...ne,comments:[...ne.comments,ee]}),T("")},Y=(Q,ne)=>{const ee={id:`post-${Date.now()}`,type:ne,authorName:(b==null?void 0:b.name)||"Fan Cam",authorAvatar:(b==null?void 0:b.avatarUrl)||"",userId:b==null?void 0:b.id,contentUrl:Q,caption:o?`Spotted at ${o.teamAName} vs ${o.teamBName}`:"Match Day Vibes ",timestamp:Date.now(),likes:[],dislikes:[],shares:0,comments:[],matchId:o==null?void 0:o.id};i(ee)},q=Q=>{const ne=Date.now()-Q,ee=Math.floor(ne/6e4),se=Math.floor(ee/60),M=Math.floor(se/24);return M>0?`${M}d ago`:se>0?`${se}h ago`:ee>0?`${ee}m ago`:"Just now"},ce=Q=>{if(!Q)return"Central Zone";const ne=m.find(ee=>ee.fixtures.some(se=>se.id===Q));return ne?ne.name:"Central Zone"};if(o){const Q=E.filter(ae=>ae.matchId===o.id),ne=o.savedState,ee=e.find(ae=>ae.id===o.teamAId),se=e.find(ae=>ae.id===o.teamBId),M=ne&&ee?vc(ne.history,ee.players,1,"",""):null,B=ne&&se?Oh(ne.history,se.players,1):[],Z=M?[...M.rows].sort((ae,P)=>P.runs-ae.runs)[0]:null,Ne=[...B].sort((ae,P)=>P.wickets-ae.wickets)[0];return t.jsxs("div",{className:"animate-in slide-in-from-right h-full",children:[t.jsx(yh,{isOpen:A,onClose:()=>I(!1),onUpload:Y}),t.jsxs("div",{className:"bg-slate-900 rounded-[2.5rem] p-8 text-white mb-8 shadow-2xl relative overflow-hidden shrink-0",children:[t.jsx("div",{className:"absolute top-0 right-0 p-4",children:t.jsx("button",{onClick:()=>d(null),className:"w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center text-xl backdrop-blur-md",children:""})}),t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:"text-[10px] font-black uppercase tracking-[0.2em] bg-red-600 px-3 py-1 rounded-full mb-6 animate-pulse",children:"Live Cloud Match"}),t.jsxs("div",{className:"flex items-center gap-8 w-full justify-center",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl md:text-2xl font-black",children:o.teamAName}),t.jsx("div",{className:"text-3xl md:text-4xl font-black mt-2 text-indigo-400",children:o.teamAScore||"0/0"})]}),t.jsx("div",{className:"text-xl font-black text-slate-600",children:"VS"}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-xl md:text-2xl font-black",children:o.teamBName}),t.jsx("div",{className:"text-3xl md:text-4xl font-black mt-2 text-indigo-400",children:o.teamBScore||"0/0"})]})]}),t.jsxs("div",{className:"mt-6 text-[10px] md:text-xs font-bold text-slate-400 uppercase tracking-widest",children:[ce(o.id),"  ",o.venue,"  ",o.format]})]})]}),t.jsx("div",{className:"flex gap-2 mb-8 bg-white p-2 rounded-2xl shadow-sm border border-slate-200 justify-center sticky top-0 z-20",children:["MEDIA","SCORECARD","STATS"].map(ae=>t.jsx("button",{onClick:()=>R(ae),className:`px-8 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${S===ae?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:bg-slate-50"}`,children:ae},ae))}),t.jsxs("div",{className:"space-y-6 pb-20",children:[S==="MEDIA"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-2xl p-6 flex flex-col md:flex-row items-center justify-between gap-4",children:[t.jsxs("div",{className:"text-center md:text-left",children:[t.jsx("h4",{className:"font-black text-indigo-900",children:"Share Your Moments"}),t.jsx("p",{className:"text-xs text-indigo-600/80",children:"Upload photos directly to the live feed."})]}),u?t.jsx("button",{onClick:()=>I(!0),className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-indigo-500 shadow-lg shadow-indigo-200 transition-all",children:"+ Post Now"}):t.jsx("div",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest bg-white px-4 py-2 rounded-lg border border-indigo-100",children:"Posting Restricted"})]}),Q.length===0?t.jsx("div",{className:"text-center py-20 text-slate-400 text-xs uppercase font-bold bg-slate-50 rounded-[2rem] border border-dashed border-slate-200",children:"No media yet. Be the first!"}):Q.map(ae=>t.jsxs("div",{className:"bg-white rounded-[2rem] border border-slate-200 shadow-sm overflow-hidden animate-in fade-in relative",children:[r&&(p||b&&ae.userId===b.id)&&t.jsx("button",{onClick:()=>{confirm("Delete post?")&&r(ae.id)},className:"absolute top-4 right-4 z-10 text-slate-300 hover:text-red-500 font-bold bg-white/80 rounded-full w-6 h-6 flex items-center justify-center",children:""}),t.jsxs("div",{className:"p-4 flex items-center gap-3 border-b border-slate-50",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center font-black text-slate-500 overflow-hidden shrink-0",children:ae.authorAvatar?t.jsx("img",{src:ae.authorAvatar,className:"w-full h-full object-cover"}):ae.authorName.charAt(0)}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-xs font-black text-slate-900",children:ae.authorName}),t.jsx("div",{className:"text-[8px] font-bold text-slate-400 uppercase",children:q(ae.timestamp)})]})]}),ae.contentUrl&&ae.type==="IMAGE"&&t.jsx("img",{src:ae.contentUrl,className:"w-full h-auto max-h-[500px] object-contain bg-slate-50"}),ae.contentUrl&&ae.type==="VIDEO"&&t.jsx("video",{src:ae.contentUrl,controls:!0,className:"w-full max-h-[500px] bg-black"}),t.jsxs("div",{className:"p-4",children:[t.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:ae.caption}),t.jsxs("div",{className:"flex flex-wrap gap-4 mt-4 items-center border-t border-slate-50 pt-4",children:[t.jsx("div",{className:"flex gap-2",children:["","","",""].map(P=>{var we,te,_e,re;const W=((te=(we=ae.reactions)==null?void 0:we[P])==null?void 0:te.length)||0,X=(re=(_e=ae.reactions)==null?void 0:_e[P])==null?void 0:re.includes((b==null?void 0:b.id)||"");return t.jsxs("button",{onClick:()=>D(ae.id,P),className:`hover:scale-110 transition-transform px-2 py-1 rounded-full text-xs font-black flex items-center gap-1.5 ${X?"bg-indigo-50 text-indigo-600 ring-1 ring-indigo-200":"bg-slate-50 text-slate-400"}`,children:[t.jsx("span",{children:P}),W>0&&t.jsx("span",{children:W})]},P)})}),t.jsxs("button",{onClick:()=>N(y===ae.id?null:ae.id),className:"ml-auto hover:text-indigo-600 transition-colors text-[10px] font-black uppercase tracking-widest text-slate-400 flex items-center gap-1.5",children:[" ",ae.comments.length]})]})]})]},ae.id))]}),S==="SCORECARD"&&t.jsx("div",{className:"bg-slate-950 rounded-[2rem] overflow-hidden shadow-xl border border-slate-900",children:ne&&ee&&se?t.jsx(yc,{matchState:ne,teamA:ee,teamB:se}):t.jsx("div",{className:"text-center py-20 text-slate-500 text-xs font-bold uppercase",children:"No Match Data Available"})}),S==="STATS"&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border border-slate-200 shadow-sm",children:[t.jsx("div",{className:"text-[10px] font-black uppercase text-indigo-500 tracking-widest mb-4",children:"Top Batter"}),Z?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-3xl font-black text-slate-900 leading-tight",children:Z.name}),t.jsxs("div",{className:"text-sm font-bold text-slate-500 mt-2",children:[Z.runs," runs from ",Z.balls," balls"]}),t.jsxs("div",{className:"mt-4 inline-block bg-indigo-50 text-indigo-600 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest",children:["SR ",Z.strikeRate]})]}):t.jsx("div",{className:"text-slate-400 text-xs font-bold uppercase",children:"No records found"})]}),t.jsxs("div",{className:"bg-white p-8 rounded-[2rem] border border-slate-200 shadow-sm",children:[t.jsx("div",{className:"text-[10px] font-black uppercase text-emerald-500 tracking-widest mb-4",children:"Top Bowler"}),Ne?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"text-3xl font-black text-slate-900 leading-tight",children:Ne.name}),t.jsxs("div",{className:"text-sm font-bold text-slate-500 mt-2",children:[Ne.wickets," wickets conceded ",Ne.runs]}),t.jsxs("div",{className:"mt-4 inline-block bg-emerald-50 text-emerald-600 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest",children:["ECON ",Ne.economy]})]}):t.jsx("div",{className:"text-slate-400 text-xs font-bold uppercase",children:"No records found"})]})]})]})]})}return t.jsxs("div",{className:"space-y-12 animate-in fade-in h-full",children:[t.jsxs("section",{className:"shrink-0",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-red-600 animate-pulse"}),t.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest",children:"Live Instant Scores"})]}),t.jsxs("div",{className:"flex items-center gap-1.5 bg-slate-100 px-3 py-1 rounded-full border border-slate-200",children:[t.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-ping"}),t.jsx("span",{className:"text-[8px] font-black text-slate-500 uppercase tracking-widest",children:"Streaming"})]})]}),t.jsx("div",{className:"flex gap-4 overflow-x-auto no-scrollbar pb-2 px-2 -mx-2",children:j.length===0?t.jsxs("div",{className:"w-full bg-slate-100 rounded-2xl p-8 text-center border border-dashed border-slate-300",children:[t.jsx("span",{className:"text-3xl block mb-2",children:""}),t.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"All games concluded for today"})]}):j.map(Q=>t.jsxs("button",{onClick:()=>d(Q),className:"w-full max-w-xs bg-slate-900 rounded-[2rem] p-4 md:p-6 text-white relative overflow-hidden shadow-xl shrink-0 text-left transition-all hover:scale-[1.02] active:scale-95 group border border-white/5",children:[t.jsx("div",{className:"absolute top-0 right-0 bg-red-600 text-white text-[9px] font-black px-3 py-1 rounded-bl-xl uppercase tracking-widest shadow-lg",children:"Live"}),t.jsxs("div",{className:"space-y-4 relative z-10",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs font-black opacity-70 uppercase tracking-widest",children:Q.format}),t.jsx("span",{className:"text-[9px] font-bold text-red-400 group-hover:text-white transition-colors",children:"WATCH NOW "})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsx("span",{className:"text-sm font-bold flex-1 break-words line-clamp-2",children:Q.teamAName}),t.jsx("span",{className:"text-2xl font-black text-indigo-400 shrink-0",children:Q.teamAScore||"0/0"})]}),t.jsx("div",{className:"text-center",children:t.jsx("span",{className:"text-[10px] font-black text-slate-700 uppercase tracking-widest leading-none",children:"VS"})}),t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsx("span",{className:"text-sm font-bold flex-1 break-words line-clamp-2 text-right",children:Q.teamBName}),t.jsx("span",{className:"text-2xl font-black text-indigo-400 shrink-0",children:Q.teamBScore||"0/0"})]})]}),t.jsx("div",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest text-center mt-2 border-t border-white/10 pt-2",children:ce(Q.id)})]})]},Q.id))})]}),t.jsxs("section",{className:"max-w-2xl mx-auto space-y-8 pb-20",children:[t.jsxs("div",{className:"flex items-center justify-between px-2",children:[t.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-600"})," Recent Activity"]}),u?t.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-2 bg-indigo-600 text-white px-5 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest hover:bg-indigo-500 shadow-lg transition-all",children:[t.jsx("span",{children:""})," Post Moment"]}):t.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest bg-slate-100 px-3 py-1.5 rounded-lg border border-slate-200",children:"Posting Restricted"})]}),E.length===0&&s.filter(Q=>Q.status==="Live"||Q.status==="Scheduled").length===0?t.jsxs("div",{className:"text-center py-20 bg-white rounded-[2.5rem] border border-slate-200",children:[t.jsx("div",{className:"text-5xl mb-4",children:""}),t.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"Waiting for fan content..."})]}):t.jsx("div",{className:"space-y-6",children:[...E.map(Q=>({...Q,feedType:"POST"})),...s.filter(Q=>Q.status==="Live"||Q.status==="Scheduled").map(Q=>({...Q,feedType:"FIXTURE"}))].sort((Q,ne)=>(ne.timestamp||Date.now())-(Q.timestamp||Date.now())).map(Q=>{if(Q.feedType==="FIXTURE"){const ee=Q;return t.jsxs("div",{onClick:()=>d(ee),className:"bg-white rounded-[2.5rem] border border-slate-200 shadow-sm overflow-hidden animate-in slide-in-from-bottom-4 relative group p-6 cursor-pointer hover:border-indigo-300 transition-all",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`w-2 h-2 rounded-full ${ee.status==="Live"?"bg-red-500 animate-pulse":"bg-indigo-400"}`}),t.jsx("span",{className:"text-[10px] font-black uppercase text-slate-400 tracking-widest",children:ee.status==="Live"?"Match Live":"Upcoming Game"})]}),t.jsx("span",{className:"text-[10px] font-black text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full uppercase tracking-widest",children:ee.format})]}),t.jsxs("div",{className:"flex flex-col gap-4",children:[t.jsxs("div",{className:"flex items-center justify-between gap-6 px-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"text-lg font-black text-slate-900 break-words",children:ee.teamAName}),ee.status==="Live"&&t.jsx("p",{className:"text-3xl font-black text-indigo-600 mt-2",children:ee.teamAScore||"0/0"})]}),t.jsx("div",{className:"text-slate-200 font-black text-sm italic",children:"VS"}),t.jsxs("div",{className:"flex-1 text-right",children:[t.jsx("h4",{className:"text-lg font-black text-slate-900 break-words",children:ee.teamBName}),ee.status==="Live"&&t.jsx("p",{className:"text-3xl font-black text-indigo-600 mt-2",children:ee.teamBScore||"0/0"})]})]}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-50 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-bold text-slate-600",children:ee.venue}),t.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:new Date(ee.date).toLocaleDateString()})]}),t.jsx("div",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:"Enter Match Center "})]})]})]},`feed-fix-${ee.id}`)}const ne=Q;return t.jsxs("div",{className:"bg-white rounded-[2.5rem] border border-slate-200 shadow-sm overflow-hidden animate-in slide-in-from-bottom-4 relative group",children:[p&&r&&t.jsx("button",{onClick:()=>{confirm("Delete post?")&&r(ne.id)},className:"absolute top-4 right-4 z-10 text-slate-300 hover:text-red-500 font-bold bg-white/80 rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:""}),t.jsxs("div",{className:"p-5 flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center font-black text-slate-500 overflow-hidden border border-slate-100 shrink-0 shadow-sm",children:ne.authorAvatar?t.jsx("img",{src:ne.authorAvatar,className:"w-full h-full object-cover"}):t.jsx("span",{className:"font-black text-slate-400",children:ne.authorName.charAt(0)})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("h4",{className:"text-sm font-black text-slate-900 truncate",children:ne.authorName}),ne.matchId&&t.jsxs("span",{className:"text-[9px] text-slate-400",children:[" ",ce(ne.matchId)]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-wide",children:q(ne.timestamp)}),ne.matchId&&t.jsx("button",{onClick:()=>{const ee=s.find(se=>se.id===ne.matchId);ee&&d(ee)},className:"text-[8px] bg-indigo-50 text-indigo-600 px-2 py-0.5 rounded font-black uppercase tracking-widest hover:bg-indigo-100",children:"View Game"})]})]})]}),ne.type==="IMAGE"&&ne.contentUrl&&t.jsx("div",{className:"aspect-[4/3] bg-slate-50 flex items-center justify-center overflow-hidden border-y border-slate-50",children:t.jsx("img",{src:ne.contentUrl,className:"w-full h-full object-contain"})}),ne.type==="VIDEO"&&ne.contentUrl&&t.jsx("div",{className:"aspect-video bg-black relative flex items-center justify-center",children:t.jsx("video",{src:ne.contentUrl,controls:!0,className:"w-full h-full"})}),ne.type==="LIVE_STATUS"&&t.jsxs("div",{className:"p-10 bg-gradient-to-br from-indigo-600 to-indigo-900 text-white text-center flex flex-col items-center justify-center min-h-[220px]",children:[t.jsx("span",{className:"text-4xl mb-4",children:""}),t.jsx("p",{className:"text-xl font-black leading-tight tracking-tight",children:ne.caption})]}),t.jsxs("div",{className:"p-6",children:[ne.type!=="LIVE_STATUS"&&t.jsxs("p",{className:"text-sm font-medium text-slate-600 mb-6 leading-relaxed",children:[t.jsx("span",{className:"font-black text-slate-900 mr-1",children:ne.authorName})," ",ne.caption]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-4 border-t border-slate-50 pt-5",children:[t.jsx("div",{className:"flex gap-2",children:["","","",""].map(ee=>{var B,Z,Ne,ae;const se=((Z=(B=ne.reactions)==null?void 0:B[ee])==null?void 0:Z.length)||0,M=(ae=(Ne=ne.reactions)==null?void 0:Ne[ee])==null?void 0:ae.includes((b==null?void 0:b.id)||"");return t.jsxs("button",{onClick:()=>D(ne.id,ee),className:`hover:scale-110 transition-transform px-3 py-1.5 rounded-full text-xs font-black flex items-center gap-1.5 ${M?"bg-indigo-50 text-indigo-600 ring-1 ring-indigo-200":"bg-slate-50 text-slate-400"}`,children:[t.jsx("span",{children:ee}),se>0&&t.jsx("span",{children:se})]},ee)})}),t.jsxs("button",{onClick:()=>N(y===ne.id?null:ne.id),className:`flex items-center gap-2 group transition-all ${y===ne.id?"text-indigo-600":"text-slate-400 hover:text-indigo-600"}`,children:[t.jsx("span",{className:"text-xl group-hover:scale-125 transition-transform",children:""}),t.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:ne.comments.length})]}),t.jsxs("button",{onClick:()=>L(ne),className:"flex items-center gap-2 group ml-auto transition-all text-slate-400 hover:text-indigo-600",children:[t.jsx("span",{className:"text-xl group-hover:scale-125 transition-transform",children:""}),t.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Share"})]})]}),y===ne.id&&t.jsxs("div",{className:"mt-5 p-4 bg-slate-50 rounded-2xl animate-in slide-in-from-top-2 border border-slate-100",children:[t.jsxs("div",{className:"space-y-4 mb-4 max-h-48 overflow-y-auto no-scrollbar",children:[ne.comments.map(ee=>t.jsxs("div",{className:"flex flex-col gap-0.5",children:[t.jsx("span",{className:"font-black text-slate-900 text-[10px] uppercase tracking-widest",children:ee.author}),t.jsx("span",{className:"text-slate-600 text-xs font-medium",children:ee.text})]},ee.id)),ne.comments.length===0&&t.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest text-center py-4",children:"No comments yet"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:k,onChange:ee=>T(ee.target.value),onKeyDown:ee=>ee.key==="Enter"&&G(ne.id),placeholder:"Join the discussion...",className:"flex-1 bg-white border border-slate-200 rounded-xl px-4 py-3 text-xs font-bold outline-none focus:ring-2 focus:ring-indigo-100"}),t.jsx("button",{onClick:()=>G(ne.id),className:"bg-slate-900 text-white px-4 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-indigo-600 transition-colors",children:"Post"})]})]})]})]},ne.id)})})]}),t.jsx(yh,{isOpen:A,onClose:()=>I(!1),onUpload:Y})]})},O2=({posts:s,onAddPost:e,onDeletePost:n,onUpdatePost:i,isAdmin:r,currentUser:o})=>{const[d,u]=_.useState(!1),[p,m]=_.useState(""),[f,b]=_.useState(""),[y,N]=_.useState(null),[k,T]=_.useState(""),S=s.filter(j=>j.type==="NEWS").sort((j,E)=>E.timestamp-j.timestamp),R=()=>{if(!p.trim()||!f.trim()||!o)return;const j={id:`news-${Date.now()}`,type:"NEWS",authorName:o.name,authorAvatar:o.avatarUrl,title:p,caption:f,timestamp:Date.now(),likes:[],dislikes:[],shares:0,comments:[]};e(j),u(!1),m(""),b("")},A=j=>{if(!k.trim()||!o||!i)return;const E=S.find(L=>L.id===j);if(!E)return;const D={id:`c-${Date.now()}`,userId:o.id,author:o.name,text:k.trim(),timestamp:Date.now()};i({...E,comments:[...E.comments,D]}),T("")},I=(j,E)=>{if(!o||!i)return;const D=S.find(ce=>ce.id===j);if(!D)return;const L=D.reactions||{};let Y=[...L[E]||[]];Y.includes(o.id)?Y=Y.filter(ce=>ce!==o.id):Y.push(o.id);const q={...L,[E]:Y};i({...D,reactions:q})};return t.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-20 animate-in fade-in",children:[t.jsxs("div",{className:"flex justify-between items-center px-4",children:[t.jsx("h2",{className:"text-xl font-serif font-black text-slate-900 uppercase tracking-widest border-b-4 border-slate-900 pb-1",children:"Official News Board"}),r&&!d&&t.jsx("button",{onClick:()=>u(!0),className:"bg-slate-900 text-white px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-slate-700 shadow-lg transition-all",children:"+ Write Article"})]}),d&&t.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-xl border border-slate-200 animate-in zoom-in-95",children:[t.jsx("h3",{className:"text-lg font-black text-slate-900 mb-6",children:"Draft New Article"}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("input",{value:p,onChange:j=>m(j.target.value),placeholder:"Headline...",className:"w-full text-2xl font-serif font-black bg-slate-50 border-none outline-none p-4 rounded-xl placeholder:text-slate-300",autoFocus:!0}),t.jsx("textarea",{value:f,onChange:j=>b(j.target.value),placeholder:"Article content...",rows:8,className:"w-full bg-slate-50 border-none outline-none p-4 rounded-xl resize-none font-medium text-slate-700 placeholder:text-slate-300"}),t.jsxs("div",{className:"flex gap-4 pt-4",children:[t.jsx("button",{onClick:()=>u(!1),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs hover:bg-slate-50 rounded-xl",children:"Cancel"}),t.jsx("button",{onClick:R,className:"flex-1 py-4 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs hover:bg-indigo-500 shadow-lg",children:"Publish Article"})]})]})]}),S.length===0&&!d?t.jsxs("div",{className:"text-center py-20 opacity-40",children:[t.jsx("span",{className:"text-6xl block mb-4",children:""}),t.jsx("p",{className:"text-slate-500 font-bold uppercase text-xs tracking-widest",children:"No official news yet."})]}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:S.map(j=>t.jsxs("article",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-sm hover:shadow-xl transition-all group relative",children:[r&&n&&t.jsx("button",{onClick:()=>{confirm("Delete article?")&&n(j.id)},className:"absolute top-6 right-6 text-slate-300 hover:text-red-500 font-bold z-10",children:""}),t.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-900 text-white flex items-center justify-center font-black",children:j.authorName.charAt(0)}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-bold text-slate-900",children:j.authorName}),t.jsx("div",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:new Date(j.timestamp).toLocaleDateString()})]})]}),t.jsx("h3",{className:"text-2xl font-serif font-black text-slate-900 mb-4 leading-tight group-hover:text-indigo-700 transition-colors",children:j.title}),t.jsx("p",{className:"text-sm text-slate-600 leading-relaxed line-clamp-4",children:j.caption}),t.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-3 border-t border-slate-50 pt-4",children:[t.jsx("div",{className:"flex gap-1.5",children:["","","",""].map(E=>{var G,Y,q,ce;const D=((Y=(G=j.reactions)==null?void 0:G[E])==null?void 0:Y.length)||0,L=(ce=(q=j.reactions)==null?void 0:q[E])==null?void 0:ce.includes((o==null?void 0:o.id)||"");return t.jsxs("button",{onClick:()=>I(j.id,E),className:`hover:scale-110 transition-transform px-2 py-0.5 rounded-full text-[10px] font-black flex items-center gap-1 ${L?"bg-indigo-50 text-indigo-600 ring-1 ring-indigo-200":"bg-slate-50 text-slate-400"}`,children:[t.jsx("span",{children:E}),D>0&&t.jsx("span",{children:D})]},E)})}),t.jsxs("button",{onClick:()=>N(y===j.id?null:j.id),className:`text-[10px] font-black uppercase tracking-widest flex items-center gap-1.5 transition-colors ${y===j.id?"text-indigo-600":"text-slate-400 hover:text-indigo-600"}`,children:[" ",j.comments.length]}),t.jsx("button",{className:"ml-auto text-[10px] font-black uppercase tracking-widest text-indigo-500 hover:text-indigo-700",children:"Read Full Story "})]}),y===j.id&&t.jsxs("div",{className:"mt-4 p-4 bg-slate-50 rounded-2xl animate-in slide-in-from-top-2 border border-slate-100",children:[t.jsxs("div",{className:"space-y-3 mb-4 max-h-40 overflow-y-auto no-scrollbar",children:[j.comments.map(E=>t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-black text-slate-900 text-[9px] uppercase tracking-widest",children:E.author}),t.jsx("span",{className:"text-slate-600 text-xs font-medium",children:E.text})]},E.id)),j.comments.length===0&&t.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase tracking-widest text-center py-2",children:"No comments yet"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{value:k,onChange:E=>T(E.target.value),onKeyDown:E=>E.key==="Enter"&&A(j.id),placeholder:"Write a comment...",className:"flex-1 bg-white border border-slate-200 rounded-xl px-3 py-2 text-xs font-bold outline-none focus:ring-2 focus:ring-indigo-100"}),t.jsx("button",{onClick:()=>A(j.id),className:"bg-slate-900 text-white px-3 rounded-xl text-[9px] font-black uppercase tracking-widest hover:bg-indigo-600 transition-colors",children:"Post"})]})]})]},j.id))})]})},$g=({onBack:s,fixtures:e,teams:n,players:i,mediaPosts:r,onAddMediaPost:o,onDeletePost:d,onUpdatePost:u,initialMatchId:p,following:m,onToggleFollow:f,onViewTeam:b,onViewPlayer:y,userRole:N,currentProfile:k,organizations:T=[],onArchiveMatch:S,onDeleteMatch:R,viewingOrgId:A,initialTab:I="NEWS"})=>{var we;const[j,E]=_.useState(I),[D,L]=_.useState("SCHEDULED"),[G,Y]=_.useState(""),[q,ce]=_.useState(null);_.useEffect(()=>{if(p){const te=e.find(_e=>_e.id===p);te&&(ce(te),E("FEED"))}},[p,e]);const Q=_.useMemo(()=>{let te=e;if(A){const _e=T.find(re=>re.id===A);if(_e){const re=_e.fixtures.map(Re=>Re.id);te=te.filter(Re=>re.includes(Re.id))}}else te=te.filter(_e=>{const re=T.find($e=>$e.fixtures.some(ue=>ue.id===_e.id));if(!re||re.pushToGlobalFeed!==!1)return!0;const Re=k==null?void 0:k.id;return Re?re.members.some($e=>$e.userId===Re):!1});if(te=te.filter(_e=>D==="ARCHIVE"?_e.isArchived:_e.isArchived?!1:D==="UNOFFICIAL"?_e.isOfficial===!1:_e.isOfficial===!1?!1:D==="LIVE"?_e.status==="Live":D==="SCHEDULED"?_e.status==="Scheduled":D==="COMPLETED"?_e.status==="Completed":!1),G.trim()){const _e=G.toLowerCase();te=te.filter(re=>{var Te,$,oe;const Re=(Te=re.teamAName)==null?void 0:Te.toLowerCase().includes(_e),$e=($=re.teamBName)==null?void 0:$.toLowerCase().includes(_e),ue=(oe=re.venue)==null?void 0:oe.toLowerCase().includes(_e),be=new Date(re.date).toLocaleDateString().toLowerCase().includes(_e);return Re||$e||ue||be})}return te},[e,D,A,T,k,G]),ne=_.useMemo(()=>{if(!A)return r;const te=T.find(re=>re.id===A);if(!te)return r;const _e=te.fixtures.map(re=>re.id);return r.filter(re=>re.matchId?_e.includes(re.matchId):!0)},[r,A,T]),ee=n.filter(te=>te.name.toLowerCase().includes(G.toLowerCase())),se=i.filter(te=>te.name.toLowerCase().includes(G.toLowerCase())),M=te=>{ce(te),te&&E("FEED")},B=!k||k.role==="Guest",Z=N==="Administrator"||N==="Scorer",Ne=T.find(te=>te.id==="org-central-zone")||T[0],ae=Z||!B&&(Ne==null?void 0:Ne.allowUserContent)!==!1,P=_.useMemo(()=>{if(j!=="STANDINGS")return[];const te=[];return T.forEach(_e=>{_e.tournaments.forEach(re=>{const Re=_e.fixtures.filter(ue=>ue.tournamentId===re.id&&ue.status==="Completed"&&ue.savedState&&ue.isOfficial!==!1);if(Re.length===0&&re.groups.every(ue=>ue.teams.length===0))return;const $e=Re.map(ue=>{const be=ue.savedState,Te=be.inningsScores.find(Me=>Me.teamId===ue.teamAId)||(be.innings===1&&be.battingTeamId===ue.teamAId?{score:be.score,wickets:be.wickets,overs:"0.0"}:{score:0,wickets:0,overs:"0.0"}),$=be.inningsScores.find(Me=>Me.teamId===ue.teamBId)||(be.innings===2&&be.battingTeamId===ue.teamBId?{score:be.score,wickets:be.wickets,overs:"0.0"}:{score:0,wickets:0,overs:"0.0"}),oe=typeof Te.score=="number"?Te.score:parseInt(Te.score),Ae=typeof $.score=="number"?$.score:parseInt($.score);let De="NO_RESULT";return oe>Ae?De="HOME_WIN":Ae>oe?De="AWAY_WIN":oe===Ae&&oe>0&&(De="TIE"),{matchId:ue.id,teamAId:ue.teamAId,teamBId:ue.teamBId,teamAName:ue.teamAName,teamBName:ue.teamBName,teamAScore:oe,teamAWkts:Te.wickets,teamAOvers:parseFloat(Te.overs),teamBScore:Ae,teamBWkts:$.wickets,teamBOvers:parseFloat($.overs),result:De}});re.groups.forEach(ue=>{const be=$e.filter($=>{const oe=ue.teams.map(Ae=>Ae.id);return oe.includes($.teamAId)&&oe.includes($.teamBId)}),Te=kb(be,ue.teams);(Te.length>0||ue.teams.length>0)&&te.push({title:`${_e.name} - ${re.name} (${ue.name})`,rows:Te})})})}),te},[T,j]),W=_.useMemo(()=>T.flatMap(te=>te.sponsors||[]).filter(te=>te.isActive),[T]);W.filter(te=>te.placements.includes("MEDIA_TOP")),W.filter(te=>te.placements.includes("MEDIA_BOTTOM"));const X=A?T.find(te=>te.id===A):T.find(te=>te.id==="org-central-zone")||T[0];return X!=null&&X.sponsorSettings,t.jsxs("div",{className:"h-full flex flex-col animate-in slide-in-from-bottom-8 duration-500 overflow-hidden w-full max-w-[100vw] overflow-x-hidden",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-6 px-2 md:px-0 shrink-0 pt-4",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx("button",{onClick:s,className:"w-12 h-12 rounded-full bg-white border border-slate-200 text-slate-400 flex items-center justify-center hover:bg-slate-50 hover:text-black transition-all shadow-sm",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tight",children:A?t.jsxs("span",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-indigo-600",children:(we=T.find(te=>te.id===A))==null?void 0:we.name}),t.jsx("span",{className:"text-slate-300",children:"/"}),t.jsx("span",{children:"Media"})]}):"Media Center"}),t.jsx("p",{className:"text-[10px] md:text-xs font-bold text-slate-400 uppercase tracking-widest mt-1",children:"Live Games & Fan Content"})]})]}),t.jsx("div",{className:"flex bg-white rounded-2xl p-1.5 border border-slate-200 shadow-sm self-start md:self-auto overflow-x-auto max-w-full no-scrollbar shrink-0",children:["NEWS","FEED","FIXTURES","STANDINGS","TEAMS","PLAYERS","STUDIO"].map(te=>t.jsx("button",{onClick:()=>E(te),className:`px-5 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${j===te?"bg-indigo-600 text-white shadow-lg":"text-slate-500 hover:bg-slate-50"}`,children:te},te))})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden no-scrollbar pb-24 px-1 scroll-container w-full",children:[j==="NEWS"&&t.jsx(O2,{posts:ne,onAddPost:o,onDeletePost:d,onUpdatePost:u,isAdmin:Z,currentUser:k}),j==="FEED"&&t.jsx(D2,{fixtures:Q,teams:n,mediaPosts:ne,onAddMediaPost:o,onDeletePost:d,selectedMatch:q,onSelectMatch:M,canPost:ae,isAdmin:Z,organizations:T,onUpdatePost:u,currentUser:k}),j==="STUDIO"&&t.jsx(A2,{onBack:()=>E("FEED"),fixtures:e,isEmbedded:!0}),j==="STANDINGS"&&t.jsx("div",{className:"space-y-8 animate-in fade-in pb-10",children:P.length===0?t.jsx("div",{className:"text-center py-20 text-slate-400 text-xs font-bold uppercase tracking-widest border-2 border-dashed border-slate-200 rounded-[2rem]",children:"No active league tables found."}):P.map((te,_e)=>t.jsxs("div",{className:"space-y-4",children:[t.jsx("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest border-l-4 border-indigo-500 pl-3",children:te.title}),t.jsx(jb,{rows:te.rows,onViewTeam:b})]},_e))}),j==="FIXTURES"&&t.jsxs("div",{className:"space-y-6 animate-in fade-in pb-10",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",placeholder:"Search matches by team, venue, or date...",value:G,onChange:te=>Y(te.target.value),className:"w-full px-6 py-4 pl-12 rounded-2xl border-2 border-slate-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all text-sm font-bold placeholder:text-slate-400"}),t.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 text-xl",children:""}),G&&t.jsx("button",{onClick:()=>Y(""),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600 font-bold text-sm",children:""})]}),t.jsx("div",{className:"flex gap-2 border-b border-slate-200 pb-4 overflow-x-auto no-scrollbar",children:["LIVE","SCHEDULED","COMPLETED","UNOFFICIAL","ARCHIVE"].map(te=>t.jsx("button",{onClick:()=>L(te),className:`px-5 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest whitespace-nowrap transition-all ${D===te?"bg-slate-900 text-white":"bg-white border border-slate-200 text-slate-400"}`,children:te},te))}),t.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[Q.map(te=>t.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-200 shadow-sm flex flex-col md:flex-row justify-between items-center gap-4 group",children:[t.jsxs("div",{className:"flex flex-col gap-1 w-full md:w-auto text-center md:text-left",children:[t.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-1",children:[t.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase bg-slate-100 px-2 py-1 rounded",children:new Date(te.date).toLocaleDateString()}),t.jsx("span",{className:"text-[10px] font-bold text-indigo-400 uppercase tracking-widest",children:te.venue}),t.jsx("span",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest border border-slate-200 px-1.5 rounded",children:te.format}),te.isOfficial===!1&&t.jsx("span",{className:"text-[10px] font-black bg-amber-100 text-amber-600 px-2 py-0.5 rounded uppercase tracking-widest",children:"Unofficial"}),te.isArchived&&t.jsx("span",{className:"text-[10px] font-black bg-slate-200 text-slate-500 px-2 py-0.5 rounded uppercase tracking-widest",children:"Archived"})]}),t.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-4 text-lg",children:[t.jsx("span",{className:"font-black text-slate-900",children:te.teamAName}),t.jsx("span",{className:"text-xs font-bold text-slate-300",children:"VS"}),t.jsx("span",{className:"font-black text-slate-900",children:te.teamBName})]}),te.status==="Live"&&t.jsxs("div",{className:"text-[10px] font-black text-red-500 uppercase tracking-widest mt-1 animate-pulse",children:["Live Score: ",te.teamAScore||"0/0"," - ",te.teamBScore||"0/0"]}),te.result&&t.jsx("div",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest mt-1",children:te.result})]}),t.jsxs("div",{className:"flex gap-2 items-center",children:[Z&&t.jsxs("div",{className:"flex gap-1 mr-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[!te.isArchived&&S&&t.jsx("button",{onClick:()=>S(te.id),className:"w-8 h-8 rounded-full bg-slate-100 text-slate-400 hover:bg-slate-200 flex items-center justify-center",title:"Archive",children:""}),R&&t.jsx("button",{onClick:()=>R(te.id),className:"w-8 h-8 rounded-full bg-red-50 text-red-400 hover:bg-red-100 flex items-center justify-center",title:"Delete",children:""})]}),t.jsx("button",{onClick:()=>M(te),className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-lg hover:bg-indigo-500 transition-all w-full md:w-auto",children:"Scorecard"})]})]},te.id)),Q.length===0&&t.jsxs("div",{className:"py-20 text-center bg-slate-50 rounded-[2rem] border-2 border-dashed border-slate-200 text-slate-400 font-bold uppercase text-xs",children:["No ",D.toLowerCase()," fixtures found"]})]})]}),(j==="TEAMS"||j==="PLAYERS")&&t.jsxs("div",{className:"space-y-6 animate-in fade-in pb-10",children:[t.jsx("input",{value:G,onChange:te=>Y(te.target.value),placeholder:`Search ${j.toLowerCase()}...`,className:"w-full bg-white border border-slate-200 rounded-[2rem] px-6 py-4 font-bold outline-none shadow-sm focus:ring-2 focus:ring-indigo-500"}),j==="TEAMS"&&t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ee.map(te=>{const _e=m.teams.includes(te.id);return t.jsxs("div",{className:"bg-white rounded-[2.5rem] p-6 border border-slate-200 shadow-sm flex flex-col gap-4 relative overflow-hidden group hover:shadow-xl transition-all",children:[t.jsxs("div",{className:"flex items-center gap-4 cursor-pointer",onClick:()=>b(te.id),children:[t.jsx("img",{src:te.logoUrl,className:"w-16 h-16 rounded-2xl bg-slate-50 object-cover"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-black text-lg text-slate-900 leading-tight",children:te.name}),t.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:te.location})]})]}),t.jsx("button",{onClick:()=>f("TEAM",te.id),className:`w-full py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${_e?"bg-emerald-500 text-white":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:_e?"Following Team":"Follow Team"})]},te.id)})}),j==="PLAYERS"&&t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:se.slice(0,48).map(te=>{const _e=m.players.includes(te.id);return t.jsxs("div",{className:"bg-white rounded-[2rem] p-4 border border-slate-200 shadow-sm flex items-center gap-4 hover:border-indigo-300 transition-all group",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-slate-50 overflow-hidden cursor-pointer",onClick:()=>y(te),children:t.jsx("img",{src:te.photoUrl,className:"w-full h-full object-cover"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-black text-xs text-slate-900 truncate cursor-pointer hover:underline",onClick:()=>y(te),children:te.name}),t.jsx("p",{className:"text-[9px] text-slate-400 font-bold uppercase",children:te.teamName})]}),t.jsx("button",{onClick:()=>f("PLAYER",te.id),className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${_e?"bg-emerald-500 text-white":"bg-slate-100 text-slate-300 hover:bg-indigo-100 hover:text-indigo-500"}`,children:_e?"":"+"})]},te.id)})})]})]})]})},U2=({team:s,isOpen:e,onClose:n,allFixtures:i,onViewPlayer:r,isFollowed:o,onToggleFollow:d,onViewMatch:u,onUpdateTeam:p,onDeleteTeam:m,onRequestCaptainHub:f})=>{const[b,y]=_.useState("OVERVIEW"),[N,k]=_.useState(!1),T=_.useMemo(()=>{if(!s)return null;const S=i.filter(se=>se.teamAId===s.id||se.teamBId===s.id),R=S.filter(se=>se.status==="Completed"),A=S.filter(se=>se.status==="Scheduled");let I=0,j=0,E=0,D=0,L=0,G=0,Y=0,q=0;const Q=[...R].sort((se,M)=>new Date(M.date).getTime()-new Date(se.date).getTime()).slice(0,5).map(se=>se.winnerId===s.id?"W":se.winnerId==="TIE"?"T":se.winnerId?"L":"N").reverse();R.forEach(se=>{if(se.winnerId===s.id){I++;const M=se.teamAId===s.id,B=se.result||"";B.includes("runs")?L++:B.includes("wickets")&&G++,M?Y++:q++}else se.winnerId==="TIE"?E++:se.winnerId?j++:D++});const ne=I+j+E+D,ee=ne>0?Math.round(I/ne*100):0;return{totalPlayed:ne,wins:I,losses:j,ties:E,noResult:D,winRate:ee,formGuide:Q,completed:R,upcoming:A,battingFirstWins:L,battingSecondWins:G,homeWins:Y,awayWins:q}},[s,i]);return!e||!s||!T?null:t.jsxs("div",{className:"fixed inset-0 bg-slate-950/90 backdrop-blur-md z-[200] flex items-center justify-center p-4",children:[t.jsxs("div",{className:"bg-slate-900 w-full max-w-5xl h-[85vh] rounded-[3rem] border border-slate-800 shadow-2xl flex flex-col overflow-hidden animate-in zoom-in-95 duration-300",children:[t.jsxs("div",{className:"bg-slate-950 p-8 border-b border-slate-800 flex justify-between items-start relative shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-6 z-10",children:[t.jsx("button",{onClick:n,className:"w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 text-white flex items-center justify-center transition-all backdrop-blur-md",title:"Close Team View",children:""}),t.jsxs("div",{className:"w-24 h-24 bg-white rounded-3xl p-1 shadow-2xl relative group",children:[t.jsx("img",{src:s.logoUrl,className:"w-full h-full object-cover rounded-2xl"}),p&&t.jsx("div",{onClick:()=>k(!0),className:"absolute inset-0 bg-black/40 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-2xl cursor-pointer",children:t.jsx("span",{className:"text-white text-[10px] font-black uppercase",children:"Edit"})})]}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-4xl font-black text-white tracking-tight flex items-center gap-3",children:[s.name,p&&t.jsx("button",{onClick:()=>k(!0),className:"text-white/20 hover:text-white transition-colors text-xl",children:""})]}),t.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[t.jsx("span",{className:"bg-indigo-600 text-white text-[10px] font-black uppercase tracking-widest px-3 py-1 rounded-full",children:s.management||"Club Team"}),t.jsxs("span",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:[" ",s.location||"Unknown Location"]})]})]})]}),t.jsxs("div",{className:"flex gap-3 z-10",children:[f&&t.jsx("button",{onClick:f,className:"px-6 py-3 rounded-2xl font-black uppercase text-[10px] tracking-widest bg-indigo-600 text-white hover:bg-indigo-500 transition-all shadow-lg border border-indigo-400",children:"Team Hub "}),p&&t.jsx("button",{onClick:()=>k(!0),className:"px-6 py-3 rounded-2xl font-black uppercase text-[10px] tracking-widest bg-white/10 text-white hover:bg-white/20 transition-all border border-white/10",children:" Edit Team"}),t.jsx("button",{onClick:d,className:`px-6 py-3 rounded-2xl font-black uppercase text-[10px] tracking-widest transition-all ${o?"bg-emerald-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700 hover:text-white"}`,children:o?"Following ":"Follow Team"}),t.jsx("button",{onClick:n,className:"w-10 h-10 rounded-full bg-slate-800 hover:bg-slate-700 text-white flex items-center justify-center transition-all",children:""})]}),t.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-600/10 rounded-full blur-[80px] pointer-events-none"})]}),t.jsx("div",{className:"flex bg-slate-950 border-b border-slate-800 px-8 gap-8 shrink-0 overflow-x-auto no-scrollbar",children:["OVERVIEW","ANALYTICS","FIXTURES","SQUAD"].map(S=>t.jsx("button",{onClick:()=>y(S),className:`py-4 text-xs font-black uppercase tracking-widest border-b-4 transition-all ${b===S?"border-indigo-500 text-white":"border-transparent text-slate-500 hover:text-slate-300"}`,children:S},S))}),t.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-8 bg-slate-900",children:[b==="OVERVIEW"&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Matches",val:T.totalPlayed,color:"text-white"},{label:"Wins",val:T.wins,color:"text-emerald-400"},{label:"Losses",val:T.losses,color:"text-red-400"},{label:"Win Rate",val:`${T.winRate}%`,color:"text-indigo-400"}].map((S,R)=>t.jsxs("div",{className:"bg-slate-800 p-6 rounded-[2rem] border border-slate-700 text-center",children:[t.jsx("div",{className:`text-3xl font-black ${S.color}`,children:S.val}),t.jsx("div",{className:"text-[9px] text-slate-500 font-bold uppercase tracking-widest",children:S.label})]},R))}),t.jsxs("div",{className:"bg-slate-800 p-8 rounded-[2.5rem] border border-slate-700",children:[t.jsx("h3",{className:"text-xl font-black text-white mb-6",children:"Recent Form"}),t.jsxs("div",{className:"flex gap-4",children:[T.formGuide.length===0&&t.jsx("span",{className:"text-slate-500 text-xs italic",children:"No matches played yet."}),T.formGuide.map((S,R)=>t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center text-sm font-black text-white shadow-lg ${S==="W"?"bg-emerald-500":S==="L"?"bg-red-500":"bg-slate-500"}`,children:S},R))]})]})]}),t.jsxs("div",{className:"bg-white text-slate-900 p-8 rounded-[2.5rem] shadow-xl",children:[t.jsxs("h3",{className:"text-xl font-black mb-4 flex items-center justify-between",children:["Team Bio",p&&t.jsx("button",{onClick:()=>k(!0),className:"text-slate-300 hover:text-indigo-600 transition-colors",children:""})]}),t.jsxs("p",{className:"text-sm text-slate-600 leading-relaxed font-medium",children:[s.name," plays out of ",s.location||"their local ground",". Currently managed by ",s.management||"the club",". This squad features ",s.players.length," registered players."]}),t.jsxs("div",{className:"mt-8 pt-8 border-t border-slate-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Squad Size"}),t.jsx("span",{className:"text-lg font-black",children:s.players.length})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Established"}),t.jsx("span",{className:"text-lg font-black",children:"2026"})]})]})]})]}),b==="ANALYTICS"&&t.jsx("div",{className:"space-y-8 animate-in slide-in-from-right-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"bg-slate-800 p-8 rounded-[2.5rem] border border-slate-700",children:[t.jsx("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:" Chasing vs Defending"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400 mb-2",children:[t.jsx("span",{children:"Defending Target"}),t.jsxs("span",{className:"text-white",children:[T.battingFirstWins," Wins"]})]}),t.jsx("div",{className:"w-full bg-slate-900 rounded-full h-3 overflow-hidden",children:t.jsx("div",{className:"bg-indigo-500 h-full",style:{width:`${T.battingFirstWins/Math.max(1,T.wins)*100}%`}})})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-400 mb-2",children:[t.jsx("span",{children:"Chasing Target"}),t.jsxs("span",{className:"text-white",children:[T.battingSecondWins," Wins"]})]}),t.jsx("div",{className:"w-full bg-slate-900 rounded-full h-3 overflow-hidden",children:t.jsx("div",{className:"bg-emerald-500 h-full",style:{width:`${T.battingSecondWins/Math.max(1,T.wins)*100}%`}})})]})]})]}),t.jsxs("div",{className:"bg-slate-800 p-8 rounded-[2.5rem] border border-slate-700",children:[t.jsx("h3",{className:"text-lg font-black text-white mb-6 flex items-center gap-2",children:" Venue Performance"}),t.jsxs("div",{className:"flex items-center justify-center gap-8 h-40",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-indigo-500 flex items-center justify-center text-2xl font-black text-white bg-indigo-500/10",children:T.homeWins}),t.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-2",children:"Home Wins"})]}),t.jsx("div",{className:"text-slate-600 text-2xl font-black",children:"VS"}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-pink-500 flex items-center justify-center text-2xl font-black text-white bg-pink-500/10",children:T.awayWins}),t.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-2",children:"Away Wins"})]})]})]})]})}),b==="FIXTURES"&&t.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4",children:[T.upcoming.length>0&&t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest mb-4",children:"Upcoming Matches"}),t.jsx("div",{className:"grid grid-cols-1 gap-4",children:T.upcoming.map(S=>t.jsxs("div",{className:"bg-slate-800 p-6 rounded-3xl border border-slate-700 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"bg-slate-900 px-4 py-2 rounded-xl text-center",children:[t.jsx("div",{className:"text-xs font-black text-slate-400 uppercase",children:new Date(S.date).toLocaleDateString("en-US",{month:"short"})}),t.jsx("div",{className:"text-xl font-black text-white",children:new Date(S.date).getDate()})]}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-sm font-bold text-white",children:[S.teamAName," vs ",S.teamBName]}),t.jsxs("div",{className:"text-xs text-slate-500",children:[S.venue,"  ",t.jsx("span",{className:"text-indigo-400 font-bold",children:S.format})]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>u(S),className:"px-4 py-2 rounded-lg bg-white/10 hover:bg-white/20 text-white text-[10px] font-black uppercase tracking-widest transition-all",children:"Scorecard"}),t.jsx("div",{className:"px-4 py-2 rounded-lg bg-indigo-500/10 text-indigo-400 text-[10px] font-black uppercase tracking-widest border border-indigo-500/20",children:"Scheduled"})]})]},S.id))})]}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-black text-slate-500 uppercase tracking-widest mb-4",children:"Match History"}),t.jsx("div",{className:"grid grid-cols-1 gap-4",children:T.completed.map(S=>t.jsxs("div",{className:"bg-slate-800 p-6 rounded-3xl border border-slate-700 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"text-sm font-bold text-white mb-1",children:[S.teamAName," vs ",S.teamBName]}),t.jsxs("div",{className:"text-xs text-slate-500",children:[new Date(S.date).toLocaleDateString(),"  ",S.venue,"  ",t.jsx("span",{className:"text-indigo-400 font-bold",children:S.format})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-xs font-bold text-slate-400 uppercase",children:"Result"}),t.jsx("div",{className:`text-sm font-black ${S.winnerId===s.id?"text-emerald-400":"text-red-400"}`,children:S.winnerId===s.id?"WON":S.winnerId==="TIE"?"TIED":"LOST"})]}),t.jsx("button",{onClick:()=>u(S),className:"bg-slate-900 px-4 py-3 rounded-xl border border-slate-800 text-xs font-black text-slate-300 hover:text-white transition-all uppercase",children:"Scorecard"})]})]},S.id))})]})]}),b==="SQUAD"&&t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 animate-in slide-in-from-right-4",children:s.players.map(S=>t.jsxs("div",{onClick:()=>r(S.id),className:"bg-slate-800 p-4 rounded-2xl border border-slate-700 flex items-center gap-4 hover:border-indigo-500 transition-colors group cursor-pointer",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-slate-900 flex items-center justify-center overflow-hidden border border-slate-800",children:t.jsx("img",{src:S.photoUrl||`https://ui-avatars.com/api/?name=${S.name}&background=random`,className:"w-full h-full object-cover"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-bold text-white text-sm group-hover:text-indigo-400 transition-colors",children:S.name}),t.jsx("div",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:S.role})]})]},S.id))})]})]}),N&&p&&t.jsx(wb,{team:s,onClose:()=>k(!1),onSave:p,onDelete:m||(()=>{})})]})},L2=({profile:s,onUpdateProfile:e,showCaptainHub:n,onOpenCaptainHub:i,onBack:r})=>{const o=s.playerDetails||{battingStyle:"Right-hand",bowlingStyle:"N/A",primaryRole:"Batsman",lookingForClub:!1,isHireable:!1,bio:"",nickname:"",age:"",favoritePlayer:""},[d,u]=Fn.useState(!1),[p,m]=Fn.useState(o),f=()=>{e({playerDetails:p}),u(!1)};return t.jsxs("div",{className:"animate-in slide-in-from-bottom-8 space-y-8",children:[t.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-slate-900 rounded-[2.5rem] p-8 border border-slate-800 relative overflow-hidden",children:[t.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row items-center gap-8",children:[t.jsx("div",{className:"w-32 h-32 bg-white rounded-full flex items-center justify-center text-5xl font-black text-slate-900 shadow-2xl",children:s.name.charAt(0)}),t.jsxs("div",{className:"text-center md:text-left flex-1",children:[t.jsx("h1",{className:"text-4xl font-black text-white",children:s.name}),t.jsxs("p",{className:"text-indigo-300 font-bold uppercase text-sm tracking-widest mt-1",children:[o.primaryRole,"  ",o.battingStyle,r&&t.jsx("button",{onClick:r,className:"ml-4 text-[9px] bg-white/10 hover:bg-white/20 text-indigo-300 py-1 px-3 rounded-full transition-all border border-white/10 backdrop-blur-sm",children:"Back to Dashboard"})]}),t.jsxs("div",{className:"mt-6 flex flex-wrap justify-center md:justify-start gap-3",children:[t.jsx("button",{onClick:()=>e({playerDetails:{...o,lookingForClub:!o.lookingForClub}}),className:`px-6 py-3 rounded-xl font-black uppercase text-xs tracking-widest transition-all ${o.lookingForClub?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":"bg-slate-800 text-slate-400 hover:text-white"}`,children:o.lookingForClub?" Looking for Club":" Not Looking"}),n&&i&&t.jsxs("button",{onClick:i,className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-lg shadow-indigo-200 hover:bg-indigo-500 transition-all flex items-center gap-2",children:[t.jsx("span",{children:""})," Captain's Hub"]}),t.jsx("button",{onClick:()=>u(!0),className:"px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-xl font-black uppercase text-xs tracking-widest transition-all border border-white/10 backdrop-blur-md",children:"Edit Profile"})]})]})]}),t.jsx("div",{className:"absolute top-0 right-0 p-12 opacity-5 text-9xl text-white font-black",children:"CAREER"}),d&&t.jsx("div",{className:"fixed inset-0 bg-slate-950/90 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-[3rem] p-10 max-w-2xl w-full shadow-2xl animate-in zoom-in-95 duration-300 max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Edit Player Profile"}),t.jsx("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-600 text-2xl font-black",children:""})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Batting Style"}),t.jsxs("select",{value:p.battingStyle,onChange:b=>m({...p,battingStyle:b.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 font-bold text-slate-700 focus:ring-2 ring-indigo-500/20",children:[t.jsx("option",{value:"Right-hand",children:"Right-hand"}),t.jsx("option",{value:"Left-hand",children:"Left-hand"})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Primary Role"}),t.jsxs("select",{value:p.primaryRole,onChange:b=>m({...p,primaryRole:b.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 font-bold text-slate-700 focus:ring-2 ring-indigo-500/20",children:[t.jsx("option",{value:"Batsman",children:"Batsman"}),t.jsx("option",{value:"Bowler",children:"Bowler"}),t.jsx("option",{value:"All-rounder",children:"All-rounder"}),t.jsx("option",{value:"Wicket-keeper",children:"Wicket-keeper"})]})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Bowling Style"}),t.jsx("input",{type:"text",value:p.bowlingStyle,onChange:b=>m({...p,bowlingStyle:b.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 font-bold text-slate-700 focus:ring-2 ring-indigo-500/20",placeholder:"e.g. Right-arm fast"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Professional Bio"}),t.jsx("textarea",{value:p.bio,onChange:b=>m({...p,bio:b.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 font-bold text-slate-700 focus:ring-2 ring-indigo-500/20 h-32 resize-none",placeholder:"Tell us about your cricket journey..."})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Nickname"}),t.jsx("input",{type:"text",value:p.nickname||"",onChange:b=>m({...p,nickname:b.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 font-bold text-slate-700 focus:ring-2 ring-indigo-500/20"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Favorite Player"}),t.jsx("input",{type:"text",value:p.favoritePlayer||"",onChange:b=>m({...p,favoritePlayer:b.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 font-bold text-slate-700 focus:ring-2 ring-indigo-500/20"})]})]}),t.jsx("button",{onClick:f,className:"w-full py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase text-xs tracking-[0.2em] shadow-xl hover:bg-indigo-500 transition-all font-black",children:"Save Profile Changes"})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-sm",children:[t.jsx("h3",{className:"text-xl font-black text-slate-900 mb-6",children:"Playing Attributes"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-3",children:[t.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Batting Style"}),t.jsx("span",{className:"font-black text-slate-900",children:o.battingStyle})]}),t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-3",children:[t.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Bowling Style"}),t.jsx("span",{className:"font-black text-slate-900",children:o.bowlingStyle})]}),t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-3",children:[t.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Primary Role"}),t.jsx("span",{className:"font-black text-slate-900",children:o.primaryRole})]}),o.nickname&&t.jsxs("div",{className:"flex justify-between items-center border-b border-slate-100 pb-3",children:[t.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Nickname"}),t.jsx("span",{className:"font-black text-slate-900",children:o.nickname})]})]})]}),t.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2.5rem] text-white",children:[t.jsx("h3",{className:"text-xl font-black mb-6",children:"Career Statistics"}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[t.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl",children:[t.jsx("div",{className:"text-3xl font-black text-emerald-400",children:"0"}),t.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Matches"})]}),t.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl",children:[t.jsx("div",{className:"text-3xl font-black text-white",children:"0"}),t.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Runs"})]}),t.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl",children:[t.jsx("div",{className:"text-3xl font-black text-white",children:"0"}),t.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Wickets"})]}),t.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl",children:[t.jsx("div",{className:"text-3xl font-black text-white",children:"0"}),t.jsx("div",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest",children:"Catches"})]})]}),t.jsx("div",{className:"mt-6 text-center text-xs text-slate-500 italic",children:"Stats update automatically from official matches."})]})]})]})},B2=({profile:s,onUpdateProfile:e,fixtures:n,onAcceptFixture:i,onBack:r})=>{const o=s.scorerDetails||{isHireable:!1,hourlyRate:0,experienceYears:0,bio:""},[d,u]=_.useState(!1),[p,m]=_.useState(o),[f,b]=_.useState("MY_GAMES"),y=n.filter(A=>A&&A.scorerId===s.id),N=n.filter(A=>A&&!A.scorerId&&A.status!=="Completed"&&new Date(A.date).getTime()>Date.now()-864e5),k=()=>{e({scorerDetails:p}),u(!1)},T=A=>new Date(A).toLocaleDateString(void 0,{month:"short",day:"numeric"}),S=A=>new Date(A).toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"}),R=y.filter(A=>A.status==="Live");return t.jsxs("div",{className:"animate-in slide-in-from-bottom-8 min-h-screen bg-slate-50 pb-20",children:[R.length>0&&t.jsxs("div",{className:"bg-red-500 text-white px-4 py-3 flex items-center justify-between gap-4 animate-in fade-in slide-in-from-top-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg animate-pulse",children:""}),t.jsxs("p",{className:"text-[10px] font-black uppercase tracking-widest",children:["Incomplete Games Detected (",R.length,")"]})]}),t.jsx("button",{onClick:()=>b("MY_GAMES"),className:"bg-white/20 hover:bg-white/30 px-3 py-1 rounded-lg text-[9px] font-black uppercase tracking-widest transition-all",children:"View Assignments"})]}),t.jsx("div",{className:"bg-slate-900 text-white p-4 sticky top-0 z-30 shadow-md",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-indigo-500 rounded-full flex items-center justify-center font-black text-sm",children:s.name.charAt(0)}),t.jsxs("div",{children:[t.jsx("h1",{className:"font-bold text-lg leading-tight",children:s.name}),r&&t.jsx("button",{onClick:r,className:"text-[10px] text-indigo-300 uppercase tracking-widest hover:text-white",children:" Dashboard"})]})]}),t.jsx("button",{onClick:()=>u(!d),className:"text-[10px] bg-white/10 px-3 py-1.5 rounded-full font-bold uppercase tracking-wider hover:bg-white/20",children:d?"Cancel":"Edit"})]})}),d&&t.jsxs("div",{className:"bg-white p-6 m-4 rounded-[2rem] shadow-xl border border-slate-200 animate-in zoom-in-95",children:[t.jsx("h3",{className:"text-xl font-black text-slate-900 mb-6",children:"Edit Profile"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Hourly Rate ($)"}),t.jsx("input",{type:"number",value:p.hourlyRate,onChange:A=>m({...p,hourlyRate:Number(A.target.value)}),className:"w-full bg-slate-50 border rounded-xl px-4 py-2 mt-1"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Experience (Years)"}),t.jsx("input",{type:"number",value:p.experienceYears,onChange:A=>m({...p,experienceYears:Number(A.target.value)}),className:"w-full bg-slate-50 border rounded-xl px-4 py-2 mt-1"})]}),t.jsx("button",{onClick:k,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest mt-4",children:"Save"})]})]}),t.jsx("div",{className:"px-4 py-4",children:t.jsxs("div",{className:"flex bg-white p-1 rounded-xl shadow-sm border border-slate-200",children:[t.jsx("button",{onClick:()=>b("MY_GAMES"),className:`flex-1 py-2.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${f==="MY_GAMES"?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:"Assignments"}),t.jsxs("button",{onClick:()=>b("AVAILABLE"),className:`flex-1 py-2.5 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${f==="AVAILABLE"?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:["Find Work (",N.length,")"]})]})}),t.jsxs("div",{className:"px-4 space-y-3",children:[f==="MY_GAMES"&&(y.length>0?y.map(A=>t.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-slate-100 flex items-center justify-between gap-3",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center w-14 shrink-0 border-r border-slate-100 pr-3",children:[t.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:T(A.date).split(" ")[0]}),t.jsx("span",{className:"text-lg font-black text-indigo-600 leading-none",children:T(A.date).split(" ")[1]}),t.jsx("span",{className:"text-[9px] font-bold text-slate-400 mt-1",children:S(A.date)})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex flex-col gap-0.5",children:[t.jsx("div",{className:"font-bold text-slate-900 text-sm truncate",children:A.teamAName}),t.jsx("div",{className:"text-[9px] font-black text-slate-300 uppercase",children:"VS"}),t.jsx("div",{className:"font-bold text-slate-900 text-sm truncate",children:A.teamBName})]}),t.jsxs("div",{className:"flex items-center gap-1 mt-1.5 text-[10px] font-medium text-slate-500",children:[t.jsx("span",{children:""})," ",t.jsx("span",{className:"truncate",children:A.venue})]})]}),t.jsx("div",{className:"shrink-0",children:t.jsx("span",{className:`px-2 py-1 rounded-lg text-[9px] font-black uppercase ${A.status==="Completed"?"bg-emerald-100 text-emerald-700":"bg-indigo-100 text-indigo-700"}`,children:A.status==="Completed"?"Done":"Active"})})]},A.id)):t.jsx("div",{className:"text-center p-8 text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No assigned games"})),f==="AVAILABLE"&&(N.length>0?N.map(A=>t.jsxs("div",{className:"bg-white rounded-xl p-0 shadow-sm border border-slate-100 overflow-hidden flex flex-col md:flex-row",children:[t.jsxs("div",{className:"p-4 flex items-center gap-4",children:[t.jsxs("div",{className:"flex flex-col items-center justify-center w-14 shrink-0 border-r border-slate-100 pr-4",children:[t.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:T(A.date).split(" ")[0]}),t.jsx("span",{className:"text-xl font-black text-indigo-600 leading-none",children:T(A.date).split(" ")[1]}),t.jsx("span",{className:"text-[9px] font-bold text-slate-400 mt-1",children:S(A.date)})]}),t.jsxs("div",{className:"flex-1 min-w-0 flex flex-col gap-1",children:[t.jsx("div",{className:"font-bold text-slate-900 text-base leading-tight break-words",children:A.teamAName}),t.jsx("div",{className:"text-[9px] font-black text-slate-300 uppercase tracking-widest",children:"VS"}),t.jsx("div",{className:"font-bold text-slate-900 text-base leading-tight break-words",children:A.teamBName}),t.jsxs("div",{className:"flex items-center gap-1 mt-1 text-[10px] text-slate-500 font-medium",children:[t.jsx("span",{children:""})," ",A.venue]})]})]}),t.jsxs("button",{onClick:()=>i(A.id),className:"w-full bg-indigo-50 hover:bg-indigo-100 text-indigo-700 font-black uppercase text-[10px] tracking-widest py-3 border-t border-indigo-100 flex items-center justify-center gap-2",children:[t.jsx("span",{children:"Accept Match"}),t.jsx("span",{children:""})]})]},A.id)):t.jsx("div",{className:"text-center p-8 text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No available games found"}))]})]})},Uh={Bowled:{credit:!0,team:!0,faced:!0,fielder:!1,color:"bg-red-600"},Caught:{credit:!0,team:!0,faced:!0,fielder:!0,color:"bg-red-600"},LBW:{credit:!0,team:!0,faced:!0,fielder:!1,color:"bg-red-600"},Stumped:{credit:!0,team:!0,faced:!0,fielder:!0,color:"bg-red-600"},"Hit Wicket":{credit:!0,team:!0,faced:!0,fielder:!1,color:"bg-red-600"},"Run Out":{credit:!1,team:!0,faced:!0,fielder:!0,color:"bg-slate-600"},"Obstructing Field":{credit:!1,team:!0,faced:!0,fielder:!1,color:"bg-slate-600"},"Hit Ball Twice":{credit:!1,team:!0,faced:!0,fielder:!1,color:"bg-slate-600"},"Timed Out":{credit:!1,team:!0,faced:!1,fielder:!1,color:"bg-slate-600"},"Retired Out":{credit:!1,team:!0,faced:!1,fielder:!1,color:"bg-amber-600"},"Retired Hurt":{credit:!1,team:!1,faced:!1,fielder:!1,color:"bg-amber-600"}},rl=(s,e,n)=>{const i=e.filter(d=>d.strikerId===s&&d.innings===n&&!d.commentary.startsWith("EVENT")),r=i.reduce((d,u)=>d+u.runs,0),o=i.filter(d=>{const u=d.wicketType?Uh[d.wicketType]:null;return u&&!u.faced?!1:Mn(d.extraType)}).length;return{runs:r,balls:o,sr:o>0?(r/o*100).toFixed(0):"0",fours:i.filter(d=>d.runs===4).length,sixes:i.filter(d=>d.runs===6).length,dots:i.filter(d=>d.runs===0).length,ones:i.filter(d=>d.runs===1).length}},xr=(s,e,n)=>{const i=e.filter(u=>u.bowlerId===s&&u.innings===n&&!u.commentary.startsWith("EVENT")),r=i.filter(u=>Mn(u.extraType)).length,o=i.reduce((u,p)=>{if(p.extraType==="Bye"||p.extraType==="LegBye")return u;const m=p.extraType==="Wide"||p.extraType==="NoBall"?1:0;return u+p.runs+m+(p.extraType==="Wide"&&p.extraRuns||0)},0),d=i.filter(u=>{var p;return u.isWicket&&(!u.wicketType||((p=Uh[u.wicketType])==null?void 0:p.credit))}).length;return{overs:`${Math.floor(r/6)}.${r%6}`,runs:o,wickets:d,econ:r>0?(o/(r/6)).toFixed(1):"0.0"}},yv=s=>_.useMemo(()=>s.history.filter(e=>{var n;return!((n=e.commentary)!=null&&n.startsWith("EVENT"))}).map((e,n)=>{let i=`${e.runs+(e.extraRuns||0)}`,r="score",o="bg-slate-900";return e.isWicket?(i="W",r="wicket",o="bg-red-600"):e.extraType==="Wide"?(i=`${1+(e.extraRuns||0)}wd`,r="extra",o="bg-blue-600"):e.extraType==="NoBall"?(i=`${1+e.runs+(e.extraRuns||0)}nb`,r="extra",o="bg-purple-600"):e.extraType==="Bye"||e.extraType==="LegBye"?(i=`${e.extraRuns}${e.extraType==="Bye"?"b":"lb"}`,r="extra",o="bg-amber-600"):e.batRuns===4?(i="4",r="boundary",o="bg-indigo-600"):e.batRuns===6?(i="6",r="boundary",o="bg-emerald-600"):e.runs===0&&(!e.extraType||e.extraType==="None")&&(i="",r="dot",o="bg-slate-700"),{id:`timeline-${e.timestamp}-${n}`,ball:e,label:i,type:r,color:o,displayOver:`${e.over}.${e.ballNumber}`}}),[s.history]),P2=()=>{var q,ce,Q,ne,ee;const[s,e]=_.useState({state:null,teams:{}}),[n,i]=_.useState("LIVE"),[r,o]=_.useState(!1),[d,u]=_.useState(""),[p,m]=_.useState(!0);if(_.useEffect(()=>{const se=new BroadcastChannel("cricket_sync_channel");return se.onmessage=M=>{M.data.type==="UPDATE"&&e({state:M.data.state,teams:M.data.teams,sponsors:M.data.sponsors||[],sponsorSettings:M.data.sponsorSettings})},()=>se.close()},[]),!s.state)return t.jsxs("div",{className:"h-screen w-screen bg-slate-950 flex items-center justify-center flex-col text-slate-500",children:[t.jsx("div",{className:"text-4xl animate-pulse mb-4",children:""}),t.jsx("h1",{className:"text-xl font-black uppercase tracking-widest",children:"Waiting for Live Feed..."}),t.jsx("p",{className:"text-xs font-bold mt-2",children:"Scoreboard will update automatically"}),t.jsx("div",{className:"mt-8 text-[10px] font-bold text-slate-700 uppercase tracking-widest",children:"Powered by mitchipoohdevs"})]});const{state:f,teams:b,sponsors:y,sponsorSettings:N}=s,k=(q=b.batting)==null?void 0:q.players.find(se=>se.id===f.strikerId),T=(ce=b.batting)==null?void 0:ce.players.find(se=>se.id===f.nonStrikerId),S=(Q=b.bowling)==null?void 0:Q.players.find(se=>se.id===f.bowlerId),R=f.strikerId?rl(f.strikerId,f.history,f.innings):null,A=f.nonStrikerId?rl(f.nonStrikerId,f.history,f.innings):null,I=f.bowlerId?xr(f.bowlerId,f.history,f.innings):null,j=f.totalBalls>0?(f.score/f.totalBalls*6).toFixed(2):"0.00",E=f.target&&f.totalBalls<120?((f.target-f.score)/((120-f.totalBalls)/6)).toFixed(2):null,D=yv(f).slice(0,6).reverse(),L=f.matchTimer.startTime,G=L?Math.floor((Date.now()-L)/1e3):0,Y=se=>{const M=Math.floor(se/60),B=se%60;return`${M}:${B.toString().padStart(2,"0")}`};return y!=null&&y.filter(se=>se.isActive&&se.placements.includes("SCOREBOARD_TOP")),y!=null&&y.filter(se=>se.isActive&&se.placements.includes("SCOREBOARD_BOTTOM")),t.jsxs("div",{className:"h-screen w-screen bg-slate-950 text-white overflow-hidden flex flex-col relative group",children:[t.jsx("div",{className:"absolute top-0 right-0 p-2 z-[60] opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx("button",{onClick:()=>o(!r),className:"bg-white/10 hover:bg-white/20 text-white px-3 py-1 rounded text-xs font-bold uppercase backdrop-blur-md",children:r?"Close Edit":"Edit View"})}),r&&t.jsxs("div",{className:"absolute top-10 right-2 bg-slate-800 p-4 rounded-xl shadow-2xl z-[60] border border-slate-700 w-64 space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase block mb-1",children:"Active Tab"}),t.jsx("div",{className:"flex bg-slate-900 rounded p-1",children:["LIVE","CARD","SQUADS"].map(se=>t.jsx("button",{onClick:()=>i(se),className:`flex-1 py-1 text-[9px] font-bold uppercase rounded ${n===se?"bg-indigo-600 text-white":"text-slate-400 hover:text-white"}`,children:se},se))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase block mb-1",children:"Ticker Message"}),t.jsx("input",{value:d,onChange:se=>u(se.target.value),className:"w-full bg-slate-900 border border-slate-700 rounded px-2 py-1 text-xs text-white",placeholder:"e.g. Lunch Break"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Show Sponsors"}),t.jsx("button",{onClick:()=>m(!p),className:`w-8 h-4 rounded-full relative transition-colors ${p?"bg-emerald-500":"bg-slate-600"}`,children:t.jsx("div",{className:`absolute top-0.5 w-3 h-3 bg-white rounded-full transition-all ${p?"left-4.5":"left-0.5"}`})})]})]}),t.jsxs("div",{className:"flex-1 relative bg-[#0f172a] overflow-hidden flex flex-col",children:[n==="LIVE"&&t.jsxs("div",{className:"flex-1 flex flex-col justify-end p-8 pb-4 relative",children:[t.jsx("div",{className:"absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] pointer-events-none"}),t.jsxs("div",{className:"absolute top-8 left-8 flex gap-6 items-start",children:[t.jsxs("div",{className:"bg-slate-900/80 backdrop-blur border border-slate-700 rounded-xl p-4 min-w-[150px] text-center",children:[t.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Match Timer"}),t.jsx("div",{className:"text-2xl font-mono font-bold text-white",children:Y(G)})]}),f.target&&t.jsxs("div",{className:"bg-slate-900/80 backdrop-blur border border-slate-700 rounded-xl p-4 min-w-[150px] text-center",children:[t.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Target"}),t.jsx("div",{className:"text-2xl font-mono font-bold text-white",children:f.target}),t.jsxs("div",{className:"text-[9px] font-bold text-indigo-400 mt-1 uppercase",children:["Need ",f.target-f.score," Runs"]})]}),t.jsxs("div",{className:"bg-slate-900/80 backdrop-blur border border-slate-700 rounded-xl p-4 min-w-[150px] text-center",children:[t.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Run Rates"}),t.jsxs("div",{className:"flex justify-center gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xl font-mono font-bold text-white",children:j}),t.jsx("span",{className:"text-[8px] uppercase text-slate-500",children:"CRR"})]}),E&&t.jsxs("div",{children:[t.jsx("div",{className:"text-xl font-mono font-bold text-amber-500",children:E}),t.jsx("span",{className:"text-[8px] uppercase text-slate-500",children:"RRR"})]})]})]})]}),t.jsxs("div",{className:"flex items-end mb-4 relative z-10",children:[t.jsxs("div",{className:"bg-slate-900 text-white rounded-t-3xl rounded-bl-3xl p-8 shadow-2xl border-l-[12px] border-indigo-600 min-w-[420px] relative z-20",children:[t.jsxs("div",{className:"flex items-center gap-6 mb-4",children:[((ne=b.batting)==null?void 0:ne.logoUrl)&&t.jsx("img",{src:b.batting.logoUrl,className:"w-16 h-16 bg-white rounded-full p-1"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-black uppercase leading-none tracking-tight",children:((ee=b.batting)==null?void 0:ee.name)||"Batting"}),t.jsx("p",{className:"text-indigo-400 font-bold text-sm uppercase tracking-widest mt-1",children:f.innings===1?"1st Innings":"Chase"})]})]}),t.jsxs("div",{className:"flex items-baseline gap-6",children:[t.jsxs("span",{className:"text-7xl font-black tabular-nums tracking-tighter",children:[f.score,"/",f.wickets]}),t.jsxs("span",{className:"text-3xl text-slate-400 font-bold",children:[Math.floor(f.totalBalls/6),".",f.totalBalls%6," Ov"]})]})]}),t.jsx("div",{className:"bg-slate-800/95 backdrop-blur text-white p-6 mb-0 ml-[-20px] pl-12 rounded-tr-[3rem] relative z-10 border-b-8 border-slate-900 flex-1 min-w-0 max-w-5xl flex justify-between items-center shadow-xl",children:t.jsxs("div",{className:"flex-1 flex items-center justify-around px-8",children:[t.jsx("div",{className:"flex items-center gap-6",children:t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"font-black text-3xl leading-none flex items-center gap-3 justify-end mb-2",children:[k==null?void 0:k.name," ",t.jsx("span",{className:"w-4 h-4 bg-emerald-500 rounded-full animate-pulse shadow-[0_0_20px_#10b981]"})]}),t.jsxs("div",{className:"text-emerald-300 font-mono font-bold text-2xl",children:[R==null?void 0:R.runs,t.jsxs("span",{className:"text-lg text-slate-500 ml-2",children:["(",R==null?void 0:R.balls,")"]})]})]})}),t.jsx("div",{className:"h-16 w-px bg-slate-600 mx-8"}),t.jsx("div",{className:"flex items-center gap-6 opacity-60",children:t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold text-2xl leading-none text-slate-300 mb-2",children:T==null?void 0:T.name}),t.jsxs("div",{className:"text-slate-400 font-mono font-bold text-xl",children:[A==null?void 0:A.runs,t.jsxs("span",{className:"text-base text-slate-600 ml-2",children:["(",A==null?void 0:A.balls,")"]})]})]})})]})})]}),t.jsxs("div",{className:"flex gap-6 relative z-10",children:[t.jsxs("div",{className:"bg-white text-slate-900 rounded-[2rem] p-5 shadow-xl flex items-center gap-6 min-w-[400px]",children:[t.jsx("div",{className:"bg-slate-900 text-white px-4 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest",children:"Current Bowler"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-black text-2xl uppercase leading-none",children:S==null?void 0:S.name}),t.jsxs("div",{className:"font-mono text-lg font-bold text-slate-600 mt-1",children:[I==null?void 0:I.wickets,"-",I==null?void 0:I.runs," ",t.jsxs("span",{className:"text-sm text-slate-400",children:["(",I==null?void 0:I.overs,")"]})]})]})]}),t.jsxs("div",{className:"bg-slate-800/80 backdrop-blur rounded-[2rem] p-5 flex items-center gap-3 flex-1 shadow-xl border border-slate-700",children:[t.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mr-4",children:"This Over"}),D.map(se=>t.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center font-black text-sm ${se.color} text-white shadow-lg border-2 border-white/10`,children:se.label},se.id))]})]})]}),n==="CARD"&&b.batting&&b.bowling&&t.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:t.jsx(yc,{matchState:f,teamA:b.batting,teamB:b.bowling})}),n==="SQUADS"&&t.jsx("div",{className:"flex-1 p-8 grid grid-cols-2 gap-8",children:[b.batting,b.bowling].map(se=>se&&t.jsxs("div",{className:"bg-slate-800 rounded-2xl p-6",children:[t.jsxs("h2",{className:"text-xl font-black mb-4 flex items-center gap-2",children:[t.jsx("img",{src:se.logoUrl,className:"w-8 h-8 bg-white rounded-full"})," ",se.name]}),t.jsx("div",{className:"grid grid-cols-1 gap-2",children:se.players.map(M=>t.jsxs("div",{className:"bg-slate-700/50 p-2 rounded flex justify-between",children:[t.jsx("span",{children:M.name}),t.jsx("span",{className:"text-slate-400 text-xs",children:M.role})]},M.id))})]},se.id))})]}),t.jsxs("div",{className:"bg-slate-900 border-t border-slate-800 shrink-0 relative z-30",children:[d&&t.jsx("div",{className:"bg-indigo-600 text-white py-1 px-4 text-xs font-black uppercase tracking-widest text-center animate-pulse",children:d}),t.jsx("div",{className:"bg-black py-1 text-center",children:t.jsx("p",{className:"text-[9px] font-bold text-slate-600 uppercase tracking-widest",children:"Powered by mitchipoohdevs"})})]})]})};class G2 extends Fn.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){var e,n;return this.state.hasError?t.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-slate-950 text-white p-8 text-center",children:[t.jsx("div",{className:"text-4xl mb-4",children:""}),t.jsx("h1",{className:"text-2xl font-black mb-2 uppercase tracking-widest",children:"System Error"}),t.jsx("p",{className:"text-slate-400 text-sm mb-6",children:"The application encountered a critical failure."}),t.jsx("div",{className:"bg-slate-900 border border-slate-800 p-4 rounded-xl max-w-md w-full overflow-auto mb-6 text-left",children:t.jsx("pre",{className:"text-[10px] font-mono text-red-400 whitespace-pre-wrap break-all",children:((e=this.state.error)==null?void 0:e.message)||((n=this.state.error)==null?void 0:n.toString())})}),t.jsx("button",{onClick:()=>{localStorage.removeItem("cc_profile"),window.location.reload()},className:"px-8 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-black uppercase text-xs tracking-widest transition-all shadow-lg",children:"Reset & Reload"})]}):this.props.children}}const Tn={dot:["Dot ball","{batter} defends solidly","No run there","{batter} plays it straight to the fielder","Good defensive shot","{bowler} beats the bat!","Excellent bowling from {bowler}"],single:["{batter} takes a quick single","{batter} pushes it for one","They scamper through for a single","{batter} works it away for one run","Good running between the wickets","{batter} places it nicely for a single"],two:["{batter} finds the gap for two","They come back for the second!","{batter} pushes it into the gap, two runs","Good placement, two runs","Excellent running, they get two"],three:["{batter} finds the gap, they run three!","Superb running, three runs","{batter} places it perfectly, three runs","They push hard and get three!"],four:["FOUR! What a shot from {batter}!","BOUNDARY! {batter} finds the rope!","FOUR! Beautifully timed by {batter}!","FOUR! {batter} sends it racing to the boundary!","FOUR! Glorious stroke from {batter}!","FOUR! {batter} pierces the field perfectly!"],six:["SIX! {batter} sends it into the stands!","MAXIMUM! What a hit from {batter}!","SIX! {batter} launches it over the boundary!","SIX! Massive hit from {batter}!","SIX! {batter} goes big!","SIX! Out of the park from {batter}!"],wide:["Wide! {bowler}'s radar is off","Wide ball, that's wayward from {bowler}","Wide! {bowler} loses his line","Wide! Poor delivery from {bowler}","Wide ball, extra run"],noBall:["No ball! {bowler} has overstepped","No ball! Free hit coming up!","No ball from {bowler}","No ball! {bowler} oversteps the crease"],bye:["Byes! The keeper misses it","{runs} byes, extras mounting up","Byes, the ball beats everyone"],legBye:["Leg bye! Off the pads","{runs} leg byes","Leg bye, off the body"],wicket:{Bowled:["BOWLED! {bowler} crashes through the defenses!","TIMBER! {outPlayer} is bowled by {bowler}!","BOWLED! What a delivery from {bowler}!","BOWLED! {outPlayer}'s stumps are shattered!"],Caught:["OUT! {outPlayer} is caught by {fielder}!","CAUGHT! {fielder} takes a brilliant catch!","OUT! {outPlayer} holes out to {fielder}!","CAUGHT! {fielder} makes no mistake!"],"Caught Behind":["OUT! Caught behind! {outPlayer} edges it to the keeper!","CAUGHT BEHIND! {outPlayer} nicks it!","OUT! The keeper takes a good catch!","CAUGHT BEHIND! Thin edge and gone!"],LBW:["OUT! LBW! {outPlayer} is trapped in front!","LBW! That looked plumb!","OUT! {outPlayer} is given out LBW!","LBW! {bowler} gets his man!"],"Run Out":["RUN OUT! {outPlayer} is short of the crease!","OUT! Brilliant fielding, {outPlayer} is run out!","RUN OUT! {outPlayer} sacrifices his wicket!","OUT! Direct hit! {outPlayer} is gone!"],Stumped:["STUMPED! {outPlayer} is out of his crease!","OUT! Lightning quick stumping!","STUMPED! The keeper does the rest!","OUT! {outPlayer} is stumped!"]}};function Cn(s){return s[Math.floor(Math.random()*s.length)]}function En(s,e){var n,i,r,o;return s.replace("{batter}",((n=e.batter)==null?void 0:n.name)||"The batter").replace("{bowler}",((i=e.bowler)==null?void 0:i.name)||"The bowler").replace("{outPlayer}",((r=e.outPlayer)==null?void 0:r.name)||"The batter").replace("{fielder}",((o=e.fielder)==null?void 0:o.name)||"the fielder").replace("{runs}",e.runs.toString())}function wv(s){let e=s.replace(/!/g,"!,");return e=e.replace(/([A-Z][a-z]+ [A-Z][a-z]+)/g,"$1,"),e=e.replace(/,,/g,","),e}function zu(s){let e="";if(s.isWide)e=En(Cn(Tn.wide),s);else if(s.isNoBall)e=En(Cn(Tn.noBall),s);else if(s.isBye)e=En(Cn(Tn.bye),s);else if(s.isLegBye)e=En(Cn(Tn.legBye),s);else if(s.wicketType){const n=Tn.wicket[s.wicketType];n?e=En(Cn(n),s):e=`WICKET! ${s.wicketType}!`}else switch(s.runs){case 0:e=En(Cn(Tn.dot),s);break;case 1:e=En(Cn(Tn.single),s);break;case 2:e=En(Cn(Tn.two),s);break;case 3:e=En(Cn(Tn.three),s);break;case 4:e=En(Cn(Tn.four),s);break;case 6:e=En(Cn(Tn.six),s);break;default:e=`${s.runs} runs`}return wv(e)}function $2(s){const{overNumber:e,score:n,wickets:i,currentRunRate:r,innings:o,target:d,requiredRate:u,batterName:p,batterScore:m,projectedScore:f,lead:b}=s,y=[];if(o===1&&(y.push(`End of over ${e}. The score is ${n} for ${i}. Current run rate, ${r}.`,`That's the end of over ${e}. ${n} for ${i}. They're scoring at ${r} runs per over.`,`Over ${e} complete. ${n} for ${i}. Run rate ${r}.`),p&&m!==void 0&&y.push(`End of over ${e}. ${n} for ${i}. ${p} on ${m}.`,`That's over ${e} done. ${p} has ${m}. Team score ${n} for ${i}.`),f&&y.push(`Over ${e} complete. ${n} for ${i}. At this rate, they're projected to reach ${f}.`,`End of over ${e}. Current score ${n} for ${i}. Projected total, ${f}.`),b&&b>0?y.push(`Over ${e} done. ${n} for ${i}. They lead by ${b} runs.`,`End of over ${e}. ${n} for ${i}. Lead of ${b} runs.`):b&&b<0&&y.push(`Over ${e} complete. ${n} for ${i}. They trail by ${Math.abs(b)} runs.`,`End of over ${e}. ${n} for ${i}. Still ${Math.abs(b)} runs behind.`)),o===2&&d){const k=d-n;k>0&&(y.push(`End of over ${e}. ${n} for ${i}. They need ${k} more runs to win.`,`Over ${e} complete. ${k} runs needed from here. Current score ${n} for ${i}.`,`That's over ${e}. ${n} for ${i}. ${k} runs required.`),u&&y.push(`End of over ${e}. ${n} for ${i}. Need ${k} runs. Required rate ${u}.`,`Over ${e} done. ${k} to win. Required run rate, ${u}. Current rate, ${r}.`,`That's the end of over ${e}. ${n} for ${i}. ${k} needed at ${u} per over.`),p&&m!==void 0&&y.push(`Over ${e} complete. ${p} on ${m}. Team needs ${k} more runs.`,`End of over ${e}. ${n} for ${i}. ${p} has ${m}. ${k} runs to win.`))}const N=y[Math.floor(Math.random()*y.length)];return wv(N)}const F2=(s,e)=>{const{runs:n=0,extraRuns:i=0,extraType:r="None",isWicket:o=!1}=e,d=Mn(r),u=r==="Wide"||r==="NoBall"?1:0,p=s.score+n+i+u,m=d?s.totalBalls+1:s.totalBalls;let f=s.strikerId,b=s.nonStrikerId;return(n+(["Bye","LegBye","Wide","NoBall"].includes(r)?i:0))%2!==0&&([f,b]=[b,f]),d&&m%6===0&&m>0&&([f,b]=[b,f]),{...s,score:p,totalBalls:m,strikerId:f,nonStrikerId:b}},H2=(s,e)=>{let n=s.strikerId,i=s.nonStrikerId;return n===e?n="":i===e&&(i=""),{...s,wickets:s.wickets+1,strikerId:n,nonStrikerId:i}},Fg=(s,e,n)=>({...s,strikerId:n==="Striker"?e:s.strikerId,nonStrikerId:n==="NonStriker"?e:s.nonStrikerId}),q2=(s,e)=>({...s,bowlerId:e}),V2=s=>s.matchTimer.startTime?s:{...s,matchTimer:{...s.matchTimer,startTime:Date.now(),isPaused:!1}},Hg=(s,e,n)=>{var f;let i={...s};if((f=e.commentary)!=null&&f.startsWith("EVENT")){e.strikerId&&(i=Fg(i,e.strikerId,"Striker")),e.nonStrikerId&&(i=Fg(i,e.nonStrikerId,"NonStriker")),e.bowlerId&&(i=q2(i,e.bowlerId));const b={timestamp:Date.now(),over:Math.floor(i.totalBalls/6),ballNumber:i.totalBalls%6,strikerId:i.strikerId,nonStrikerId:i.nonStrikerId,bowlerId:i.bowlerId,runs:0,batRuns:0,extraRuns:0,extraType:"None",isWicket:!1,commentary:e.commentary||"Setup Event",innings:i.innings,...e};return{...i,history:[b,...i.history]}}i=V2(i),i=F2(i,e),e.isWicket&&e.outPlayerId&&(i=H2(i,e.outPlayerId));const r=e.wicketType?Uh[e.wicketType]:null,d=Mn(e.extraType)?i.totalBalls:i.totalBalls+1,u=d%6===0?6:d%6,p=Math.floor((d-1)/6),m={timestamp:Date.now(),over:p,ballNumber:u,strikerId:s.strikerId,nonStrikerId:s.nonStrikerId,bowlerId:i.bowlerId,runs:e.runs||0,batRuns:e.extraType==="Wide"?0:e.runs||0,extraRuns:e.extraRuns||0,extraType:e.extraType||"None",isWicket:e.isWicket||!1,wicketType:e.wicketType,outPlayerId:e.outPlayerId,fielderId:e.fielderId,creditBowler:e.isWicket&&(r?r.credit:!0),teamScoreAtBall:i.score,commentary:e.isWicket?`WICKET! ${e.wicketType}`:`${(e.runs||0)+(e.extraRuns||0)+(["Wide","NoBall"].includes(e.extraType||"")?1:0)} runs ${e.extraType!=="None"?`(${e.extraType})`:""}`,innings:i.innings,...e};return{...i,history:[m,...i.history]}},z2=s=>{const{innings:e,score:n,inningsScores:i,battingTeamId:r,bowlingTeamId:o}=s,d=i.filter(m=>m.teamId===r).reduce((m,f)=>m+(f.score||0),0),u=i.filter(m=>m.teamId===o).reduce((m,f)=>m+(f.score||0),0);return d+n-u},W2=s=>{var e,n;return{...s,adjustments:{...s.adjustments,isLastHour:!0,lastHourOversRemaining:15,dayNumber:((e=s.adjustments)==null?void 0:e.dayNumber)||1,session:"Evening",declared:((n=s.adjustments)==null?void 0:n.declared)||!1}}},J2=s=>{var n;if(!((n=s.adjustments)!=null&&n.isLastHour))return s;const e=s.adjustments.lastHourOversRemaining||0;return e<=0?s:{...s,adjustments:{...s.adjustments,lastHourOversRemaining:Math.max(0,e-1),isLastHour:!0,dayNumber:s.adjustments.dayNumber,session:s.adjustments.session||"Evening",declared:s.adjustments.declared}}},Y2=s=>{const[e,n]=_.useState(s),[i,r]=_.useState([]),o=_.useCallback(j=>{r(E=>[...E,e]),n(E=>{var L;const D=Hg(E,j);if(D.testConfig&&(D.lead=z2(D),Math.floor(D.totalBalls/6)>Math.floor(E.totalBalls/6)&&(console.log("Over Changed. Prev OversToday:",E.oversToday),D.oversToday=(E.oversToday||0)+1,(L=D.adjustments)!=null&&L.isLastHour))){const G=J2(D);D.adjustments=G.adjustments}return D})},[e]),d=_.useCallback(j=>{o({runs:0,extraRuns:0,extraType:"None",isWicket:!0,wicketType:j.wicketType,outPlayerId:j.batterId,fielderId:j.fielderId,commentary:`WICKET! ${j.wicketType}`})},[o]),u=_.useCallback(()=>{if(i.length===0)return;const j=i[i.length-1];n(j),r(E=>E.slice(0,-1))},[i]),p=_.useCallback((j,E)=>{r(D=>[...D,e]),n(D=>{const L=[...D.history].reverse(),G=L.findIndex(ce=>ce.timestamp===j);if(G===-1)return D;L[G]={...L[G],...E};let Y={...D,score:0,wickets:0,totalBalls:0,history:[]};const q=L.find(ce=>ce.innings===D.innings);return q&&(Y.strikerId=q.strikerId,Y.nonStrikerId=q.nonStrikerId,Y.bowlerId=q.bowlerId),L.forEach(ce=>{ce.innings===D.innings?Y=Hg(Y,ce):Y.history=[ce,...Y.history]}),Y})},[e]),m=_.useCallback((j,E,D)=>{r(L=>[...L,e]),n(L=>{const G={...L};return D==="striker"&&G.strikerId===j&&(G.strikerId=E),D==="nonStriker"&&G.nonStrikerId===j&&(G.nonStrikerId=E),D==="bowler"&&G.bowlerId===j&&(G.bowlerId=E),G.history=G.history.map(Y=>{const q={...Y};return D==="striker"&&q.strikerId===j&&(q.strikerId=E),D==="nonStriker"&&q.nonStrikerId===j&&(q.nonStrikerId=E),D==="bowler"&&q.bowlerId===j&&(q.bowlerId=E),q.outPlayerId===j&&(q.outPlayerId=E),q}),G})},[e]),f=_.useCallback((j,E)=>{o({isWicket:E==="Retired Out",wicketType:E,outPlayerId:j,commentary:`EVENT: ${E}`,innings:e.innings})},[o,e.innings]),b=_.useCallback(j=>{o({commentary:"EVENT: Injury Replacement (Bowler)",bowlerId:j,innings:e.innings})},[o,e.innings]),y=_.useCallback(()=>{r(j=>[...j,e]),n(j=>{var E,D,L,G;return{...j,adjustments:{...j.adjustments,declared:!0,oversLost:((E=j.adjustments)==null?void 0:E.oversLost)||0,isLastHour:((D=j.adjustments)==null?void 0:D.isLastHour)||!1,dayNumber:((L=j.adjustments)==null?void 0:L.dayNumber)||1,session:((G=j.adjustments)==null?void 0:G.session)||""}}})},[e]),N=_.useCallback(()=>{r(j=>[...j,e]),n(j=>({...j,adjustments:{...j.adjustments,concluded:!0}}))},[e]),k=_.useCallback((j,E,D,L)=>{r(G=>[...G,e]),n(G=>({...G,innings:G.innings+1,battingTeamId:j,bowlingTeamId:E,score:0,wickets:0,totalBalls:0,strikerId:"",nonStrikerId:"",bowlerId:"",target:D,isFollowOnEnforced:L||G.isFollowOnEnforced,adjustments:{...G.adjustments,declared:!1,concluded:!1}}))},[e]),T=_.useCallback((j=!1)=>{r(E=>[...E,e]),n(E=>({...E,inningsScores:[...E.inningsScores,{innings:E.innings,teamId:E.battingTeamId,score:E.score,wickets:E.wickets,overs:ll(E.totalBalls)}],isCompleted:j||E.isCompleted}))},[e]),S=_.useCallback(j=>{r(E=>[...E,e]),n(E=>({...E,...j}))},[e]),R=_.useCallback(()=>{r(j=>[...j,e]),n(j=>({...j,currentDay:(j.currentDay||1)+1,oversToday:0,adjustments:{...j.adjustments,session:"Morning"}}))},[e]),A=_.useCallback(()=>{r(j=>[...j,e]),n(j=>({...j,isFollowOnEnforced:!0,innings:3,score:0,wickets:0,totalBalls:0,strikerId:"",nonStrikerId:"",bowlerId:"",battingTeamId:j.battingTeamId,bowlingTeamId:j.bowlingTeamId,adjustments:{...j.adjustments,declared:!1,concluded:!1}}))},[e]),I=_.useCallback(()=>{r(j=>[...j,e]),n(j=>W2(j))},[e]);return{state:e,history:i,applyBall:o,recordWicket:d,undoBall:u,editBall:p,canUndo:i.length>0,startInnings:k,endInnings:T,correctPlayerIdentity:m,retireBatter:f,replaceBowlerMidOver:b,declareInnings:y,concludeInnings:N,updateMetadata:S,startNewDay:R,enforceFollowOn:A,triggerLastHour:I}},K2=()=>{const[s,e]=_.useState("main"),[n,i]=_.useState(!1),[r,o]=_.useState(null),[d,u]=_.useState(null),[p,m]=_.useState(null),[f,b]=_.useState(null),[y,N]=_.useState(null),[k,T]=_.useState(null),[S,R]=_.useState(null),A=_.useCallback(()=>{e("main"),i(!1),o(null),u(null),m(null),b(null),N(null),T(null),R(null)},[]),I=_.useCallback(()=>{i(!0)},[]),j=_.useCallback(()=>{i(!1)},[]),E=_.useCallback(()=>{e("wide_runs")},[]),D=_.useCallback(()=>{e("nb_type")},[]),L=_.useCallback(B=>{o(B),e("nb_runs")},[]),G=_.useCallback(()=>{e("bye_runs")},[]),Y=_.useCallback(()=>{e("lb_runs")},[]),q=_.useCallback(B=>{u(B),e("wicket_type_select")},[]),ce=_.useCallback(B=>{m(B),e("wicket_fielder_select")},[]),Q=_.useCallback(B=>{b(B),e("wicket_assist_select")},[]),ne=_.useCallback(B=>{B&&N(B),e("main")},[]),ee=_.useCallback(B=>{T(B),e("bowler_replacement_select")},[]),se=_.useCallback(B=>{R(B),e("batter_actions_menu")},[]),M=_.useCallback(()=>{e("batter_replacement_select")},[]);return{padView:s,setPadView:e,isRunGridExpanded:n,pendingNbType:r,startWide:E,startNoBall:D,selectNoBallType:L,startByes:G,startLegByes:Y,openRunGrid:I,closeRunGrid:j,pendingWicketPlayerId:d,pendingDismissalType:p,pendingFielderId:f,pendingAssistFielderId:y,startWicket:q,selectDismissalType:ce,selectFielder:Q,selectAssistFielder:ne,replacementMode:k,startBowlerReplacement:ee,batterActionTarget:S,openBatterActions:se,startBatterReplacement:M,resetPad:A}},X2=(s,e,n)=>{var S;const i=(s==null?void 0:s.format)||"T20",o=(s==null?void 0:s.customOvers)??(i==="T10"?10:i==="T20"?20:i==="40-over"?40:i==="50-over"?50:90),d=((S=e.adjustments)==null?void 0:S.oversLost)||0,u=Math.max(1,(o||20)-d),p=Math.floor(u/5),m=u%5,f=Math.ceil(u/5),b=_.useMemo(()=>{const R={};return n&&n.players.forEach(A=>{R[A.id]={balls:0,overs:0}}),e.history.forEach(A=>{A.innings===e.innings&&Mn(A.extraType)&&!A.commentary.startsWith("EVENT")&&(R[A.bowlerId]||(R[A.bowlerId]={balls:0,overs:0}),R[A.bowlerId].balls++,R[A.bowlerId].overs=Math.floor(R[A.bowlerId].balls/6))}),R},[e.history,e.innings,n]),y=_.useMemo(()=>Object.values(b).filter(R=>R.balls>p*6).length,[b,p]),N=R=>{const A=b[R]||{balls:0,overs:0},I=A.overs,j=A.balls%6;let E=!1;if(e.totalBalls>0&&e.totalBalls%6===0&&e.bowlerId===R&&(E=!0),i!=="Test"){if(I>=f)return{allowed:!1,reason:"Quota Full",isConsecutive:E,oversBowled:I};if(I===p&&j===0&&y>=m&&m>0)return{allowed:!1,reason:"Max Bonus Overs Used",isConsecutive:E,oversBowled:I}}return{allowed:!E,reason:E?"Consecutive Over":"OK",isConsecutive:E,oversBowled:I}},k=4.25*60*1e3,T=u*k;return{matchFormat:i,totalOversAllowed:u,baseQuota:p,remainderQuota:m,maxQuota:f,bowlerStats:b,getBowlerAvailability:N,targetDurationMs:T}},Nv=(s,e,n,i)=>{const r=_.useMemo(()=>{const p={};return n==null||n.players.forEach(m=>{p[m.id]={runs:0,balls:0,ones:0,fours:0,sixes:0,strikeRate:0,runRate:0,isOut:!1}}),s.history.forEach(m=>{var y;if(m.innings!==s.innings||(y=m.commentary)!=null&&y.startsWith("EVENT")||!m.strikerId)return;const f=p[m.strikerId];if(!f)return;if(Mn(m.extraType)&&(f.balls+=1),m.extraType!=="Wide"){const N=m.batRuns??m.runs??0;f.runs+=N,N===1&&(f.ones+=1),N===4&&(f.fours+=1),N===6&&(f.sixes+=1)}m.isWicket&&m.outPlayerId===m.strikerId&&(f.isOut=!0,f.dismissal=m.dismissalType||m.wicketType)}),Object.values(p).forEach(m=>{m.strikeRate=m.balls>0?parseFloat((m.runs/m.balls*100).toFixed(1)):0,m.runRate=m.balls>0?parseFloat((m.runs/m.balls*6).toFixed(2)):0}),p},[s.history,s.innings,n]),o=_.useMemo(()=>{const p={},m={};return i==null||i.players.forEach(f=>{p[f.id]={balls:0,runs:0,wickets:0,maidens:0,overs:"0.0",economy:0}}),s.history.forEach(f=>{var k;if(f.innings!==s.innings||(k=f.commentary)!=null&&k.startsWith("EVENT")||!f.bowlerId)return;const b=p[f.bowlerId];if(!b)return;const y=f.extraType==="Wide"||f.extraType==="NoBall"?1:0;f.extraType!=="Bye"&&f.extraType!=="LegBye"&&(b.runs+=f.runs+(f.extraRuns||0)+y),f.isWicket&&f.creditBowler&&(b.wickets+=1),Mn(f.extraType)&&(b.balls+=1);const N=f.over;m[N]||(m[N]={bowlerId:f.bowlerId,runs:0,legalBalls:0}),Mn(f.extraType)&&(m[N].legalBalls+=1),f.extraType!=="Bye"&&f.extraType!=="LegBye"&&(m[N].runs+=f.runs+(f.extraRuns||0)+y)}),Object.values(m).forEach(f=>{f.legalBalls===6&&f.runs===0&&p[f.bowlerId]&&(p[f.bowlerId].maidens+=1)}),Object.values(p).forEach(f=>{f.overs=ll(f.balls);const b=f.balls/6;f.economy=b>0?parseFloat((f.runs/b).toFixed(2)):0}),p},[s.history,s.innings,i]),d=_.useMemo(()=>s.totalBalls>0?parseFloat((s.score/s.totalBalls*6).toFixed(2)):0,[s.score,s.totalBalls]),u=_.useMemo(()=>{if(s.innings!==2||!s.target)return 0;const p=s.target-s.score,m=e*6-s.totalBalls;return m<=0?0:parseFloat((p/m*6).toFixed(2))},[s.innings,s.target,s.score,s.totalBalls,e]);return{batterStats:r,bowlerStats:o,runRate:d,requiredRate:u,overs:ll(s.totalBalls)}};function Q2(){const[s,e]=_.useState(!1),[n,i]=_.useState(null),[r,o]=_.useState(null),[d,u]=_.useState(null),p=_.useCallback(f=>{o(f||null),e(!0)},[]),m=_.useCallback(()=>{e(!1),i(null),o(null),u(null)},[]);return{isOpen:s,wicketType:n,outPlayerId:r,fielderId:d,start:p,reset:m,setWicketType:i,setOutPlayerId:o,setFielderId:u}}function Z2(s,e,n,i){const o=255.13819985825657,[d,u]=_.useState(0);_.useEffect(()=>{if(!s||!n)return;u(Math.floor((Date.now()-s)/1e3));const b=setInterval(()=>{u(Math.floor((Date.now()-s)/1e3))},1e3);return()=>clearInterval(b)},[s,n]);const p=e/6,m=d/o,f=p<m-.5&&e>12;return{elapsedSeconds:d,actualOvers:p,expectedOvers:m,behindRate:f}}const eI=({readOnly:s,compact:e,onRun:n,striker:i,onStartWicket:r,onAnalyticsClick:o,onNav:d})=>{const u=p=>`${p} ${s?"opacity-50 cursor-not-allowed pointer-events-none grayscale":""} ${e?"text-sm py-0.5":""}`;return t.jsxs("div",{className:"h-full w-full flex flex-col relative",children:[s&&t.jsx("div",{className:"absolute top-1 right-1 z-20 pointer-events-none",children:t.jsx("span",{className:"bg-red-600 text-white px-1.5 py-0.5 rounded text-[7px] font-black uppercase tracking-widest animate-pulse shadow-md",children:"Live"})}),t.jsxs("div",{className:"flex flex-col gap-1.5 h-full w-full p-2 bg-slate-50",children:[t.jsxs("div",{className:"grid grid-cols-4 gap-1.5 h-14",children:[t.jsx("button",{onClick:()=>n(0),disabled:s,className:u("bg-white hover:bg-slate-50 text-slate-900 text-xl font-black rounded-lg shadow-sm border border-slate-200 flex items-center justify-center"),children:"0"}),t.jsx("button",{onClick:()=>n(1),disabled:s,className:u("bg-white hover:bg-slate-50 text-slate-900 text-xl font-black rounded-lg shadow-sm border border-slate-200 flex items-center justify-center"),children:"1"}),t.jsx("button",{onClick:()=>n(2),disabled:s,className:u("bg-white hover:bg-slate-50 text-slate-900 text-xl font-black rounded-lg shadow-sm border border-slate-200 flex items-center justify-center"),children:"2"}),t.jsx("button",{onClick:()=>n(3),disabled:s,className:u("bg-white hover:bg-slate-50 text-slate-900 text-xl font-black rounded-lg shadow-sm border border-slate-200 flex items-center justify-center"),children:"3"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-1.5 h-20",children:[t.jsx("button",{onClick:()=>n(4),disabled:s,className:u("bg-indigo-600 hover:bg-indigo-700 text-white text-4xl font-black rounded-xl shadow-md flex items-center justify-center"),children:"4"}),t.jsx("button",{onClick:()=>n(6),disabled:s,className:u("bg-emerald-600 hover:bg-emerald-700 text-white text-4xl font-black rounded-xl shadow-md flex items-center justify-center"),children:"6"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-1.5 h-14",children:[t.jsx("button",{onClick:()=>d("extras"),disabled:s,className:u("bg-amber-600 hover:bg-amber-700 text-white text-sm font-black rounded-lg shadow-sm flex items-center justify-center uppercase"),children:"EX"}),t.jsx("button",{onClick:()=>r(i==null?void 0:i.id),disabled:s,className:u("bg-red-600 hover:bg-red-700 text-white text-sm font-black rounded-lg shadow-sm flex items-center justify-center uppercase"),children:"OUT"}),t.jsxs("div",{className:"grid grid-rows-2 gap-1",children:[t.jsxs("button",{onClick:()=>{o&&o()},className:u("bg-slate-100 hover:bg-slate-200 text-slate-900 text-[10px] font-black rounded-md border border-slate-200 flex items-center justify-center gap-1"),children:[t.jsx("span",{children:""})," MAP"]}),t.jsx("button",{onClick:()=>d("events"),className:u("bg-slate-100 hover:bg-slate-200 text-slate-900 text-[10px] font-black rounded-md border border-slate-200 flex items-center justify-center"),children:"MORE"})]})]})]})]})},tI=({readOnly:s,compact:e,onRun:n,striker:i,onStartWicket:r,onAnalyticsClick:o,onNav:d})=>{const u=p=>`${p} ${s?"opacity-50 cursor-not-allowed pointer-events-none grayscale":""} ${e?"text-sm py-0.5":""}`;return t.jsxs("div",{className:"h-full w-full flex flex-col relative",children:[s&&t.jsx("div",{className:"absolute top-1 right-1 z-20 pointer-events-none",children:t.jsx("span",{className:"bg-red-600 text-white px-1.5 py-0.5 rounded text-[7px] font-black uppercase tracking-widest animate-pulse shadow-md",children:"Live"})}),t.jsxs("div",{className:"flex flex-col gap-2 h-full w-full p-2 bg-slate-50",children:[t.jsxs("div",{className:"flex gap-2 h-14 w-full",children:[t.jsx("button",{onClick:()=>n(0),disabled:s,className:u("flex-1 bg-white hover:bg-slate-50 text-slate-900 text-2xl font-black rounded-xl shadow-sm border border-slate-200 flex items-center justify-center"),children:"0"}),t.jsx("button",{onClick:()=>n(1),disabled:s,className:u("flex-1 bg-white hover:bg-slate-50 text-slate-900 text-2xl font-black rounded-xl shadow-sm border border-slate-200 flex items-center justify-center"),children:"1"}),t.jsx("button",{onClick:()=>n(2),disabled:s,className:u("flex-1 bg-white hover:bg-slate-50 text-slate-900 text-2xl font-black rounded-xl shadow-sm border border-slate-200 flex items-center justify-center"),children:"2"}),t.jsx("button",{onClick:()=>n(3),disabled:s,className:u("flex-1 bg-white hover:bg-slate-50 text-slate-900 text-2xl font-black rounded-xl shadow-md border-2 border-slate-900 flex items-center justify-center"),children:"3"})]}),t.jsxs("div",{className:"flex gap-2 h-20 w-full",children:[t.jsx("button",{onClick:()=>n(4),disabled:s,className:u("flex-1 bg-[#5b21b6] hover:bg-[#4c1d95] text-white text-5xl font-black rounded-2xl shadow-lg flex items-center justify-center"),children:"4"}),t.jsx("button",{onClick:()=>n(6),disabled:s,className:u("flex-1 bg-[#047857] hover:bg-[#065f46] text-white text-5xl font-black rounded-2xl shadow-lg flex items-center justify-center"),children:"6"})]}),t.jsxs("div",{className:"flex gap-2 h-16 w-full",children:[t.jsx("button",{onClick:()=>d("extras"),disabled:s,className:u("flex-1 bg-[#c2410c] hover:bg-[#9a3412] text-white text-md font-black rounded-xl shadow-md flex items-center justify-center uppercase"),children:"EX"}),t.jsx("button",{onClick:()=>r(i==null?void 0:i.id),disabled:s,className:u("flex-1 bg-[#dc2626] hover:bg-[#b91c1c] text-white text-md font-black rounded-xl shadow-md flex items-center justify-center uppercase"),children:"OUT"}),t.jsxs("button",{onClick:()=>{o&&o()},disabled:s,className:u("flex-1 bg-white hover:bg-slate-50 text-slate-900 text-[10px] font-black rounded-xl shadow-sm border border-slate-300 flex flex-col items-center justify-center gap-0.5"),children:[t.jsx("span",{className:"text-sm",children:""}),t.jsx("span",{className:"uppercase",children:"MAP"})]}),t.jsx("button",{onClick:()=>d("events"),disabled:s,className:u("flex-1 bg-white hover:bg-slate-50 text-slate-900 text-[10px] font-black rounded-xl shadow-sm border border-slate-300 flex items-center justify-center uppercase"),children:"MORE"})]})]})]})},sI=({readOnly:s,compact:e,onBack:n,onCommitExtra:i})=>{const[r,o]=_.useState(""),[d,u]=_.useState("Bat"),[p,m]=_.useState(0),[f,b]=_.useState(!1),[y,N]=_.useState(""),k=r==="Bye"||r==="LegBye",T=r==="NoBall";let S=[0,1,2,3,4];k?S=[1,2,3,4]:T&&(d==="Bat"?S=[0,1,2,3,4,6]:S=[1,2,3,4]);const R=A=>`flex-1 rounded-lg font-black text-xs uppercase tracking-wider transition-all border flex items-center justify-center ${A?"bg-amber-600 text-white border-amber-600 shadow-md":"bg-white text-slate-500 border-slate-200 hover:bg-slate-50"} ${s?"opacity-50 cursor-not-allowed":""}`;return t.jsxs("div",{className:"h-full w-full flex flex-col p-2 gap-2 bg-slate-50 overflow-hidden",children:[t.jsx("h3",{className:"text-center font-black uppercase text-[9px] text-slate-400 tracking-[0.2em] shrink-0 h-4",children:"Select Extra"}),t.jsxs("div",{className:"flex gap-2 h-12 shrink-0",children:[t.jsx("button",{onClick:()=>{o("Wide"),b(!1)},disabled:s,className:R(r==="Wide"),children:"Wide"}),t.jsx("button",{onClick:()=>{o("NoBall"),u("Bat"),b(!1),p===0&&m(0)},disabled:s,className:R(r==="NoBall"),children:"No Ball"}),t.jsx("button",{onClick:()=>{o("Bye"),b(!1),p===0&&m(1)},disabled:s,className:R(r==="Bye"),children:"Bye"}),t.jsx("button",{onClick:()=>{o("LegBye"),b(!1),p===0&&m(1)},disabled:s,className:R(r==="LegBye"),children:"Leg Bye"})]}),T?t.jsxs("div",{className:"flex gap-2 h-10 shrink-0 animate-in slide-in-from-top-2 fade-in",children:[t.jsx("button",{onClick:()=>{u("Bat"),p===0&&m(0)},disabled:s,className:R(d==="Bat"),children:"Off Bat"}),t.jsx("button",{onClick:()=>{u("LegBye"),p===0&&m(1)},disabled:s,className:R(d==="LegBye"),children:"NB + LB"}),t.jsx("button",{onClick:()=>{u("Bye"),p===0&&m(1)},disabled:s,className:R(d==="Bye"),children:"NB + BYE"})]}):t.jsx("div",{className:"h-0 shrink-0 border-none"}),t.jsxs("div",{className:"flex-1 min-h-0 flex flex-col justify-center gap-2",children:[t.jsx("h3",{className:"text-center font-black uppercase text-[9px] text-slate-300 tracking-[0.2em] shrink-0",children:"Run Score"}),f?t.jsxs("div",{className:"flex gap-2 h-14",children:[t.jsx("input",{type:"number",value:y,onChange:A=>N(A.target.value),placeholder:"#",autoFocus:!0,disabled:s,className:"flex-1 bg-white border-2 border-slate-200 rounded-xl px-4 text-center text-slate-900 font-black text-2xl outline-none focus:border-amber-500"}),t.jsx("button",{onClick:()=>{const A=parseInt(y);isNaN(A)||(m(A),b(!1))},className:"w-20 bg-amber-600 text-white rounded-xl font-black uppercase text-xs",children:"Set"})]}):t.jsxs("div",{className:"flex gap-2 h-14 shrink-0",children:[S.map(A=>t.jsx("button",{onClick:()=>m(A),disabled:s,className:`flex-1 rounded-xl font-black text-2xl transition-all border flex items-center justify-center ${p===A?"bg-slate-800 text-white border-slate-800 shadow-lg scale-105":"bg-white text-slate-900 border-slate-200 hover:bg-slate-50"}`,children:A},A)),t.jsx("button",{onClick:()=>b(!0),disabled:s,className:"w-12 rounded-xl font-bold text-xs bg-slate-100 text-slate-400 border border-slate-200 flex items-center justify-center uppercase",children:"..."})]})]}),t.jsxs("div",{className:"flex gap-2 h-14 shrink-0 mt-auto z-10",children:[t.jsx("button",{onClick:n,className:"w-1/3 bg-white text-slate-400 font-black uppercase text-xs rounded-xl border border-slate-200 hover:bg-slate-50 transition-all",children:"Cancel"}),t.jsxs("button",{disabled:!r||s,onClick:()=>{i(r,p,r==="NoBall"?d==="Bat":!1)},className:"flex-1 bg-amber-600 text-white font-black uppercase text-xs rounded-xl shadow-lg shadow-amber-900/20 hover:bg-amber-500 transition-all disabled:opacity-50 disabled:shadow-none tracking-widest",children:["Confirm ",r==null?void 0:r.replace("NoBall","No Ball")]})]})]})},nI=({readOnly:s,compact:e,onBack:n,onMediaCapture:i,onBroadcasterMode:r,onNav:o,onDeclare:d,onSubRequest:u,matchFormat:p,onToggleAnalytics:m,autoAnalytics:f,onOfficialsClick:b})=>{const y=p==="Test",N=k=>`${k} ${s?"opacity-50 cursor-not-allowed pointer-events-none grayscale":""} ${e?"text-xs py-1":""}`;return t.jsxs("div",{className:"h-full flex flex-col animate-in zoom-in-95 p-1 gap-2",children:[t.jsx("h3",{className:"text-center font-black uppercase text-[9px] text-slate-500 tracking-widest shrink-0",children:"Match Actions"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 flex-1 min-h-0 overflow-y-auto pb-4",children:[t.jsxs("button",{disabled:s,onClick:()=>{i&&i()},className:N("bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2"),children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 group-hover:bg-indigo-600 flex items-center justify-center text-xl transition-colors",children:""}),t.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400 group-hover:text-white text-center",children:"Media Capture"})]}),t.jsxs("button",{onClick:()=>{r&&r()},className:"bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 group-hover:bg-green-600 flex items-center justify-center text-xl transition-colors",children:""}),t.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400 group-hover:text-white text-center",children:"Broadcaster Mode"})]}),t.jsxs("button",{disabled:s,onClick:()=>o("declare_confirm"),className:N("bg-slate-800 hover:bg-red-900/30 border border-slate-700 hover:border-red-500 rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2"),children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 group-hover:bg-red-600 flex items-center justify-center text-xl transition-colors",children:""}),t.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400 group-hover:text-white text-center",children:"Declare Innings"})]}),t.jsxs("button",{disabled:s,onClick:()=>{u&&u()},className:N("bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2"),children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-xl group-hover:bg-amber-600 transition-colors",children:""}),t.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400 group-hover:text-white text-center",children:"Substitute"})]}),m&&t.jsxs("button",{disabled:s,onClick:m,className:N(`border rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2 ${f?"bg-indigo-900/30 border-indigo-500/50 hover:bg-indigo-900/50":"bg-slate-800 border-slate-700 hover:bg-slate-700"}`),children:[t.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-xl transition-colors ${f?"bg-indigo-600 text-white":"bg-slate-700 text-slate-500"}`,children:""}),t.jsxs("div",{className:"flex flex-col items-center leading-none",children:[t.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest ${f?"text-indigo-300":"text-slate-400"}`,children:"Auto Maps"}),t.jsx("span",{className:"text-[8px] font-bold uppercase mt-1",children:f?"ON":"OFF"})]})]}),b&&t.jsxs("button",{disabled:s,onClick:b,className:N("bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2"),children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-xl group-hover:bg-purple-600 transition-colors",children:""}),t.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400 group-hover:text-white text-center",children:"Officials"})]}),y&&t.jsxs("button",{disabled:s,onClick:()=>o("end_match_confirm"),className:N("bg-slate-800 hover:bg-slate-700 border border-slate-700 rounded-2xl flex flex-col items-center justify-center gap-2 group transition-all p-2"),children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-700 flex items-center justify-center text-xl group-hover:bg-purple-600 transition-colors",children:""}),t.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-slate-400 group-hover:text-white text-center",children:"End Match"})]})]}),t.jsx("button",{onClick:n,className:"h-12 w-full bg-slate-800 text-white rounded-xl font-black uppercase text-[10px] tracking-widest hover:bg-slate-700 shrink-0",children:"Back to Scoring"})]})},aI=({padView:s,striker:e,onDeclare:n,onEndGame:i,onEndInnings:r,onNav:o,onBack:d})=>s==="declare_confirm"?t.jsxs("div",{className:"h-full flex flex-col animate-in zoom-in-95 p-4 bg-red-950/20 rounded-2xl border border-red-500/20",children:[t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-red-600 rounded-2xl flex items-center justify-center text-4xl mb-4 shadow-lg shadow-red-600/40",children:""}),t.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tight mb-2",children:"Declare Innings?"}),t.jsxs("p",{className:"text-red-300 text-xs font-bold leading-relaxed px-4",children:["This will immediately end the current innings and close batting for ",e!=null&&e.id?"the batting team":"this team","."]})]}),t.jsxs("div",{className:"flex flex-col gap-3 shrink-0",children:[t.jsx("button",{onClick:()=>{r&&(r(),d())},className:"w-full py-3 bg-red-600 hover:bg-red-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-red-900/40 transition-all active:scale-95",children:"End Innings (Conclude)"}),t.jsx("button",{onClick:()=>{n&&(n(),d())},className:"w-full py-3 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-black uppercase text-xs tracking-widest border border-slate-600 transition-all",children:"Declare Closed"}),t.jsx("button",{onClick:()=>o("events"),className:"w-full py-3 bg-transparent text-slate-400 rounded-xl font-black uppercase text-xs tracking-widest hover:text-white transition-all",children:"Cancel"})]})]}):s==="end_match_confirm"?t.jsxs("div",{className:"h-full flex flex-col animate-in zoom-in-95 p-4 bg-purple-950/20 rounded-2xl border border-purple-500/20",children:[t.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-purple-600 rounded-2xl flex items-center justify-center text-4xl mb-4 shadow-lg shadow-purple-600/40",children:""}),t.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tight mb-2",children:"Conclude Match?"}),t.jsxs("p",{className:"text-purple-300 text-xs font-bold leading-relaxed px-4",children:["If time has expired or captains agree, this will end the game as a ",t.jsx("span",{className:"text-white",children:"DRAW"})," if no result was reached."]})]}),t.jsxs("div",{className:"flex flex-col gap-3 shrink-0",children:[t.jsx("button",{onClick:()=>{i&&(i(),d())},className:"w-full py-4 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl shadow-purple-900/40 transition-all active:scale-95",children:"End as Draw / Result"}),t.jsx("button",{onClick:()=>o("events"),className:"w-full py-4 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-xl font-black uppercase text-xs tracking-widest transition-all",children:"Cancel"})]})]}):null,iI=s=>{const{padView:e,onBack:n}=s;return e==="main"?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"md:hidden h-full w-full",children:t.jsx(tI,{...s})}),t.jsx("div",{className:"hidden md:block h-full w-full",children:t.jsx(eI,{...s})})]}):e==="extras"?t.jsx(sI,{...s}):e==="events"?t.jsx(nI,{...s}):e==="declare_confirm"||e==="end_match_confirm"?t.jsx(aI,{...s}):t.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4 bg-slate-900 rounded-xl border border-slate-800",children:[t.jsx("div",{className:"text-2xl mb-2 opacity-20",children:""}),t.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"View Not Ready"}),t.jsx("button",{onClick:n,className:"mt-4 px-6 py-2 bg-slate-800 text-white rounded-lg text-[9px] font-black uppercase tracking-widest hover:bg-slate-700 transition-all",children:"Back"})]})},vn={RUN:1,FOUR:1,SIX:2,WICKET:20,MAIDEN:4,DOT_BALL:.5,CATCH:10,RUN_OUT:15,STUMPING:15,ECONOMY_BONUS:10,STRIKE_RATE_BONUS:10},lI=(s,e)=>e.map(i=>{let r=0,o=0,d=0,u=0,p=0,m=0,f=0,b=0,y=0,N=0;[1,2,3,4].forEach(S=>{const R=rl(i.id,s.history,S);u+=R.runs,p+=R.balls,r+=R.runs*vn.RUN+R.fours*vn.FOUR+R.sixes*vn.SIX;const A=xr(i.id,s.history,S);m+=A.wickets,f+=A.runs,o+=A.wickets*vn.WICKET;const I=s.history.filter(L=>L.bowlerId===i.id&&L.innings===S&&(L.extraType==="None"||!L.extraType)),j={};I.forEach(L=>{j[L.over]=(j[L.over]||0)+L.runs});const E=Object.values(j).filter(L=>L===0).length;o+=E*vn.MAIDEN;const D=s.history.filter(L=>L.innings===S&&L.bowlerId===i.id&&L.runs===0&&(L.extraType==="None"||!L.extraType)).length;o+=D*vn.DOT_BALL}),u>30&&p>0&&u/p*100>140&&(r+=vn.STRIKE_RATE_BONUS),u>=50&&(r+=20),u>=100&&(r+=40),m>=3&&(o+=20),m>=5&&(o+=40);const T=s.history.filter(S=>S.bowlerId===i.id&&(S.extraType==="None"||!S.extraType)).length/6;return T>=2&&f/T<6&&(o+=vn.ECONOMY_BONUS),s.history.forEach(S=>{S.isWicket&&(S.fielderId===i.id&&(S.wicketType==="Caught"&&(b++,d+=vn.CATCH),S.wicketType==="Run Out"&&(y++,d+=vn.RUN_OUT),S.wicketType==="Stumped"&&(N++,d+=vn.STUMPING)),S.assistFielderId===i.id&&S.wicketType==="Run Out"&&(d+=vn.RUN_OUT/2))}),{playerId:i.id,points:r+o+d,stats:{runs:u,balls:p,wickets:m,runsConceded:f,catches:b,runOuts:y,stumpings:N},breakdown:{battingPoints:r,bowlingPoints:o,fieldingPoints:d}}}).sort((i,r)=>r.points-i.points),rI=(s,e,n,i)=>{const r=window.open("","","width=800,height=600");if(!r)return;let o=`
        <html>
        <head>
            <title>Match Scorecard - ${e.name} vs ${n.name}</title>
            <style>
                body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; color: #1e293b; }
                h1 { text-align: center; border-bottom: 2px solid #e2e8f0; padding-bottom: 10px; color: #0f172a; margin-bottom: 5px; }
                .match-info { text-align: center; font-size: 14px; color: #64748b; margin-bottom: 20px; }
                .innings-section { margin-bottom: 30px; page-break-inside: avoid; }
                .innings-header { background: #f1f5f9; padding: 8px 12px; font-weight: bold; font-size: 16px; border-left: 4px solid #3b82f6; display: flex; justify-content: space-between; }
                table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 12px; }
                th, td { padding: 6px 8px; text-align: left; border-bottom: 1px solid #e2e8f0; }
                th { font-weight: bold; background: #f8fafc; color: #475569; }
                .text-right { text-align: right; }
                .extras-row { font-weight: bold; background: #f8fafc; }
                .fow-section { margin-top: 10px; font-size: 11px; color: #475569; }
                .footer { text-align: center; margin-top: 40px; font-size: 12px; color: #94a3b8; border-top: 1px solid #e2e8f0; padding-top: 10px; }
                .winner-banner { text-align: center; font-size: 18px; font-weight: bold; margin: 20px 0; color: #059669; }
                .mvp-banner { text-align: center; font-size: 14px; color: #d97706; font-weight: bold; }
                @media print {
                    body { padding: 0; }
                    button { display: none; }
                }
            </style>
        </head>
        <body>
            <div style="text-align: center; margin-bottom: 10px;">
                <img src="${window.location.origin}/logo.jpg" style="height: 60px; width: auto;" />
            </div>
            <h1>${e.name} vs ${n.name}</h1>
            <div class="match-info">${i}  ${new Date().toLocaleDateString()}</div>
    `;const d=s.inningsScores.map(u=>u.innings).sort((u,p)=>u-p);d.includes(s.innings)||d.push(s.innings),d.forEach(u=>{let p;const m=s.inningsScores.find(k=>k.innings===u);if(m)p=m.teamId;else if(u===s.innings)p=s.battingTeamId;else return;const f=p===e.id?e:n,b=p===e.id?n:e,y=vc(s.history,f.players,u,"",""),N=Oh(s.history,b.players,u);o+=`
            <div class="innings-section">
                <div class="innings-header">
                    <span>${f.name} Innings</span>
                    <span>${y.totalScore} (${y.overs} ov)</span>
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Batter</th>
                            <th></th>
                            <th class="text-right">R</th>
                            <th class="text-right">B</th>
                            <th class="text-right">4s</th>
                            <th class="text-right">6s</th>
                            <th class="text-right">SR</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${y.rows.map(k=>`
                            <tr>
                                <td>${k.name} ${k.isOut?"":"*"}</td>
                                <td>${k.dismissal}</td>
                                <td class="text-right"><strong>${k.runs}</strong></td>
                                <td class="text-right">${k.balls}</td>
                                <td class="text-right">${k.fours}</td>
                                <td class="text-right">${k.sixes}</td>
                                <td class="text-right">${k.strikeRate}</td>
                            </tr>
                        `).join("")}
                        <tr class="extras-row">
                            <td colspan="2">Extras</td>
                            <td colspan="5">
                              ${y.extras.total} 
                              (w ${y.extras.wides}, nb ${y.extras.noBalls}, b ${y.extras.byes}, lb ${y.extras.legByes}, p ${y.extras.penalty})
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="fow-section">
                    <strong>Fall of Wickets:</strong> 
                    ${y.fow.map(k=>`${k.score}-${k.wicketNumber} (${k.batterName}, ${k.over})`).join(", ")}
                </div>

                <table>
                    <thead>
                        <tr>
                            <th>Bowler</th>
                            <th class="text-right">O</th>
                            <th class="text-right">M</th>
                            <th class="text-right">R</th>
                            <th class="text-right">W</th>
                            <th class="text-right">Eco</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${N.map(k=>`
                            <tr>
                                <td>${k.name}</td>
                                <td class="text-right">${k.overs}</td>
                                <td class="text-right">${k.maidens}</td>
                                <td class="text-right">${k.runs}</td>
                                <td class="text-right"><strong>${k.wickets}</strong></td>
                                <td class="text-right">${k.economy}</td>
                            </tr>
                        `).join("")}
                    </tbody>
                </table>
            </div>
        `}),o+=`
            <div class="footer">
                Generated by Cricket Core 2026
            </div>
            <script>
                window.onload = function() { window.print(); }
            <\/script>
        </body>
        </html>
    `,r.document.write(o),r.document.close()},Ko=({matchState:s,teamA:e,teamB:n,format:i="Cricket Match",onExit:r,onViewScorecard:o,totalOvers:d=20,onPinToMedia:u,nextInningsAction:p,followOnAction:m})=>{var L;const f=()=>{rI(s,e,n,i)},b=_.useMemo(()=>{var ee,se,M;const G=((ee=s.inningsScores.find(B=>B.teamId===e.id))==null?void 0:ee.score)||0,Y=((se=s.inningsScores.find(B=>B.teamId===n.id))==null?void 0:se.score)||0,q=((M=s.inningsScores.find(B=>B.teamId===n.id))==null?void 0:M.wickets)||0;let ce="Match Concluded",Q="Scores Level",ne=null;return G>Y?(ce=`${e.name} Win`,Q=`by ${G-Y} runs`,ne=e.id):Y>G?(ce=`${n.name} Win`,Q=`by ${10-q} wickets`,ne=n.id):ce="Match Tied",{text:ce,subText:Q,winnerId:ne}},[s,e,n]),y=_.useMemo(()=>{const G=[...e.players,...n.players],q=lI(s,G)[0];return{player:G.find(Q=>Q.id===q.playerId),stats:q.stats,points:q.points}},[s,e,n]),N=(G,Y)=>{const q=G===e.id?e:n,ce=G===e.id?n:e,Q=vc(s.history,q.players,Y,"",""),ne=Q.totalScore,ee=Q.rows.sort((M,B)=>B.runs-M.runs).slice(0,3).filter(M=>M.balls>0).map(M=>({p:q.players.find(Z=>Z.name===M.name)||{name:M.name,id:"unknown"},s:{runs:M.runs,balls:M.balls}})),se=ce.players.map(M=>({p:M,s:xr(M.id,s.history,Y)})).sort((M,B)=>B.s.wickets-M.s.wickets||M.s.runs-B.s.runs).slice(0,3).filter(M=>parseFloat(M.s.overs)>0);return{team:q,score:ne,batters:ee,bowlers:se}},k=s.history.find(G=>G.innings===1),T=k==null?void 0:k.strikerId;let S=s.battingTeamId;if(T&&(e.players.some(G=>G.id===T)?S=e.id:n.players.some(G=>G.id===T)&&(S=n.id)),!k&&s.inningsScores.length>0){const G=s.inningsScores.find(Y=>Y.innings===1);G&&(S=G.teamId)}const R=S===e.id?n.id:e.id,A=N(S,1),I=N(R,2),j=_.useMemo(()=>{if(s.isCompleted)return[];const G=s.innings===1?S===e.id?e:n:R===e.id?e:n;return[s.strikerId,s.nonStrikerId].filter(Boolean).map(Y=>({p:G.players.find(q=>q.id===Y),s:rl(Y,s.history,s.innings)}))},[s,e,n]),E=_.useMemo(()=>s.isCompleted||!s.bowlerId?null:{p:(s.innings===1?R===e.id?e:n:S===e.id?e:n).players.find(Y=>Y.id===s.bowlerId),s:xr(s.bowlerId,s.history,s.innings)},[s,e,n]),D=_.useMemo(()=>{if(s.isCompleted)return null;const G=s.totalBalls>0?s.score/(s.totalBalls/6):0,Y=G*d;let q=0,ce=0,Q=0;return s.innings===2&&s.target&&(ce=s.target-s.score,Q=d*6-s.totalBalls,q=Q>0?ce/(Q/6):0),{crr:G.toFixed(2),projected:Math.round(Y),rrr:q.toFixed(2),runsNeeded:ce,ballsRemaining:Q}},[s,d]);return t.jsx("div",{className:`${s.isCompleted?"fixed inset-0 z-[200]":"absolute inset-0 z-50"} bg-gray-100 overflow-y-auto animate-in fade-in duration-200`,children:t.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-gray-50 shadow-2xl relative",children:[t.jsxs("div",{className:"bg-white p-4 border-b border-gray-200 flex justify-between items-center sticky top-0 z-10",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:"/logo.jpg",alt:"Logo",className:"h-8 w-8 object-contain"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-sm font-black text-gray-800 uppercase tracking-tight",children:s.isCompleted?"Match Result":"Match Summary"}),t.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:i})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[u&&t.jsx("button",{onClick:u,className:"bg-indigo-600 text-white px-3 py-1.5 rounded-lg text-[10px] font-black uppercase tracking-widest shadow-md hover:bg-indigo-500 transition-all flex items-center gap-2",title:"Pin to Media Center",children:" Pin"}),t.jsx("button",{onClick:r,className:"bg-gray-100 p-2 rounded-full hover:bg-gray-200",children:""})]})]}),t.jsxs("div",{className:"p-4 space-y-6",children:[!s.isCompleted&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-slate-900 rounded-2xl p-5 text-white shadow-xl border border-slate-800 relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:t.jsx("span",{className:"text-6xl font-black italic",children:"LIVE"})}),t.jsxs("div",{className:"flex justify-between items-end relative z-10",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Current Score"}),t.jsxs("div",{className:"text-4xl font-black text-white leading-none",children:[s.score,"-",s.wickets,t.jsxs("span",{className:"text-sm font-bold text-slate-500 ml-2",children:["(",Math.floor(s.totalBalls/6),".",s.totalBalls%6,")"]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"CRR"}),t.jsx("div",{className:"text-2xl font-black text-teal-400 leading-none",children:D==null?void 0:D.crr})]})]}),t.jsx("div",{className:"mt-6 pt-4 border-t border-slate-800 flex justify-between relative z-10",children:s.innings===1?t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsxs("div",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:["Projected (at ",D==null?void 0:D.crr,")"]}),t.jsx("div",{className:"text-lg font-black text-white",children:D==null?void 0:D.projected})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"Target Setting"}),t.jsx("div",{className:"text-lg font-black text-indigo-400 italic",children:"Innings 1"})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{children:[t.jsxs("div",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:["Target: ",s.target]}),t.jsxs("div",{className:"text-lg font-black text-white",children:[D==null?void 0:D.runsNeeded," ",t.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:"REQD"})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-[9px] font-black text-slate-500 uppercase tracking-widest",children:"RRR"}),t.jsx("div",{className:"text-lg font-black text-orange-400",children:D==null?void 0:D.rrr})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[t.jsxs("div",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[t.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-teal-500"}),"Active Batters"]}),t.jsx("div",{className:"space-y-3",children:j.map((G,Y)=>{var q;return t.jsxs("div",{className:"flex justify-between items-center group",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-xs",children:""}),t.jsxs("div",{children:[t.jsxs("div",{className:"text-xs font-black text-gray-800",children:[(q=G.p)==null?void 0:q.name," ",Y===0?"*":""]}),t.jsxs("div",{className:"text-[9px] font-bold text-gray-400",children:["Batting at Innings ",s.innings]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-sm font-black text-gray-900",children:[G.s.runs," ",t.jsxs("span",{className:"text-[10px] text-gray-400 font-normal",children:["(",G.s.balls,")"]})]}),t.jsxs("div",{className:"text-[8px] font-bold text-gray-400 uppercase",children:["SR ",G.s.sr]})]})]},Y)})})]}),E&&t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[t.jsxs("div",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2",children:[t.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),"Active Bowler"]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-xs",children:""}),t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-black text-gray-800",children:(L=E.p)==null?void 0:L.name}),t.jsx("div",{className:"text-[9px] font-bold text-gray-400",children:"Current Over"})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"text-sm font-black text-teal-700",children:[E.s.wickets,"-",E.s.runs," ",t.jsxs("span",{className:"text-[10px] text-gray-400 font-normal",children:["(",E.s.overs,")"]})]}),t.jsxs("div",{className:"text-[8px] font-bold text-gray-400 uppercase",children:["ECON ",E.s.econ]})]})]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[t.jsxs("div",{className:"bg-teal-600 p-3 flex justify-between items-center text-white",children:[t.jsx("div",{className:"font-bold text-sm tracking-wide",children:A.team.name}),t.jsx("div",{className:"font-black text-lg",children:A.score})]}),t.jsxs("div",{className:"p-3 grid grid-cols-2 gap-4 text-[10px]",children:[t.jsxs("div",{className:"space-y-1.5",children:[t.jsx("div",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest px-1 mb-1 border-b border-gray-100 pb-1",children:"Batters"}),A.batters.map((G,Y)=>t.jsxs("div",{className:"flex flex-col p-1.5 bg-gray-50 rounded border-l-2 border-teal-500",children:[t.jsx("div",{className:"font-bold text-gray-700 truncate",children:G.p.name}),t.jsxs("div",{className:"font-black text-gray-900",children:[G.s.runs," ",t.jsxs("span",{className:"text-gray-400 font-normal",children:["(",G.s.balls,")"]})]})]},Y))]}),t.jsxs("div",{className:"space-y-1.5 text-right",children:[t.jsx("div",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest px-1 mb-1 border-b border-gray-100 pb-1",children:"Bowlers"}),A.bowlers.map((G,Y)=>t.jsxs("div",{className:"flex flex-col p-1.5 bg-gray-50 rounded border-r-2 border-indigo-500",children:[t.jsx("div",{className:"font-bold text-gray-700 truncate",children:G.p.name}),t.jsxs("div",{className:"font-black text-teal-600",children:[G.s.wickets,"-",G.s.runs," ",t.jsxs("span",{className:"text-gray-400 font-normal",children:["(",G.s.overs,")"]})]})]},Y))]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[t.jsxs("div",{className:"bg-orange-500 p-3 flex justify-between items-center text-white",children:[t.jsx("div",{className:"font-bold text-sm tracking-wide",children:I.team.name}),t.jsx("div",{className:"font-black text-lg",children:I.score})]}),t.jsxs("div",{className:"p-3 grid grid-cols-2 gap-4 text-[10px]",children:[t.jsxs("div",{className:"space-y-1.5",children:[t.jsx("div",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest px-1 mb-1 border-b border-gray-100 pb-1",children:"Batters"}),I.batters.map((G,Y)=>t.jsxs("div",{className:"flex flex-col p-1.5 bg-gray-50 rounded border-l-2 border-orange-500",children:[t.jsx("div",{className:"font-bold text-gray-700 truncate",children:G.p.name}),t.jsxs("div",{className:"font-black text-gray-900",children:[G.s.runs," ",t.jsxs("span",{className:"text-gray-400 font-normal",children:["(",G.s.balls,")"]})]})]},Y))]}),t.jsxs("div",{className:"space-y-1.5 text-right",children:[t.jsx("div",{className:"text-[8px] font-black text-gray-400 uppercase tracking-widest px-1 mb-1 border-b border-gray-100 pb-1",children:"Bowlers"}),I.bowlers.map((G,Y)=>t.jsxs("div",{className:"flex flex-col p-1.5 bg-gray-50 rounded border-r-2 border-orange-500",children:[t.jsx("div",{className:"font-bold text-gray-700 truncate",children:G.p.name}),t.jsxs("div",{className:"font-black text-orange-600",children:[G.s.wickets,"-",G.s.runs," ",t.jsxs("span",{className:"text-gray-400 font-normal",children:["(",G.s.overs,")"]})]})]},Y))]})]})]}),s.isCompleted&&t.jsxs("div",{className:"bg-gradient-to-r from-teal-500 to-emerald-500 p-6 rounded-2xl text-center text-white shadow-lg animate-in zoom-in-95 duration-300",children:[t.jsx("h2",{className:"text-2xl font-black uppercase tracking-tight leading-none mb-1",children:b.text}),t.jsx("p",{className:"text-sm font-bold opacity-90 uppercase tracking-widest",children:b.subText})]}),s.isCompleted&&y.player&&t.jsxs("div",{className:"text-center animate-in fade-in slide-in-from-bottom-4 duration-500 delay-200",children:[t.jsx("div",{className:"inline-block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-2",children:"Man of the Match"}),t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex items-center gap-4 text-left",children:[t.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full overflow-hidden shrink-0",children:t.jsx("img",{src:y.player.photoUrl||`https://ui-avatars.com/api/?name=${y.player.name}`,className:"w-full h-full object-cover"})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-black text-gray-800",children:y.player.name}),t.jsxs("div",{className:"text-xs text-gray-500 font-medium mt-0.5",children:[y.stats.runs>0&&t.jsxs("span",{className:"mr-2",children:[" ",y.stats.runs]}),y.stats.wickets>0&&t.jsxs("span",{children:[" ",y.stats.wickets]})]})]}),t.jsxs("div",{className:"ml-auto text-right",children:[t.jsx("div",{className:"text-xl font-black text-teal-600 leading-none",children:Math.round(y.points)}),t.jsx("div",{className:"text-[9px] font-bold text-gray-400 uppercase",children:"PTS"})]})]})]}),t.jsxs("div",{className:"flex flex-col gap-3",children:[p&&t.jsx("button",{onClick:p.onClick,className:"w-full py-4 bg-emerald-600 hover:bg-emerald-500 text-white font-black rounded-xl uppercase text-xs tracking-widest shadow-lg shadow-emerald-600/20 active:scale-95 transition-all",children:p.label}),m&&t.jsx("button",{onClick:m.onClick,className:"w-full py-4 bg-amber-600 hover:bg-amber-500 text-white font-black rounded-xl uppercase text-xs tracking-widest shadow-lg shadow-amber-600/20 active:scale-95 transition-all border-2 border-amber-400",children:m.label}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("button",{onClick:f,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 text-white font-bold rounded-xl uppercase text-[10px] tracking-widest shadow-lg shadow-indigo-600/20",children:"Download PDF"}),t.jsx("button",{onClick:o,className:"w-full py-3 bg-white border-2 border-slate-200 text-slate-700 font-bold rounded-xl uppercase text-[10px] tracking-widest hover:bg-slate-50 transition-colors",children:"View Scorecard"})]}),t.jsxs("button",{onClick:r,className:"w-full py-4 bg-gray-900 text-white font-bold rounded-xl uppercase text-xs tracking-widest flex items-center justify-center gap-2 hover:bg-slate-800 transition-all active:scale-95 shadow-lg",children:[t.jsx("span",{children:""}),t.jsx("span",{children:s.isCompleted?"Return to Dashboard":"Back to Scoring"})]})]})]})]})})},oI=({onSave:s,onClose:e,existingPitch:n,existingShot:i,existingHeight:r,ballColor:o,isWaiting:d=!1})=>{const[u,p]=_.useState(n),[m,f]=_.useState(i),[b,y]=_.useState(r),[N,k]=_.useState("PITCH"),T=()=>{s(u,m,b),p(void 0),f(void 0),y(void 0),k("PITCH")};return t.jsxs("div",{className:"h-full flex flex-col bg-slate-900 text-white overflow-hidden",children:[t.jsxs("div",{className:"p-4 bg-slate-950 border-b border-slate-800",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-xs font-black uppercase tracking-tight",children:"Guided Analytics"}),t.jsxs("p",{className:"text-[8px] text-slate-400 font-bold uppercase tracking-widest",children:["Step ",N==="PITCH"?"1":N==="SHOT"?"2":"3"]})]}),t.jsx("button",{onClick:e,className:"w-6 h-6 rounded-full bg-slate-800 text-slate-400 hover:text-white flex items-center justify-center text-xs",children:""})]}),t.jsxs("div",{className:"flex bg-slate-800 rounded-lg p-0.5",children:[t.jsx("button",{onClick:()=>k("PITCH"),className:`flex-1 py-1.5 rounded-md text-[9px] font-black uppercase transition-all flex items-center justify-center gap-1 ${N==="PITCH"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Pitch"}),t.jsx("button",{onClick:()=>k("SHOT"),className:`flex-1 py-1.5 rounded-md text-[9px] font-black uppercase transition-all flex items-center justify-center gap-1 ${N==="SHOT"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Shot"}),t.jsx("button",{onClick:()=>k("HEIGHT"),className:`flex-1 py-1.5 rounded-md text-[9px] font-black uppercase transition-all flex items-center justify-center gap-1 ${N==="HEIGHT"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Type"})]})]}),t.jsxs("div",{className:"flex-1 p-4 flex flex-col items-center justify-center relative overflow-y-auto no-scrollbar",children:[N==="PITCH"&&t.jsxs("div",{className:"w-full space-y-4",children:[t.jsx("p",{className:"text-center text-[9px] text-slate-500 font-bold uppercase tracking-widest bg-slate-800/50 py-1.5 rounded-full border border-white/5 px-3",children:"1. Tap ball impact point"}),t.jsx(yr,{onRecord:S=>{p(S),setTimeout(()=>k("SHOT"),400)},deliveries:u?[{coords:u,color:o||"#14b8a6"}]:[]})]}),N==="SHOT"&&t.jsxs("div",{className:"w-full space-y-4",children:[t.jsx("p",{className:"text-center text-[9px] text-slate-500 font-bold uppercase tracking-widest bg-slate-800/50 py-1.5 rounded-full border border-white/5 px-3",children:"2. Tap ball travel"}),t.jsx(vr,{onRecord:S=>{f(S),setTimeout(()=>k("HEIGHT"),400)},shots:m?[{coords:m,color:o||"#f59e0b"}]:[]})]}),N==="HEIGHT"&&t.jsxs("div",{className:"w-full space-y-4 flex flex-col items-center",children:[t.jsx("p",{className:"text-center text-[9px] text-slate-500 font-bold uppercase tracking-widest bg-slate-800/50 py-1.5 rounded-full border border-white/5 px-3 w-full",children:"3. Select shot type"}),t.jsxs("div",{className:"flex flex-col gap-3 w-full px-2",children:[t.jsxs("button",{onClick:()=>{y("Ground"),setTimeout(T,300)},className:`py-6 rounded-xl border transition-all flex flex-col items-center gap-2 ${b==="Ground"?"bg-indigo-600 border-indigo-400 text-white shadow-lg":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`,children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsx("span",{className:"font-black uppercase tracking-widest text-[10px]",children:"Ground"})]}),t.jsxs("button",{onClick:()=>{y("Aerial"),setTimeout(T,300)},className:`py-6 rounded-xl border transition-all flex flex-col items-center gap-2 ${b==="Aerial"?"bg-indigo-600 border-indigo-400 text-white shadow-lg":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`,children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsx("span",{className:"font-black uppercase tracking-widest text-[10px]",children:"Aerial"})]})]})]}),d&&t.jsx("div",{className:"absolute inset-0 z-50 bg-slate-900/40 backdrop-blur-[2px] flex items-center justify-center p-6 text-center animate-in fade-in duration-500",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-slate-700 border-t-indigo-500 animate-spin mx-auto opacity-40"}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("h4",{className:"text-sm font-black uppercase tracking-tight text-white/50",children:"Waiting on ball"}),t.jsx("p",{className:"text-[9px] font-bold text-slate-500 uppercase tracking-widest italic",children:"Record a delivery to begin"})]})]})})]}),t.jsx("div",{className:"p-4 border-t border-slate-800 bg-slate-950",children:t.jsx("button",{onClick:T,disabled:!u&&!m&&!b,className:"w-full py-3 bg-gradient-to-r from-teal-600 to-indigo-600 text-white rounded-xl font-black uppercase text-[10px] tracking-widest shadow-lg hover:opacity-90 active:scale-95 transition-all disabled:opacity-30",children:"Complete Entry"})})]})},cI=({history:s,teams:e,battingTeamId:n,bowlingTeamId:i})=>{const[r,o]=_.useState("all"),[d,u]=_.useState("all"),[p,m]=_.useState(!1),f=e.find(S=>S.id===n),b=e.find(S=>S.id===i),y=_.useMemo(()=>s.filter(S=>{const R=r==="all"||S.strikerId===r,A=d==="all"||S.bowlerId===d;return R&&A}),[s,r,d]),N=_.useMemo(()=>y.filter(S=>S.pitchCoords).map(S=>({coords:S.pitchCoords,color:tc(S)})),[y]),k=_.useMemo(()=>y.filter(S=>S.shotCoords).map(S=>({coords:S.shotCoords,color:tc(S)})),[y]),T=_.useMemo(()=>{const S=y.length,R=y.reduce((E,D)=>E+(D.runs||0)+(D.extraRuns||0),0),A=y.filter(E=>E.isWicket).length,I=y.filter(E=>E.shotHeight==="Ground").length,j=y.filter(E=>E.shotHeight==="Aerial").length;return{total:S,runs:R,wickets:A,ground:I,aerial:j}},[y]);return t.jsxs("div",{className:"h-full flex flex-col bg-slate-50 overflow-hidden",children:[t.jsxs("div",{className:"p-4 bg-white border-b border-gray-200 space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"text-xs font-black text-gray-400 uppercase tracking-widest",children:"Spatial Analysis"}),t.jsx("button",{onClick:()=>m(!p),className:`text-[10px] font-black px-3 py-1 rounded-full transition-all border ${p?"bg-indigo-600 text-white border-indigo-500 shadow-md shadow-indigo-200":"bg-white text-gray-500 border-gray-200 hover:border-gray-300"}`,children:p?"View 2D":"Enable 3D View"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:"Batter Filter"}),t.jsxs("select",{value:r,onChange:S=>o(S.target.value),className:"w-full bg-gray-50 border border-gray-200 rounded-lg px-2 py-1.5 text-xs font-bold text-gray-700 outline-none focus:border-indigo-500 transition-colors",children:[t.jsx("option",{value:"all",children:"All Batters"}),f==null?void 0:f.players.map(S=>t.jsx("option",{value:S.id,children:S.name},S.id))]})]}),t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"text-[9px] font-black text-gray-400 uppercase ml-1",children:"Bowler Filter"}),t.jsxs("select",{value:d,onChange:S=>u(S.target.value),className:"w-full bg-gray-50 border border-gray-200 rounded-lg px-2 py-1.5 text-xs font-bold text-gray-700 outline-none focus:border-indigo-500 transition-colors",children:[t.jsx("option",{value:"all",children:"All Bowlers"}),b==null?void 0:b.players.map(S=>t.jsx("option",{value:S.id,children:S.name},S.id))]})]})]})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 no-scrollbar",children:[t.jsxs("div",{className:`grid grid-cols-1 gap-4 transition-all duration-500 ${p?"perspective-[1000px]":""}`,children:[t.jsxs("div",{className:`bg-white p-4 rounded-2xl border border-gray-100 shadow-sm transition-all duration-700 ${p?"rotate-x-[25deg] shadow-xl":""}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-2 py-0.5 rounded",children:"Pitch Map"}),t.jsx("span",{className:"text-[10px] font-bold text-gray-400 italic",children:"Impact zones"})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx(yr,{deliveries:N,readonly:!0})})]}),t.jsxs("div",{className:`bg-white p-4 rounded-2xl border border-gray-100 shadow-sm transition-all duration-700 ${p?"rotate-x-[25deg] shadow-xl":""}`,children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("span",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-widest bg-emerald-50 px-2 py-0.5 rounded",children:"Wagon Wheel"}),t.jsx("span",{className:"text-[10px] font-bold text-gray-400 italic",children:"Shot direction"})]}),t.jsx("div",{className:"flex justify-center",children:t.jsx(vr,{shots:k,readonly:!0})})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-white p-3 rounded-xl border border-gray-100 shadow-sm",children:[t.jsx("div",{className:"text-[8px] font-black text-gray-400 uppercase tracking-tighter mb-1",children:"Involved Deliveries"}),t.jsx("div",{className:"text-xl font-black text-gray-800 leading-none",children:T.total}),t.jsx("div",{className:"text-[8px] font-bold text-gray-400 mt-1 uppercase",children:"Matches filter"})]}),t.jsxs("div",{className:"bg-white p-3 rounded-xl border border-gray-100 shadow-sm",children:[t.jsx("div",{className:"text-[8px] font-black text-gray-400 uppercase tracking-tighter mb-1",children:"Runs / Wickets"}),t.jsxs("div",{className:"text-xl font-black text-gray-800 leading-none",children:[T.runs," ",t.jsxs("span",{className:"text-xs text-red-500",children:["/ ",T.wickets]})]}),t.jsx("div",{className:"text-[8px] font-bold text-gray-400 mt-1 uppercase",children:"Total result"})]})]}),t.jsxs("div",{className:"bg-slate-800 p-4 rounded-2xl text-white shadow-lg overflow-hidden relative",children:[t.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 text-4xl",children:""}),t.jsx("h4",{className:"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-3 border-b border-slate-700 pb-2",children:"Analysis Breakdown"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs font-bold text-slate-300",children:"Ground Shots"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-24 h-1.5 bg-slate-700 rounded-full overflow-hidden",children:t.jsx("div",{className:"bg-emerald-400 h-full",style:{width:`${T.total?T.ground/T.total*100:0}%`}})}),t.jsx("span",{className:"text-sm font-black",children:T.ground})]})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs font-bold text-slate-300",children:"Aerial Shots"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-24 h-1.5 bg-slate-700 rounded-full overflow-hidden",children:t.jsx("div",{className:"bg-sky-400 h-full",style:{width:`${T.total?T.aerial/T.total*100:0}%`}})}),t.jsx("span",{className:"text-sm font-black",children:T.aerial})]})]})]})]})]})]})},dI=({match:s,engine:e,teams:n,battingTeam:i,bowlingTeam:r,stats:o,pad:d,wicket:u,rules:p,timer:m,onExit:f,isAuthorized:b,handlers:y,modals:N,onEditPlayer:k,onBallClick:T,mobileTab:S,setMobileTab:R,onPinToMedia:A,onComplete:I})=>{var te,_e,re,Re,$e,ue;const[j,E]=_.useState(null),[D,L]=_.useState(null),[G,Y]=_.useState(!1),[q,ce]=_.useState(!1),[Q,ne]=_.useState(!!document.fullscreenElement);Fn.useEffect(()=>{!document.fullscreenElement&&document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen().catch(Te=>{console.log(`Error attempting to enable full-screen mode: ${Te.message}`)});const be=()=>{ne(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",be),()=>document.removeEventListener("fullscreenchange",be)},[]);const ee=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen().catch(be=>{console.log(`Error attempting to enable full-screen mode: ${be.message}`)})},se=async()=>{const be=new URL(window.location.origin+window.location.pathname);be.searchParams.set("matchId",s.id),be.searchParams.set("tab","FIXTURES"),be.searchParams.set("mode","media");const Te={title:`${s.teamAName} vs ${s.teamBName} - Live Score`,text:`Follow the live score of ${s.teamAName} vs ${s.teamBName} on Cricket-Core!`,url:be.toString()};if(navigator.share)try{await navigator.share(Te)}catch($){console.log("Share failed or cancelled:",$),navigator.clipboard.writeText(be.toString()),ce(!0),setTimeout(()=>ce(!1),2e3)}else navigator.clipboard.writeText(be.toString()),ce(!0),setTimeout(()=>ce(!1),2e3)},M=be=>{if(window.innerWidth<1024){R(be);return}if(be==="SCORING"){R("SCORING");return}if(S==="SCORING"){if(j===be){E(null);return}if(D===be){L(null);return}j?L(be):E(be)}else R(be)},B=i==null?void 0:i.players.find(be=>be.id===e.state.strikerId),Z=i==null?void 0:i.players.find(be=>be.id===e.state.nonStrikerId);r==null||r.players.find(be=>be.id===e.state.bowlerId);const Ne=n.find(be=>be.id===s.teamAId),ae=n.find(be=>be.id===s.teamBId),P=[...e.state.history].sort((be,Te)=>Te.timestamp-be.timestamp),W=e.state.target?e.state.target-e.state.score:0,X=p.totalOversAllowed*6-e.state.totalBalls,we=be=>{var Te;return be==="SCORING"?t.jsxs("div",{className:"h-full flex flex-col min-h-0",children:[t.jsxs("div",{className:"flex-1 overflow-y-auto px-4 pt-2 pb-2 space-y-4 no-scrollbar min-h-0",children:[t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[t.jsx("h2",{className:"text-[9px] font-black uppercase text-gray-400 tracking-widest",children:i==null?void 0:i.name}),t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsxs("span",{className:"text-[8px] font-bold text-teal-600 bg-teal-50 px-1.5 py-0.5 rounded-full border border-teal-100",children:[" ",(()=>{const $=(m==null?void 0:m.elapsedSeconds)||0,oe=Math.floor($/60),Ae=$%60;return`${oe}:${Ae.toString().padStart(2,"0")}`})()]}),t.jsxs("span",{className:"text-[8px] font-bold text-gray-400 uppercase",children:[e.state.innings===1?"1st":"2nd"," Inn"]})]})]}),t.jsxs("div",{className:"text-4xl font-black text-teal-900 mb-0.5 leading-none tracking-tight",children:[e.state.score,"-",e.state.wickets,t.jsxs("span",{className:"text-xs font-bold text-gray-400 ml-2",children:["(",Math.floor(e.state.totalBalls/6),".",e.state.totalBalls%6,")"]})]}),t.jsxs("div",{className:"flex justify-center gap-3 text-[9px] font-bold text-gray-600 mb-1.5",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-[7px] text-gray-400 uppercase",children:"Ex:"}),t.jsx("span",{children:e.state.history.filter($=>$.innings===e.state.innings&&$.extraRuns&&$.extraRuns>0).reduce(($,oe)=>$+(oe.extraRuns||0),0)+e.state.history.filter($=>$.innings===e.state.innings&&["Wide","NoBall"].includes($.extraType||"")).length})]}),t.jsx("div",{className:"w-px h-3 bg-gray-200"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-[7px] text-gray-400 uppercase",children:"CRR:"}),t.jsx("span",{children:o.runRate})]}),e.state.innings===2&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-px h-3 bg-gray-200"}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("span",{className:"text-[7px] text-gray-400 uppercase",children:"RRR:"}),t.jsx("span",{className:"text-orange-600",children:o.requiredRate})]})]})]}),e.state.innings===2&&t.jsx("div",{className:"bg-orange-50 rounded-md py-1 px-3 border border-orange-100 mb-2 inline-block",children:t.jsxs("div",{className:"text-[9px] font-black text-orange-600 uppercase tracking-tight",children:["Need ",W," runs of ",X," balls"]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[t.jsxs("div",{className:"flex bg-gray-50 px-2 py-1 text-[8px] font-black text-gray-400 uppercase tracking-widest border-b border-gray-100",children:[t.jsx("div",{className:"flex-1",children:"Batsman"}),t.jsx("div",{className:"w-7 text-center",children:"R"}),t.jsx("div",{className:"w-7 text-center",children:"B"}),t.jsx("div",{className:"w-5 text-center",children:"4s"}),t.jsx("div",{className:"w-5 text-center",children:"6s"}),t.jsx("div",{className:"w-8 text-center",children:"SR"})]}),[e.state.strikerId,e.state.nonStrikerId].filter(Boolean).map($=>{const oe=i==null?void 0:i.players.find(Be=>Be.id===$),Ae=(oe==null?void 0:oe.name)||"Unknown Batter",De=o.batterStats[$]||{runs:0,balls:0,fours:0,sixes:0,strikeRate:0},Me=$===e.state.strikerId;return t.jsxs("div",{className:"flex items-center px-2 py-1 border-b border-gray-50 last:border-0 hover:bg-gray-50 transition-colors min-h-[32px]",children:[t.jsx("div",{onClick:()=>d.openBatterActions(Me?"striker":"nonStriker"),className:"flex-1 font-bold text-gray-800 text-[11px] flex items-center cursor-pointer min-w-0",children:Me?t.jsx("span",{className:"bg-orange-500 text-white px-1.5 py-0.5 rounded text-[10px] truncate shadow-sm",children:Ae}):t.jsx("span",{className:"pl-1 truncate",children:Ae})}),t.jsx("button",{onClick:Be=>{Be.stopPropagation(),k(Me?"@striker":"@nonStriker")},className:"w-5 h-5 flex items-center justify-center text-gray-300 hover:text-indigo-600 hover:bg-slate-100 rounded-full mr-1 transition-colors text-[10px]",children:""}),t.jsx("div",{className:`w-7 text-center font-black text-xs ${Me?"text-teal-700":"text-gray-900"}`,children:De.runs}),t.jsx("div",{className:"w-7 text-center text-[10px] text-gray-400 font-bold",children:De.balls}),t.jsx("div",{className:"w-5 text-center text-[9px] text-gray-400",children:De.fours}),t.jsx("div",{className:"w-5 text-center text-[9px] text-gray-400",children:De.sixes}),t.jsx("div",{className:"w-8 text-center text-[8px] text-gray-400 font-mono tracking-tighter",children:De.strikeRate})]},$)})]}),e.state.bowlerId&&t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:(()=>{const $=e.state.bowlerId,oe=r==null?void 0:r.players.find(Me=>Me.id===$),Ae=(oe==null?void 0:oe.name)||"Unknown Bowler",De=o.bowlerStats[$]||{overs:0,maidens:0,runs:0,wickets:0,economy:0};return t.jsxs("div",{className:"flex items-center px-2 py-1 min-h-[32px]",children:[t.jsx("div",{onClick:()=>d.startBowlerReplacement("correction"),className:"flex-1 font-bold text-gray-800 text-[11px] pl-1 truncate cursor-pointer",children:Ae}),t.jsx("button",{onClick:Me=>{Me.stopPropagation(),k("bowler")},className:"w-5 h-5 flex items-center justify-center text-gray-300 hover:text-indigo-600 hover:bg-slate-100 rounded-full mr-1 transition-colors text-[10px]",children:""}),t.jsx("div",{className:"w-7 text-center text-[10px] text-gray-400 font-bold",children:De.overs}),t.jsx("div",{className:"w-7 text-center text-[10px] text-gray-400",children:De.maidens}),t.jsx("div",{className:"w-7 text-center text-[10px] text-gray-400",children:De.runs}),t.jsx("div",{className:"w-5 text-center font-black text-xs text-teal-700",children:De.wickets}),t.jsx("div",{className:"w-8 text-center text-[8px] text-gray-400 font-mono tracking-tighter",children:De.economy})]})})()})]}),t.jsx("div",{className:"shrink-0 bg-white border-y border-gray-200 py-2 relative shadow-inner z-10 flex flex-col gap-2",children:(()=>{const $=Math.floor(e.state.totalBalls/6),oe=Be=>e.state.history.filter(ze=>ze.innings===e.state.innings&&ze.over===Be).reverse(),Ae=oe($),De=$>0?oe($-1):[],Me=(Be,ze,Ke)=>t.jsxs("div",{className:"flex items-center gap-2 px-4",children:[t.jsx("span",{className:`text-[8px] font-black uppercase shrink-0 w-12 tracking-tighter ${Ke?"text-teal-600":"text-gray-400"}`,children:ze}),t.jsx("div",{className:"flex items-center gap-1.5 overflow-x-auto no-scrollbar py-0.5",children:Be.length>0?Be.map((Ce,St)=>t.jsx("div",{className:`w-7 h-7 rounded-sm flex items-center justify-center text-[10px] font-black shrink-0 shadow-sm border ${Ce.isWicket?"bg-red-500 text-white border-red-600":Ce.runs>=4?"bg-teal-600 text-white border-teal-700":"bg-gray-50 text-gray-600 border-gray-200"}`,children:Ce.isWicket?"W":Ce.runs+(Ce.extraRuns||0)},St)):t.jsx("div",{className:"text-[10px] text-gray-300 font-bold",children:"Waiting..."})})]});return t.jsxs(t.Fragment,{children:[Me(Ae,`Over ${$+1}`,!0),$>0&&Me(De,`Over ${$}`,!1)]})})()}),t.jsx("div",{className:"shrink-0 bg-gray-200 shadow-[0_-5px_15px_rgba(0,0,0,0.1)] z-20 rounded-t-3xl mt-[-10px] relative border-t border-gray-300 min-h-[224px]",children:t.jsx("div",{className:"pb-safe pt-2 h-full",children:t.jsx(iI,{padView:d.padView,striker:B,nonStriker:Z,bowlingTeam:r,onRun:y.handleRun,onCommitExtra:y.handleCommitExtra,onStartWicket:u.start,onNav:d.setPadView,onBack:d.resetPad,onMediaCapture:()=>N.setIsCameraOpen(!0),onDeclare:e.declareInnings,onEndInnings:e.concludeInnings,onSubRequest:()=>N.setShowSubModal(!0),onEndGame:y.handleManualConclude,matchFormat:s.format,onAnalyticsClick:()=>Y(!G),autoAnalytics:N.autoAnalytics,onToggleAnalytics:()=>N.setAutoAnalytics(!N.autoAnalytics),onOfficialsClick:()=>N.setShowOfficialsModal(!0),readOnly:!b||e.state.isCompleted,compact:window.innerWidth<1024})})})]}):be==="SCORECARD"?t.jsx("div",{className:"p-4 bg-gray-50 min-h-full",children:Ne&&ae&&t.jsx(yc,{matchState:e.state,teamA:Ne,teamB:ae})}):be==="SUMMARY"?t.jsx("div",{className:"h-full overflow-y-auto no-scrollbar relative",children:t.jsx(Ko,{matchState:e.state,teamA:Ne,teamB:ae,format:s.format,onExit:()=>R("SCORING"),onViewScorecard:()=>R("SCORECARD"),totalOvers:p.totalOversAllowed,onPinToMedia:A})}):be==="BALLS"?t.jsx("div",{className:"p-4 space-y-2 overflow-y-auto h-full bg-gray-50",children:P.map(($,oe)=>{var ze;const Ae=Ke=>n.flatMap(Ce=>Ce.players).find(Ce=>Ce.id===Ke),De=Ae($.bowlerId),Me=Ae($.strikerId),Be=$.extraType&&$.extraType!=="None";return t.jsxs("div",{onClick:()=>T&&T($),className:"bg-white p-3 rounded-xl border border-gray-200 shadow-sm flex justify-between items-center cursor-pointer hover:bg-slate-50 active:bg-slate-100 transition-colors",children:[t.jsxs("div",{className:"flex flex-col items-center min-w-[3rem] border-r border-gray-100 pr-3 mr-3",children:[t.jsxs("div",{className:"text-xs font-black text-gray-700",children:[$.over,".",$.ballNumber]}),t.jsxs("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded mt-1 ${$.innings===1?"bg-indigo-50 text-indigo-600":"bg-orange-50 text-orange-600"}`,children:["Inn ",$.innings]})]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"text-[10px] uppercase font-bold text-gray-400 mb-0.5 tracking-wider",children:[((ze=De==null?void 0:De.name)==null?void 0:ze.split(" ").pop())||"Unknown"," to"]}),t.jsx("div",{className:"text-xs font-bold text-gray-900 truncate",children:(Me==null?void 0:Me.name)||"Unknown Batter"}),$.isWicket&&t.jsxs("div",{className:"text-[10px] font-bold text-red-600 mt-1 flex items-center gap-1",children:[t.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"}),"WICKET (",$.wicketType,")"]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-1 text-right pl-2",children:[t.jsx("div",{className:`text-lg font-black leading-none ${$.isWicket?"text-red-500":$.runs>=4?"text-teal-600":"text-gray-800"}`,children:(()=>{const Ke=$.extraType==="Wide"||$.extraType==="NoBall"?1:0;return $.runs+($.extraRuns||0)+Ke})()}),Be&&t.jsxs("div",{className:`text-[9px] font-bold px-1 rounded uppercase ${$.extraType==="Wide"?"text-blue-500 bg-blue-50":"text-orange-500 bg-orange-50"}`,children:[$.extraType==="NoBall"?"NB":$.extraType==="Wide"?"WD":$.extraType,$.runs+($.extraRuns||0)>0?`+${$.runs+($.extraRuns||0)}`:""]})]})]},oe)})}):be==="INFO"?t.jsxs("div",{className:"p-4 space-y-4 bg-gray-50 h-full overflow-y-auto no-scrollbar",children:[t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4",children:[t.jsx("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 border-b border-gray-50 pb-2",children:"Match Specification"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center text-xs",children:[t.jsx("span",{className:"text-gray-500 font-bold uppercase tracking-tighter",children:"Event"}),t.jsx("span",{className:"font-black text-slate-800",children:s.tournamentId?"League Match":"Friendly"})]}),t.jsxs("div",{className:"flex justify-between items-center text-xs",children:[t.jsx("span",{className:"text-gray-500 font-bold uppercase tracking-tighter",children:"Venue"}),t.jsx("span",{className:"font-black text-slate-800",children:s.venue||"No venue set"})]}),t.jsxs("div",{className:"flex justify-between items-center text-xs",children:[t.jsx("span",{className:"text-gray-500 font-bold uppercase tracking-tighter",children:"Date"}),t.jsx("span",{className:"font-black text-slate-800",children:s.date?new Date(s.date).toLocaleDateString():"N/A"})]}),t.jsxs("div",{className:"flex justify-between items-center text-xs",children:[t.jsx("span",{className:"text-gray-500 font-bold uppercase tracking-tighter",children:"Format"}),t.jsxs("span",{className:"font-black text-indigo-600",children:[s.format," (",p.totalOversAllowed," Overs)"]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4",children:[t.jsx("h3",{className:"text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 border-b border-gray-50 pb-2",children:"Match Officials"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px]",children:""}),t.jsxs("div",{className:"text-xs",children:[t.jsx("div",{className:"text-gray-400 font-bold uppercase text-[8px]",children:"Umpires"}),t.jsx("div",{className:"font-black text-slate-800",children:((Te=e.state.umpires)==null?void 0:Te.join(", "))||"N/A"})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-[10px]",children:""}),t.jsxs("div",{className:"text-xs",children:[t.jsx("div",{className:"text-gray-400 font-bold uppercase text-[8px]",children:"Scorer"}),t.jsxs("div",{className:"font-black text-slate-800",children:["Assignee ",s.scorerId?"(Set)":"(Auto)"]})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4",children:[t.jsxs("h3",{className:"text-[9px] font-black text-teal-600 uppercase tracking-widest mb-3",children:[i==null?void 0:i.name," Squad"]}),t.jsx("div",{className:"space-y-1.5",children:i==null?void 0:i.players.map($=>t.jsxs("div",{className:`text-[10px] font-bold ${$.id===e.state.strikerId||$.id===e.state.nonStrikerId?"text-teal-700":"text-gray-600"}`,children:[$.name," ",$.id===e.state.strikerId?"*":""]},$.id))})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-4",children:[t.jsxs("h3",{className:"text-[9px] font-black text-indigo-600 uppercase tracking-widest mb-3",children:[r==null?void 0:r.name," Squad"]}),t.jsx("div",{className:"space-y-1.5",children:r==null?void 0:r.players.map($=>t.jsxs("div",{className:`text-[10px] font-bold ${$.id===e.state.bowlerId?"text-indigo-700":"text-gray-600"}`,children:[$.name," ",$.id===e.state.bowlerId?" (B)":""]},$.id))})]})]}),b&&t.jsxs("div",{className:"bg-slate-900 rounded-2xl p-4 shadow-xl border border-slate-700",children:[t.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4",children:"Operations"}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("button",{onClick:()=>N.setShowOfficialsModal(!0),className:"py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-lg text-[9px] font-black uppercase tracking-widest transition-all",children:"Officials"}),t.jsx("button",{onClick:y.handleManualConclude,className:"py-2 bg-red-600 hover:bg-red-500 text-white rounded-lg text-[9px] font-black uppercase tracking-widest transition-all",children:"End Match"})]})]})]}):be==="ANALYSIS"?t.jsx(cI,{history:e.state.history,teams:n,battingTeamId:e.state.battingTeamId,bowlingTeamId:e.state.bowlingTeamId}):null};return t.jsxs("div",{className:"h-full bg-white text-slate-900 flex flex-col w-full relative",children:[t.jsxs("div",{className:"bg-white border-b border-gray-200 shrink-0 sticky top-0 z-50",children:[t.jsxs("div",{className:"flex justify-between items-center p-4 pb-2",children:[t.jsx("button",{onClick:f,className:"w-8 h-8 rounded-full bg-gray-100 text-gray-600 flex items-center justify-center hover:bg-gray-200",children:""}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-bold text-gray-900 text-lg",children:"Match Centre"}),t.jsx("button",{onClick:ee,className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors text-gray-500",title:Q?"Minimize":"Maximize",children:Q?"":""})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:e.undoBall,disabled:!e.canUndo||!b,className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${e.canUndo&&b?"bg-orange-100 text-orange-600 hover:bg-orange-200":"bg-gray-100 text-gray-300"}`,children:""}),t.jsx("button",{onClick:y.handleManualSave,disabled:!b,className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${b?"bg-emerald-100 text-emerald-600 hover:bg-emerald-200":"bg-gray-100 text-gray-300"}`,title:"Save",children:""}),t.jsx("button",{onClick:()=>{window.confirm("End Match?")&&y.handleManualConclude()},disabled:!b,className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${b?"bg-red-100 text-red-600 hover:bg-red-200 active:scale-90":"bg-gray-100 text-gray-300"}`,title:"End",children:""}),t.jsxs("button",{onClick:se,className:"w-8 h-8 rounded-full bg-teal-100 text-teal-600 flex items-center justify-center hover:bg-teal-200 transition-all active:scale-90 relative",title:"Share Match",children:["",q&&t.jsx("div",{className:"absolute -bottom-10 right-0 bg-gray-900 text-white text-[8px] font-black py-1 px-2 rounded uppercase tracking-widest whitespace-nowrap animate-in slide-in-from-top-2 fade-in duration-200 z-50",children:"Link Copied!"})]})]})]}),t.jsx("div",{className:"flex justify-around items-stretch border-t border-gray-100",children:["SCORING","SCORECARD","BALLS","ANALYSIS","SUMMARY","INFO"].map((be,Te,$)=>t.jsx("button",{onClick:()=>M(be),className:`flex-1 py-3 text-[9px] font-black uppercase tracking-tighter transition-all flex items-center justify-center text-center
                                ${S===be||j===be||D===be?"text-teal-700 bg-teal-50/50 shadow-[inset_0_-2px_0_0_#0f766e]":"text-gray-400 hover:bg-gray-50"}
                                ${Te<$.length-1?"border-r border-gray-100":""}
                            `,children:be},be))})]}),t.jsxs("div",{className:"flex-1 flex overflow-hidden bg-gray-50",children:[j&&S==="SCORING"&&t.jsxs("div",{className:"hidden lg:block w-[400px] border-r border-gray-200 overflow-y-auto relative bg-white shadow-sm",children:[t.jsx("div",{className:"sticky top-0 right-0 p-2 flex justify-end z-20",children:t.jsx("button",{onClick:()=>E(null),className:"w-6 h-6 rounded-full bg-gray-100 text-gray-400 hover:text-gray-600 flex items-center justify-center text-xs",children:""})}),we(j)]}),t.jsx("div",{className:"flex-1 flex flex-col min-w-0 min-h-0 relative",children:we(S)}),D&&S==="SCORING"&&t.jsxs("div",{className:"hidden lg:block w-[400px] border-l border-gray-200 overflow-y-auto relative bg-white shadow-sm",children:[t.jsx("div",{className:"sticky top-0 right-0 p-2 flex justify-end z-20",children:t.jsx("button",{onClick:()=>L(null),className:"w-6 h-6 rounded-full bg-gray-100 text-gray-400 hover:text-gray-600 flex items-center justify-center text-xs",children:""})}),we(D)]}),G&&S==="SCORING"&&t.jsx("div",{className:"hidden lg:block w-[320px] shrink-0 border-l border-slate-800 bg-slate-900 shadow-xl animate-in slide-in-from-right duration-300",children:t.jsx(oI,{onSave:y.handleAnalyticsSave,onClose:()=>Y(!1),existingPitch:(te=P[0])==null?void 0:te.pitchCoords,existingShot:(_e=P[0])==null?void 0:_e.shotCoords,existingHeight:(re=P[0])==null?void 0:re.shotHeight,ballColor:P[0]?tc(P[0]):void 0,isWaiting:!P[0]||!!((Re=P[0])!=null&&Re.pitchCoords)&&!!(($e=P[0])!=null&&$e.shotCoords)&&!!((ue=P[0])!=null&&ue.shotHeight)})})]})]})},uI=({matchState:s,battingTeam:e,bowlingTeam:n,onClose:i})=>{const r=e==null?void 0:e.players.find(N=>N.id===s.strikerId),o=e==null?void 0:e.players.find(N=>N.id===s.nonStrikerId),d=n==null?void 0:n.players.find(N=>N.id===s.bowlerId),u=s.strikerId?rl(s.strikerId,s.history,s.innings):null,p=s.nonStrikerId?rl(s.nonStrikerId,s.history,s.innings):null,m=s.bowlerId?xr(s.bowlerId,s.history,s.innings):null,f=yv(s).slice(0,6).reverse(),b=s.totalBalls>0?(s.score/s.totalBalls*6).toFixed(1):"0.0",y=s.totalBalls>0?Math.round(s.score/s.totalBalls*(s.innings===1,120)):0;return t.jsxs("div",{className:"fixed inset-0 z-[500] bg-[#00FF00] overflow-hidden cursor-none hover:cursor-default group",children:[t.jsx("button",{onClick:i,className:"absolute top-4 right-4 bg-black/50 text-white px-4 py-2 rounded-full font-bold opacity-0 group-hover:opacity-100 transition-opacity backdrop-blur-md hover:bg-red-600",children:"Exit Broadcaster Mode"}),t.jsxs("div",{className:"absolute bottom-10 left-10 right-10 flex flex-col gap-4",children:[t.jsxs("div",{className:"flex items-end",children:[t.jsxs("div",{className:"bg-[#0f172a] text-white rounded-t-3xl rounded-bl-3xl p-4 md:p-6 shadow-2xl border-l-4 md:border-l-8 border-indigo-600 w-full max-w-sm relative z-20",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[(e==null?void 0:e.logoUrl)&&t.jsx("img",{src:e.logoUrl,className:"w-12 h-12 bg-white rounded-full p-1"}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-black uppercase leading-none tracking-tight",children:(e==null?void 0:e.name)||"Batting Team"}),t.jsx("p",{className:"text-indigo-400 font-bold text-sm uppercase tracking-widest",children:s.innings===1?"1st Innings":"Target Chase"})]})]}),t.jsxs("div",{className:"flex items-baseline gap-4",children:[t.jsxs("span",{className:"text-6xl font-black tabular-nums tracking-tighter",children:[s.score,"/",s.wickets]}),t.jsxs("span",{className:"text-2xl text-slate-400 font-bold",children:[Math.floor(s.totalBalls/6),".",s.totalBalls%6," Ov"]})]}),t.jsxs("div",{className:"mt-2 flex gap-4 text-xs font-bold text-slate-400 uppercase tracking-widest",children:[t.jsxs("span",{children:["CRR: ",b]}),y>0&&t.jsxs("span",{children:["Proj: ",y]})]})]}),t.jsx("div",{className:"bg-slate-900/95 backdrop-blur text-white p-4 mb-0 ml-[-20px] pl-10 rounded-tr-3xl relative z-10 border-b-4 border-slate-800 flex-1 min-w-0 max-w-2xl flex justify-between items-center shadow-xl",children:t.jsxs("div",{className:"flex-1 flex items-center justify-around",children:[t.jsx("div",{className:"flex items-center gap-3",children:t.jsxs("div",{className:"text-right",children:[t.jsxs("div",{className:"font-black text-xl leading-none flex items-center gap-2 justify-end",children:[r==null?void 0:r.name," ",t.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})]}),t.jsxs("div",{className:"text-indigo-300 font-mono font-bold text-lg",children:[u==null?void 0:u.runs,t.jsxs("span",{className:"text-xs text-slate-500 ml-1",children:["(",u==null?void 0:u.balls,")"]})]})]})}),t.jsx("div",{className:"h-10 w-px bg-slate-700 mx-4"}),t.jsx("div",{className:"flex items-center gap-3 opacity-70",children:t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold text-lg leading-none text-slate-300",children:o==null?void 0:o.name}),t.jsxs("div",{className:"text-slate-400 font-mono font-bold text-base",children:[p==null?void 0:p.runs,t.jsxs("span",{className:"text-xs text-slate-600 ml-1",children:["(",p==null?void 0:p.balls,")"]})]})]})})]})})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("div",{className:"bg-white text-slate-900 rounded-3xl p-3 md:p-4 shadow-xl flex items-center gap-3 md:gap-6 w-full max-w-md",children:[t.jsx("div",{className:"bg-slate-900 text-white px-3 py-1 rounded text-[10px] font-black uppercase tracking-widest",children:"Bowler"}),t.jsxs("div",{children:[t.jsx("div",{className:"font-black text-xl uppercase leading-none",children:d==null?void 0:d.name}),t.jsxs("div",{className:"font-mono text-sm font-bold text-slate-600 mt-1",children:[m==null?void 0:m.wickets,"-",m==null?void 0:m.runs," ",t.jsxs("span",{className:"text-[10px] text-slate-400",children:["(",m==null?void 0:m.overs,")"]})]})]})]}),t.jsxs("div",{className:"bg-slate-900/80 backdrop-blur rounded-3xl p-4 flex items-center gap-2 flex-1 shadow-xl",children:[t.jsx("div",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mr-2",children:"This Over"}),f.map(N=>t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-black text-xs ${N.color} text-white shadow-md border-2 border-white/10`,children:N.label},N.id))]})]})]})]})},hI=({isOpen:s,onClose:e,onSave:n,existingPitch:i,existingShot:r,existingHeight:o,ballColor:d,isWaiting:u=!1})=>{const[p,m]=_.useState(i),[f,b]=_.useState(r),[y,N]=_.useState(o),[k,T]=_.useState("PITCH");if(!s)return null;const S=()=>{n(p,f,y),e(),m(void 0),b(void 0),N(void 0),T("PITCH")};return t.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[2.5rem] w-full max-w-sm shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col max-h-[85vh]",children:[t.jsxs("div",{className:"p-6 bg-slate-950 border-b border-slate-800",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-tight",children:"Ball Analytics"}),t.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"Guided Entry"})]}),t.jsxs("div",{className:"text-white text-[8px] font-black px-2 py-1 rounded-lg uppercase tracking-widest bg-indigo-600",children:["Step ",k==="PITCH"?"1":k==="SHOT"?"2":"3"," of 3"]})]}),t.jsxs("div",{className:"flex bg-slate-800 rounded-xl p-1",children:[t.jsx("button",{onClick:()=>T("PITCH"),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase transition-all flex items-center justify-center gap-1 ${k==="PITCH"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Pitch"}),t.jsx("button",{onClick:()=>T("SHOT"),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase transition-all flex items-center justify-center gap-1 ${k==="SHOT"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Shot"}),t.jsx("button",{onClick:()=>T("HEIGHT"),className:`flex-1 py-2 rounded-lg text-[9px] font-black uppercase transition-all flex items-center justify-center gap-1 ${k==="HEIGHT"?"bg-white text-slate-900 shadow-sm":"text-slate-500"}`,children:"Type"})]})]}),t.jsxs("div",{className:"flex-1 p-6 bg-slate-900 flex items-center justify-center relative overflow-y-auto",children:[k==="PITCH"&&t.jsxs("div",{className:"w-full animate-in slide-in-from-left-4",children:[t.jsx("p",{className:"text-center text-[10px] text-slate-500 mb-6 font-bold uppercase tracking-widest bg-slate-800 py-2 rounded-full border border-white/5 px-4",children:"1. Tap ball impact point"}),t.jsx(yr,{onRecord:R=>{m(R),setTimeout(()=>T("SHOT"),400)},deliveries:p?[{coords:p,color:d||"#14b8a6"}]:[]})]}),k==="SHOT"&&t.jsxs("div",{className:"w-full animate-in slide-in-from-right-4",children:[t.jsx("p",{className:"text-center text-[10px] text-slate-500 mb-6 font-bold uppercase tracking-widest bg-slate-800 py-2 rounded-full border border-white/5 px-4",children:"2. Tap where ball traveled"}),t.jsx(vr,{onRecord:R=>{b(R),setTimeout(()=>T("HEIGHT"),400)},shots:f?[{coords:f,color:d||"#f59e0b"}]:[]})]}),k==="HEIGHT"&&t.jsxs("div",{className:"w-full animate-in slide-in-from-bottom-4 flex flex-col items-center",children:[t.jsx("p",{className:"text-center text-[10px] text-slate-500 mb-8 font-bold uppercase tracking-widest bg-slate-800 py-2 rounded-full border border-white/5 px-4 w-full",children:"3. Select shot type"}),t.jsxs("div",{className:"grid grid-cols-1 gap-4 w-full px-4",children:[t.jsxs("button",{onClick:()=>{N("Ground"),setTimeout(S,300)},className:`py-8 rounded-2xl border-2 transition-all flex flex-col items-center gap-3 ${y==="Ground"?"bg-indigo-600 border-indigo-400 text-white shadow-xl scale-105":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`,children:[t.jsx("span",{className:"text-4xl text-emerald-400",children:""}),t.jsx("span",{className:"font-black uppercase tracking-widest text-sm",children:"Ground Shot"})]}),t.jsxs("button",{onClick:()=>{N("Aerial"),setTimeout(S,300)},className:`py-8 rounded-2xl border-2 transition-all flex flex-col items-center gap-3 ${y==="Aerial"?"bg-indigo-600 border-indigo-400 text-white shadow-xl scale-105":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`,children:[t.jsx("span",{className:"text-4xl text-sky-400",children:""}),t.jsx("span",{className:"font-black uppercase tracking-widest text-sm",children:"Aerial Shot"})]})]})]}),u&&t.jsx("div",{className:"absolute inset-0 z-50 bg-slate-900/60 backdrop-blur-sm flex items-center justify-center p-8 text-center animate-in fade-in duration-500",children:t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"w-20 h-20 rounded-full border-4 border-slate-700 border-t-indigo-500 animate-spin mx-auto opacity-40"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("h4",{className:"text-lg font-black uppercase tracking-tight text-white/50",children:"Waiting on ball"}),t.jsxs("p",{className:"text-xs font-bold text-slate-500 uppercase tracking-widest italic leading-relaxed",children:["Recording is complete.",t.jsx("br",{}),"Please bowl the next delivery."]})]})]})})]}),t.jsxs("div",{className:"p-6 border-t border-slate-800 bg-slate-950 flex gap-4",children:[t.jsx("button",{onClick:e,className:"flex-1 py-4 text-slate-500 font-black uppercase text-xs hover:text-white transition-all",children:"Skip"},"skip"),t.jsx("button",{onClick:S,disabled:!p&&!f&&!y,className:"flex-1 py-4 bg-gradient-to-r from-teal-600 to-indigo-600 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:scale-105 active:scale-95 transition-all disabled:opacity-50 disabled:grayscale",children:"Done"},"save")]})]})})},mI=({open:s,batters:e,fielders:n,wicketType:i,outPlayerId:r,fielderId:o,onSelectType:d,onSelectOutPlayer:u,onSelectFielder:p,onConfirm:m,onCancel:f})=>{if(!s)return null;const b=["Bowled","Caught","LBW","Run Out","Stumped","Hit Wicket","Timed Out","Retired Out","Retired Hurt"],y=i==="Caught"||i==="Stumped"||i==="Run Out";return t.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md flex items-center justify-center z-[100] p-4",children:t.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[3rem] p-8 w-full max-w-xl shadow-2xl animate-in zoom-in-95 duration-300",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-black text-white",children:"Dismissal Record"}),t.jsx("p",{className:"text-[10px] font-black text-red-500 uppercase tracking-widest mt-1",children:"Official Match Event"})]}),t.jsx("button",{onClick:f,className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center text-slate-400 hover:text-white transition-colors",children:""})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1 mb-3 block",children:"Method of Dismissal"}),t.jsx("div",{className:"grid grid-cols-3 gap-3",children:b.map(N=>t.jsx("button",{onClick:()=>d(N),className:`py-3 rounded-2xl text-[11px] font-black transition-all border ${i===N?"bg-red-600 border-red-500 text-white shadow-lg shadow-red-600/20":"bg-slate-800 border-slate-700 text-slate-400 hover:border-slate-500"}`,children:N},N))})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1 mb-3 block",children:"Dismissed Batter"}),t.jsx("div",{className:"space-y-2",children:e.map(N=>t.jsxs("button",{onClick:()=>u(N.id),className:`w-full p-4 rounded-2xl text-left transition-all border flex justify-between items-center ${r===N.id?"bg-slate-800 border-indigo-500 text-white ring-1 ring-indigo-500/50":"bg-slate-800/50 border-slate-700 text-slate-400 opacity-60"}`,children:[t.jsx("span",{className:"font-bold text-xs",children:N.name}),r===N.id&&t.jsx("span",{className:"text-indigo-500",children:""})]},N.id))})]}),t.jsxs("div",{className:y?"opacity-100":"opacity-30 pointer-events-none",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest px-1 mb-3 block",children:"Fielder Involved"}),t.jsxs("select",{value:o||"",onChange:N=>p(N.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-2xl p-4 text-xs font-bold text-white outline-none focus:border-red-500 appearance-none shadow-inner",children:[t.jsx("option",{value:"",children:"Select Fielder..."}),n.map(N=>t.jsx("option",{value:N.id,children:N.name},N.id))]})]})]})]}),t.jsxs("div",{className:"flex gap-4 pt-10",children:[t.jsx("button",{onClick:f,className:"flex-1 py-4 rounded-2xl font-black uppercase text-[10px] tracking-widest text-slate-500 hover:bg-slate-800 transition-all",children:"Discard"}),t.jsx("button",{onClick:m,disabled:!i||!r,className:"flex-1 py-4 bg-red-600 text-white rounded-2xl font-black uppercase text-[10px] tracking-widest shadow-xl shadow-red-600/20 hover:bg-red-500 transition-all active:scale-95 disabled:opacity-30",children:"Record Wicket"})]})]})})},fI=({isOpen:s,overNumber:e,bowlingTeamName:n,currentBowlerId:i,bowlers:r,onSelectBowler:o,getAvailability:d})=>s?t.jsx("div",{className:"fixed inset-0 bg-slate-950/90 backdrop-blur-md z-[50] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-md rounded-[2.5rem] overflow-hidden shadow-2xl animate-in zoom-in-95",children:[t.jsxs("div",{className:"bg-slate-900 p-8 text-center",children:[t.jsxs("h2",{className:"text-2xl font-black text-white uppercase italic tracking-wider",children:["Over ",e," Complete"]}),t.jsxs("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mt-2",children:["Select Next Bowler for ",n]})]}),t.jsx("div",{className:"p-4 bg-slate-50 max-h-[60vh] overflow-y-auto custom-scrollbar",children:t.jsx("div",{className:"grid grid-cols-1 gap-2",children:r.map(u=>{const p=d(u.id),m=u.id===i;return t.jsxs("button",{disabled:!p.allowed,onClick:()=>o(u.id),className:`w-full p-4 rounded-xl flex items-center justify-between border-2 transition-all ${m?"border-slate-200 bg-slate-100 opacity-50 cursor-not-allowed":p.allowed?"border-white bg-white shadow-sm hover:border-indigo-500 hover:shadow-md":"border-slate-100 bg-white opacity-40 grayscale"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-xs font-black ${m?"bg-slate-300 text-slate-500":"bg-indigo-100 text-indigo-600"}`,children:u.name.charAt(0)}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold text-sm text-slate-900",children:u.name}),t.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase",children:u.role})]})]}),!p.allowed&&t.jsx("span",{className:"text-[9px] font-black text-red-400 uppercase tracking-wider",children:p.reason})]},u.id)})})})]})}):null,pI=({isOpen:s,battingPlayers:e,bowlingPlayers:n,onConfirm:i})=>{const[r,o]=_.useState(""),[d,u]=_.useState(""),[p,m]=_.useState(""),[f,b]=_.useState("");if(_.useEffect(()=>{s&&(o(""),u(""),m(""),b(""))},[s]),!s)return null;const y=()=>{if(!r||!d||!p){b("All fields are required to start the match.");return}if(r===d){b("Striker and Non-Striker must be different players.");return}i(r.trim(),d.trim(),p.trim())};return t.jsx("div",{className:"fixed inset-0 bg-slate-950/90 backdrop-blur-md z-[200] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[2.5rem] w-full max-w-lg shadow-2xl relative overflow-hidden animate-in zoom-in-95 duration-300",children:[t.jsxs("div",{className:"bg-slate-950 p-8 border-b border-slate-800 text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl mx-auto flex items-center justify-center text-3xl shadow-lg shadow-indigo-600/20 mb-4",children:""}),t.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Ready to Play?"}),t.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest mt-2",children:"Select opening players to start innings"})]}),t.jsxs("div",{className:"p-8 space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest px-1",children:"Striker"}),t.jsxs("select",{value:r,onChange:N=>o(N.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-4 text-xs font-bold text-white outline-none focus:border-indigo-500 transition-all appearance-none",children:[t.jsx("option",{value:"",children:"Select Batter..."}),e.map(N=>t.jsx("option",{value:N.id,children:N.name},N.id))]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest px-1",children:"Non-Striker"}),t.jsxs("select",{value:d,onChange:N=>u(N.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-4 text-xs font-bold text-white outline-none focus:border-indigo-500 transition-all appearance-none",children:[t.jsx("option",{value:"",children:"Select Batter..."}),e.map(N=>t.jsx("option",{value:N.id,children:N.name},N.id))]})]})]}),t.jsxs("div",{className:"space-y-2 pt-2",children:[t.jsx("label",{className:"text-[10px] font-black text-emerald-500 uppercase tracking-widest px-1",children:"Opening Bowler"}),t.jsxs("select",{value:p,onChange:N=>m(N.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl p-4 text-xs font-bold text-white outline-none focus:border-emerald-500 transition-all appearance-none",children:[t.jsx("option",{value:"",children:"Select Bowler..."}),n.map(N=>t.jsx("option",{value:N.id,children:N.name},N.id))]})]}),f&&t.jsx("div",{className:"bg-red-500/10 border border-red-500/50 rounded-xl p-3 text-red-400 text-[10px] font-bold uppercase text-center animate-in shake",children:f}),t.jsx("button",{onClick:y,className:"w-full py-5 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl shadow-indigo-600/20 transition-all active:scale-95 mt-4",children:"Start Play"})]})]})})},qg=({isOpen:s,teamName:e,availableBatters:n,targetRole:i,onSelect:r})=>{const[o,d]=_.useState("");return s?t.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[150] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-slate-900 border border-slate-800 rounded-[2.5rem] w-full max-w-md shadow-2xl animate-in zoom-in-95 overflow-hidden",children:[t.jsxs("div",{className:"bg-slate-950 p-6 border-b border-slate-800 text-center",children:[t.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-xl mx-auto flex items-center justify-center text-2xl shadow-lg mb-3",children:""}),t.jsx("h3",{className:"text-xl font-black text-white uppercase",children:"New Batter Required"}),t.jsxs("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-widest mt-1",children:["Select New Batter for ",e]})]}),t.jsxs("div",{className:"p-6 space-y-4",children:[n.length===0?t.jsx("div",{className:"text-center p-4 bg-red-500/10 rounded-xl text-red-400 font-bold text-xs uppercase",children:"No more batters available."}):t.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto custom-scrollbar pr-1",children:n.map(u=>t.jsxs("button",{onClick:()=>d(u.id),className:`w-full p-4 rounded-xl text-left border transition-all flex justify-between items-center ${o===u.id?"bg-indigo-600 border-indigo-500 text-white shadow-lg":"bg-slate-800 border-slate-700 text-slate-300 hover:border-slate-500"}`,children:[t.jsx("span",{className:"font-bold text-sm",children:u.name}),t.jsx("span",{className:"text-[9px] font-mono opacity-60 uppercase",children:u.role})]},u.id))}),t.jsx("button",{onClick:()=>o&&r(o),disabled:!o,className:"w-full py-4 bg-white text-slate-900 rounded-xl font-black uppercase text-xs tracking-widest shadow-xl disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 transition-all mt-4",children:"Confirm Batter"})]})]})}):null},xI=({isOpen:s,onClose:e,teamName:n,currentPlayerId:i,currentPlayerName:r,role:o,availablePlayers:d,onReplace:u,onRetire:p,onInjury:m})=>{const[f,b]=_.useState("REPLACE"),[y,N]=_.useState(""),[k,T]=_.useState("Retired Hurt");if(!s)return null;const S=()=>{f==="REPLACE"?y&&y!==i&&(u(i,y,o==="Striker"?"striker":o==="NonStriker"?"nonStriker":"bowler"),e()):f==="RETIRE"&&p?(p(i,k),e()):f==="INJURY"&&m&&y&&(m(y),e())};return t.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden animate-in zoom-in-95",children:[t.jsxs("div",{className:"bg-slate-100 p-6 border-b border-slate-200",children:[t.jsxs("h3",{className:"font-black text-slate-800 text-lg uppercase tracking-tight",children:["Edit ",o]}),t.jsx("p",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest",children:r})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-xl",children:[t.jsx("button",{onClick:()=>b("REPLACE"),className:`flex-1 py-3 rounded-lg text-xs font-black uppercase tracking-widest transition-all ${f==="REPLACE"?"bg-white shadow-sm text-indigo-600":"text-slate-400"}`,children:"Correction"}),o!=="Bowler"?t.jsx("button",{onClick:()=>b("RETIRE"),className:`flex-1 py-3 rounded-lg text-xs font-black uppercase tracking-widest transition-all ${f==="RETIRE"?"bg-white shadow-sm text-red-600":"text-slate-400"}`,children:"Retire"}):t.jsx("button",{onClick:()=>b("INJURY"),className:`flex-1 py-3 rounded-lg text-xs font-black uppercase tracking-widest transition-all ${f==="INJURY"?"bg-white shadow-sm text-orange-600":"text-slate-400"}`,children:"Injury"})]}),f==="REPLACE"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("p",{className:"text-xs text-slate-500",children:["Select the correct player who should be ",t.jsx("strong",{children:o}),". This will retroactively fix the current ball state but won't change history."]}),t.jsx(Vg,{available:d,current:i,selected:y,onChange:N})]}),f==="INJURY"&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("p",{className:"text-xs text-slate-500",children:[t.jsx("strong",{children:"Injury Replacement:"})," The new bowler will complete the current over."]}),t.jsx(Vg,{available:d,current:i,selected:y,onChange:N})]}),f==="RETIRE"&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-red-500 px-1",children:"Retirement Type"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("button",{onClick:()=>T("Retired Hurt"),className:`p-3 rounded-xl border-2 text-xs font-bold transition-all ${k==="Retired Hurt"?"border-orange-500 bg-orange-50 text-orange-700":"border-slate-100 bg-slate-50 text-slate-400"}`,children:[" Retired Hurt",t.jsx("span",{className:"block text-[9px] font-normal mt-1 text-slate-500",children:"Can return later (Not Out)"})]}),t.jsxs("button",{onClick:()=>T("Retired Out"),className:`p-3 rounded-xl border-2 text-xs font-bold transition-all ${k==="Retired Out"?"border-red-500 bg-red-50 text-red-700":"border-slate-100 bg-slate-50 text-slate-400"}`,children:[" Retired Out",t.jsx("span",{className:"block text-[9px] font-normal mt-1 text-slate-500",children:"Cannot return (Wicket)"})]})]})]})})]}),t.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[t.jsx("button",{onClick:e,className:"flex-1 py-4 text-xs font-black uppercase tracking-widest text-slate-400 hover:bg-slate-100 rounded-xl transition-colors",children:"Cancel"}),t.jsx("button",{onClick:S,disabled:(f==="REPLACE"||f==="INJURY")&&!y,className:"flex-1 py-4 bg-slate-900 text-white rounded-xl text-xs font-black uppercase tracking-widest shadow-lg hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Confirm"})]})]})})},Vg=({available:s,current:e,selected:n,onChange:i})=>t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-500 px-1",children:"Swap With"}),t.jsxs("select",{value:n,onChange:r=>i(r.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-xl p-4 text-sm font-bold text-slate-700 outline-none focus:border-indigo-500",children:[t.jsx("option",{value:"",children:"Select teammate..."}),s.filter(r=>r.id!==e).map(r=>t.jsx("option",{value:r.id,children:r.name},r.id))]})]}),gI=({isOpen:s,onClose:e,ball:n,onSave:i})=>{const[r,o]=_.useState(0),[d,u]=_.useState("None"),[p,m]=_.useState(0),[f,b]=_.useState(!1),[y,N]=_.useState("");if(_.useEffect(()=>{n&&(o(n.runs||0),u(n.extraType||"None"),m(n.extraRuns||0),b(n.isWicket||!1),N(n.wicketType||""))},[n]),!s||!n)return null;const k=()=>{i({runs:r,extraType:d,extraRuns:p,isWicket:f,wicketType:f?y:void 0}),e()};return t.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-sm z-[200] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-sm rounded-3xl shadow-2xl overflow-hidden animate-in zoom-in-95",children:[t.jsxs("div",{className:"bg-slate-100 p-6 border-b border-slate-200",children:[t.jsx("h3",{className:"font-black text-slate-800 text-lg uppercase tracking-tight",children:"Edit Ball"}),t.jsxs("p",{className:"text-sm font-mono text-slate-500 font-bold",children:[new Date(n.timestamp).toLocaleTimeString(),"  ",n.bowlerId?"Valid Ball":"Extra"]})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-500 px-1",children:"Runs (Off Bat)"}),t.jsx("div",{className:"flex gap-2",children:[0,1,2,3,4,6].map(T=>t.jsx("button",{onClick:()=>o(T),className:`w-10 h-10 rounded-full font-bold text-sm transition-all ${r===T?"bg-indigo-600 text-white shadow-md scale-110":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:T},T))})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-indigo-500 px-1",children:"Extras"}),t.jsx("div",{className:"grid grid-cols-3 gap-2",children:["None","Wide","NoBall","Bye","LegBye"].map(T=>t.jsx("button",{onClick:()=>u(T),className:`py-2 rounded-lg text-xs font-bold transition-all ${d===T?"bg-orange-500 text-white shadow-md":"bg-slate-100 text-slate-500 hover:bg-slate-200"}`,children:T},T))}),d!=="None"&&t.jsxs("div",{className:"flex items-center gap-4 mt-2 bg-slate-50 p-3 rounded-xl",children:[t.jsx("span",{className:"text-xs font-bold text-slate-600",children:"Extra Runs:"}),t.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(T=>t.jsx("button",{onClick:()=>m(T),className:`w-8 h-8 rounded-lg font-bold text-xs ${p===T?"bg-orange-500 text-white":"bg-white border border-slate-200 text-slate-600"}`,children:T},T))})]})]}),t.jsxs("div",{className:"flex items-center justify-between bg-red-50 p-4 rounded-xl border border-red-100",children:[t.jsx("span",{className:"font-black text-red-700 uppercase text-xs tracking-widest",children:"Is Wicket?"}),t.jsx("div",{onClick:()=>b(!f),className:`w-12 h-6 rounded-full relative cursor-pointer transition-colors ${f?"bg-red-500":"bg-gray-300"}`,children:t.jsx("div",{className:`w-4 h-4 rounded-full bg-white absolute top-1 transition-all shadow-sm ${f?"left-7":"left-1"}`})})]})]}),t.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[t.jsx("button",{onClick:e,className:"flex-1 py-4 text-xs font-black uppercase tracking-widest text-slate-400 hover:bg-slate-100 rounded-xl transition-colors",children:"Cancel"}),t.jsx("button",{onClick:k,className:"flex-1 py-4 bg-slate-900 text-white rounded-xl text-xs font-black uppercase tracking-widest shadow-lg hover:bg-slate-800 transition-all",children:"Save Changes"})]})]})})},bI=({isOpen:s,onClose:e,currentUmpires:n,availableOfficials:i,onSave:r})=>{const[o,d]=_.useState([]),[u,p]=_.useState("");if(_.useEffect(()=>{s&&d(n||[])},[s,n]),!s)return null;const m=f=>{o.includes(f)?d(o.filter(b=>b!==f)):(o.length>=2,d([...o,f]))};return t.jsx("div",{className:"fixed inset-0 bg-slate-950/80 backdrop-blur-md z-[300] flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[2.5rem] shadow-2xl animate-in zoom-in-95 overflow-hidden flex flex-col max-h-[80vh]",children:[t.jsxs("div",{className:"bg-slate-900 p-8 border-b border-slate-800",children:[t.jsx("h3",{className:"text-2xl font-black text-white mb-1",children:"Match Officials"}),t.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-widest",children:"Assign Umpires & Referees"})]}),t.jsxs("div",{className:"p-6 flex-1 overflow-y-auto custom-scrollbar space-y-4",children:[i.length===0&&t.jsx("div",{className:"text-center py-8 text-slate-400 text-xs font-bold uppercase tracking-widest",children:"No officials found in this organization."}),t.jsx("div",{className:"grid grid-cols-1 gap-2",children:i.map(f=>{const b=o.includes(f.id);return t.jsxs("button",{onClick:()=>m(f.id),className:`p-4 rounded-xl border flex items-center justify-between transition-all ${b?"bg-indigo-600 border-indigo-600 text-white shadow-md":"bg-slate-50 border-slate-100 text-slate-600 hover:bg-slate-100"}`,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black ${b?"bg-white text-indigo-600":"bg-white border border-slate-200"}`,children:f.name.charAt(0)}),t.jsxs("div",{className:"text-left",children:[t.jsx("div",{className:"font-bold text-sm",children:f.name}),t.jsxs("div",{className:`text-[10px] uppercase font-bold ${b?"text-indigo-200":"text-slate-400"}`,children:["ID: ",f.handle]})]})]}),b&&t.jsx("span",{className:"text-xl",children:""})]},f.id)})})]}),t.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-4",children:[t.jsx("button",{onClick:e,className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs hover:text-slate-600 transition-all",children:"Cancel"}),t.jsxs("button",{onClick:()=>{r(o),e()},className:"flex-1 py-4 bg-emerald-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-emerald-400 transition-all",children:["Confirm Officials (",o.length,")"]})]})]})})},vI=(s,e,n=11,i=!1,r="T20")=>{var p,m;if((p=s.adjustments)!=null&&p.declared)return"Declared";if((m=s.adjustments)!=null&&m.concluded)return"Match Concluded";const o=n>0?n:11,d=Math.max(0,o-1),u=i?d:Math.min(10,d);return s.wickets>=u?"All Out":r!=="Test"&&s.totalBalls>=e*6?"Overs Completed":s.target!==void 0&&s.score>=s.target?"Target Chased":null},zg="cricket-audio-commentary-settings",Wu={enabled:!1,voiceIndex:0,speed:.95,pitch:1.1,volume:1};function yI(s){if(s.length===0)return 0;const e=["Google UK English Male","Google US English Male","Microsoft David","Microsoft Mark","Alex","Daniel","Google UK English Female","Google US English Female","Microsoft Zira","Samantha"];for(const i of e){const r=s.findIndex(o=>o.name.includes(i));if(r!==-1)return r}const n=s.findIndex(i=>i.lang.startsWith("en"));return n!==-1?n:0}const wI=()=>{const[s,e]=_.useState(()=>{if(typeof window>"u")return Wu;const S=localStorage.getItem(zg);return S?{...Wu,...JSON.parse(S)}:Wu}),[n,i]=_.useState(!1),[r,o]=_.useState([]),d=_.useRef([]),u=typeof window<"u"&&"speechSynthesis"in window;_.useEffect(()=>{if(!u)return;const S=()=>{const R=window.speechSynthesis.getVoices();if(o(R),R.length>0&&s.voiceIndex===0){const A=yI(R);A!==0&&e(I=>({...I,voiceIndex:A}))}};return S(),window.speechSynthesis.onvoiceschanged=S,()=>{window.speechSynthesis.onvoiceschanged=null}},[u]),_.useEffect(()=>{typeof window<"u"&&localStorage.setItem(zg,JSON.stringify(s))},[s]);const p=_.useCallback(()=>{if(!u||d.current.length===0||n)return;const S=d.current.shift();if(!S)return;const R=new SpeechSynthesisUtterance(S);r[s.voiceIndex]&&(R.voice=r[s.voiceIndex]),R.rate=s.speed,R.pitch=s.pitch,R.volume=s.volume,R.onstart=()=>i(!0),R.onend=()=>{i(!1),setTimeout(()=>p(),100)},R.onerror=()=>{i(!1),setTimeout(()=>p(),100)},window.speechSynthesis.speak(R)},[u,n,r,s]),m=_.useCallback(S=>{!u||!s.enabled||!S.trim()||(d.current.push(S),p())},[u,s.enabled,p]),f=_.useCallback(()=>{u&&(window.speechSynthesis.cancel(),d.current=[],i(!1))},[u]),b=_.useCallback(S=>{e(R=>({...R,enabled:S})),S||f()},[f]),y=_.useCallback(S=>{e(R=>({...R,voiceIndex:S}))},[]),N=_.useCallback(S=>{e(R=>({...R,speed:S}))},[]),k=_.useCallback(S=>{e(R=>({...R,pitch:S}))},[]),T=_.useCallback(S=>{e(R=>({...R,volume:S}))},[]);return{enabled:s.enabled,speaking:n,voices:r,settings:s,speak:m,cancel:f,setEnabled:b,setVoice:y,setSpeed:N,setPitch:k,setVolume:T,isSupported:u}},NI=({enabled:s,speaking:e,onToggle:n,onOpenSettings:i,isSupported:r})=>r?t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("button",{onClick:n,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${s?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-slate-200 text-slate-600 hover:bg-slate-300"}`,title:s?"Disable audio commentary":"Enable audio commentary",children:[t.jsx("span",{className:"text-base",children:s?"":""}),t.jsx("span",{children:s?"Commentary On":"Commentary Off"}),e&&s&&t.jsx("span",{className:"inline-block w-2 h-2 bg-white rounded-full animate-pulse"})]}),s&&t.jsx("button",{onClick:i,className:"w-8 h-8 flex items-center justify-center bg-slate-200 text-slate-600 rounded-lg hover:bg-slate-300 transition-all",title:"Audio settings",children:""})]}):t.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-100 rounded-lg text-xs text-slate-400",children:[t.jsx("span",{children:""}),t.jsx("span",{children:"Audio not supported"})]}),jI=({isOpen:s,onClose:e,voices:n,settings:i,onVoiceChange:r,onSpeedChange:o,onPitchChange:d,onVolumeChange:u,onTest:p})=>s?t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[t.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Audio Commentary Settings"}),t.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center bg-slate-100 hover:bg-slate-200 rounded-lg transition-all",children:""})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Voice"}),t.jsx("select",{value:i.voiceIndex,onChange:m=>r(Number(m.target.value)),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",children:n.map((m,f)=>t.jsxs("option",{value:f,children:[m.name," (",m.lang,")"]},f))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Speed: ",i.speed.toFixed(1),"x"]}),t.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:i.speed,onChange:m=>o(Number(m.target.value)),className:"w-full"}),t.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[t.jsx("span",{children:"Slower"}),t.jsx("span",{children:"Faster"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Pitch: ",i.pitch.toFixed(1)]}),t.jsx("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:i.pitch,onChange:m=>d(Number(m.target.value)),className:"w-full"}),t.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[t.jsx("span",{children:"Lower"}),t.jsx("span",{children:"Higher"})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Volume: ",Math.round(i.volume*100),"%"]}),t.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:i.volume,onChange:m=>u(Number(m.target.value)),className:"w-full"}),t.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[t.jsx("span",{children:"Quiet"}),t.jsx("span",{children:"Loud"})]})]}),t.jsx("button",{onClick:p,className:"w-full px-4 py-3 bg-indigo-600 text-white font-bold rounded-lg hover:bg-indigo-700 transition-all",children:" Test Voice"})]}),t.jsx("div",{className:"sticky bottom-0 bg-slate-50 border-t border-slate-200 px-6 py-4 rounded-b-2xl",children:t.jsx("button",{onClick:e,className:"w-full px-4 py-2 bg-slate-900 text-white font-bold rounded-lg hover:bg-slate-800 transition-all",children:"Done"})})]})}):null,kI=({match:s,teams:e,userRole:n,onUpdateMatchState:i,onComplete:r,onAddMediaPost:o,onExit:d,currentUserId:u,organizations:p})=>{var it,Yt,Ds,on,cn,xs,vs,Ss,de,Ie,Ye,H,ve,Se,nt,gt,Rt;const m=s.savedState||{battingTeamId:s.teamAId,bowlingTeamId:s.teamBId,score:0,wickets:0,totalBalls:0,strikerId:((it=s.initialPlayers)==null?void 0:it.strikerId)||"",nonStrikerId:((Yt=s.initialPlayers)==null?void 0:Yt.nonStrikerId)||"",bowlerId:((Ds=s.initialPlayers)==null?void 0:Ds.bowlerId)||"",innings:1,history:[],inningsScores:[],isCompleted:!1,matchTimer:{startTime:null,totalAllowances:0,isPaused:!1,lastPauseTime:null},umpires:s.umpires||[]},f=Y2(m),b=K2(),y=Q2(),N=e.find(pe=>pe.id===f.state.battingTeamId),k=e.find(pe=>pe.id===f.state.bowlingTeamId),T=X2(s,f.state,k),S=Nv(f.state,T.totalOversAllowed,N,k),R=Z2(f.state.matchTimer.startTime,f.state.totalBalls,!f.state.isCompleted&&!f.state.matchTimer.isPaused),[A,I]=_.useState(!1),[j,E]=_.useState(!1),[D,L]=_.useState(!f.state.strikerId&&!s.savedState),[G,Y]=_.useState(!1),[q,ce]=_.useState(!1),[Q,ne]=_.useState(!1),[ee,se]=_.useState(!1),M=wI(),[B,Z]=_.useState(!1),[Ne,ae]=_.useState("SCORING"),[P,W]=_.useState({open:!1,reason:null}),[X,we]=_.useState(null),[te,_e]=_.useState(null),[re,Re]=_.useState(null),[$e,ue]=_.useState("SUMMARY"),be=n==="Scorer"||n==="Administrator"||n==="Umpire"&&((on=s.umpires)==null?void 0:on.includes(u)),Te=f.state.activeScorerId&&f.state.activeScorerId!==u,$=!be||Te,oe=()=>{!f.state.activeScorerId&&u&&f.updateMetadata({activeScorerId:u})},Ae=_.useMemo(()=>{const pe=p.find(Oe=>Oe.fixtures.some(Xe=>Xe.id===s.id));return pe?pe.members.filter(Oe=>Oe.role==="Umpire"||Oe.role==="Match Official").map(Oe=>({id:Oe.userId,name:Oe.name,handle:Oe.handle,role:"Umpire",createdAt:Oe.addedAt})):[]},[p,s.id]),De=()=>{const pe=f.state.battingTeamId,Oe=f.state.bowlingTeamId,Xe=f.state.inningsScores||[];let lt="",zt="";const Mt=Xe.filter(Wt=>Wt.teamId===pe&&Wt.isComplete).reduce((Wt,es)=>Wt+es.score,0),ct=Xe.filter(Wt=>Wt.teamId===Oe&&Wt.isComplete).reduce((Wt,es)=>Wt+es.score,0),wt=f.state.score,Ws=Mt+wt;if(ct+(f.state.innings===4,0),f.state.innings!==1){if(f.state.innings===2){const Wt=Xe.find(es=>es.innings===1);if(Wt){const es=Ws-Wt.score;es>0?lt=`Lead by ${es}`:es<0?lt=`Trail by ${Math.abs(es)}`:lt="Scores Level"}}else if(f.state.innings===3){const Wt=Ws-ct;Wt>0?lt=`Lead by ${Wt}`:lt=`Trail by ${Math.abs(Wt)}`}else if(f.state.innings===4){const Wt=ct-Mt+1,es=Wt-wt;zt=`Target: ${Wt}`,es>0?lt=`Need ${es} to win`:lt=`Win by ${10-f.state.wickets} wickets`}}return{leadText:lt,targetText:zt}},{leadText:Me,targetText:Be}=De(),ze=()=>{f.triggerLastHour()};_.useEffect(()=>{new URLSearchParams(window.location.search).get("tab")==="SUMMARY"&&ae("SUMMARY")},[]),_.useEffect(()=>{i(s.id,f.state)},[f.state,s.id]),_.useEffect(()=>{const pe=vI(f.state,T.totalOversAllowed,N==null?void 0:N.players.length,s.allowFlexibleSquad,s.format);pe?W({open:!0,reason:pe}):!f.state.isCompleted&&!D&&(f.state.strikerId?f.state.nonStrikerId||Re("NonStriker"):Re("Striker"))},[f.state,T.totalOversAllowed,N,s,D]);const Ke=pe=>{if(!$){if(oe(),f.applyBall({runs:pe}),M.enabled){const Oe=N==null?void 0:N.players.find(Mt=>Mt.id===f.state.strikerId),Xe=k==null?void 0:k.players.find(Mt=>Mt.id===f.state.bowlerId),lt=zu({runs:pe,batter:Oe,bowler:Xe});M.speak(lt);const zt=f.state.totalBalls;if(zt>0&&zt%6===0){const Mt=Math.floor(zt/6),ct=N==null?void 0:N.players.find(Wt=>Wt.id===f.state.strikerId),wt=S.batterStats[f.state.strikerId],Ws=$2({overNumber:Mt,score:f.state.score,wickets:f.state.wickets,currentRunRate:S.runRate.toString(),innings:f.state.innings,target:f.state.target,requiredRate:S.requiredRate.toString(),batterName:ct==null?void 0:ct.name,batterScore:wt==null?void 0:wt.runs,projectedScore:f.state.innings===1&&S.runRate?Math.round((S.runRate||0)*T.totalOversAllowed):void 0,lead:f.state.lead});setTimeout(()=>{M.speak(Ws)},2e3)}}Q&&E(!0)}},Ce=(pe,Oe,Xe)=>{if($)return;oe();let lt="None";if(pe==="Wide"&&(lt="Wide"),pe==="NoBall"&&(lt="NoBall"),pe==="Bye"&&(lt="Bye"),pe==="LegBye"&&(lt="LegBye"),f.applyBall({extraType:lt,extraRuns:Xe?0:Oe,runs:Xe?Oe:0,batRuns:Xe?Oe:0}),M.enabled){const zt=k==null?void 0:k.players.find(ct=>ct.id===f.state.bowlerId),Mt=zu({runs:Oe,isWide:lt==="Wide",isNoBall:lt==="NoBall",isBye:lt==="Bye",isLegBye:lt==="LegBye",bowler:zt});M.speak(Mt)}b.resetPad(),Q&&E(!0)},St=()=>{if($)return;const pe=f.state.strikerId,Oe=f.state.nonStrikerId;f.updateMetadata({strikerId:Oe,nonStrikerId:pe})},Ee=()=>{$||(oe(),s.format==="Test"&&f.state.innings<4?(f.endInnings(!1),f.startInnings(f.state.bowlingTeamId,f.state.battingTeamId,void 0,!1)):(s.format!=="Test"&&f.state.innings<2||s.format==="Test"&&f.state.innings===1)&&(f.endInnings(!1),f.startInnings(f.state.bowlingTeamId,f.state.battingTeamId,f.state.score+1)),W({open:!1,reason:null}),L(!0))},Ue=_.useMemo(()=>{if(Be)return Be;if(Me)return Me;if(f.state.target){const pe=f.state.target-f.state.score;return pe>0?`Target: ${f.state.target} (${pe} to win)`:"Target Reached"}return null},[f.state.target,f.state.score,Me,Be]),qe=()=>{f.endInnings(!0),i(s.id,f.state,"Completed"),r()},mt=()=>{var zt,Mt;const pe=e.find(ct=>ct.id===s.teamAId),Oe=e.find(ct=>ct.id===s.teamBId);let Xe="Game in Progress";if(f.state.isCompleted){const ct=((zt=f.state.inningsScores.find(Ws=>Ws.teamId===(pe==null?void 0:pe.id)))==null?void 0:zt.score)||0,wt=((Mt=f.state.inningsScores.find(Ws=>Ws.teamId===(Oe==null?void 0:Oe.id)))==null?void 0:Mt.score)||0;ct>wt?Xe=`${pe==null?void 0:pe.name} won by ${ct-wt} runs`:wt>ct?Xe=`${Oe==null?void 0:Oe.name} won`:Xe="Match Tied"}const lt={id:`post-${Date.now()}`,type:"LIVE_STATUS",authorName:"Match Scorer",caption:` ${pe==null?void 0:pe.name} vs ${Oe==null?void 0:Oe.name}
Status: ${Xe}
Score: ${f.state.score}/${f.state.wickets} (${Math.floor(f.state.totalBalls/6)}.${f.state.totalBalls%6} ov)`,timestamp:Date.now(),likes:[],dislikes:[],shares:0,comments:[],matchId:s.id};o(lt),alert("Match summary pinned to Media Center!")},ft=()=>{f.endInnings(!0),i(s.id,f.state,"Completed"),r()},ot=()=>{f.startInnings(f.state.battingTeamId,f.state.bowlingTeamId,void 0,!0),W({open:!1,reason:null})},pt=()=>{i(s.id,f.state),alert("Game Saved Successfully!")},Ze=s.format==="Test"&&f.state.innings===2,He=(pe,Oe,Xe)=>{f.state.history.length>0&&f.editBall(f.state.history[0].timestamp,{pitchCoords:pe,shotCoords:Oe,shotHeight:Xe})},bt=()=>{const Xe=(window.screen.width-800)/2,lt=(window.screen.height-600)/2;window.open(`${window.location.origin}${window.location.pathname}?mode=scoreboard`,"ScoreboardWindow",`width=800,height=600,left=${Xe},top=${lt}`)},_t=pe=>{f.updateMetadata({umpires:pe})};_.useEffect(()=>{const pe=new BroadcastChannel("cricket_sync_channel"),Oe=p.find(Xe=>Xe.fixtures.some(lt=>lt.id===s.id));return pe.postMessage({type:"UPDATE",state:f.state,teams:{batting:N,bowling:k},sponsors:(Oe==null?void 0:Oe.sponsors)||[],sponsorSettings:Oe==null?void 0:Oe.sponsorSettings}),()=>pe.close()},[f.state,N,k,p,s.id]);const tt=()=>f.state.history[0],Tt=N==null?void 0:N.players.find(pe=>pe.id===f.state.strikerId),Ct=N==null?void 0:N.players.find(pe=>pe.id===f.state.nonStrikerId),Ns=new Set(f.state.history.filter(pe=>pe.innings===f.state.innings&&pe.isWicket&&pe.outPlayerId).map(pe=>pe.outPlayerId)),fs=((N==null?void 0:N.id)===s.teamAId?s.teamASquadIds:s.teamBSquadIds)||[],We=((k==null?void 0:k.id)===s.teamAId?s.teamASquadIds:s.teamBSquadIds)||[],Bt=!s.allowFlexibleSquad,Pt=(N==null?void 0:N.players.filter(pe=>pe.id!==f.state.strikerId&&pe.id!==f.state.nonStrikerId&&!Ns.has(pe.id)&&(!Bt||fs.length===0||fs.includes(pe.id))))||[],xt=(k==null?void 0:k.players.filter(pe=>!Bt||We.length===0||We.includes(pe.id)))||[],Ot=Pt.filter(pe=>!(pe.id===f.state.strikerId||pe.id===f.state.nonStrikerId||f.state.history.some(Xe=>Xe.isWicket&&Xe.outPlayerId===pe.id&&Xe.innings===f.state.innings))),js=Math.floor(f.state.totalBalls/6),ps=f.state.history.some(pe=>{var Oe;return pe.innings===f.state.innings&&pe.over===js&&((Oe=pe.commentary)==null?void 0:Oe.startsWith("EVENT: New Bowler"))}),Ms=f.state.totalBalls>0&&f.state.totalBalls%6===0&&!f.state.isCompleted&&!ps;if(f.state.isCompleted)return $e==="SCORECARD"?t.jsx("div",{className:"h-full bg-slate-950",children:t.jsx(yc,{matchState:f.state,teamA:e.find(pe=>pe.id===s.teamAId),teamB:e.find(pe=>pe.id===s.teamBId),onBack:()=>ue("SUMMARY")})}):t.jsx(Ko,{matchState:f.state,teamA:e.find(pe=>pe.id===s.teamAId),teamB:e.find(pe=>pe.id===s.teamBId),format:s.format,onExit:d,onViewScorecard:()=>ue("SCORECARD")});const ks={match:s,engine:f,teams:e,battingTeam:N,bowlingTeam:k,stats:S,timer:R,pad:b,wicket:y,rules:T,onExit:d,isAuthorized:!$,onComplete:r,handlers:{handleRun:Ke,handleCommitExtra:Ce,handleSwapBatters:St,handleMatchFinish:qe,handleManualConclude:ft,handleManualSave:pt,openScoreboardWindow:bt,handleUpdateOfficials:_t,handleAnalyticsSave:He},modals:{setIsCameraOpen:ce,setShowSubModal:Y,setShowBroadcaster:I,setShowOfficialsModal:se,setShowShotModal:E,autoAnalytics:Q,setAutoAnalytics:ne,showShotModal:j,showStartModal:D,setShowStartModal:L,showSubModal:G,isCameraOpen:q,showOfficialsModal:ee},onEditPlayer:we,onBallClick:_e,mobileTab:Ne,setMobileTab:ae,onPinToMedia:mt};return t.jsxs("div",{className:"h-full w-full relative",children:[Te&&t.jsx("div",{className:"absolute top-0 left-0 right-0 bg-red-600 text-white py-1 px-4 text-center text-[10px] font-black z-[100] animate-pulse",children:" READ ONLY: THIS MATCH IS BEING SCORED BY ANOTHER USER"}),t.jsx(dI,{...ks}),t.jsx("div",{className:"fixed top-4 right-4 z-50",children:t.jsx(NI,{enabled:M.enabled,speaking:M.speaking,onToggle:()=>M.setEnabled(!M.enabled),onOpenSettings:()=>Z(!0),isSupported:M.isSupported})}),s.format==="Test"&&t.jsxs("div",{className:"fixed top-20 right-4 z-40 bg-slate-900/90 backdrop-blur text-white p-3 rounded-lg border border-slate-700 shadow-xl pointer-events-auto flex flex-col items-end gap-2",children:[t.jsxs("div",{className:"text-[10px] font-bold uppercase tracking-widest text-indigo-400",children:["Day ",f.state.currentDay||1,"  ",((cn=f.state.adjustments)==null?void 0:cn.session)||"Session 1"]}),t.jsx("div",{className:"font-mono text-sm font-bold text-white",children:Ue||"Match in Progress"}),(xs=f.state.adjustments)!=null&&xs.isLastHour?t.jsxs("div",{className:"mt-1 bg-amber-500/20 text-amber-400 px-2 py-1 rounded text-xs font-bold border border-amber-500/50 animate-pulse",children:[" LAST HOUR: ",f.state.adjustments.lastHourOversRemaining," Overs"]}):!((vs=f.state.adjustments)!=null&&vs.concluded)&&!f.state.isCompleted&&t.jsx("button",{onClick:ze,className:"mt-1 bg-slate-800 hover:bg-slate-700 text-slate-300 text-[10px] uppercase font-bold px-2 py-1 rounded border border-slate-600 transition-colors",children:"Signal Last Hour"})]}),t.jsx(hI,{isOpen:j,onClose:()=>E(!1),onSave:He,existingPitch:(Ss=tt())==null?void 0:Ss.pitchCoords,existingShot:(de=tt())==null?void 0:de.shotCoords,existingHeight:(Ie=tt())==null?void 0:Ie.shotHeight,ballColor:tt()?tc(tt()):void 0,isWaiting:!tt()||!!((Ye=tt())!=null&&Ye.pitchCoords)&&!!((H=tt())!=null&&H.shotCoords)&&!!((ve=tt())!=null&&ve.shotHeight)}),t.jsx(mI,{open:y.isOpen,batters:[Tt,Ct].filter(Boolean),fielders:xt,wicketType:y.wicketType,outPlayerId:y.outPlayerId,fielderId:y.fielderId,onSelectType:y.setWicketType,onSelectOutPlayer:y.setOutPlayerId,onSelectFielder:y.setFielderId,onConfirm:()=>{if(!$){if(oe(),f.recordWicket({type:"WICKET",wicketType:y.wicketType,batterId:y.outPlayerId,fielderId:y.fielderId||void 0}),M.enabled&&y.wicketType){const pe=N==null?void 0:N.players.find(ct=>ct.id===f.state.strikerId),Oe=N==null?void 0:N.players.find(ct=>ct.id===f.state.nonStrikerId),Xe=k==null?void 0:k.players.find(ct=>ct.id===f.state.bowlerId),lt=[pe,Oe].find(ct=>(ct==null?void 0:ct.id)===y.outPlayerId),zt=k==null?void 0:k.players.find(ct=>(ct==null?void 0:ct.id)===y.fielderId),Mt=zu({runs:0,wicketType:y.wicketType,outPlayer:lt,fielder:zt,bowler:Xe});M.speak(Mt)}y.reset(),Q&&E(!0)}},onCancel:y.reset}),t.jsx(fI,{isOpen:Ms&&be,overNumber:Math.floor(f.state.totalBalls/6)+1,bowlingTeamName:(k==null?void 0:k.name)||"",currentBowlerId:f.state.bowlerId,bowlers:xt,getAvailability:T.getBowlerAvailability,onSelectBowler:pe=>f.applyBall({commentary:"EVENT: New Bowler",bowlerId:pe})}),P.open&&t.jsx("div",{className:"fixed inset-0 z-[200]",children:t.jsx(Ko,{matchState:f.state,teamA:e.find(pe=>pe.id===s.teamAId),teamB:e.find(pe=>pe.id===s.teamBId),format:s.format,onExit:()=>W({open:!1,reason:null}),onViewScorecard:()=>{W({open:!1,reason:null}),ae("SCORECARD")},onPinToMedia:mt,nextInningsAction:(()=>{const pe=s.format==="Test";let Oe=!1;return pe?(f.state.innings===4&&(Oe=!0),f.state.isCompleted&&(Oe=!0)):f.state.innings>=2&&(Oe=!0),Oe?{label:"Finalize Match Result",onClick:qe}:{label:"Start Next Innings",onClick:Ee}})(),followOnAction:Ze?{label:"Enforce Follow-On",onClick:ot}:void 0})}),t.jsx(pI,{isOpen:D,battingPlayers:Pt,bowlingPlayers:xt,onConfirm:(pe,Oe,Xe)=>{$||(oe(),f.updateMetadata({strikerId:pe,nonStrikerId:Oe,bowlerId:Xe}),setTimeout(()=>{f.applyBall({commentary:"EVENT: Match Started",strikerId:pe,nonStrikerId:Oe,bowlerId:Xe,innings:f.state.innings})},50),L(!1))}}),b.padView==="bowler_replacement_select"&&t.jsx(qg,{isOpen:!0,teamName:(k==null?void 0:k.name)||"",availableBatters:xt.filter(pe=>pe.id!==f.state.bowlerId),targetRole:"Striker",onSelect:pe=>{f.replaceBowlerMidOver(pe),b.resetPad(),we(null)}}),re&&!D&&be&&t.jsx(qg,{isOpen:!0,teamName:(N==null?void 0:N.name)||"",availableBatters:Ot,targetRole:re,onSelect:pe=>{re==="Striker"?f.updateMetadata({strikerId:pe}):f.updateMetadata({nonStrikerId:pe}),Re(null)}}),t.jsx(yh,{isOpen:q,onClose:()=>ce(!1),onUpload:(pe,Oe)=>{o({id:Date.now().toString(),type:Oe,contentUrl:pe,authorName:"Scorer",caption:"Match Moment",timestamp:Date.now(),likes:[],dislikes:[],shares:0,comments:[]}),ce(!1)}}),A&&t.jsx(uI,{matchState:f.state,battingTeam:N,bowlingTeam:k,onClose:()=>I(!1)}),t.jsx(bI,{isOpen:ee,onClose:()=>se(!1),currentUmpires:f.state.umpires||[],availableOfficials:Ae,onSave:_t}),X&&t.jsx(xI,{isOpen:!0,onClose:()=>we(null),teamName:X==="bowler"?(k==null?void 0:k.name)||"":(N==null?void 0:N.name)||"",currentPlayerId:X==="bowler"?f.state.bowlerId:X==="@striker"?f.state.strikerId:f.state.nonStrikerId,currentPlayerName:(X==="bowler"?(nt=(Se=k==null?void 0:k.players)==null?void 0:Se.find(pe=>pe.id===f.state.bowlerId))==null?void 0:nt.name:(Rt=(gt=N==null?void 0:N.players)==null?void 0:gt.find(pe=>pe.id===(X==="@striker"?f.state.strikerId:f.state.nonStrikerId)))==null?void 0:Rt.name)||"Unknown Player",role:X==="bowler"?"Bowler":X==="@striker"?"Striker":"NonStriker",availablePlayers:X==="bowler"?xt:Ot,onReplace:(pe,Oe,Xe)=>{f.correctPlayerIdentity(pe,Oe,Xe),we(null)},onRetire:(pe,Oe)=>{f.retireBatter(pe,Oe),we(null),setTimeout(()=>{Re(X==="@striker"?"Striker":"NonStriker")},100)},onInjury:pe=>{f.replaceBowlerMidOver(pe),we(null)}}),t.jsx(gI,{isOpen:!!te,onClose:()=>_e(null),ball:te,onSave:pe=>{te&&f.editBall(te.timestamp,pe)}}),f.state.isCompleted&&$e==="SUMMARY"&&t.jsx(Ko,{matchState:f.state,teamA:e.find(pe=>pe.id===s.teamAId),teamB:e.find(pe=>pe.id===s.teamBId),onExit:d,onViewScorecard:()=>ue("SCORECARD"),totalOvers:T.totalOversAllowed,onPinToMedia:mt}),t.jsx(jI,{isOpen:B,onClose:()=>Z(!1),voices:M.voices,settings:M.settings,onVoiceChange:M.setVoice,onSpeedChange:M.setSpeed,onPitchChange:M.setPitch,onVolumeChange:M.setVolume,onTest:()=>M.speak("This is a test of the audio commentary system. Four! Six! Wicket!")})]})},SI=({fixture:s,team:e,onCancel:n,onSubmit:i,currentUserId:r,allPlayers:o})=>{const[d,u]=_.useState(1),[p,m]=_.useState(""),[f,b]=_.useState(""),[y,N]=_.useState(""),[k,T]=_.useState(""),[S,R]=_.useState(""),[A,I]=_.useState(""),[j,E]=_.useState(""),[D,L]=_.useState(""),[G,Y]=_.useState(null),[q,ce]=_.useState(null),Q=_.useMemo(()=>s.teamASquadIds?o.filter(Ee=>{var Ue;return(Ue=s.teamASquadIds)==null?void 0:Ue.includes(Ee.id)}):o.filter(Ee=>Ee.teamId===s.teamAId),[o,s]),ne=_.useMemo(()=>s.teamBSquadIds?o.filter(Ee=>{var Ue;return(Ue=s.teamBSquadIds)==null?void 0:Ue.includes(Ee.id)}):o.filter(Ee=>Ee.teamId===s.teamBId),[o,s]),[ee,se]=_.useState(()=>[...Q,...ne].map(Ue=>({playerId:Ue.id,playerName:Ue.name,runs:0,balls:0,fours:0,sixes:0,wickets:0,overs:0,maidens:0,runsConceded:0,catches:0,stumpings:0,runOuts:0}))),[M,B]=_.useState(0),[Z,Ne]=_.useState(""),[ae,P]=_.useState(0),[W,X]=_.useState(""),[we,te]=_.useState(0),[_e,re]=_.useState(0),[Re,$e]=_.useState(0),[ue,be]=_.useState(""),[Te,$]=_.useState(0),[oe,Ae]=_.useState(""),[De,Me]=_.useState("TEAM_A"),Be=(Ee,Ue,qe)=>{se(mt=>mt.map(ft=>ft.playerId===Ee?{...ft,[Ue]:qe}:ft))},ze=Ee=>{var qe;const Ue=(qe=Ee.target.files)==null?void 0:qe[0];if(Ue){const mt=URL.createObjectURL(Ue);Y(mt),ce(Ue.type==="application/pdf"?"pdf":"image")}},Ke=Ee=>{Ee.preventDefault();const Ue={id:`report-${Date.now()}`,matchId:s.id,submittedBy:r,timestamp:Date.now(),status:"PENDING",teamAScore:parseInt(p)||0,teamAWickets:parseInt(f)||0,teamAOvers:y||"0",teamBScore:parseInt(k)||0,teamBWickets:parseInt(S)||0,teamBOvers:A||"0",playerPerformances:ee,scorecardPhotoUrl:G||void 0,umpires:[j,D].filter(Boolean),umpireRatings:{...j?{[j]:{rating:M,comment:Z}}:{},...D?{[D]:{rating:ae,comment:W}}:{}},facilityRating:{pitch:we,outfield:_e,facilities:Re,comment:ue},spiritRating:{rating:Te,comment:oe}};i(Ue)},Ce=De==="TEAM_A"?Q:ne,St=De==="TEAM_A"?s.teamAName:s.teamBName;return t.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-2xl border border-slate-100 max-w-5xl mx-auto min-h-[80vh] flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tighter",children:"Match Report"}),t.jsxs("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest mt-1",children:[s.format,"  ",s.venue]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${d===1?"bg-indigo-600 scale-125":"bg-slate-200"}`}),t.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${d===2?"bg-indigo-600 scale-125":"bg-slate-200"}`}),t.jsx("div",{className:`w-3 h-3 rounded-full transition-all ${d===3?"bg-indigo-600 scale-125":"bg-slate-200"}`})]})]}),t.jsx("form",{onSubmit:Ke,className:"flex-1 flex flex-col",children:d===1?t.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-right-8 duration-500",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("h3",{className:"text-xl font-black text-slate-900 border-b-2 border-slate-100 pb-2 flex justify-between",children:[s.teamAName,t.jsx("span",{className:"text-slate-300 text-sm",children:"Team A"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Runs"}),t.jsx("input",{type:"number",min:"0",value:p,onChange:Ee=>m(Ee.target.value),className:"w-full bg-white border-2 border-slate-200 focus:border-indigo-500 rounded-2xl px-5 py-4 font-black text-slate-900 text-lg outline-none focus:ring-4 focus:ring-indigo-100 transition-all placeholder:text-slate-300",placeholder:"0"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Wkts"}),t.jsx("input",{type:"number",min:"0",max:"10",value:f,onChange:Ee=>b(Ee.target.value),className:"w-full bg-white border-2 border-slate-200 focus:border-indigo-500 rounded-2xl px-5 py-4 font-black text-slate-900 text-lg outline-none focus:ring-4 focus:ring-indigo-100 transition-all placeholder:text-slate-300",placeholder:"0"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Overs"}),t.jsx("input",{type:"text",value:y,onChange:Ee=>N(Ee.target.value),className:"w-full bg-white border-2 border-slate-200 focus:border-indigo-500 rounded-2xl px-5 py-4 font-black text-slate-900 text-lg outline-none focus:ring-4 focus:ring-indigo-100 transition-all placeholder:text-slate-300",placeholder:"0.0"})]})]})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("h3",{className:"text-xl font-black text-slate-900 border-b-2 border-slate-100 pb-2 flex justify-between",children:[s.teamBName,t.jsx("span",{className:"text-slate-300 text-sm",children:"Team B"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Runs"}),t.jsx("input",{type:"number",min:"0",value:k,onChange:Ee=>T(Ee.target.value),className:"w-full bg-white border-2 border-slate-200 focus:border-indigo-500 rounded-2xl px-5 py-4 font-black text-slate-900 text-lg outline-none focus:ring-4 focus:ring-indigo-100 transition-all placeholder:text-slate-300",placeholder:"0"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Wkts"}),t.jsx("input",{type:"number",min:"0",max:"10",value:S,onChange:Ee=>R(Ee.target.value),className:"w-full bg-white border-2 border-slate-200 focus:border-indigo-500 rounded-2xl px-5 py-4 font-black text-slate-900 text-lg outline-none focus:ring-4 focus:ring-indigo-100 transition-all placeholder:text-slate-300",placeholder:"0"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Overs"}),t.jsx("input",{type:"text",value:A,onChange:Ee=>I(Ee.target.value),className:"w-full bg-white border-2 border-slate-200 focus:border-indigo-500 rounded-2xl px-5 py-4 font-black text-slate-900 text-lg outline-none focus:ring-4 focus:ring-indigo-100 transition-all placeholder:text-slate-300",placeholder:"0.0"})]})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-6 pt-6 border-t border-slate-100",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Umpire 1"}),t.jsx("input",{type:"text",value:j,onChange:Ee=>E(Ee.target.value),className:"w-full bg-slate-50 border border-slate-200 focus:border-indigo-500 rounded-xl px-4 py-3 font-bold text-slate-700 outline-none focus:ring-2 focus:ring-indigo-100 placeholder:text-slate-300",placeholder:"Name"})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Umpire 2"}),t.jsx("input",{type:"text",value:D,onChange:Ee=>L(Ee.target.value),className:"w-full bg-slate-50 border border-slate-200 focus:border-indigo-500 rounded-xl px-4 py-3 font-bold text-slate-700 outline-none focus:ring-2 focus:ring-indigo-100 placeholder:text-slate-300",placeholder:"Name"})]})]}),t.jsxs("div",{className:"mt-8 bg-indigo-50 p-8 rounded-[2.5rem] border border-indigo-100",children:[t.jsxs("h3",{className:"text-xl font-black text-indigo-900 mb-6 flex items-center gap-2",children:[t.jsx("span",{children:""})," Scorecard File",t.jsx("span",{className:"text-[10px] bg-white text-indigo-500 px-2 py-1 rounded-md uppercase tracking-wider",children:"Required"})]}),t.jsx("div",{className:"relative flex flex-col items-center justify-center border-2 border-dashed border-indigo-200 rounded-[2rem] p-10 bg-white/50 hover:bg-white transition-all group cursor-pointer",children:G?t.jsxs("div",{className:"relative w-full h-48 rounded-2xl overflow-hidden shadow-lg bg-white flex items-center justify-center",children:[q==="image"?t.jsx("img",{src:G,className:"w-full h-full object-contain"}):t.jsxs("div",{className:"text-center p-6",children:[t.jsx("span",{className:"text-4xl",children:""}),t.jsx("p",{className:"font-black text-slate-900 mt-2",children:"PDF Document Uploaded"})]}),t.jsx("button",{type:"button",onClick:Ee=>{Ee.preventDefault(),Y(null)},className:"absolute top-4 right-4 bg-red-500 text-white p-2 rounded-full shadow-xl hover:bg-red-600 transition-colors z-10",children:""})]}):t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-2xl flex items-center justify-center text-indigo-500 mb-4 mx-auto group-hover:scale-110 transition-transform",children:""}),t.jsx("p",{className:"text-indigo-900 font-black uppercase text-xs tracking-widest",children:"Click to upload Scorecard"}),t.jsx("p",{className:"text-slate-400 font-bold text-[10px] mt-2 italic",children:"Support: JPG, PNG, PDF"}),t.jsx("input",{type:"file",accept:"image/*,application/pdf",onChange:ze,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})})]}),t.jsxs("div",{className:"flex gap-4 mt-auto pt-8",children:[t.jsx("button",{type:"button",onClick:n,className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs tracking-widest hover:text-slate-600 transition-colors",children:"Cancel"}),t.jsx("button",{type:"button",onClick:()=>u(2),disabled:!p||!k||!G,className:"flex-[2] py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-2xl shadow-xl hover:bg-indigo-500 disabled:opacity-50 disabled:grayscale transition-all",children:"Next: Player Stats "})]})]}):d===2?t.jsxs("div",{className:"flex-1 flex flex-col animate-in fade-in slide-in-from-right-8 duration-500",children:[t.jsxs("div",{className:"flex bg-slate-100 p-1.5 rounded-2xl border border-slate-200 shadow-inner mb-6 mx-auto w-full max-w-md",children:[t.jsx("button",{type:"button",onClick:()=>Me("TEAM_A"),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${De==="TEAM_A"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"}`,children:s.teamAName}),t.jsx("button",{type:"button",onClick:()=>Me("TEAM_B"),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${De==="TEAM_B"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"}`,children:s.teamBName})]}),t.jsxs("div",{className:"flex-1 overflow-visible",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4 px-2",children:[t.jsxs("h3",{className:"text-xl font-black text-slate-900",children:[St," Performance"]}),t.jsxs("span",{className:"bg-slate-100 text-slate-500 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider",children:[Ce.length," Players"]})]}),t.jsx("div",{className:"max-h-[50vh] overflow-y-auto pr-2 custom-scrollbar space-y-3",children:Ce.map(Ee=>{const Ue=ee.find(qe=>qe.playerId===Ee.id)||{runs:0,balls:0,wickets:0,overs:0,runsConceded:0,catches:0};return t.jsxs("div",{className:"p-5 bg-slate-50 rounded-[1.5rem] border border-slate-200 hover:border-indigo-200 transition-all",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("p",{className:"font-black text-slate-900 text-sm uppercase tracking-tight",children:Ee.name}),t.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:Ee.role==="All-rounder"?"All-Rndr":Ee.role})]}),t.jsxs("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Runs"}),t.jsx("input",{type:"number",min:"0",value:Ue.runs,onChange:qe=>Be(Ee.id,"runs",parseInt(qe.target.value)||0),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-1.5 font-bold text-center outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-50"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Balls"}),t.jsx("input",{type:"number",min:"0",value:Ue.balls,onChange:qe=>Be(Ee.id,"balls",parseInt(qe.target.value)||0),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-1.5 font-bold text-center outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-50"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Wkts"}),t.jsx("input",{type:"number",min:"0",value:Ue.wickets,onChange:qe=>Be(Ee.id,"wickets",parseInt(qe.target.value)||0),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-1.5 font-bold text-center outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-50"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Overs"}),t.jsx("input",{type:"number",min:"0",value:Ue.overs,onChange:qe=>Be(Ee.id,"overs",parseInt(qe.target.value)||0),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-1.5 font-bold text-center outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-50"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Conc"}),t.jsx("input",{type:"number",min:"0",value:Ue.runsConceded,onChange:qe=>Be(Ee.id,"runsConceded",parseInt(qe.target.value)||0),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-1.5 font-bold text-center outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-50"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest block mb-1",children:"Catch"}),t.jsx("input",{type:"number",min:"0",value:Ue.catches,onChange:qe=>Be(Ee.id,"catches",parseInt(qe.target.value)||0),className:"w-full bg-white border border-slate-200 rounded-lg px-2 py-1.5 font-bold text-center outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-50"})]})]})]},Ee.id)})})]}),t.jsxs("div",{className:"flex gap-4 mt-6 pt-6 border-t border-slate-100",children:[t.jsx("button",{type:"button",onClick:()=>u(1),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs tracking-widest hover:text-slate-600 transition-colors",children:" Back"}),t.jsx("button",{type:"button",onClick:()=>u(3),className:"flex-[2] py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-2xl shadow-xl hover:bg-indigo-500 transition-all",children:"Next: Ratings "})]})]}):t.jsxs("div",{className:"flex-1 flex flex-col animate-in fade-in slide-in-from-right-8 duration-500",children:[t.jsxs("div",{className:"space-y-8 overflow-y-auto custom-scrollbar max-h-[60vh] pr-2",children:[(j||D)&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-black text-slate-900 border-b-2 border-slate-100 pb-2",children:"Umpire Performance"}),[{name:j,rating:M,setRating:B,comment:Z,setComment:Ne},{name:D,rating:ae,setRating:P,comment:W,setComment:X}].filter(Ee=>Ee.name).map((Ee,Ue)=>t.jsxs("div",{className:"bg-slate-50 p-6 rounded-2xl border border-slate-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h4",{className:"font-bold text-slate-900",children:Ee.name}),t.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(qe=>t.jsx("button",{type:"button",onClick:()=>Ee.setRating(qe),className:`text-2xl transition-transform hover:scale-110 ${qe<=Ee.rating?"grayscale-0":"grayscale opacity-30"}`,children:""},qe))})]}),t.jsx("input",{value:Ee.comment,onChange:qe=>Ee.setComment(qe.target.value),placeholder:`Feedback for ${Ee.name}...`,className:"w-full bg-white border border-slate-200 rounded-xl px-4 py-3 text-sm outline-none focus:border-indigo-500"})]},Ue))]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-black text-slate-900 border-b-2 border-slate-100 pb-2",children:"Ground & Facilities"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[{label:"Pitch Quality",val:we,set:te},{label:"Outfield",val:_e,set:re},{label:"Facilities",val:Re,set:$e}].map((Ee,Ue)=>t.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border border-slate-200 text-center",children:[t.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:Ee.label}),t.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4,5].map(qe=>t.jsx("button",{type:"button",onClick:()=>Ee.set(qe),className:`text-xl transition-transform hover:scale-110 ${qe<=Ee.val?"grayscale-0":"grayscale opacity-30"}`,children:""},qe))})]},Ue))}),t.jsx("textarea",{value:ue,onChange:Ee=>be(Ee.target.value),placeholder:"Any comments on the ground conditions?",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm outline-none focus:border-indigo-500 h-24 resize-none"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("h3",{className:"text-xl font-black text-slate-900 border-b-2 border-slate-100 pb-2",children:"Spirit of the Game"}),t.jsxs("div",{className:"bg-indigo-50 p-6 rounded-2xl border border-indigo-100",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[t.jsxs("p",{className:"font-bold text-indigo-900 text-sm",children:["Rate the opposition (",De==="TEAM_A"?s.teamBName:s.teamAName,") behavior"]}),t.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(Ee=>t.jsx("button",{type:"button",onClick:()=>$(Ee),className:`text-3xl transition-transform hover:scale-110 ${Ee<=Te?"grayscale-0":"grayscale opacity-30"}`,children:""},Ee))})]}),t.jsx("textarea",{value:oe,onChange:Ee=>Ae(Ee.target.value),placeholder:"Comments on sportsmanship...",className:"w-full bg-white border border-indigo-200 rounded-xl px-4 py-3 text-sm outline-none focus:border-indigo-500 h-20 resize-none"})]})]})]}),t.jsxs("div",{className:"flex gap-4 mt-8 pt-6 border-t border-slate-100",children:[t.jsx("button",{type:"button",onClick:()=>u(2),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs tracking-widest hover:text-slate-600 transition-colors",children:" Back"}),t.jsx("button",{type:"submit",className:"flex-[2] py-4 bg-emerald-500 text-white font-black uppercase text-xs tracking-[0.2em] rounded-2xl shadow-xl hover:bg-emerald-400 transition-all",children:"Submit Report "})]})]})})]})},_I=({isOpen:s,onClose:e,onSubmit:n,teamId:i,currentUserId:r,matchId:o})=>{const[d,u]=_.useState("GAME_ISSUE"),[p,m]=_.useState(""),[f,b]=_.useState(""),[y,N]=_.useState("");if(!s)return null;const k=T=>{T.preventDefault();const S={id:`issue-${Date.now()}`,matchId:o,lodgedBy:r,teamId:i,type:d,title:p,description:f,status:"OPEN",evidenceUrls:y?[y]:[],timestamp:Date.now()};n(S),e()};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/50 backdrop-blur-sm animate-in fade-in duration-200",children:t.jsxs("div",{className:"bg-white rounded-[2rem] w-full max-w-lg shadow-2xl border border-slate-100 flex flex-col max-h-[90vh]",children:[t.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Lodge Report"}),t.jsx("p",{className:"text-slate-400 font-bold text-xs uppercase tracking-widest mt-1",children:"Raise an issue or protest"})]}),t.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-slate-50 hover:bg-slate-100 flex items-center justify-center text-slate-400 font-black transition-colors",children:""})]}),t.jsxs("form",{onSubmit:k,className:"p-8 space-y-6 overflow-y-auto",children:[t.jsx("div",{className:"flex bg-slate-100 p-1.5 rounded-xl",children:["GAME_ISSUE","PROTEST","FEEDBACK"].map(T=>t.jsx("button",{type:"button",onClick:()=>u(T),className:`flex-1 py-3 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all ${d===T?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:T.replace("_"," ")},T))}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Subject / Title"}),t.jsx("input",{required:!0,value:p,onChange:T=>m(T.target.value),className:"w-full bg-slate-50 border-2 border-slate-100 focus:border-indigo-500 rounded-xl px-4 py-3 font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-50 transition-all placeholder:text-slate-300",placeholder:"Brief subject..."})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Detailed Description"}),t.jsx("textarea",{required:!0,value:f,onChange:T=>b(T.target.value),className:"w-full bg-slate-50 border-2 border-slate-100 focus:border-indigo-500 rounded-xl px-4 py-3 font-medium text-slate-700 outline-none focus:ring-4 focus:ring-indigo-50 transition-all placeholder:text-slate-300 min-h-[120px] resize-none",placeholder:"Describe the issue, incident, or feedback in detail..."})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Upload Evidence (Optional)"}),t.jsx("div",{className:"relative border-2 border-dashed border-slate-200 rounded-xl p-6 bg-slate-50 hover:bg-white hover:border-indigo-200 transition-all text-center group",children:y?t.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-slate-100 shadow-sm relative z-20",children:[t.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[t.jsx("span",{className:"text-2xl flex-shrink-0",children:y.includes("pdf")||y.includes("doc")?"":""}),t.jsxs("div",{className:"text-left overflow-hidden",children:[t.jsx("p",{className:"text-xs font-black text-slate-900 line-clamp-1",children:"Evidence Attached"}),t.jsx("p",{className:"text-[9px] font-bold text-emerald-500 uppercase",children:"Ready to submit"})]})]}),t.jsx("button",{type:"button",onClick:T=>{T.preventDefault(),T.stopPropagation(),N("")},className:"w-8 h-8 flex items-center justify-center rounded-full hover:bg-red-50 text-slate-400 hover:text-red-500 transition-colors",children:""})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-12 h-12 bg-indigo-50 text-indigo-500 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform",children:""}),t.jsx("p",{className:"text-slate-400 font-bold text-xs uppercase tracking-widest",children:"Click to upload evidence"}),t.jsx("p",{className:"text-[9px] text-slate-300 mt-1 font-medium",children:"Supports Photos, PDF, Word Docs"}),t.jsx("input",{type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:T=>{var S;if((S=T.target.files)!=null&&S[0]){const R=URL.createObjectURL(T.target.files[0]);N(R)}},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"})]})})]})]}),t.jsx("div",{className:"p-8 border-t border-slate-100 bg-slate-50 rounded-b-[2rem]",children:t.jsx("button",{onClick:k,className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-xl shadow-xl hover:bg-indigo-500 transition-all hover:scale-[1.02] active:scale-[0.98]",children:"Submit Report"})})]})})},TI=({isOpen:s,onClose:e,fixture:n,team:i,onSave:r})=>{const d=n.teamAId===i.id?n.teamASquadIds||[]:n.teamBSquadIds||[],[u,p]=_.useState(d);if(!s)return null;const m=b=>{if(u.includes(b))p(y=>y.filter(N=>N!==b));else{if(u.length>=11){alert("You can only select 11 players!");return}p(y=>[...y,b])}},f=()=>{r(n.id,u),e()};return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm animate-in fade-in duration-200",children:t.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[t.jsxs("div",{className:"p-6 bg-slate-50 border-b border-slate-100 flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-black text-slate-800",children:"Select Playing XI"}),t.jsxs("p",{className:"text-slate-500 font-bold text-xs uppercase tracking-widest",children:[n.venue,"  ",new Date(n.date).toLocaleDateString()]})]}),t.jsxs("div",{className:"bg-indigo-100 text-indigo-700 font-black px-4 py-2 rounded-xl text-sm",children:[u.length," / 11"]})]}),t.jsx("div",{className:"p-6 overflow-y-auto flex-1 bg-slate-50/50",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:i.players.map(b=>{const y=u.includes(b.id);return t.jsxs("div",{onClick:()=>m(b.id),className:`p-3 rounded-xl border-2 flex items-center gap-3 cursor-pointer transition-all ${y?"border-indigo-600 bg-indigo-50 shadow-md":"border-slate-200 bg-white hover:border-indigo-300"}`,children:[t.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${y?"border-indigo-600 bg-indigo-600":"border-slate-300"}`,children:y&&t.jsx("span",{className:"text-white text-xs font-bold",children:""})}),t.jsxs("div",{children:[t.jsx("p",{className:`font-bold text-sm leading-tight ${y?"text-indigo-900":"text-slate-700"}`,children:b.name}),t.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400",children:b.role})]})]},b.id)})})}),t.jsxs("div",{className:"p-6 border-t border-slate-100 flex gap-4 justify-end bg-white",children:[t.jsx("button",{onClick:e,className:"px-6 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-100 transition-colors",children:"Cancel"}),t.jsx("button",{onClick:f,disabled:u.length===0,className:"bg-indigo-600 text-white px-8 py-3 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-200 disabled:opacity-50 disabled:shadow-none",children:"Save Squad"})]})]})})},Wg=({team:s,fixtures:e,allPlayers:n,onBack:i,onSubmitReport:r,onLodgeProtest:o,currentUser:d,issues:u=[],onUpdateFixtureSquad:p})=>{console.log(" CaptainsProfile RENDERED",{team:s,fixturesCount:e.length});const[m,f]=_.useState("OVERVIEW"),[b,y]=_.useState(null),[N,k]=_.useState(null),[T,S]=_.useState(!1),R=_.useMemo(()=>[...s.players].sort((E,D)=>{const L=(E.stats.runs+E.stats.wickets*25)/(E.stats.matches||1);return(D.stats.runs+D.stats.wickets*25)/(D.stats.matches||1)-L}).slice(0,11),[s.players]),A=_.useMemo(()=>e.filter(j=>j&&!j.reportSubmission&&(j.teamAId===s.id||j.teamBId===s.id)&&(j.status==="Completed"||new Date(j.date).getTime()<Date.now())),[e,s.id]);_.useEffect(()=>{A.length>0&&console.log("Push Notification Sent: Captain Report Required for",A.map(j=>j.id))},[A.length]);const I=e.filter(j=>j&&j.reportSubmission&&(j.teamAId===s.id||j.teamBId===s.id)).map(j=>j.reportSubmission);return console.log(" CaptainsProfile STATE",{view:m,pendingCount:A.length,submittedCount:I.length}),t.jsxs("div",{className:"max-w-6xl mx-auto p-6 md:p-12 min-h-screen animate-in fade-in slide-in-from-bottom-4 duration-700",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-12 gap-8",children:[t.jsxs("div",{children:[t.jsx("button",{onClick:i,className:"text-slate-400 font-bold uppercase text-[10px] tracking-[0.2em] mb-4 hover:text-indigo-500 transition-colors",children:" Back"}),t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx("div",{className:"w-20 h-20 bg-indigo-600 rounded-3xl flex items-center justify-center text-white text-3xl font-black shadow-2xl",children:s.name.charAt(0)}),t.jsxs("div",{children:[t.jsxs("h1",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:[s.name," Hub"]}),t.jsxs("p",{className:"text-slate-500 font-bold uppercase text-xs tracking-widest mt-1",children:[d.role==="Coach"?"Coach":"Captain",": ",d.name,t.jsx("button",{onClick:i,className:"ml-4 text-[9px] bg-slate-100 hover:bg-slate-200 text-slate-500 py-1 px-3 rounded-full transition-all",children:"Back"})]})]})]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center",children:[t.jsx("button",{onClick:()=>S(!0),className:"bg-red-50 text-red-500 px-6 py-3 rounded-xl font-black text-[10px] uppercase tracking-[0.2em] hover:bg-red-100 transition-colors shadow-sm border border-red-100",children:" Lodge Report"}),t.jsxs("div",{className:"flex bg-slate-100 p-1.5 rounded-2xl border border-slate-200 shadow-inner w-fit",children:[t.jsx("button",{onClick:()=>f("OVERVIEW"),className:`px-8 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${m==="OVERVIEW"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"}`,children:"Squad"}),t.jsx("button",{onClick:()=>f("INSIGHTS"),className:`px-8 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${m==="INSIGHTS"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"}`,children:"Insights"}),t.jsxs("button",{onClick:()=>f("REPORTS"),className:`px-8 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${m==="REPORTS"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"} relative`,children:["Reports",A.length>0&&t.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white animate-pulse"})]})]})]})]}),m==="OVERVIEW"&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[t.jsx("div",{className:"lg:col-span-2 space-y-8",children:t.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[t.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-8 flex items-center gap-3",children:["Current Squad",t.jsxs("span",{className:"text-xs bg-indigo-50 text-indigo-500 px-3 py-1 rounded-full",children:[s.players.length," Players"]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.players.map(j=>t.jsxs("div",{className:"flex items-center justify-between p-5 bg-slate-50 rounded-3xl border border-slate-100 hover:border-indigo-200 transition-all group",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-200 overflow-hidden",children:j.photoUrl?t.jsx("img",{src:j.photoUrl,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-slate-400 font-black text-xs",children:"PIC"})}),t.jsxs("div",{children:[t.jsx("p",{className:"font-black text-slate-900 group-hover:text-indigo-600 transition-colors uppercase text-sm tracking-tight",children:j.name}),t.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:j.role})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-lg font-black text-slate-900",children:j.stats.runs}),t.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase",children:"Runs"})]})]},j.id))})]})}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-10 shadow-2xl text-white",children:[t.jsxs("h3",{className:"text-2xl font-black mb-8 flex items-center gap-3",children:["Submissions",A.length>0&&t.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"})]}),A.length===0?t.jsx("div",{className:"text-center py-10 opacity-40",children:t.jsx("p",{className:"font-bold text-sm",children:"All match results submitted."})}):t.jsx("div",{className:"space-y-4",children:A.map(j=>t.jsxs("div",{className:"p-6 bg-white/10 rounded-[2rem] border border-white/5 space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest",children:"Post-Match Report"}),t.jsx("p",{className:"text-[10px] font-black text-white/40 uppercase",children:j.date})]}),t.jsxs("p",{className:"font-black text-xl leading-none",children:[j.teamAName," vs ",j.teamBName]}),t.jsx("button",{onClick:()=>{y(j),f("REPORT_FORM")},className:"w-full py-4 bg-indigo-600 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] shadow-xl hover:bg-indigo-500 transition-all",children:"Open Result Sheet"})]},j.id))})]}),t.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[t.jsx("h3",{className:"text-xl font-black text-slate-900 mb-6",children:"History"}),t.jsxs("div",{className:"space-y-4",children:[I.length===0&&t.jsx("p",{className:"text-slate-400 text-center py-8 font-bold text-xs uppercase tracking-widest",children:"No reports yet"}),I.slice(0,3).map(j=>{var E,D;return t.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[t.jsxs("div",{children:[t.jsxs("p",{className:"font-black text-slate-900 text-[10px] uppercase tracking-tight",children:[(E=e.find(L=>L.id===j.matchId))==null?void 0:E.teamAName," v ",(D=e.find(L=>L.id===j.matchId))==null?void 0:D.teamBName]}),t.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-widest leading-loose",children:new Date(j.timestamp).toLocaleDateString()})]}),t.jsx("span",{className:`px-2 py-1 rounded-full text-[7px] font-black uppercase tracking-widest ${j.status==="VERIFIED"?"bg-emerald-50 text-emerald-600":j.status==="REJECTED"?"bg-red-50 text-red-600":"bg-indigo-50 text-indigo-600"}`,children:j.status})]},j.id)})]})]})]})]}),m==="REPORTS"&&t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[t.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[t.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[t.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-8 flex items-center gap-3",children:["Match Reports History",t.jsxs("span",{className:"text-xs bg-indigo-50 text-indigo-500 px-3 py-1 rounded-full",children:[I.length," Submitted"]})]}),t.jsxs("div",{className:"space-y-4",children:[I.length===0&&t.jsxs("div",{className:"text-center py-20 flex flex-col items-center gap-4",children:[t.jsx("span",{className:"text-4xl opacity-20",children:""}),t.jsx("p",{className:"text-slate-400 font-black uppercase text-xs tracking-widest",children:"No reports submitted yet"})]}),I.map(j=>{var E,D;return t.jsxs("div",{className:"p-6 bg-slate-50 rounded-[2rem] border border-slate-200 flex items-center justify-between group hover:border-indigo-200 transition-all",children:[t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center text-xl font-black ${j.status==="VERIFIED"?"bg-emerald-100 text-emerald-600":j.status==="REJECTED"?"bg-red-100 text-red-600":"bg-indigo-100 text-indigo-600"}`,children:j.status==="VERIFIED"?"":j.status==="REJECTED"?"":"?"}),t.jsxs("div",{children:[t.jsxs("p",{className:"font-black text-slate-900 text-lg uppercase tracking-tight",children:[(E=e.find(L=>L.id===j.matchId))==null?void 0:E.teamAName," vs ",(D=e.find(L=>L.id===j.matchId))==null?void 0:D.teamBName]}),t.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mt-1",children:["Submitted: ",new Date(j.timestamp).toLocaleDateString()]})]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-2",children:[t.jsx("span",{className:`px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${j.status==="VERIFIED"?"bg-emerald-100 text-emerald-600":j.status==="REJECTED"?"bg-red-100 text-red-600":"bg-indigo-100 text-indigo-600"}`,children:j.status}),j.adminFeedback&&t.jsxs("p",{className:"text-[9px] font-bold text-red-500 max-w-[150px] text-right italic",children:['"',j.adminFeedback,'"']})]})]},j.id)})]})]}),t.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[t.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-8 flex items-center gap-3",children:["Protests & Issues",t.jsxs("span",{className:"text-xs bg-orange-50 text-orange-500 px-3 py-1 rounded-full",children:[u.filter(j=>j.teamId===s.id).length," Lodged"]})]}),t.jsxs("div",{className:"space-y-4",children:[u.filter(j=>j.teamId===s.id).length===0&&t.jsxs("div",{className:"text-center py-10 flex flex-col items-center gap-4",children:[t.jsx("span",{className:"text-4xl opacity-20",children:""}),t.jsx("p",{className:"text-slate-400 font-black uppercase text-xs tracking-widest",children:"No active issues or protests"})]}),u.filter(j=>j.teamId===s.id).map(j=>t.jsxs("div",{className:"p-6 bg-slate-50 rounded-[2rem] border border-slate-200 space-y-4 hover:border-indigo-200 transition-all",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-lg font-black ${j.type==="PROTEST"?"bg-red-100 text-red-500":"bg-orange-100 text-orange-500"}`,children:j.type==="PROTEST"?"!":""}),t.jsxs("div",{children:[t.jsx("p",{className:"font-black text-slate-900 uppercase tracking-tight text-sm",children:j.title}),t.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:new Date(j.timestamp).toLocaleDateString()})]})]}),t.jsx("span",{className:`px-3 py-1 rounded-full text-[8px] font-black uppercase tracking-widest ${j.status==="OPEN"?"bg-red-50 text-red-500":j.status==="RESOLVED"||j.status==="DISMISSED"?"bg-emerald-50 text-emerald-600":"bg-indigo-50 text-indigo-500"}`,children:j.status==="RESOLVED"&&j.resolution==="DISMISSED"?"DISMISSED":j.status})]}),j.adminResponse&&t.jsxs("div",{className:`p-4 rounded-2xl border text-xs font-bold ${j.resolution==="UPHELD"?"bg-emerald-50 border-emerald-100 text-emerald-800":j.resolution==="DISMISSED"?"bg-red-50 border-red-100 text-red-800":"bg-slate-100 border-slate-200 text-slate-600"}`,children:[t.jsx("p",{className:"uppercase text-[8px] opacity-50 mb-1",children:"Admin Response:"}),'"',j.adminResponse,'"']})]},j.id))]})]})]}),t.jsx("div",{className:"space-y-8",children:t.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-10 shadow-2xl text-white",children:[t.jsxs("h3",{className:"text-2xl font-black mb-8 flex items-center gap-3",children:["Action Required",A.length>0&&t.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"})]}),A.length===0?t.jsx("div",{className:"text-center py-10 opacity-40",children:t.jsx("p",{className:"font-bold text-sm uppercase tracking-[0.2em] text-[10px]",children:"All results submitted"})}):t.jsx("div",{className:"space-y-4",children:A.map(j=>t.jsxs("div",{className:"p-6 bg-white/10 rounded-[2rem] border border-white/5 space-y-4",children:[t.jsxs("p",{className:"font-black text-xl leading-none",children:[j.teamAName," vs ",j.teamBName]}),t.jsx("button",{onClick:()=>{y(j),f("REPORT_FORM")},className:"w-full py-3 bg-indigo-600 rounded-xl font-black text-[10px] uppercase tracking-[0.2em] shadow-lg hover:bg-indigo-500 transition-all mb-2",children:"Submit Result"}),t.jsx("button",{onClick:()=>k(j.id),className:"w-full py-3 bg-slate-700 rounded-xl font-black text-[10px] uppercase tracking-[0.2em] shadow-lg hover:bg-slate-600 transition-all",children:"Select Playing XI"})]},j.id))})]})})]}),m==="INSIGHTS"&&t.jsxs("div",{className:"space-y-10",children:[t.jsxs("div",{className:"bg-white rounded-[3rem] p-8 shadow-xl border border-slate-100 overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8 px-4",children:[t.jsx("h3",{className:"text-2xl font-black text-slate-900 border-l-4 border-indigo-600 pl-4",children:"Team Performance Analytics"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse"}),t.jsx("span",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest",children:"Live Engine Active"})]})]}),t.jsx(Tb,{teams:[s],onBack:()=>f("OVERVIEW"),hideHeader:!0})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[t.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[t.jsxs("h3",{className:"text-3xl font-black text-slate-900 mb-8 flex items-center gap-4",children:["Best Playing 11",t.jsx("span",{className:"text-[10px] bg-slate-100 px-4 py-2 rounded-full font-black text-slate-400 uppercase tracking-[0.2em] border border-slate-200",children:"AI Logic"})]}),t.jsx("div",{className:"space-y-3",children:R.map((j,E)=>t.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("span",{className:"text-xs font-black text-indigo-500 w-4",children:E+1}),t.jsxs("div",{children:[t.jsx("p",{className:"font-black text-slate-900 text-sm uppercase",children:j.name}),t.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:j.role})]})]}),t.jsx("div",{className:"flex items-center gap-6",children:t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"font-black text-indigo-600 text-xs",children:((j.stats.runs+j.stats.wickets*25)/(j.stats.matches||1)).toFixed(1)}),t.jsx("p",{className:"text-[7px] font-black text-slate-400 uppercase",children:"Impact"})]})})]},j.id))})]}),t.jsx("div",{className:"space-y-10",children:t.jsxs("div",{className:"bg-indigo-600 rounded-[3rem] p-12 text-white shadow-2xl flex flex-col justify-between",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-4xl font-black tracking-tighter mb-4 italic",children:"Performance Summary"}),t.jsx("p",{className:"text-indigo-100 font-bold opacity-80 leading-relaxed",children:"Based on overall season statistics, your squad has a strong batting core. The AI suggests focusing on death bowling efficiency in upcoming practices."})]}),t.jsxs("div",{className:"mt-12 grid grid-cols-3 gap-6",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-black",children:s.players.reduce((j,E)=>j+E.stats.runs,0)}),t.jsx("p",{className:"text-[8px] font-black uppercase text-indigo-200 tracking-widest",children:"Runs"})]}),t.jsxs("div",{className:"text-center border-x border-indigo-400/30",children:[t.jsx("p",{className:"text-3xl font-black",children:s.players.reduce((j,E)=>j+E.stats.wickets,0)}),t.jsx("p",{className:"text-[8px] font-black uppercase text-indigo-200 tracking-widest",children:"Wickets"})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-3xl font-black",children:s.players.length}),t.jsx("p",{className:"text-[8px] font-black uppercase text-indigo-200 tracking-widest",children:"Squad"})]})]})]})})]})]}),m==="REPORT_FORM"&&b&&t.jsx(SI,{fixture:b,onCancel:()=>f("OVERVIEW"),onSubmit:j=>{r(j),f("OVERVIEW")},team:s,currentUserId:d.id,allPlayers:n}),t.jsx(TI,{isOpen:!!N,onClose:()=>k(null),fixture:e.find(j=>j.id===N)||e[0],team:s,onSave:p}),T&&t.jsx(_I,{isOpen:T,onClose:()=>S(!1),onSubmit:j=>{console.log("Issue lodged:",j),o(j),S(!1),alert("Report Logged Successfully. Admin will review shortly.")},teamId:s.id,currentUserId:d.id})]})},jv=({allPlayers:s,allTeams:e,onViewPlayer:n,onBack:i})=>{const[r,o]=_.useState(""),[d,u]=_.useState("ALL"),p=_.useMemo(()=>s.filter(f=>{const b=f.name.toLowerCase().includes(r.toLowerCase()),y=e.find(T=>T.players.some(S=>S.id===f.id)),N=y&&y.name.toLowerCase().includes(r.toLowerCase()),k=d==="ALL"||y&&y.id===d;return(b||N)&&k}),[s,e,r,d]),m={total:p.length,batsmen:p.filter(f=>f.role==="Batsman").length,bowlers:p.filter(f=>f.role==="Bowler").length,allRounders:p.filter(f=>f.role==="All-rounder").length,keepers:p.filter(f=>f.role==="Wicket-keeper").length,runs:p.reduce((f,b)=>f+b.stats.runs,0),wickets:p.reduce((f,b)=>f+b.stats.wickets,0)};return t.jsxs("div",{className:"max-w-[100vw] overflow-x-hidden mx-auto p-4 md:p-12 min-h-screen animate-in fade-in slide-in-from-bottom-4 duration-500",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 md:mb-12 gap-6",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tighter mb-2",children:"Player Registry"}),t.jsx("p",{className:"text-slate-500 font-bold uppercase text-xs tracking-widest",children:"Central Zone Player Database"})]}),t.jsxs("div",{className:"flex items-center gap-4 bg-white p-2 rounded-2xl shadow-lg border border-slate-100 w-full md:w-auto",children:[t.jsxs("div",{className:"relative flex-1 md:flex-none",children:[t.jsx("span",{className:"absolute left-4 top-3.5 text-slate-400",children:""}),t.jsx("input",{type:"text",placeholder:"Search by name...",value:r,onChange:f=>o(f.target.value),className:"bg-slate-50 border border-slate-200 rounded-xl pl-10 pr-4 py-3 text-sm font-bold text-slate-700 w-full md:w-64 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all"})]}),t.jsxs("select",{value:d,onChange:f=>u(f.target.value),className:"bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-bold text-slate-700 focus:outline-none focus:border-indigo-500 transition-all cursor-pointer hover:bg-slate-100 flex-1 md:flex-none",children:[t.jsx("option",{value:"ALL",children:"All Teams"}),e.map(f=>t.jsx("option",{value:f.id,children:f.name},f.id))]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-3 md:gap-4 mb-10",children:[t.jsxs("div",{className:"bg-indigo-600 rounded-2xl p-3 md:p-4 text-white shadow-lg shadow-indigo-200",children:[t.jsx("p",{className:"text-2xl md:text-3xl font-black",children:m.total}),t.jsx("p",{className:"text-[8px] md:text-[9px] uppercase tracking-widest opacity-80 font-bold",children:"Players Found"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-3 md:p-4 border border-slate-100 shadow-sm",children:[t.jsx("p",{className:"text-xl md:text-2xl font-black text-slate-800",children:m.batsmen}),t.jsx("p",{className:"text-[8px] md:text-[9px] uppercase tracking-widest text-slate-400 font-bold",children:"Batsmen"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-3 md:p-4 border border-slate-100 shadow-sm",children:[t.jsx("p",{className:"text-xl md:text-2xl font-black text-slate-800",children:m.bowlers}),t.jsx("p",{className:"text-[8px] md:text-[9px] uppercase tracking-widest text-slate-400 font-bold",children:"Bowlers"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-3 md:p-4 border border-slate-100 shadow-sm",children:[t.jsx("p",{className:"text-xl md:text-2xl font-black text-slate-800",children:m.allRounders}),t.jsx("p",{className:"text-[8px] md:text-[9px] uppercase tracking-widest text-slate-400 font-bold",children:"All-Rounders"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-3 md:p-4 border border-slate-100 shadow-sm",children:[t.jsx("p",{className:"text-xl md:text-2xl font-black text-slate-800 lg:text-2xl overflow-hidden text-ellipsis",children:m.runs.toLocaleString()}),t.jsx("p",{className:"text-[8px] md:text-[9px] uppercase tracking-widest text-slate-400 font-bold whitespace-nowrap",children:"Total Runs"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-3 md:p-4 border border-slate-100 shadow-sm",children:[t.jsx("p",{className:"text-xl md:text-2xl font-black text-slate-800",children:m.wickets.toLocaleString()}),t.jsx("p",{className:"text-[8px] md:text-[9px] uppercase tracking-widest text-slate-400 font-bold whitespace-nowrap",children:"Total Wickets"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:p.map(f=>{const b=e.find(y=>y.players.some(N=>N.id===f.id));return t.jsxs("div",{onClick:()=>n(f.id),className:"bg-white rounded-[2rem] p-6 border border-slate-100 hover:border-indigo-300 hover:shadow-xl hover:-translate-y-1 transition-all cursor-pointer group relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-indigo-50 to-transparent rounded-bl-[4rem] -mr-8 -mt-8 transition-transform group-hover:scale-150"}),t.jsxs("div",{className:"flex items-center gap-4 mb-6 relative",children:[t.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-100 border-2 border-slate-50 shadow-inner overflow-hidden flex items-center justify-center text-2xl",children:f.photoUrl?t.jsx("img",{src:f.photoUrl,className:"w-full h-full object-cover"}):""}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-black text-slate-900 leading-tight group-hover:text-indigo-600 transition-colors line-clamp-1",title:f.name,children:f.name}),t.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:f.role}),b&&t.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-slate-100 rounded-md text-[9px] font-bold text-slate-500 uppercase tracking-wide",children:b.name})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 relative",children:[t.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl text-center",children:[t.jsx("p",{className:"text-xl font-black text-slate-800",children:f.stats.runs}),t.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-wider",children:"Runs"})]}),t.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl text-center",children:[t.jsx("p",{className:"text-xl font-black text-slate-800",children:f.stats.wickets}),t.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-wider",children:"Wickets"})]}),t.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl text-center",children:[t.jsx("p",{className:"text-xl font-black text-slate-800",children:f.stats.matches||0}),t.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-wider",children:"Matches"})]}),t.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl text-center",children:[t.jsx("p",{className:"text-xl font-black text-slate-800",children:(f.stats.runs/(f.stats.matches||1)).toFixed(1)}),t.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-wider",children:"Avg"})]})]})]},f.id)})}),p.length===0&&t.jsxs("div",{className:"text-center py-20",children:[t.jsx("p",{className:"text-6xl mb-4",children:""}),t.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"No Players Found"}),t.jsx("p",{className:"text-slate-500 text-sm",children:"Try adjusting your search terms or filters."})]})]})},Jg=({allTeams:s,allOrganizations:e,onViewTeam:n,onBack:i})=>{const[r,o]=_.useState(""),[d,u]=_.useState("ALL"),p=_.useMemo(()=>s.filter(f=>{const b=f.name.toLowerCase().includes(r.toLowerCase()),y=e.find(k=>{var T;return(T=k.memberTeams)==null?void 0:T.some(S=>S.id===f.id)}),N=d==="ALL"||y&&y.id===d;return b&&N}),[s,e,r,d]),m={total:p.length,totalPlayers:p.reduce((f,b)=>f+b.players.length,0),totalRuns:p.reduce((f,b)=>f+b.players.reduce((y,N)=>y+N.stats.runs,0),0),totalWickets:p.reduce((f,b)=>f+b.players.reduce((y,N)=>y+N.stats.wickets,0),0),totalMatches:p.reduce((f,b)=>f+b.players.reduce((y,N)=>y+N.stats.matches,0),0)};return t.jsxs("div",{className:"max-w-[100vw] overflow-x-hidden mx-auto p-4 md:p-12 min-h-screen animate-in fade-in slide-in-from-bottom-4 duration-500",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 md:mb-12 gap-6",children:[t.jsxs("div",{children:[t.jsx("button",{onClick:i,className:"text-slate-400 font-bold uppercase text-[10px] tracking-[0.2em] mb-4 hover:text-indigo-500 transition-colors",children:" Back"}),t.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 tracking-tighter mb-2",children:"Team Registry"}),t.jsx("p",{className:"text-slate-500 font-bold uppercase text-xs tracking-widest",children:"Central Zone Team Database"})]}),t.jsxs("div",{className:"flex items-center gap-4 bg-white p-2 rounded-2xl shadow-lg border border-slate-100 w-full md:w-auto",children:[t.jsxs("div",{className:"relative flex-1 md:flex-none",children:[t.jsx("span",{className:"absolute left-4 top-3.5 text-slate-400",children:""}),t.jsx("input",{type:"text",placeholder:"Search by team name...",value:r,onChange:f=>o(f.target.value),className:"bg-slate-50 border border-slate-200 rounded-xl pl-10 pr-4 py-3 text-sm font-bold text-slate-700 w-full md:w-64 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all"})]}),t.jsxs("select",{value:d,onChange:f=>u(f.target.value),className:"bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm font-bold text-slate-700 focus:outline-none focus:border-indigo-500 transition-all cursor-pointer hover:bg-slate-100 flex-1 md:flex-none",children:[t.jsx("option",{value:"ALL",children:"All Organizations"}),e.map(f=>t.jsx("option",{value:f.id,children:f.name},f.id))]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 md:gap-4 mb-10",children:[t.jsxs("div",{className:"bg-indigo-600 rounded-2xl p-3 md:p-4 text-white shadow-lg shadow-indigo-200",children:[t.jsx("p",{className:"text-2xl md:text-3xl font-black",children:m.total}),t.jsx("p",{className:"text-[8px] md:text-[9px] uppercase tracking-widest opacity-80 font-bold",children:"Teams Found"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-3 md:p-4 border border-slate-100 shadow-sm",children:[t.jsx("p",{className:"text-xl md:text-2xl font-black text-slate-800",children:m.totalPlayers}),t.jsx("p",{className:"text-[8px] md:text-[9px] uppercase tracking-widest text-slate-400 font-bold",children:"Total Players"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-3 md:p-4 border border-slate-100 shadow-sm",children:[t.jsx("p",{className:"text-xl md:text-2xl font-black text-slate-800",children:m.totalMatches}),t.jsx("p",{className:"text-[8px] md:text-[9px] uppercase tracking-widest text-slate-400 font-bold",children:"Total Matches"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-3 md:p-4 border border-slate-100 shadow-sm",children:[t.jsx("p",{className:"text-xl md:text-2xl font-black text-slate-800 lg:text-2xl overflow-hidden text-ellipsis",children:m.totalRuns.toLocaleString()}),t.jsx("p",{className:"text-[8px] md:text-[9px] uppercase tracking-widest text-slate-400 font-bold whitespace-nowrap",children:"Total Runs"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-3 md:p-4 border border-slate-100 shadow-sm",children:[t.jsx("p",{className:"text-xl md:text-2xl font-black text-slate-800",children:m.totalWickets.toLocaleString()}),t.jsx("p",{className:"text-[8px] md:text-[9px] uppercase tracking-widest text-slate-400 font-bold whitespace-nowrap",children:"Total Wickets"})]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:p.map(f=>{const b=e.find(S=>{var R;return(R=S.memberTeams)==null?void 0:R.some(A=>A.id===f.id)}),y=f.players.reduce((S,R)=>S+R.stats.runs,0),N=f.players.reduce((S,R)=>S+R.stats.wickets,0),k=f.players.reduce((S,R)=>S+R.stats.matches,0),T=k>0?(y/k).toFixed(0):0;return t.jsxs("div",{onClick:()=>n(f.id),className:"bg-white rounded-[2rem] p-6 border border-slate-100 hover:border-indigo-300 hover:shadow-xl hover:-translate-y-1 transition-all cursor-pointer group relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-indigo-50 to-transparent rounded-bl-[4rem] -mr-8 -mt-8 transition-transform group-hover:scale-150"}),t.jsxs("div",{className:"flex items-center gap-4 mb-6 relative",children:[t.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-indigo-600 border-2 border-indigo-50 shadow-lg overflow-hidden flex items-center justify-center text-white text-2xl font-black",children:f.name.charAt(0)}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-black text-slate-900 leading-tight group-hover:text-indigo-600 transition-colors line-clamp-1",title:f.name,children:f.name}),t.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:[f.players.length," Players"]}),b&&t.jsx("span",{className:"inline-block mt-1 px-2 py-0.5 bg-slate-100 rounded-md text-[9px] font-bold text-slate-500 uppercase tracking-wide",children:b.name})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 relative",children:[t.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl text-center",children:[t.jsx("p",{className:"text-xl font-black text-slate-800",children:k}),t.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-wider",children:"Matches"})]}),t.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl text-center",children:[t.jsx("p",{className:"text-xl font-black text-slate-800",children:y.toLocaleString()}),t.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-wider",children:"Runs"})]}),t.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl text-center",children:[t.jsx("p",{className:"text-xl font-black text-slate-800",children:N}),t.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-wider",children:"Wickets"})]}),t.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl text-center",children:[t.jsx("p",{className:"text-xl font-black text-slate-800",children:T}),t.jsx("p",{className:"text-[8px] font-black text-slate-400 uppercase tracking-wider",children:"Avg Runs"})]})]})]},f.id)})}),p.length===0&&t.jsxs("div",{className:"text-center py-20",children:[t.jsx("p",{className:"text-6xl mb-4",children:""}),t.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"No Teams Found"}),t.jsx("p",{className:"text-slate-500 text-sm",children:"Try adjusting your search terms or filters."})]})]})},CI=({teams:s,onSelect:e,onBack:n})=>t.jsxs("div",{className:"max-w-4xl mx-auto p-6 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-indigo-100 rounded-[2rem] mb-6 text-4xl shadow-inner",children:""}),t.jsx("h2",{className:"text-4xl font-black text-slate-900 dark:text-white uppercase tracking-tight mb-3",children:"Captain's Hub"}),t.jsx("p",{className:"text-slate-500 font-bold uppercase text-[10px] tracking-[0.3em]",children:"Select a team to manage"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(i=>t.jsxs("button",{onClick:()=>e(i.id),className:"group relative bg-white dark:bg-slate-900 p-8 rounded-[2.5rem] border-2 border-slate-100 dark:border-slate-800 shadow-xl hover:shadow-2xl hover:border-indigo-500 hover:-translate-y-1 transition-all text-left overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-10 font-black text-9xl text-indigo-900 group-hover:scale-110 transition-transform duration-500",children:i.name.charAt(0)}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("div",{className:"w-16 h-16 bg-slate-100 dark:bg-slate-800 rounded-2xl flex items-center justify-center text-2xl font-black mb-6 group-hover:bg-indigo-600 group-hover:text-white transition-colors shadow-sm",children:i.logoUrl?t.jsx("img",{src:i.logoUrl,alt:i.name,className:"w-full h-full object-cover rounded-2xl"}):i.name.charAt(0)}),t.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white mb-2 group-hover:text-indigo-600 transition-colors",children:i.name}),t.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[t.jsxs("div",{className:"px-3 py-1 rounded-full bg-slate-50 dark:bg-slate-800 text-[10px] font-black uppercase tracking-widest text-slate-500",children:[i.players.length," Players"]}),t.jsx("div",{className:"px-3 py-1 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-[10px] font-black uppercase tracking-widest text-indigo-600 dark:text-indigo-400",children:"Manage"})]})]})]},i.id))}),n&&t.jsx("div",{className:"mt-12 text-center",children:t.jsx("button",{onClick:n,className:"text-slate-400 hover:text-slate-600 font-bold uppercase text-[10px] tracking-widest transition-colors",children:" Back to Dashboard"})})]}),EI=({fixture:s,umpireId:e,umpireName:n,organizationId:i,onSubmit:r,onCancel:o})=>{const d=y=>{if(!y)return 0;const N=y.split("/")[0];return parseInt(N)||0},u=y=>{if(!y)return 0;const N=y.split("/");return N.length>1&&parseInt(N[1])||0},[p,m]=_.useState({pitchCondition:3,groundCondition:3,facilitiesRating:3,teamASpirit:5,teamBSpirit:5,comments:"",winningTeam:"draw",teamAScore:d(s.teamAScore),teamAWickets:u(s.teamAScore),teamAOvers:"0",teamBScore:d(s.teamBScore),teamBWickets:u(s.teamBScore),teamBOvers:"0"}),f=y=>{y.preventDefault();const N={id:"UR-"+Date.now(),matchId:s.id,fixtureId:s.id,submittedBy:e,umpireName:n,timestamp:Date.now(),status:"PENDING",matchOutcome:{winningTeam:p.winningTeam,teamAScore:p.teamAScore,teamAWickets:p.teamAWickets,teamAOvers:p.teamAOvers,teamBScore:p.teamBScore,teamBWickets:p.teamBWickets,teamBOvers:p.teamBOvers},facilityReport:{pitchCondition:p.pitchCondition,outfieldCondition:p.groundCondition,facilitiesRating:p.facilitiesRating,comments:p.comments},playerBehaviorRatings:{teamASpirit:p.teamASpirit,teamBSpirit:p.teamBSpirit,notes:p.comments},organizationId:i,conductNotes:p.comments};r(N)},b=({label:y,value:N,field:k,max:T=5})=>t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:y}),t.jsx("div",{className:"flex bg-slate-100 p-1 rounded-2xl border border-slate-200",children:Array.from({length:T},(S,R)=>R+1).map(S=>t.jsx("button",{type:"button",onClick:()=>m({...p,[k]:S}),className:`flex-1 py-3 rounded-xl text-sm font-black transition-all ${p[k]===S?"bg-white text-indigo-600 shadow-md transform scale-105":"text-slate-400 hover:text-slate-600"}`,children:S},S))})]});return t.jsxs("form",{onSubmit:f,className:"space-y-8",children:[t.jsxs("div",{className:"bg-indigo-50 p-6 rounded-3xl border border-indigo-100",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[t.jsx("span",{className:"text-2xl",children:""}),t.jsxs("h3",{className:"text-lg font-black text-slate-900",children:[s.teamAName," vs ",s.teamBName]})]}),t.jsx("p",{className:"text-xs text-indigo-600 font-bold uppercase tracking-widest px-10",children:"Official Umpire Report"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsx("h4",{className:"text-xs font-black text-slate-900 uppercase tracking-widest border-l-4 border-indigo-600 pl-3",children:"Facility Report"}),t.jsx(b,{label:"Pitch (1-5)",value:p.pitchCondition,field:"pitchCondition"}),t.jsx(b,{label:"Outfield (1-5)",value:p.groundCondition,field:"groundCondition"}),t.jsx(b,{label:"Facilities (1-5)",value:p.facilitiesRating,field:"facilitiesRating"})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsx("h4",{className:"text-xs font-black text-slate-900 uppercase tracking-widest border-l-4 border-emerald-500 pl-3",children:"Spirit of Cricket"}),t.jsx(b,{label:s.teamAName+" (1-5)",value:p.teamASpirit,field:"teamASpirit"}),t.jsx(b,{label:s.teamBName+" (1-5)",value:p.teamBSpirit,field:"teamBSpirit"})]})]}),t.jsxs("div",{className:"space-y-6 pt-6 border-t border-slate-100",children:[t.jsx("h4",{className:"text-xs font-black text-slate-900 uppercase tracking-widest border-l-4 border-amber-500 pl-3",children:"Match Outcome Override"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Winning Team"}),t.jsxs("select",{value:p.winningTeam,onChange:y=>m({...p,winningTeam:y.target.value}),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 font-bold text-slate-700 outline-none",children:[t.jsx("option",{value:"teamA",children:s.teamAName}),t.jsx("option",{value:"teamB",children:s.teamBName}),t.jsx("option",{value:"draw",children:"Draw"}),t.jsx("option",{value:"tie",children:"Tie"}),t.jsx("option",{value:"no_result",children:"No Result"})]})]})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Confidential Match Notes"}),t.jsx("textarea",{value:p.comments,onChange:y=>m({...p,comments:y.target.value}),placeholder:"Provide details on any incidents, player disciplinary issues, or exceptional conduct...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl px-6 py-4 font-bold text-slate-700 focus:ring-2 ring-indigo-500/20 h-40 resize-none outline-none",required:!0})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{type:"button",onClick:o,className:"flex-1 py-5 bg-slate-100 text-slate-600 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-slate-200 transition-all",children:"Cancel"}),t.jsx("button",{type:"submit",className:"flex-[2] py-5 bg-indigo-600 text-white rounded-2xl font-black uppercase text-xs tracking-[0.15em] shadow-xl shadow-indigo-100 hover:bg-indigo-500 transition-all",children:"Verify & Submit Report"})]})]})},AI=({profile:s,fixtures:e,organizations:n,allTeams:i,onBack:r,onCreateFixture:o,onSubmitReport:d})=>{var I,j;const[u,p]=_.useState("assigned"),[m,f]=_.useState(null),[b,y]=_.useState(!1),N=_.useMemo(()=>n.find(E=>E.type==="UMPIRE_ASSOCIATION"&&E.members.some(D=>D.userId===s.id)),[n,s.id]),k=_.useMemo(()=>e.filter(E=>{var D;return((D=E.assignedUmpireIds)==null?void 0:D.includes(s.id))&&E.status!=="Completed"}),[e,s.id]),T=_.useMemo(()=>e.filter(E=>!E.assignedUmpireIds||E.assignedUmpireIds.length===0).slice(0,20),[e]),S=_.useMemo(()=>e.filter(E=>E.umpireReport&&E.umpireReport.submittedBy===s.id),[e,s.id]),R={assigned:k.length,available:T.length,submitted:S.length,matchesOfficiated:((I=s.umpireDetails)==null?void 0:I.matchesOfficiated)||0},A=(E,D=!1)=>{const L=i.find(G=>G.id===E.teamAId);return i.find(G=>G.id===E.teamBId),t.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-100 hover:border-indigo-300 hover:shadow-lg transition-all",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center text-indigo-600 font-black text-lg",children:(L==null?void 0:L.name.charAt(0))||"A"}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-black text-slate-900",children:E.teamAName}),t.jsxs("p",{className:"text-xs text-slate-400 uppercase tracking-wider",children:["vs ",E.teamBName]})]})]}),t.jsx("span",{className:`px-3 py-1 rounded-lg text-xs font-black uppercase tracking-wider ${E.status==="Scheduled"?"bg-blue-100 text-blue-600":E.status==="Live"?"bg-green-100 text-green-600":"bg-slate-100 text-slate-600"}`,children:E.status})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[t.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl",children:[t.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Date"}),t.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(E.date).toLocaleDateString()})]}),t.jsxs("div",{className:"bg-slate-50 p-3 rounded-xl",children:[t.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-wider mb-1",children:"Venue"}),t.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:E.venue})]})]}),D&&E.status==="Completed"&&t.jsx("button",{onClick:()=>{f(E),y(!0)},className:"w-full bg-indigo-600 text-white py-3 rounded-xl font-black text-xs uppercase tracking-widest hover:bg-indigo-500 transition-all",children:"Submit Match Report"})]},E.id)};return t.jsxs("div",{className:"max-w-6xl mx-auto p-6 md:p-12 min-h-screen animate-in fade-in slide-in-from-bottom-4 duration-500",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-12 gap-6",children:[t.jsxs("div",{children:[t.jsx("button",{onClick:r,className:"text-slate-400 font-bold uppercase text-[10px] tracking-[0.2em] mb-4 hover:text-indigo-500 transition-colors",children:" Back"}),t.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tighter mb-2",children:"Umpire Hub"}),t.jsxs("p",{className:"text-slate-500 font-bold uppercase text-xs tracking-widest",children:[s.name,"  ",((j=s.umpireDetails)==null?void 0:j.certificationLevel)||"Umpire"]}),N&&t.jsx("p",{className:"text-indigo-600 font-bold text-sm mt-1",children:N.name})]}),t.jsx("button",{onClick:o,className:"bg-emerald-500 text-white px-6 py-4 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-emerald-400 transition-all shadow-lg",children:"+ Create Fixture"})]}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-10",children:[t.jsxs("div",{className:"bg-indigo-600 rounded-2xl p-4 text-white shadow-lg",children:[t.jsx("p",{className:"text-3xl font-black",children:R.assigned}),t.jsx("p",{className:"text-[9px] uppercase tracking-widest opacity-80 font-bold",children:"Assigned Fixtures"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 shadow-sm",children:[t.jsx("p",{className:"text-2xl font-black text-slate-800",children:R.available}),t.jsx("p",{className:"text-[9px] uppercase tracking-widest text-slate-400 font-bold",children:"Available"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 shadow-sm",children:[t.jsx("p",{className:"text-2xl font-black text-slate-800",children:R.submitted}),t.jsx("p",{className:"text-[9px] uppercase tracking-widest text-slate-400 font-bold",children:"Reports Submitted"})]}),t.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-slate-100 shadow-sm",children:[t.jsx("p",{className:"text-2xl font-black text-slate-800",children:R.matchesOfficiated}),t.jsx("p",{className:"text-[9px] uppercase tracking-widest text-slate-400 font-bold",children:"Career Matches"})]})]}),t.jsxs("div",{className:"flex bg-slate-100 p-1.5 rounded-2xl border border-slate-200 shadow-inner mb-8",children:[t.jsxs("button",{onClick:()=>p("assigned"),className:`flex-1 px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${u==="assigned"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"}`,children:["My Fixtures (",R.assigned,")"]}),t.jsxs("button",{onClick:()=>p("available"),className:`flex-1 px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${u==="available"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"}`,children:["Available (",R.available,")"]}),t.jsxs("button",{onClick:()=>p("submitted"),className:`flex-1 px-6 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${u==="submitted"?"bg-white text-indigo-600 shadow-md":"text-slate-400 hover:text-slate-600"}`,children:["Submitted (",R.submitted,")"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u==="assigned"&&k.map(E=>A(E,!0)),u==="available"&&T.map(E=>A(E,!1)),u==="submitted"&&S.map(E=>A(E,!1))]}),u==="assigned"&&k.length===0&&t.jsxs("div",{className:"text-center py-20",children:[t.jsx("p",{className:"text-6xl mb-4",children:""}),t.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"No Assigned Fixtures"}),t.jsx("p",{className:"text-slate-500 text-sm",children:"You don't have any fixtures assigned yet."})]}),u==="available"&&T.length===0&&t.jsxs("div",{className:"text-center py-20",children:[t.jsx("p",{className:"text-6xl mb-4",children:""}),t.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"All Fixtures Covered"}),t.jsx("p",{className:"text-slate-500 text-sm",children:"There are no available fixtures at the moment."})]}),u==="submitted"&&S.length===0&&t.jsxs("div",{className:"text-center py-20",children:[t.jsx("p",{className:"text-6xl mb-4",children:""}),t.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"No Reports Submitted"}),t.jsx("p",{className:"text-slate-500 text-sm",children:"Submit your first match report after officiating a match."})]}),b&&m&&t.jsx("div",{className:"fixed inset-0 bg-slate-950/90 backdrop-blur-md z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white rounded-[3rem] p-10 max-w-2xl w-full shadow-2xl animate-in zoom-in-95 duration-300 max-h-[90vh] overflow-y-auto",children:[t.jsxs("div",{className:"flex justify-between items-center mb-8",children:[t.jsx("h2",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Submit Match Report"}),t.jsx("button",{onClick:()=>y(!1),className:"text-slate-400 hover:text-slate-600 text-2xl font-black",children:""})]}),t.jsx(EI,{fixture:m,umpireId:s.id,umpireName:s.name,organizationId:(N==null?void 0:N.id)||"GLOBAL",onSubmit:E=>{d(E),y(!1),f(null)},onCancel:()=>y(!1)})]})})]})},II=({submission:s,fixture:e,onApprove:n,onReject:i,onBack:r})=>{const[o,d]=_.useState(""),[u,p]=_.useState(!1);return t.jsxs("div",{className:"max-w-7xl mx-auto p-6 md:p-12 h-full overflow-y-auto custom-scrollbar animate-in fade-in duration-700",children:[t.jsxs("div",{className:"flex items-center justify-between mb-12",children:[t.jsxs("div",{children:[t.jsx("button",{onClick:r,className:"text-slate-400 font-bold uppercase text-[10px] tracking-[0.2em] mb-4 hover:text-indigo-500 transition-colors",children:" Pending Reports"}),t.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tighter italic",children:"Review Match Result"}),t.jsxs("p",{className:"text-slate-500 font-bold uppercase text-xs tracking-widest mt-1",children:["Submitted: ",new Date(s.timestamp).toLocaleString()]})]}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{onClick:()=>p(!0),className:"px-8 py-4 bg-white text-red-500 border border-red-100 rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-lg hover:bg-red-50 transition-all",children:"Reject Report"}),t.jsx("button",{onClick:()=>n(s.id),className:"px-8 py-4 bg-indigo-600 text-white rounded-2xl font-black text-[10px] uppercase tracking-widest shadow-2xl hover:bg-indigo-500 transition-all",children:"Verify & Update Stats"})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 pb-20",children:[t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-slate-900 rounded-[3rem] p-4 shadow-2xl overflow-hidden aspect-[3/4] group relative",children:[s.scorecardPhotoUrl?s.scorecardPhotoUrl.includes("application/pdf")||s.scorecardPhotoUrl.toLowerCase().endsWith(".pdf")?t.jsx("iframe",{src:s.scorecardPhotoUrl,className:"w-full h-full rounded-[2rem] bg-white",title:"Scorecard PDF"}):t.jsx("img",{src:s.scorecardPhotoUrl,className:"w-full h-full object-contain rounded-[2rem] group-hover:scale-105 transition-transform duration-700 cursor-zoom-in",alt:"Scorecard"}):t.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-white/20",children:[t.jsx("span",{className:"text-6xl mb-4",children:""}),t.jsx("p",{className:"font-black uppercase text-xs tracking-widest",children:"No scorecard photo attached"})]}),t.jsx("a",{href:s.scorecardPhotoUrl,target:"_blank",rel:"noopener noreferrer",className:"absolute bottom-6 right-6 bg-white/10 backdrop-blur-md text-white px-4 py-2 rounded-lg font-bold text-xs uppercase hover:bg-white/20 transition-colors",children:"Open Original "})]}),t.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.3em] text-center italic",children:"Scorecard verification document"})]}),t.jsxs("div",{className:"space-y-8",children:[t.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100",children:[t.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-8 border-b-2 border-slate-50 pb-4",children:"Match Summary"}),t.jsxs("div",{className:"grid grid-cols-2 gap-10",children:[t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:e.teamAName}),t.jsxs("p",{className:"text-3xl font-black text-slate-900",children:[s.teamAScore,"/",s.teamAWickets]}),t.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase",children:["Overs: ",s.teamAOvers]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:e.teamBName}),t.jsxs("p",{className:"text-3xl font-black text-slate-900",children:[s.teamBScore,"/",s.teamBWickets]}),t.jsxs("p",{className:"text-[10px] font-bold text-slate-500 uppercase",children:["Overs: ",s.teamBOvers]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-[3rem] p-10 shadow-xl border border-slate-100 overflow-hidden",children:[t.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-8 border-b-2 border-slate-50 pb-4",children:"Player Contributions"}),t.jsx("div",{className:"max-h-[40vh] overflow-y-auto pr-4 custom-scrollbar",children:t.jsxs("table",{className:"w-full text-left",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest border-b border-slate-50",children:[t.jsx("th",{className:"pb-4",children:"Player"}),t.jsx("th",{className:"pb-4 text-right",children:"Runs"}),t.jsx("th",{className:"pb-4 text-right",children:"Wkts"}),t.jsx("th",{className:"pb-4 text-right",children:"Ovs"}),t.jsx("th",{className:"pb-4 text-right",children:"Conc"})]})}),t.jsx("tbody",{className:"divide-y divide-slate-50",children:s.playerPerformances.map(m=>t.jsxs("tr",{className:"group",children:[t.jsx("td",{className:"py-4 font-black text-slate-700 text-sm",children:m.playerName}),t.jsx("td",{className:"py-4 text-right font-black text-indigo-600",children:m.runs}),t.jsx("td",{className:"py-4 text-right font-black text-emerald-600",children:m.wickets}),t.jsx("td",{className:"py-4 text-right font-bold text-slate-500",children:m.overs}),t.jsx("td",{className:"py-4 text-right font-bold text-slate-400",children:m.runsConceded})]},m.playerId))})]})})]})]})]}),u&&t.jsx("div",{className:"fixed inset-0 bg-slate-900/40 backdrop-blur-md z-[100] flex items-center justify-center p-6",children:t.jsxs("div",{className:"bg-white w-full max-w-lg rounded-[3rem] p-12 shadow-2xl animate-in zoom-in duration-300",children:[t.jsx("h3",{className:"text-3xl font-black text-slate-900 mb-4 italic",children:"Rejection Feedback"}),t.jsx("p",{className:"text-slate-500 font-bold mb-8 leading-relaxed",children:"Please let the captain know why this report is being rejected so they can fix and resubmit."}),t.jsx("textarea",{value:o,onChange:m=>d(m.target.value),placeholder:"e.g. Scanned photo is blurry, or runs total does not match...",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl p-6 font-bold text-slate-700 outline-none focus:ring-2 focus:ring-red-500 h-40 resize-none mb-8"}),t.jsxs("div",{className:"flex gap-4",children:[t.jsx("button",{onClick:()=>p(!1),className:"flex-1 py-4 text-slate-400 font-black uppercase text-xs tracking-widest",children:"Nevermind"}),t.jsx("button",{onClick:()=>i(s.id,o),disabled:!o,className:"flex-[2] py-4 bg-red-500 text-white rounded-xl font-black uppercase text-xs tracking-widest shadow-xl disabled:opacity-50",children:"Send Rejection"})]})]})})]})},RI=({onBack:s,onViewPlayer:e,currentOrg:n,onSendInvite:i})=>{const[r,o]=_.useState([]),[d,u]=_.useState(!0),[p,m]=_.useState("ALL"),[f,b]=_.useState("");_.useEffect(()=>{y()},[p]);const y=async()=>{u(!0);const k=await _k(p==="ALL"?void 0:p);o(k),u(!1)},N=r.filter(k=>k.name.toLowerCase().includes(f.toLowerCase())||k.handle.toLowerCase().includes(f.toLowerCase()));return t.jsxs("div",{className:"max-w-7xl mx-auto p-4 md:p-8 min-h-screen animate-in fade-in duration-500",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-12 gap-6",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("button",{onClick:s,className:"w-12 h-12 rounded-2xl bg-white border border-slate-200 flex items-center justify-center text-slate-400 hover:text-indigo-600 transition-all hover:shadow-lg",children:""}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-4xl font-black text-slate-900 tracking-tighter",children:"Transfer Market"}),t.jsx("p",{className:"text-indigo-500 font-bold uppercase text-[10px] tracking-[0.2em] mt-1",children:"Recruit Global Talent"})]})]}),t.jsxs("div",{className:"flex items-center gap-4 bg-white p-2 rounded-2xl shadow-xl border border-slate-100",children:[t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"absolute left-4 top-3.5 text-slate-400 text-sm",children:""}),t.jsx("input",{value:f,onChange:k=>b(k.target.value),placeholder:"Search names or @handles...",className:"bg-slate-50 border-none rounded-xl pl-10 pr-4 py-3 text-sm font-bold text-slate-700 w-full md:w-64 focus:ring-2 ring-indigo-500/20"})]}),t.jsxs("select",{value:p,onChange:k=>m(k.target.value),className:"bg-slate-50 border-none rounded-xl px-4 py-3 text-sm font-black text-slate-700 uppercase tracking-wider cursor-pointer",children:[t.jsx("option",{value:"ALL",children:"All Roles"}),t.jsx("option",{value:"Batsman",children:"Batsmen"}),t.jsx("option",{value:"Bowler",children:"Bowlers"}),t.jsx("option",{value:"All-rounder",children:"All-Rounders"}),t.jsx("option",{value:"Wicket-keeper",children:"Keepers"})]})]})]}),d?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 opacity-50 animate-pulse",children:[1,2,3,4,5,6].map(k=>t.jsx("div",{className:"bg-slate-100 h-64 rounded-[2.5rem]"},k))}):N.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:N.map(k=>{var T,S,R,A;return t.jsxs("div",{className:"bg-white rounded-[2.5rem] p-6 border border-slate-100 shadow-sm hover:shadow-2xl transition-all group flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[t.jsx("div",{className:"w-20 h-20 rounded-3xl bg-slate-50 border-2 border-slate-100 overflow-hidden shrink-0 group-hover:scale-105 transition-transform",children:t.jsx("img",{src:k.avatarUrl||`https://ui-avatars.com/api/?name=${k.name}&background=6366f1&color=fff`,className:"w-full h-full object-cover",alt:k.name})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-black text-slate-900 leading-tight truncate",children:k.name}),t.jsx("p",{className:"text-indigo-600 font-bold text-[10px] uppercase tracking-widest",children:k.handle}),t.jsxs("div",{className:"mt-1 flex gap-1",children:[t.jsx("span",{className:"bg-emerald-50 text-emerald-600 px-2 py-0.5 rounded-full text-[8px] font-black uppercase tracking-tighter border border-emerald-100",children:"LFC "}),t.jsx("span",{className:"bg-slate-100 text-slate-500 px-2 py-0.5 rounded-full text-[8px] font-black uppercase tracking-tighter",children:((T=k.playerDetails)==null?void 0:T.primaryRole)||"Player"})]})]})]}),t.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 flex-1 mb-6",children:[t.jsx("p",{className:"text-xs text-slate-500 font-medium line-clamp-3 leading-relaxed",children:((S=k.playerDetails)==null?void 0:S.bio)||"This player has haven't provided a bio yet, but is actively looking for a new club to join for the 2026 season."}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200/50 grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Style"}),t.jsx("p",{className:"text-xs font-bold text-slate-700",children:((R=k.playerDetails)==null?void 0:R.battingStyle)||"N/A"})]}),t.jsxs("div",{children:[t.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Bowling"}),t.jsx("p",{className:"text-xs font-bold text-slate-700 truncate",children:((A=k.playerDetails)==null?void 0:A.bowlingStyle)||"N/A"})]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>e(k.id),className:"flex-1 border-2 border-slate-100 text-slate-600 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-slate-50 transition-all",children:"Full Bio"}),n&&t.jsx("button",{onClick:()=>i(n,k),className:"flex-1 bg-indigo-600 text-white py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest shadow-lg shadow-indigo-100 hover:bg-indigo-500 transition-all",children:"Invite"})]})]},k.id)})}):t.jsxs("div",{className:"text-center py-32 bg-white rounded-[3rem] border border-dashed border-slate-200",children:[t.jsx("p",{className:"text-6xl mb-6 grayscale",children:""}),t.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:"Market is Quiet"}),t.jsx("p",{className:"text-slate-500 font-medium",children:"No players are currently looking for a club with these filters."})]})]})},MI=({isOpen:s,onClose:e,matches:n,onCloseAllAndContinue:i,onIgnoreAndContinue:r})=>s?t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm animate-in fade-in duration-300",children:t.jsx("div",{className:"bg-white dark:bg-slate-900 w-full max-w-lg rounded-[2.5rem] shadow-2xl border border-slate-100 dark:border-slate-800 overflow-hidden animate-in zoom-in-95 duration-300",children:t.jsxs("div",{className:"p-8",children:[t.jsx("div",{className:"w-20 h-20 bg-amber-100 dark:bg-amber-900/30 rounded-3xl flex items-center justify-center text-4xl mb-6 mx-auto",children:""}),t.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white text-center mb-2 uppercase tracking-tight",children:"Unfinished Matches Detected"}),t.jsx("p",{className:"text-slate-500 dark:text-slate-400 font-bold text-center mb-8 px-4",children:"You have active scoring sessions in progress. We recommend closing them to keep your dashboard clean and avoid sync conflicts."}),t.jsx("div",{className:"space-y-3 mb-8 max-h-60 overflow-y-auto custom-scrollbar pr-2",children:n.map(o=>t.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700 flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h4",{className:"font-black text-slate-900 dark:text-white text-sm",children:[o.teamAName," vs ",o.teamBName]}),t.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mt-1",children:[new Date(o.date).toLocaleDateString(),"  ",o.venue]})]}),t.jsx("div",{className:"px-3 py-1 bg-red-500 text-white text-[9px] font-black rounded-full animate-pulse",children:"LIVE"})]},o.id))}),t.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[t.jsx("button",{onClick:i,className:"w-full py-4 bg-amber-500 hover:bg-amber-400 text-white font-black rounded-2xl text-xs uppercase tracking-widest shadow-lg shadow-amber-500/20 transition-all",children:"Close All & Start New"}),t.jsx("button",{onClick:r,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 text-white font-black rounded-2xl text-xs uppercase tracking-widest shadow-lg shadow-indigo-500/20 transition-all",children:"Ignore & Continue"}),t.jsx("button",{onClick:e,className:"w-full py-4 bg-white dark:bg-slate-800 text-slate-400 font-black rounded-2xl text-xs uppercase tracking-widest border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-700 transition-all",children:"Cancel"})]})]})})}):null,kv=()=>{const[s,e]=_.useState(null),[n,i]=_.useState(null),[r,o]=_.useState(()=>{try{const T=localStorage.getItem("cc_lite_user");return T?JSON.parse(T):null}catch{return null}}),[d,u]=_.useState(!0);return _.useEffect(()=>{Pe.auth.getSession().then(({data:{session:S}})=>{i(S),e((S==null?void 0:S.user)??null),u(!1)});const{data:{subscription:T}}=Pe.auth.onAuthStateChange((S,R)=>{i(R),e((R==null?void 0:R.user)??null),u(!1)});return()=>T.unsubscribe()},[]),{user:s,session:n,liteUser:r,loading:d,signInWithGoogle:async()=>{const{error:T}=await Pe.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}});return T&&console.error("Google sign in error:",T),{error:T}},signInWithFacebook:async()=>{const{error:T}=await Pe.auth.signInWithOAuth({provider:"facebook",options:{redirectTo:window.location.origin}});return T&&console.error("Facebook sign in error:",T),{error:T}},signInWithEmail:async(T,S)=>{const{data:R,error:A}=await Pe.auth.signInWithPassword({email:T,password:S});return{data:R,error:A}},signInWithHandle:async(T,S)=>{u(!0);try{const{data:R,error:A}=await Pe.from("user_profiles").select("email").eq("handle",T).single();if(A||!R||!R.email)return{error:{message:"Invalid handle or user not found"}};const{data:I,error:j}=await Pe.auth.signInWithPassword({email:R.email,password:S});return j?{error:j}:{data:I.user}}catch(R){return{error:R}}finally{u(!1)}},signUpWithEmail:async(T,S,R)=>{const{data:A,error:I}=await Pe.auth.signUp({email:T,password:S,options:{data:{name:R,handle:`@${T.split("@")[0]}`}}});return A.user&&!I&&await Pe.from("user_profiles").insert({id:A.user.id,email:T,name:R,handle:`@${T.split("@")[0]}`,avatar_url:A.user.user_metadata.avatar_url||"",role:"Administrator"}),{data:A,error:I}},signOut:async()=>{o(null),localStorage.removeItem("cc_lite_user");const{error:T}=await Pe.auth.signOut();return{error:T}},getUserProfile:async()=>{var R;if(r)return r;if(!s)return null;const{data:T,error:S}=await Pe.from("user_profiles").select("*").eq("id",s.id).single();return S?(console.error("Error fetching user profile:",S),null):{id:T.id,name:T.name||s.email||"User",handle:T.handle||`@${(R=s.email)==null?void 0:R.split("@")[0]}`,email:T.email||s.email,avatarUrl:T.avatar_url||s.user_metadata.avatar_url,role:T.role||"Fan",createdAt:new Date(T.created_at).getTime()}}}},DI=({isOpen:s,onClose:e,onSuccess:n,initialMode:i="signin"})=>{const{signInWithEmail:r,signInWithHandle:o,signUpWithEmail:d}=kv(),[u,p]=_.useState(i);Fn.useEffect(()=>{s&&p(i)},[s,i]);const[m,f]=_.useState(""),[b,y]=_.useState(""),[N,k]=_.useState(""),[T,S]=_.useState(""),[R,A]=_.useState(!1);if(!s)return null;const I=async()=>{alert("Google Sign-In is coming soon!")},j=async E=>{E.preventDefault(),A(!0),S("");let D;u==="signin"?m.trim().startsWith("@")?D=await o(m.trim(),b):D=await r(m.trim(),b):D=await d(m.trim(),b,N),D.error?(S(D.error.message),A(!1)):(n(),e())};return t.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-slate-900 rounded-3xl max-w-md w-full p-8 relative border border-slate-700",children:[t.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-slate-400 hover:text-white text-2xl",children:""}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:u==="signin"?"Welcome Back":"Create Account"}),t.jsx("p",{className:"text-slate-400 text-sm mb-6",children:u==="signin"?"Sign in to access your cricket stats and teams":"Join the Cricket Core community"}),T&&t.jsx("div",{className:"bg-red-500/10 border border-red-500 text-red-500 p-3 rounded-xl mb-4 text-sm",children:T}),t.jsxs("div",{className:"grid grid-cols-1 gap-3 mb-4",children:[t.jsxs("button",{onClick:()=>alert("Facebook Sign-In is coming soon!"),disabled:R,className:"w-full bg-[#1877F2] text-white py-3 rounded-xl font-semibold flex items-center justify-center gap-3 hover:bg-[#1864D9] transition-colors disabled:opacity-50",children:[t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.791-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Continue with Facebook"]}),t.jsxs("button",{onClick:I,disabled:R,className:"w-full bg-white text-slate-900 py-3 rounded-xl font-semibold flex items-center justify-center gap-3 hover:bg-slate-100 transition-colors disabled:opacity-50",children:[t.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[t.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),t.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),t.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),t.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})]}),t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[t.jsx("div",{className:"flex-1 h-px bg-slate-700"}),t.jsx("span",{className:"text-slate-500 text-xs",children:"OR"}),t.jsx("div",{className:"flex-1 h-px bg-slate-700"})]}),t.jsxs("form",{onSubmit:j,className:"space-y-4",children:[u==="signup"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Name"}),t.jsx("input",{type:"text",value:N,onChange:E=>k(E.target.value),className:"w-full bg-slate-800 text-white p-3 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none",placeholder:"Your name",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:u==="signin"?"Email or Handle":"Email"}),t.jsx("input",{type:u==="signin"?"text":"email",value:m,onChange:E=>f(E.target.value),className:"w-full bg-slate-800 text-white p-3 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none",placeholder:u==="signin"?"you@example.com or @handle":"you@example.com",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Password"}),t.jsx("input",{type:"password",value:b,onChange:E=>y(E.target.value),className:"w-full bg-slate-800 text-white p-3 rounded-xl border border-slate-700 focus:border-indigo-500 focus:outline-none",placeholder:"",required:!0,minLength:6})]}),t.jsx("button",{type:"submit",disabled:R,className:"w-full bg-indigo-600 text-white py-3 rounded-xl font-semibold hover:bg-indigo-700 transition-colors disabled:opacity-50",children:R?"Please wait...":u==="signin"?"Sign In":"Create Account"})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsx("button",{onClick:()=>p(u==="signin"?"signup":"signin"),className:"text-indigo-400 hover:text-indigo-300 text-sm",children:u==="signin"?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})})},OI=({tournament:s,organization:e,allTeams:n,fixtures:i,onBack:r,onUpdateTournament:o,onDeleteTournament:d,onAddTeam:u,onRemoveTeam:p,isOrgAdmin:m,onSelectHubTeam:f})=>{const[b,y]=_.useState("FIXTURES"),[N,k]=_.useState(!1),[T,S]=_.useState(!1),[R,A]=_.useState(""),I=n.filter(D=>(s.teamIds||[]).includes(D.id)),j=n.filter(D=>!(s.teamIds||[]).includes(D.id)&&e.memberTeams.some(L=>L.id===D.id)),E=D=>{u(D),k(!1)};return t.jsxs("div",{className:"h-full flex flex-col bg-slate-50",children:[t.jsxs("div",{className:"bg-white border-b border-slate-200 p-6 md:p-10",children:[t.jsxs("button",{onClick:r,className:"mb-6 text-slate-400 hover:text-indigo-600 font-bold text-xs uppercase tracking-widest transition-colors",children:[" Back to ",e.name]}),t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl md:text-5xl font-black text-slate-900 mb-2",children:s.name}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("span",{className:"bg-indigo-100 text-indigo-700 px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest",children:s.format}),t.jsx("span",{className:`px-3 py-1 rounded-lg text-[10px] font-black uppercase tracking-widest ${s.status==="Ongoing"?"bg-emerald-100 text-emerald-700":s.status==="Completed"?"bg-slate-100 text-slate-500":"bg-amber-100 text-amber-700"}`,children:s.status})]})]}),m&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>S(!0),className:"bg-slate-100 text-slate-600 px-4 py-2 rounded-xl text-[10px] font-black uppercase hover:bg-slate-200 transition-all flex items-center gap-2",children:" Edit"}),t.jsx("button",{onClick:()=>o({status:s.status==="Ongoing"?"Completed":"Ongoing"}),className:"bg-white border border-slate-200 text-slate-500 px-4 py-2 rounded-xl text-[10px] font-black uppercase hover:bg-slate-50",children:s.status==="Ongoing"?"End Tournament":"Reopen Tournament"})]})]})]}),T&&t.jsx(Nb,{tournament:s,onClose:()=>S(!1),onSave:o,onDelete:()=>{d&&(d(s.id),r())}}),t.jsx("div",{className:"flex border-b border-slate-200 bg-white px-6 md:px-10 overflow-x-auto",children:["FIXTURES","TEAMS","STANDINGS"].map(D=>t.jsx("button",{onClick:()=>y(D),className:`px-6 py-4 text-[10px] font-black uppercase tracking-widest border-b-2 transition-colors whitespace-nowrap ${b===D?"border-indigo-600 text-indigo-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:D},D))}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-10 custom-scrollbar",children:[b==="TEAMS"&&t.jsxs("div",{className:"space-y-6",children:[m&&t.jsx("div",{className:"flex justify-end",children:t.jsx("button",{onClick:()=>k(!0),className:"bg-indigo-600 text-white px-6 py-3 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-indigo-500 shadow-lg",children:"+ Add Team"})}),I.length===0?t.jsx("div",{className:"p-12 text-center border-2 border-dashed border-slate-200 rounded-[2rem] text-slate-400 font-bold uppercase text-xs",children:"No teams linked to this tournament."}):t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:I.map(D=>t.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 flex items-center gap-4 shadow-sm hover:shadow-md transition-all",children:[t.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center text-xl overflow-hidden",children:D.logoUrl?t.jsx("img",{src:D.logoUrl,className:"w-full h-full object-cover"}):""}),t.jsxs("div",{children:[t.jsx("div",{className:"font-black text-slate-900",children:D.name}),t.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:D.location||"No Location"})]}),t.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[f&&m&&t.jsx("button",{onClick:()=>f(D.id),className:"w-8 h-8 rounded-lg bg-indigo-50 text-indigo-600 hover:bg-indigo-600 hover:text-white flex items-center justify-center transition-all",title:"Open Team Hub",children:""}),m&&p&&t.jsx("button",{onClick:()=>p(D.id),className:"text-slate-300 hover:text-red-500 text-xl font-black",children:""})]})]},D.id))})]}),b==="FIXTURES"&&t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"p-12 text-center text-slate-400 font-bold uppercase text-xs",children:"Fixture management coming soon."})}),b==="STANDINGS"&&t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"p-12 text-center text-slate-400 font-bold uppercase text-xs",children:"Points table calculation pending."})})]}),N&&t.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:t.jsxs("div",{className:"bg-white p-6 rounded-[2rem] max-w-lg w-full shadow-2xl animate-in zoom-in-95",children:[t.jsxs("h2",{className:"text-xl font-black text-slate-900 mb-4",children:["Add Team to ",s.name]}),t.jsx("input",{value:R,onChange:D=>A(D.target.value),placeholder:"Search teams...",className:"w-full bg-slate-50 border-none p-4 rounded-xl font-bold text-sm mb-4 focus:ring-2 ring-indigo-500 outline-none"}),t.jsxs("div",{className:"max-h-60 overflow-y-auto space-y-2 mb-4 custom-scrollbar",children:[j.filter(D=>D.name.toLowerCase().includes(R.toLowerCase())).map(D=>t.jsxs("button",{onClick:()=>E(D.id),className:"w-full flex items-center gap-3 p-3 hover:bg-indigo-50 rounded-xl transition-colors text-left group",children:[t.jsx("span",{className:"w-8 h-8 flex items-center justify-center bg-slate-100 rounded-lg text-xs",children:""}),t.jsx("span",{className:"font-bold text-slate-700 group-hover:text-indigo-700",children:D.name})]},D.id)),j.length===0&&t.jsx("div",{className:"text-center text-slate-400 text-xs py-4 font-bold uppercase",children:"No available teams found."})]}),t.jsx("button",{onClick:()=>k(!1),className:"w-full bg-slate-100 text-slate-500 py-3 rounded-xl font-black uppercase text-xs tracking-widest hover:bg-slate-200",children:"Cancel"})]})})]})},UI=()=>{const{orgs:s}=kh(),e=new URLSearchParams(window.location.search),n=e.get("view"),i=e.get("id"),r=e.get("orgId"),o=e.get("tournamentId");e.get("groupId");const d=f=>{if(!f)return null;for(const b of s){const y=b.tournaments.find(N=>N.id===f);if(y)return{tournament:y,org:b}}return null},u=f=>s.find(b=>b.id===f)||null,p=_.useMemo(()=>s.flatMap(f=>f.memberTeams.flatMap(b=>b.players)),[s]),m=_.useMemo(()=>s.flatMap(f=>f.memberTeams),[s]);if(n==="tournament"||n==="standings"||n==="fixtures"||n==="bracket"||n==="groups"){const b=d(o||i);if(!b)return t.jsx("div",{className:"p-8 text-center text-slate-500 font-bold",children:"Tournament not found"});let y="OVERVIEW";return n==="standings"&&(y="STANDINGS"),n==="fixtures"&&(y="FIXTURES"),n==="bracket"&&(y="BRACKET"),n==="groups"&&(y="GROUPS"),t.jsx("div",{className:"bg-slate-50 min-h-screen p-4",children:t.jsx(_b,{tournament:b.tournament,organization:b.org,onBack:()=>{},onStartMatch:()=>{},onGenerateFixtures:()=>{},onAddGroup:()=>{},onUpdateGroupTeams:()=>{},onViewTeam:()=>{},onViewMatch:()=>{},embedMode:!0,initialTab:y,allOrganizations:s})})}if(n==="player_search")return t.jsx("div",{className:"bg-slate-50 min-h-screen p-4",children:t.jsx(jv,{allPlayers:p,allTeams:m,onViewPlayer:()=>{},onBack:()=>{}})});if(n==="team_list"&&r){const f=u(r);if(!f)return t.jsx("div",{className:"p-8 text-center text-slate-500 font-bold",children:"Organization not found"});const b=f.memberTeams.flatMap(y=>y.players.map(N=>({...N,teamId:y.id,orgId:f.id})));return t.jsx("div",{className:"bg-slate-50 min-h-screen p-4",children:t.jsx(sc,{organization:f,userRole:"Guest",onBack:()=>{},onViewTournament:()=>{},onViewPlayer:()=>{},onRequestAddTeam:()=>{},onRequestAddTournament:()=>{},onUpdateOrg:y=>{},onRemoveTeam:y=>{},players:b,onViewTeam:()=>{},isFollowed:!1,onToggleFollow:()=>{},globalUsers:[],onAddMember:()=>{},embedMode:!0})})}return t.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-100 text-slate-400 font-bold uppercase tracking-widest text-sm",children:[t.jsx("span",{children:"Invalid Embed Configuration"}),t.jsxs("span",{className:"text-[10px] mt-2 opacity-70",children:["Code: ",n," | ID: ",i]})]})},LI=({match:s,onClose:e,onPin:n,allTeams:i=[]})=>{const r=s.savedState,o=_.useMemo(()=>i.find(k=>k.id===s.teamAId),[i,s.teamAId]),d=_.useMemo(()=>i.find(k=>k.id===s.teamBId),[i,s.teamBId]),u=(r==null?void 0:r.battingTeamId)===s.teamAId?o:d,p=(r==null?void 0:r.battingTeamId)===s.teamAId?d:o,m=Nv(r||{score:0,totalBalls:0,innings:1,history:[]},s.customOvers||20,u,p),f=k=>{for(const T of i){const S=T.players.find(R=>R.id===k);if(S)return S.name}return"Unknown Player"},b=_.useMemo(()=>{if(!r)return{score:0,wickets:0,overs:"0.0",crr:0,projected:0};const k=r.score||0,T=r.wickets||0,S=m.overs,R=m.runRate,A=s.customOvers||20;let I=0;return r.totalBalls>0&&(I=Math.round(R*A)),{score:k,wickets:T,overs:S,crr:R,projected:I}},[r,m,s.customOvers]),y=_.useMemo(()=>{if(!r||!r.strikerId||!r.nonStrikerId)return[];const k=m.batterStats[r.strikerId],T=m.batterStats[r.nonStrikerId],S=[];return k&&S.push({name:f(r.strikerId)+" *",runs:k.runs,balls:k.balls,strikeRate:k.strikeRate}),T&&S.push({name:f(r.nonStrikerId),runs:T.runs,balls:T.balls,strikeRate:T.strikeRate}),S},[r,m,i]),N=_.useMemo(()=>!r||r.innings===1?"Innings 1":r.innings===2&&r.target?`Target: ${r.target}`:`Innings ${r.innings}`,[r]);return r?t.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-md animate-in fade-in duration-300",children:t.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-md rounded-[3rem] shadow-2xl border border-slate-100 dark:border-slate-800 overflow-hidden",children:[t.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-purple-600 p-6 relative",children:[t.jsx("button",{onClick:e,className:"absolute top-4 right-4 w-10 h-10 bg-white/20 hover:bg-white/30 rounded-full flex items-center justify-center text-white text-xl transition-all",children:""}),t.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:""}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-white font-black text-sm uppercase tracking-widest",children:"Match Summary"}),t.jsx("p",{className:"text-white/70 text-[10px] font-bold uppercase tracking-wider",children:"Cricket Match"})]})]}),n&&t.jsx("button",{onClick:n,className:"absolute top-4 right-16 px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2",children:" PIN"})]}),t.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-800/50",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Current Score"}),t.jsx("span",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-widest",children:"LIVE"})]}),t.jsxs("div",{className:"flex items-baseline gap-4",children:[t.jsxs("div",{className:"flex items-baseline gap-2",children:[t.jsxs("span",{className:"text-5xl font-black text-slate-900 dark:text-white",children:[b.score,"-",b.wickets]}),t.jsxs("span",{className:"text-xl font-bold text-slate-400",children:["(",b.overs,")"]})]}),t.jsxs("div",{className:"ml-auto text-right",children:[t.jsx("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"CRR"}),t.jsx("div",{className:"text-2xl font-black text-emerald-600",children:b.crr.toFixed(2)})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 p-6",children:[t.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-2xl border border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-2",children:["Projected (at ",s.customOvers||20,".00)"]}),t.jsx("div",{className:"text-3xl font-black text-slate-900 dark:text-white",children:b.projected})]}),t.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-2xl border border-indigo-200 dark:border-indigo-700",children:[t.jsx("div",{className:"text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-widest mb-2",children:"Target Setting"}),t.jsx("div",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400 italic",children:N})]})]}),y.length>0&&t.jsxs("div",{className:"px-6 pb-6",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),t.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Active Batters"})]}),t.jsx("div",{className:"space-y-3",children:y.map((k,T)=>t.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-2xl border border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-slate-100 dark:bg-slate-800 rounded-full flex items-center justify-center text-xl",children:""}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-slate-900 dark:text-white text-sm",children:k.name}),t.jsxs("p",{className:"text-[10px] text-slate-500 font-bold",children:["Batting at Innings ",(r==null?void 0:r.innings)||1]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("div",{className:"text-2xl font-black text-slate-900 dark:text-white",children:k.runs}),t.jsxs("div",{className:"text-[10px] text-slate-500 font-bold",children:["(",k.balls,")"]}),t.jsxs("div",{className:"text-[9px] text-slate-400 font-bold",children:["SR ",k.strikeRate]})]})]},T))})]}),t.jsx("div",{className:"px-6 pb-6",children:t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-2xl border border-slate-200 dark:border-slate-700",children:[t.jsxs("h3",{className:"font-black text-slate-900 dark:text-white text-sm mb-2",children:[s.teamAName," vs ",s.teamBName]}),t.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-slate-500 font-bold",children:[t.jsxs("span",{children:[" ",s.venue]}),t.jsxs("span",{children:[" ",new Date(s.date).toLocaleDateString()]})]})]})})]})}):null},Yg={id:"guest",name:"Visitor",handle:"guest",role:"Guest",createdAt:Date.now()},BI=()=>{var Pa,Ga,dn;const s=new URLSearchParams(window.location.search);if(s.get("mode")==="scoreboard")return t.jsx(P2,{});if(s.get("mode")==="embed")return t.jsx("div",{className:"embed-root",children:t.jsx(UI,{})});const[i,r]=_.useState(!0),{orgs:o,standaloneMatches:d,mediaPosts:u,allTeams:p,profile:m,settings:f,following:b,setOrgs:y,setStandaloneMatches:N,setMediaPosts:k,setAllTeams:T,setOrgsSilent:S,setStandaloneMatchesSilent:R,issues:A,setIssues:I,matchReports:j,setMatchReports:E,umpireReports:D,setUmpireReports:L,updateProfile:G,updateSettings:Y,updateFollowing:q,pullNow:ce,forcePush:Q}=kh(),[ne,ee]=_.useState(()=>localStorage.getItem("cc_theme")||"light"),[se,M]=_.useState(()=>{const F=new URLSearchParams(window.location.search).get("tab");return F&&["home","setup","scorer","stats","media","career","my_club","captain_hub","registry","team_registry","umpire_hub","tournament_details","transfer_market","my_matches","my_tournaments","profile","my_teams","my_clubs","create_tournament","register_club","following"].includes(F)?F:"media"}),[B,Z]=_.useState(null),[Ne,ae]=_.useState(null),[P,W]=_.useState(()=>new URLSearchParams(window.location.search).get("matchId")),[X,we]=_.useState(null),[te,_e]=_.useState(null),[re,Re]=_.useState(null),[$e,ue]=_.useState(null),[be,Te]=_.useState(null),[$,oe]=_.useState(!1),[Ae,De]=_.useState(!1),[Me,Be]=_.useState(!1),[ze,Ke]=_.useState(!1),[Ce,St]=_.useState("signin"),[Ee,Ue]=_.useState("CREATE"),[qe,mt]=_.useState("SELECT"),[ft,ot]=_.useState(m.role),[pt,Ze]=_.useState([]),[He,bt]=_.useState(!1),[_t,tt]=_.useState(null),[Tt,Ct]=_.useState([]),{user:Ns,loading:fs,getUserProfile:We,signOut:Bt}=kv();_.useEffect(()=>{Ns&&!fs&&We().then(U=>{U&&(G(U),ft==="Guest"&&ot(U.role))})},[Ns,fs]),_.useEffect(()=>{var z;const U=(z=window.wpApiSettings)!=null&&z.plugin_url?`${window.wpApiSettings.plugin_url}logo.jpg`:"logo.jpg",F=new Image;F.src=U;const J=setTimeout(()=>{r(!1)},2500);return()=>clearTimeout(J)},[]),_.useEffect(()=>{const U=F=>{if(B&&B.status==="Live"&&B.scorerId===m.id)return F.preventDefault(),F.returnValue="You have an active match in progress. Are you sure you want to leave?",F.returnValue};return window.addEventListener("beforeunload",U),()=>window.removeEventListener("beforeunload",U)},[B,m.id]),_.useEffect(()=>{const U=()=>{document.hidden?console.log("App hidden - pausing background activity"):(console.log("App visible - resuming activity"),ce())};return document.addEventListener("visibilitychange",U),()=>document.removeEventListener("visibilitychange",U)},[ce]),_.useEffect(()=>{(async()=>{try{if(o.length>0){const F=o.flatMap(z=>z.members).map(z=>({id:z.userId,name:z.name,handle:z.handle,role:z.role,createdAt:z.addedAt||Date.now()})),J=Array.from(new Map(F.map(z=>[z.id,z])).values());Ct(J)}}catch(F){console.error("Failed to load initial data",F)}})()},[o]),_.useEffect(()=>{const U=Date.now()-2592e6;let F=!1;const J=d.map(ie=>ie.status==="Completed"&&!ie.isArchived&&new Date(ie.date).getTime()<U?(F=!0,{...ie,isArchived:!0}):ie),z=o.map(ie=>({...ie,fixtures:ie.fixtures.map(xe=>xe.status==="Completed"&&!xe.isArchived&&new Date(xe.date).getTime()<U?(F=!0,{...xe,isArchived:!0}):xe)}));F&&(N(J),y(z),console.log("Auto-archived old matches."))},[d,o]),_.useEffect(()=>{if(B){const U=(d||[]).find(F=>F.id===B.id)||(o||[]).flatMap(F=>F.fixtures).find(F=>F.id===B.id);U&&U.savedState&&JSON.stringify(U.savedState)!==JSON.stringify(B.savedState)&&Z(U)}},[d,o,B==null?void 0:B.id]),_.useEffect(()=>{const U=Pe.channel("fixtures_realtime").on("postgres_changes",{event:"UPDATE",schema:"public",table:"fixtures"},F=>{const J=F.new;console.log("Real-time fixture update received:",J);const z=ie=>{var xe,dt;return ie.id===J.id?{...ie,status:J.status,teamAScore:((xe=J.scores)==null?void 0:xe.teamAScore)||ie.teamAScore,teamBScore:((dt=J.scores)==null?void 0:dt.teamBScore)||ie.teamBScore,savedState:J.saved_state||ie.savedState,result:J.result||ie.result,winnerId:J.winner_id||ie.winnerId}:ie};R(ie=>ie.map(z)),S(ie=>ie.map(xe=>({...xe,fixtures:xe.fixtures.map(z)})))}).subscribe();return()=>{Pe.removeChannel(U)}},[d,o,R,S]),_.useEffect(()=>{(m==null?void 0:m.role)==="Guest"&&!["media","scorer","setup"].includes(se)&&M("media")},[m,se]),_.useEffect(()=>{localStorage.setItem("cc_theme",ne),ne==="light"?document.body.classList.add("light-theme"):document.body.classList.remove("light-theme")},[ne]);const Pt=_.useMemo(()=>{const U=[];return p.forEach(F=>{const J=o.find(z=>{var ie;return(ie=z.memberTeams)==null?void 0:ie.some(xe=>xe.id===F.id)});F.players.forEach(z=>{U.push({...z,teamName:F.name,teamId:F.id,orgId:(J==null?void 0:J.id)||"",orgName:(J==null?void 0:J.name)||"Independent"})})}),U},[p,o]),xt=_.useMemo(()=>[...d,...o.flatMap(U=>U.fixtures)],[d,o]),Ot=_.useMemo(()=>!m||m.role==="Guest"?null:xt.find(U=>U.status==="Live"&&U.scorerId===m.id),[xt,m]),js=_.useMemo(()=>{if(!m)return null;if(be){const F=p.find(J=>J.id===be);if(F)return F}const U=p.find(F=>F.players.some(J=>J.id===m.id||J.userId===m.id));if(U)return U;for(const F of o){const J=F.members.find(z=>z.userId===m.id);if(J!=null&&J.managedTeamId){const z=p.find(ie=>ie.id===J.managedTeamId);if(z)return z}}return null},[m,p,o,be]),ps=_.useMemo(()=>{if(!o||!p||!m)return[];const U=[],F=p.filter(z=>z.players.some(ie=>ie.id===m.id||ie.userId===m.id));U.push(...F);for(const z of o){const ie=z.members.find(xe=>xe.userId===m.id);if(ie!=null&&ie.managedTeamId){const xe=p.find(dt=>dt.id===ie.managedTeamId);xe&&U.push(xe)}}return Array.from(new Map(U.map(z=>[z.id,z])).values())},[m,p,o]),Ms=_.useMemo(()=>xt.find(U=>U.id===P),[P,xt]);_.useEffect(()=>{B?localStorage.setItem("cc_active_match_id",B.id):localStorage.removeItem("cc_active_match_id")},[B==null?void 0:B.id]),_.useEffect(()=>{if(xt.length>0&&(m==null?void 0:m.role)!=="Guest"){const F=new URLSearchParams(window.location.search).get("matchId"),J=localStorage.getItem("cc_active_match_id");if(F){const z=xt.find(ie=>ie.id===F);if(z&&z.status==="Live"&&z.scorerId===m.id){Z(z),M("scorer"),M("scorer");return}else z&&setTimeout(()=>tt(z),500)}if(!B&&J&&!Ae){const z=xt.find(ie=>ie.id===J&&ie.status==="Live");z&&z.scorerId===m.id&&De(!0)}}},[xt.length,m==null?void 0:m.id]);const ks=_.useMemo(()=>{var U;return m&&m.role==="Scorer"&&((U=m.scorerDetails)!=null&&U.isHireable)?[m]:[]},[m]),it=(U,F)=>{if((m==null?void 0:m.role)==="Guest"){oe(!0);return}const J=U==="TEAM"?b.teams:U==="PLAYER"?b.players:b.orgs,z=J.includes(F)?J.filter(ie=>ie!==F):[...J,F];q({...b,[U==="TEAM"?"teams":U==="PLAYER"?"players":"orgs"]:z})};_.useEffect(()=>{if(B&&B.savedState&&"BroadcastChannel"in window)try{const U=o.find(ie=>ie.fixtures.some(xe=>xe.id===B.id)),F=new BroadcastChannel("cricket_sync_channel"),J=p.find(ie=>ie.id===B.teamAId),z=p.find(ie=>ie.id===B.teamBId);F.postMessage({type:"UPDATE",state:B.savedState,teams:{batting:J,bowling:z},sponsors:(U==null?void 0:U.sponsors)||[]})}catch(U){console.warn("BroadcastChannel error",U)}},[B,o,p]);const Yt=(U=null)=>{const F=xt.filter(J=>J.status==="Live"&&J.scorerId===m.id);F.length>0?(Ze(F),ae(U),bt(!0)):(ae(U),M("setup"))},Ds=async()=>{const U=o.map(J=>({...J,fixtures:J.fixtures.map(z=>pt.some(ie=>ie.id===z.id)?{...z,status:"Completed"}:z)}));y(U);const F=d.map(J=>pt.some(z=>z.id===J.id)?{...J,status:"Completed"}:J);N(F),bt(!1),M("setup")},on=U=>{let F=[...d],J=[...o];const z={...U,scorerId:m==null?void 0:m.id};if(Ne){const ie={...z,id:Ne.id};F=F.map(xe=>xe.id===ie.id?ie:xe),J=J.map(xe=>({...xe,fixtures:xe.fixtures.map(dt=>dt.id===ie.id?ie:dt)})),Z(ie),ae(null)}else{const ie={...z,isOfficial:z.isOfficial??!1};F=[ie,...F],Z(ie)}N(F),y(J),M("scorer")},cn=async(U,F,J)=>{const z=os=>{const Js=F.inningsScores.find(Ut=>Ut.teamId===os);return Js?`${Js.score}/${Js.wickets}`:F.battingTeamId===os?`${F.score}/${F.wickets}`:"0/0"},ie=J||(F.isCompleted?"Completed":"Live"),xe=z((B==null?void 0:B.teamAId)||""),dt=z((B==null?void 0:B.teamBId)||""),Qt=os=>os.id===U?{...os,savedState:F,status:ie,teamAScore:xe,teamBScore:dt}:os,ts=d.map(Qt),ss=o.map(os=>({...os,fixtures:os.fixtures.map(Qt)}));R(ts),S(ss),await Gu(U,{savedState:F,status:ie,teamAScore:xe,teamBScore:dt})},xs=U=>{const F={id:`org-${Date.now()}`,name:U.name||"Untitled",type:U.type||"CLUB",createdBy:m==null?void 0:m.id,description:"",address:"",country:U.country||"",groundLocation:"",establishedYear:new Date().getFullYear(),logoUrl:"",tournaments:[],groups:[],memberTeams:[],fixtures:[],members:m?[{userId:m.id,name:m.name,handle:m.handle,role:"Administrator",addedAt:Date.now()}]:[],applications:[],isPublic:!0,allowUserContent:!0,sponsors:[]},J=[...o,F];y(J),Q()},vs=(U,F)=>{const J={...F,id:`tm-${Date.now()}`,players:[]},z=o.map(ie=>ie.id===U?{...ie,memberTeams:[...ie.memberTeams,J]}:ie);y(z),Q()},Ss=async(U,F)=>{await e0(U,F);const J=o.map(z=>z.id===U?{...z,memberTeams:z.memberTeams.filter(ie=>ie.id!==F)}:z);y(J),Q()},de=async(U,F)=>{await Nk(F);const J=o.map(z=>z.id===U?{...z,tournaments:z.tournaments.filter(ie=>ie.id!==F)}:z);y(J),Q()},Ie=(U,F,J)=>{const z=o.map(ie=>ie.id===U?{...ie,tournaments:ie.tournaments.map(xe=>xe.id===F?{...xe,...J}:xe)}:ie);y(z),Q()},Ye=async(U,F,J)=>{const z=o.map(ie=>ie.id===U?{...ie,fixtures:ie.fixtures.map(xe=>xe.id===F?{...xe,...J}:xe)}:ie);y(z),await Gu(F,J),Q()},H=async(U,F)=>{if(await jk(F)){const z=o.map(ie=>ie.id===U?{...ie,fixtures:ie.fixtures.filter(xe=>xe.id!==F)}:ie);y(z),Q()}else alert("Failed to delete fixture.")},ve=(U,F)=>{let J=o.find(xe=>xe.name==="Quick Play Teams");const z=F.map((xe,dt)=>({id:$n(`pl-${dt}`),name:xe,role:"All-rounder",stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}}));if(z.length===0)for(let xe=1;xe<=12;xe++)z.push({id:$n(`pl-auto-${xe}`),name:`Player ${xe}`,role:xe===12?"Bowler":xe<3?"Batsman":"All-rounder",stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}});const ie={id:$n("tm"),name:U,players:z};if(J){const xe=o.map(dt=>dt.id===J.id?{...dt,memberTeams:[...dt.memberTeams,ie]}:dt);y(xe)}else{const xe={id:$n("org-qp"),name:"Quick Play Teams",type:"CLUB",createdBy:m==null?void 0:m.id,memberTeams:[ie],tournaments:[],groups:[],fixtures:[],members:m?[{userId:m.id,name:m.name,handle:m.handle,role:"Administrator",addedAt:Date.now()}]:[],applications:[],country:"Global",groundLocation:"Virtual",establishedYear:new Date().getFullYear(),logoUrl:"",isPublic:!1,sponsors:[]},dt=[...o,xe];y(dt)}},Se=U=>{const F=[U,...u];k(F)},nt=async U=>{await kk(U);const F=u.filter(J=>J.id!==U);k(F)},gt=U=>{const F=u.map(J=>J.id===U.id?U:J);k(F)},Rt=async U=>{if(!m||m.role==="Guest"){oe(!0);return}if(await Pu(U,{applicantId:`join:${m.id}`})){const J=o.map(z=>{if(z.id===U){const ie={id:$n("app"),type:"USER_JOIN",applicantId:m.id,applicantName:m.name,applicantHandle:m.handle,applicantImage:m.avatarUrl,status:"PENDING",timestamp:Date.now()};return{...z,applications:[...z.applications||[],ie]}}return z});y(J),alert("Application Sent!"),Be(!1)}else alert("Failed to send application.")},pe=async(U,F)=>{if(!U||!F)return;if(await Pu(U.id,{applicantId:`invite:${F.id}`})){const z=o.map(ie=>{if(ie.id===U.id){const xe={id:$n("app"),type:"CLUB_INVITE",applicantId:F.id,applicantName:F.name,applicantHandle:F.handle,applicantImage:F.avatarUrl,status:"PENDING",timestamp:Date.now()};return{...ie,applications:[...ie.applications||[],xe]}}return ie});y(z),alert(`Invite sent to ${F.name}!`)}else alert("Failed to send invitation.")},Oe=async(U,F)=>{var z;const J=o.map(ie=>{if(ie.id===U){const xe={id:$n("app"),type:"ORG_AFFILIATE",applicantId:F.id,applicantName:F.name,applicantHandle:"",status:"PENDING",timestamp:Date.now()};return Pu(U,xe),{...ie,applications:[...ie.applications||[],xe]}}return ie});y(J),await Q(),alert(`Affiliation request sent to ${(z=o.find(ie=>ie.id===U))==null?void 0:z.name}!`)},Xe=async U=>{if(!m)return;const F=await vk(U,m.id,m.name);F.success?alert("Claim Request Sent! Admin will review it."):alert(F.message||"Failed to send claim request.")},lt=async(U,F,J,z)=>{var os,Js;const ie=o.find(Ut=>Ut.id===U),xe=ie==null?void 0:ie.applications.find(Ut=>Ut.id===F);if(!ie||!xe)return;if(xe.type==="PLAYER_CLAIM"){if(J==="REJECTED"){alert("Rejection not fully implemented for claims yet. Please approve to clear.");return}if(await yk(xe.id,xe.targetPlayerId,xe.applicantId)){const jn=o.map(Lt=>Lt.id===U?{...Lt,applications:Lt.applications.filter(Ys=>Ys.id!==F),memberTeams:J==="APPROVED"?Lt.memberTeams.map(Ys=>({...Ys,players:Ys.players.map(_s=>_s.id===(xe==null?void 0:xe.targetPlayerId)?{..._s,userId:xe.applicantId}:_s)})):Lt.memberTeams}:Lt);y(jn),alert("Claim Approved!")}else alert("Failed to update player claim status.");return}if(xe.type==="USER_JOIN"){if(!await Zx(U,`join:${xe.applicantId}`,J)){alert("Failed to update application status.");return}const jn=o.map(Lt=>{if(Lt.id===U){let Ys=Lt.members;return J==="APPROVED"&&!Lt.members.some(_s=>_s.userId===(xe==null?void 0:xe.applicantId))&&(Ys=[...Lt.members,{userId:(xe==null?void 0:xe.applicantId)||"",name:(xe==null?void 0:xe.applicantName)||"New Member",handle:(xe==null?void 0:xe.applicantHandle)||"",role:z==="Administrator"||z==="Scorer"?z:"Player",addedAt:Date.now()}]),{...Lt,applications:Lt.applications.map(_s=>_s.id===F?{..._s,status:J}:_s),members:Ys}}return Lt});if(y(jn),J==="APPROVED"&&(m==null?void 0:m.id)===xe.applicantId&&!((os=m.joinedClubIds)!=null&&os.includes(U))){const Lt={...m,joinedClubIds:[...m.joinedClubIds||[],U]};G(Lt)}return}const dt=xe.type==="ORG_AFFILIATE",Qt=xe.applicantId;if(!await Zx(U,dt?Qt:F,J)){alert("Failed to update application status.");return}const ss=o.map(Ut=>{if(Ut.id===U){const jn=Ut.applications.map(Ks=>Ks.id===F?{...Ks,status:J}:Ks);let Lt=Ut.childOrgIds||[];J==="APPROVED"&&dt&&!Lt.includes(Qt)&&(Lt=[...Lt,Qt]);let Ys=Ut.members,_s=Ut.memberTeams;if(J==="APPROVED"&&!dt&&z){if(z==="Club"){const Ks={id:`tm-${Date.now()}`,name:xe.applicantName,players:[],logoUrl:xe.applicantImage};_s=[..._s,Ks],Ut.members.some($a=>$a.userId===xe.applicantId)||(Ys=[...Ut.members,{userId:xe.applicantId,name:xe.applicantName,handle:xe.applicantHandle||"",role:"Administrator",managedTeamId:Ks.id,addedAt:Date.now()}])}else if(Ut.members.some(Ks=>Ks.userId===xe.applicantId)||(Ys=[...Ut.members,{userId:xe.applicantId,name:xe.applicantName,handle:xe.applicantHandle||"",role:z,addedAt:Date.now()}]),z==="Player"&&Ut.memberTeams.length>0){const Ks=Ut.memberTeams[0],$a={id:xe.applicantId,name:xe.applicantName,role:"All-rounder",photoUrl:xe.applicantImage,stats:{runs:0,wickets:0,ballsFaced:0,ballsBowled:0,runsConceded:0,matches:0,catches:0,runOuts:0,stumpings:0,fours:0,sixes:0,hundreds:0,fifties:0,ducks:0,threeWickets:0,fiveWickets:0,maidens:0}};_s=Ut.memberTeams.map(hi=>hi.id===Ks.id?{...hi,players:[...hi.players,$a]}:hi)}}return{...Ut,applications:jn,childOrgIds:Lt,members:Ys,memberTeams:_s}}if(Ut.id===Qt&&J==="APPROVED"&&dt){const jn=Ut.parentOrgIds||[];if(!jn.includes(U)){const Lt=Array.from(new Set([...jn,U]));return{...Ut,parentOrgIds:Lt}}}return Ut});if(y(ss),!dt&&J==="APPROVED"&&(m==null?void 0:m.id)===xe.applicantId){if((Js=m.joinedClubIds)!=null&&Js.includes(U))return;const Ut={...m,joinedClubIds:[...m.joinedClubIds||[],U],notifications:[...m.notifications||[],{id:`notif-${Date.now()}`,type:"ALERT",title:"Application Accepted",message:`You have been accepted into ${ie.name}.`,timestamp:Date.now(),read:!1}]};G(Ut)}},zt=async(U,F)=>{const J=xt.find(xe=>xe.id===U);if(!J||!js)return;let z={};if(J.teamAId===js.id)z={teamASquadIds:F};else if(J.teamBId===js.id)z={teamBSquadIds:F};else return;const ie=o.map(xe=>xe.fixtures.some(dt=>dt.id===U)?{...xe,fixtures:xe.fixtures.map(dt=>dt.id===U?{...dt,...z}:dt)}:xe);y(ie),await Gu(U,z),alert("Squad Saved Successfully!")},Mt=async(U,F)=>{try{console.log("Creating user with Supabase Auth...",U.handle);const{data:J,error:z}=await Pe.auth.signUp({email:U.email,password:F,options:{data:{name:U.name,handle:U.handle}}});if(z)return console.error("Auth account creation failed:",z),{success:!1,error:{message:z.message}};if(!J.user)return{success:!1,error:{message:"Failed to create auth account"}};const{error:ie}=await Pe.from("user_profiles").insert({id:J.user.id,email:U.email,handle:U.handle,name:U.name,role:U.role,avatar_url:U.avatarUrl,created_at:new Date().toISOString(),player_details:U.playerDetails||null,scorer_details:U.scorerDetails||null});if(ie)return console.error("Profile insertion failed:",ie),{success:!1,error:{message:`Profile creation failed: ${ie.message}`}};const xe={...U,id:J.user.id,createdAt:Date.now()};return Ct(dt=>[...dt,xe]),console.log("User created successfully:",xe.handle,xe.id),{success:!0,userId:J.user.id}}catch(J){return console.error("Unexpected error during user creation:",J),{success:!1,error:{message:J.message||"Unknown error occurred"}}}},ct=U=>{console.log(" Captain submitting match report:",U);const F=d.map(z=>z.id===U.matchId?{...z,reportSubmission:U}:z);N(F);const J=o.map(z=>({...z,fixtures:z.fixtures.map(ie=>ie.id===U.matchId?{...ie,reportSubmission:U}:ie)}));y(J),alert("Match report submitted for admin review!")},wt=U=>{console.log(" Umpire submitting match report:",U);const F=d.map(z=>z.id===U.matchId?{...z,umpireReport:U}:z);N(F);const J=o.map(z=>({...z,fixtures:z.fixtures.map(ie=>ie.id===U.fixtureId?{...ie,umpireReport:U}:ie)}));y(J),alert("Umpire match report submitted successfully!"),M("umpire_hub")},Ws=U=>{const F=xt.find(z=>{var ie;return((ie=z.reportSubmission)==null?void 0:ie.id)===U});if(!F||!F.reportSubmission)return;const J=$k(o,F.reportSubmission);y(J),W(null),alert("Match Verified! Player stats have been updated.")},Wt=(U,F)=>{const J=o.map(z=>({...z,fixtures:z.fixtures.map(ie=>{var xe;return((xe=ie.reportSubmission)==null?void 0:xe.id)===U?{...ie,reportSubmission:{...ie.reportSubmission,status:"REJECTED",adminFeedback:F}}:ie})}));y(J),W(null),alert("Report Rejected.")},es=async U=>{const F=o.map(J=>({...J,fixtures:J.fixtures.map(z=>z.id===U?{...z,scorerId:m.id}:z)}));y(F),Q(),alert("Fixture Accepted!")},Os=U=>{U!=="captain_hub"&&Te(null),M(U)},wc=U=>{switch(ot(U),U){case"Administrator":M("home");break;case"Captain":M("captain_hub");break;case"Scorer":M("career");break;case"Player":M("career");break;case"Umpire":M("umpire_hub");break;case"Coach":M("home");break;default:M("home")}},wr=U=>{const F={id:`dev-${U.toLowerCase()}-${Date.now()}`,createdAt:Date.now()};let J;switch(U){case"ADMIN":J={...F,name:"Central Zone Admin",handle:"@cz_admin",role:"Administrator",joinedClubIds:["org-central-zone"]};const z=o.find(ie=>ie.id==="org-central-zone");if(z){if(!z.members.some(ie=>ie.userId===J.id)){const ie=o.map(xe=>xe.id==="org-central-zone"?{...xe,members:[...xe.members,{userId:J.id,name:J.name,handle:J.handle,role:"Administrator",addedAt:Date.now()}]}:xe);y(ie)}}else y([...o,{id:"org-central-zone",name:"Central Zone",type:"GOVERNING_BODY",country:"Global",isPublic:!0,allowUserContent:!0,tournaments:[],groups:[],memberTeams:[],fixtures:[],members:[{userId:J.id,name:J.name,handle:J.handle,role:"Administrator",addedAt:Date.now()}],applications:[],sponsors:[],establishedYear:2026}]);break;case"SCORER":J={...F,name:"Dev Scorer",handle:"@dev_scorer",role:"Scorer",scorerDetails:{isHireable:!0,experienceYears:5}};break;case"PLAYER":J={...F,name:"Dev Player",handle:"@dev_player",role:"Player",playerDetails:{battingStyle:"Right-hand",bowlingStyle:"Leg-break",primaryRole:"All-rounder",lookingForClub:!0,isHireable:!1}};break;case"CAPTAIN":if(J={...F,id:"dev-captain-fixed",name:"Dev Captain",handle:"@the_captain",role:"Player",playerDetails:{battingStyle:"Right-hand",bowlingStyle:"Medium-fast",primaryRole:"Batsman",lookingForClub:!1,isHireable:!1}},p.length>0){const ie=p[0];let xe=[...o],dt=!1;if(ie.players.some(ts=>ts.id===J.id)||(xe=xe.map(ts=>ts.memberTeams.some(ss=>ss.id===ie.id)?{...ts,memberTeams:ts.memberTeams.map(ss=>ss.id===ie.id?{...ss,players:[...ss.players,{id:J.id,name:J.name,role:"Batsman",stats:{runs:1250,wickets:12,ballsFaced:1100,ballsBowled:240,runsConceded:180,matches:45,catches:15,runOuts:2,stumpings:0,fours:120,sixes:45,hundreds:2,fifties:8,ducks:1,threeWickets:1,fiveWickets:0,maidens:4}}]}:ss)}:ts),dt=!0),!xt.some(ts=>(ts.teamAId===ie.id||ts.teamBId===ie.id)&&ts.status==="Completed"&&!ts.reportSubmission)){const ts=`fixture-mock-pending-${Date.now()}`;xe=xe.map(ss=>ss.memberTeams.some(os=>os.id===ie.id)?{...ss,fixtures:[...ss.fixtures,{id:ts,teamAId:ie.id,teamBId:"mock-opp-1",teamAName:ie.name,teamBName:"Challengers XI",date:new Date(Date.now()-864e5).toISOString(),venue:"Demo Ground",status:"Completed",type:"T20",isOfficial:!0,oversPerInnings:20}]}:ss),dt=!0}dt&&y(xe)}break;case"GUEST":J=Yg;break;default:J={...F,name:`Dev ${U}`,handle:`@dev_${U.toLowerCase()}`,role:U}}G(J),M(U==="CAPTAIN"?"captain_hub":"home")},Nr=async U=>{G(U),oe(!1),M("home")};if(i){const U=(Pa=window.wpApiSettings)!=null&&Pa.plugin_url?`${window.wpApiSettings.plugin_url}logo.jpg`:"logo.jpg";return t.jsxs("div",{className:"h-screen w-screen bg-gradient-to-br from-slate-900 via-indigo-900 to-slate-900 flex flex-col items-center justify-center relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1vcGFjaXR5PSIwLjA1IiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center animate-in fade-in zoom-in duration-700",children:[t.jsx("img",{src:U,alt:"Cricket Core Pro",className:"w-48 h-48 md:w-64 md:h-64 object-contain mb-8 drop-shadow-2xl animate-pulse"}),t.jsx("div",{className:"relative w-64 h-2 bg-slate-800/50 rounded-full overflow-hidden backdrop-blur-sm border border-white/10",children:t.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-full animate-[loading_1.5s_ease-in-out_infinite]"})}),t.jsx("p",{className:"text-white text-sm font-black uppercase tracking-[0.3em] mt-8 animate-pulse",children:"Loading..."}),t.jsx("p",{className:"text-slate-400 text-[10px] font-black uppercase tracking-[0.2em]",children:"Cricket is Life, Enjoy It"}),t.jsx("p",{className:"text-slate-600 text-[9px] font-bold uppercase tracking-widest",children:"Powered by Mitchipoohdevs"})]}),t.jsx("style",{children:"@keyframes loading { 0% { transform: translateX(-100%); } 50% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }"})]})}if(!m||$)return t.jsx(o0,{onComplete:Nr,onCancel:$?()=>oe(!1):void 0,initialMode:Ee});const Hn=m.joinedClubIds&&m.joinedClubIds.length>0?o.find(U=>U.id===m.joinedClubIds[0]):null;return t.jsxs(G2,{children:[t.jsxs(Bk,{activeTab:se,onTabChange:M,profile:m,theme:ne,organizations:o,viewingOrgId:$e,onThemeToggle:()=>ee(U=>U==="light"?"dark":"light"),settings:f,onToggleSetting:U=>Y({...f,[U]:U==="devMode"?!f.devMode:!f[U]}),onEditProfile:()=>{m.role==="Guest"?(Ue("CREATE"),oe(!0)):(oe(!0),Ue("CREATE"))},onApplyForAccreditation:()=>Be(!0),onSignOut:async()=>{Ns&&await Bt(),G(Yg)},onSignIn:()=>{Ue("LOGIN"),oe(!0)},onSignUp:()=>{Ue("CREATE"),oe(!0)},onSwitchProfile:wr,showCaptainHub:!0,activeViewRole:ft,children:[t.jsx(bb,{isOpen:Me,onClose:()=>Be(!1),organizations:o.filter(U=>{var F;return!((F=m.joinedClubIds)!=null&&F.includes(U.id))}),onApply:Rt}),t.jsx(MI,{isOpen:He,onClose:()=>bt(!1),matches:pt,onCloseAllAndContinue:Ds,onIgnoreAndContinue:()=>{bt(!1),M("setup")}}),t.jsxs("div",{id:"csp-view-container",className:"h-full flex flex-col min-h-0",children:[t.jsx(U2,{team:p.find(U=>U.id===X)||null,isOpen:!!X,onClose:()=>we(null),allFixtures:xt,onViewPlayer:U=>_e(U),isFollowed:X?b.teams.includes(X):!1,onToggleFollow:()=>X&&it("TEAM",X),onViewMatch:U=>{W(U.id),M("media")},onUpdateTeam:m.role==="Administrator"||X&&o.some(U=>U.members.some(F=>F.userId===m.id&&(F.role==="Administrator"&&!F.managedTeamId||F.managedTeamId===X)))?U=>{const F=o.map(J=>({...J,memberTeams:J.memberTeams.map(z=>z.id===X?{...z,...U}:z)}));y(F)}:void 0,onDeleteTeam:m.role==="Administrator"||X&&o.some(U=>U.members.some(F=>F.userId===m.id&&F.role==="Administrator"&&!F.managedTeamId))?()=>{const U=o.map(F=>({...F,memberTeams:F.memberTeams.filter(J=>J.id!==X)}));y(U),we(null)}:void 0,onRequestCaptainHub:m.role==="Administrator"||X&&o.some(U=>U.members.some(F=>F.userId===m.id&&F.role==="Administrator"))?()=>{X&&(Te(X),Os("captain_hub"),we(null))}:void 0}),t.jsx(vb,{player:Pt.find(U=>U.id===te)||null,isOpen:!!te,onClose:()=>_e(null),isFollowed:te?b.players.includes(te):!1,onToggleFollow:()=>te&&it("PLAYER",te),onClaim:Xe,allFixtures:xt,onViewMatch:U=>{W(U.id),M("media")},onUpdatePlayer:m.role==="Administrator"||te&&o.some(U=>U.members.some(F=>{var J;return F.userId===m.id&&(F.role==="Administrator"&&!F.managedTeamId||F.managedTeamId&&((J=Pt.find(z=>z.id===te))==null?void 0:J.teamId)===F.managedTeamId)}))?U=>{const F=Pt.find(z=>z.id===te);if(!F)return;const J=o.map(z=>({...z,memberTeams:z.memberTeams.map(ie=>ie.id===F.teamId?{...ie,players:ie.players.map(xe=>xe.id===F.id?{...xe,...U}:xe)}:ie)}));y(J)}:void 0,onDeletePlayer:m.role==="Administrator"||te&&o.some(U=>U.members.some(F=>{var J;return F.userId===m.id&&(F.role==="Administrator"&&!F.managedTeamId||F.managedTeamId&&((J=Pt.find(z=>z.id===te))==null?void 0:J.teamId)===F.managedTeamId)}))?U=>{const F=Pt.find(z=>z.id===U);if(!F)return;const J=o.map(z=>({...z,memberTeams:z.memberTeams.map(ie=>ie.id===F.teamId?{...ie,players:ie.players.filter(xe=>xe.id!==U)}:ie)}));y(J),_e(null)}:void 0}),se==="home"&&t.jsx(Fu,{organizations:o,standaloneMatches:d,userRole:m.role,onStartMatch:U=>{U.status==="Scheduled"?Yt(U):(Z(U),M("scorer"))},onViewMatch:U=>{W(U.id),M("media")},onRequestSetup:()=>Yt(null),onUpdateOrgs:y,onCreateOrg:xs,onAddTeam:vs,onProcessApplication:lt,onRemoveTeam:Ss,onRemoveTournament:de,onUpdateTournament:Ie,onUpdateFixture:Ye,onRemoveFixture:H,allOrganizations:o,onBulkAddPlayers:(U,F)=>{const J=o.map(z=>({...z,memberTeams:z.memberTeams.map(ie=>ie.id===U?{...ie,players:[...ie.players,...F]}:ie)}));y(J),Q()},onAddGroup:(U,F)=>{const J=o.map(z=>z.id===U?{...z,groups:[...z.groups,{id:`grp-${Date.now()}`,name:F,teams:[]}]}:z);y(J),Q()},onUpdateGroupTeams:(U,F,J)=>{const z=o.map(ie=>ie.id===U?{...ie,groups:ie.groups.map(xe=>xe.id===F?{...xe,teams:ie.memberTeams.filter(dt=>J.includes(dt.id))}:xe)}:ie);y(z)},onAddTournament:(U,F)=>{const J=o.map(z=>z.id===U?{...z,tournaments:[...z.tournaments,F]}:z);y(J)},mediaPosts:u,onAddMediaPost:Se,onViewTeam:U=>we(U),onOpenMediaStudio:()=>M("media"),following:b,onToggleFollow:it,hireableScorers:ks,currentUserId:m.id,onApplyForOrg:Rt,currentUserProfile:m,showCaptainHub:!0,onOpenCaptainHub:()=>M("captain_hub"),onRequestMatchReports:()=>M("stats"),onRequestTransferMarket:()=>M("transfer_market"),onUpdateProfile:G,issues:A,onUpdateIssues:I,onRequestAffiliation:Oe,onViewOrg:U=>{ue(U),M("media")},onCreateUser:Mt,mockGlobalUsers:Tt,activeViewRole:ft,onSwitchViewRole:wc}),se==="my_matches"&&t.jsxs("div",{className:"max-w-4xl mx-auto p-4 content-container",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white uppercase tracking-widest",children:"My Matches"}),t.jsx("button",{onClick:()=>Yt(null),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-500 transition-all shadow-md",children:"Start New"})]}),(()=>{console.log("MY_MATCHES_DEBUG: Total standalone matches:",d.length),console.log("MY_MATCHES_DEBUG: Total org fixtures:",o.flatMap(F=>F.fixtures).length),console.log("MY_MATCHES_DEBUG: User profile ID:",m.id);const U=[...d,...o.flatMap(F=>F.fixtures)].filter(F=>{var ts;const J=p.filter(ss=>ss.players.some(os=>os.id===m.id)).map(ss=>ss.id),z=J.includes(F.teamAId)||J.includes(F.teamBId),ie=F.scorerId===m.id,xe=(ts=F.umpires)==null?void 0:ts.includes(m.id),dt=!F.tournamentId&&F.scorerId===m.id,Qt=z||ie||xe||dt;return Qt&&console.log("MY_MATCHES_DEBUG: Including match:",{id:F.id,teams:`${F.teamAName} vs ${F.teamBName}`,reason:z?"player":ie?"scorer":xe?"umpire":"standalone creator"}),Qt}).sort((F,J)=>new Date(J.date).getTime()-new Date(F.date).getTime());return console.log("MY_MATCHES_DEBUG: Filtered matches count:",U.length),U.length===0?t.jsx("div",{className:"text-center py-12 bg-slate-50 dark:bg-slate-800/50 rounded-3xl border-2 border-dashed border-slate-200 dark:border-slate-700",children:t.jsx("p",{className:"text-slate-400 font-bold uppercase text-xs tracking-widest",children:"No matches found"})}):t.jsx("div",{className:"grid gap-4",children:U.map(F=>t.jsxs("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800 flex items-center justify-between hover:shadow-md transition-all group",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center font-black text-white text-xs ${F.status==="Live"?"bg-red-500 animate-pulse":F.status==="Completed"?"bg-emerald-500":"bg-slate-400"}`,children:F.status==="Live"?"LIVE":F.status==="Completed"?"FT":"SCH"}),t.jsxs("div",{children:[t.jsxs("h3",{className:"font-black text-slate-900 dark:text-white text-sm",children:[F.teamAName," vs ",F.teamBName]}),t.jsxs("p",{className:"text-xs text-slate-500 font-bold",children:[new Date(F.date).toLocaleDateString(),"  ",F.venue]})]})]}),t.jsx("div",{className:"flex items-center gap-3",children:F.status==="Live"&&F.scorerId===m.id?t.jsx("button",{onClick:J=>{J.stopPropagation(),Z(F),M("scorer")},className:"px-4 py-2 bg-emerald-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-emerald-500 transition-all shadow-lg",children:"Resume Scoring"}):t.jsx("button",{onClick:()=>{W(F.id),M("media")},className:"px-4 py-2 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-slate-200 transition-all",children:"View Details"})})]},F.id))})})()]}),se==="my_tournaments"&&t.jsxs("div",{className:"max-w-4xl mx-auto p-4 content-container",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white uppercase tracking-widest italic",children:"My Tournaments"}),t.jsx("button",{onClick:()=>M("create_tournament"),className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-indigo-500 transition-all shadow-lg",children:"New Tournament"})]}),(()=>{const U=o.flatMap(F=>(F.tournaments||[]).filter(J=>J.createdBy===m.id).map(J=>({...J,orgName:F.name}))).sort((F,J)=>(J.startDate?new Date(J.startDate).getTime():0)-(F.startDate?new Date(F.startDate).getTime():0));return U.length===0?t.jsxs("div",{className:"text-center py-20 bg-slate-50 dark:bg-slate-800/50 rounded-[3rem] border-2 border-dashed border-slate-200 dark:border-slate-700",children:[t.jsx("div",{className:"text-4xl mb-4",children:""}),t.jsx("h3",{className:"text-lg font-black text-slate-900 dark:text-white mb-2",children:"No Tournaments Found"}),t.jsx("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest",children:"Tournaments you create will appear here."})]}):t.jsx("div",{className:"grid gap-4",children:U.map(F=>t.jsx("div",{className:"group bg-white dark:bg-slate-900 p-6 rounded-[2rem] border border-slate-100 dark:border-slate-800 shadow-sm hover:shadow-xl transition-all cursor-pointer",onClick:()=>{var J;ue(((J=o.find(z=>z.tournaments.some(ie=>ie.id===F.id)))==null?void 0:J.id)||null),M("my_tournaments")},children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"font-black text-lg text-slate-900 dark:text-white leading-tight mb-1 group-hover:text-indigo-600 transition-colors",children:[F.orgName," - ",F.name]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-[10px] font-black text-indigo-500 uppercase tracking-widest",children:F.format}),t.jsx("span",{className:"w-1 h-1 bg-slate-300 rounded-full"}),t.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:F.status||"Draft"})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-[10px] font-black text-slate-900 dark:text-white uppercase tracking-widest",children:F.startDate?new Date(F.startDate).toLocaleDateString():"N/A"}),t.jsx("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:"Start Date"})]})]})},F.id))})})()]}),se==="profile"&&t.jsx(o0,{existingProfile:m,onComplete:U=>{G(U),M("home")},onCancel:()=>M("home"),initialMode:"CREATE"}),se==="my_teams"&&t.jsxs("div",{className:"p-6",children:[t.jsx("h2",{className:"text-2xl font-black text-white mb-6",children:"My Teams & Registry"}),t.jsx(Jg,{allTeams:p,allOrganizations:o,onViewTeam:we,onBack:()=>M("home")})]}),se==="my_clubs"&&t.jsxs("div",{className:"max-w-7xl mx-auto p-4",children:[t.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white uppercase tracking-widest italic mb-6 px-4",children:"My Managed Clubs"}),t.jsx("div",{className:"grid grid-cols-1 gap-8",children:o.filter(U=>U.createdBy===m.id).map(U=>t.jsx("div",{className:"bg-white dark:bg-slate-900 p-6 rounded-[2.5rem] border border-slate-100 dark:border-slate-800 shadow-sm",children:t.jsx(sc,{organization:U,userRole:"Administrator",onBack:()=>{},onViewTournament:F=>Re(F),onViewPlayer:_e,onRequestAddTeam:()=>ue(U.id),onRequestAddTournament:()=>ue(U.id),players:U.memberTeams.flatMap(F=>F.players.map(J=>({...J,teamName:F.name,teamId:F.id,orgId:U.id,orgName:U.name}))),onViewTeam:we,isFollowed:b.orgs.includes(U.id),onToggleFollow:()=>it("ORG",U.id),globalUsers:[],onAddMember:()=>{},onUpdateOrg:(F,J)=>{y(o.map(z=>z.id===F?{...z,...J}:z)),Q()},onRemoveTeam:Ss,onRemoveTournament:de,onUpdateTournament:Ie,onRemoveFixture:H,onProcessApplication:lt,allOrganizations:o,currentUserProfile:m,onUpdateFixture:Ye,onApplyForOrg:Rt,onRequestAffiliation:Oe,onSelectHubTeam:Te,onCreateUser:async()=>({success:!1})})},U.id))})]}),se==="career"&&t.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-8",children:ft==="Scorer"?t.jsx(B2,{profile:m,fixtures:xt,onUpdateProfile:G,onAcceptFixture:es,onBack:()=>Os("media")}):t.jsx(L2,{profile:m,onUpdateProfile:G,showCaptainHub:m.role==="Administrator"||ft==="Captain",onOpenCaptainHub:()=>Os("captain_hub"),onBack:()=>Os("media")})}),se==="umpire_hub"&&t.jsx(AI,{profile:m,fixtures:xt,organizations:o,allTeams:p,onBack:()=>Os("media"),onCreateFixture:()=>M("setup"),onSubmitReport:U=>{wt(U),alert("Umpire Report Submitted!")}}),se==="create_tournament"&&t.jsx("div",{className:"max-w-4xl mx-auto p-6 md:p-12",children:qe==="SELECT"?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"text-4xl font-black text-slate-900 dark:text-white uppercase tracking-tight mb-3",children:"Launch Tournament"}),t.jsx("p",{className:"text-slate-500 font-bold uppercase text-[10px] tracking-[0.3em]",children:"Choose your organization or start standalone"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[t.jsxs("div",{className:"group bg-white dark:bg-slate-900 p-10 rounded-[3rem] border-2 border-slate-100 dark:border-slate-800 shadow-xl hover:shadow-2xl hover:border-indigo-500/30 transition-all cursor-pointer overflow-hidden relative",onClick:()=>mt("STANDALONE"),children:[t.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-indigo-50 dark:bg-indigo-900/20 rounded-full blur-3xl opacity-0 group-hover:opacity-100 transition-opacity"}),t.jsx("div",{className:"w-16 h-16 bg-slate-50 dark:bg-slate-800 rounded-3xl flex items-center justify-center text-3xl mb-8 group-hover:bg-indigo-600 group-hover:text-white transition-all shadow-inner",children:""}),t.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white mb-3",children:"Standalone"}),t.jsx("p",{className:"text-slate-500 text-sm font-bold leading-relaxed",children:"Perfect for exhibition matches or informal multi-day series without complex governing bodies."})]}),t.jsxs("div",{className:"group bg-slate-900 dark:bg-indigo-950 p-10 rounded-[3rem] shadow-2xl hover:shadow-indigo-500/20 hover:scale-[1.02] transition-all cursor-pointer overflow-hidden relative",onClick:()=>{M("my_clubs")},children:[t.jsx("div",{className:"absolute top-0 right-0 p-6 flex gap-1 opacity-20",children:[1,2,3].map(U=>t.jsx("div",{className:"w-4 h-4 rounded-full bg-white"},U))}),t.jsx("div",{className:"w-16 h-16 bg-white/10 rounded-3xl flex items-center justify-center text-3xl mb-8 group-hover:bg-white group-hover:text-slate-900 transition-all",children:""}),t.jsx("h3",{className:"text-2xl font-black text-white mb-3",children:"Via Organization"}),t.jsx("p",{className:"text-slate-400 text-sm font-bold leading-relaxed",children:"Launch official leagues, manage multiple groups, and track full affiliation history under a club or board."})]})]}),t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-8 rounded-[2.5rem] border border-slate-100 dark:border-slate-700 flex items-center justify-center gap-6",children:[t.jsx("div",{className:"text-xs font-black text-slate-400 uppercase tracking-widest whitespace-nowrap",children:"Need a new organization?"}),t.jsx("button",{onClick:()=>M("register_club"),className:"px-8 py-3 bg-white dark:bg-slate-900 text-slate-900 dark:text-white border border-slate-200 dark:border-slate-700 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:shadow-md transition-all shadow-sm",children:"Register Club"})]})]}):t.jsxs("div",{children:[t.jsx("button",{onClick:()=>mt("SELECT"),className:"mb-6 text-slate-400 font-bold uppercase text-[10px] tracking-widest hover:text-indigo-500 transition-colors flex items-center gap-2",children:" Back to Options"}),t.jsx("h2",{className:"text-2xl font-black text-indigo-400 mb-6 uppercase tracking-widest italic",children:"Create Standalone Tournament"}),t.jsx(Fu,{organizations:[],standaloneMatches:d,userRole:"Administrator",onStartMatch:()=>{},onViewMatch:U=>{W(U.id),M("media")},onRequestSetup:()=>M("setup"),onUpdateOrgs:()=>{},onCreateOrg:()=>{},onAddTeam:()=>{},onAddTournament:(U,F)=>{const J=o.find(z=>z.createdBy===m.id);J?y(o.map(z=>z.id===J.id?{...z,tournaments:[...z.tournaments,F]}:z)):xs({name:"Personal Tournaments"}),Q(),alert("Standalone Tournament Created!"),M("my_tournaments"),mt("SELECT")},mediaPosts:[],onAddMediaPost:()=>{},onViewTeam:we,onOpenMediaStudio:()=>{},following:b,onToggleFollow:it,currentUserId:m.id,currentUserProfile:m,onBulkAddPlayers:()=>{},onAddGroup:()=>{},onUpdateGroupTeams:()=>{},onUpdateFixture:Ye,onRemoveFixture:H,onUpdateTournament:Ie,onRemoveTournament:de})]})}),se==="register_club"&&t.jsxs("div",{className:"max-w-7xl mx-auto p-4",children:[t.jsx("h2",{className:"text-2xl font-black text-indigo-400 mb-6 uppercase tracking-widest",children:"Register New Club"}),t.jsx(Fu,{organizations:o,standaloneMatches:[],userRole:"Administrator",onStartMatch:()=>{},onViewMatch:()=>{},onRequestSetup:()=>{},onUpdateOrgs:y,onCreateOrg:U=>{xs(U),alert("Club Registered!"),M("my_clubs")},onAddTeam:vs,onProcessApplication:lt,onRemoveTeam:()=>{},onRemoveTournament:de,onUpdateTournament:Ie,onUpdateFixture:Ye,onRemoveFixture:H,allOrganizations:o,onBulkAddPlayers:()=>{},onAddGroup:()=>{},onUpdateGroupTeams:()=>{},onAddTournament:()=>{},mediaPosts:[],onAddMediaPost:()=>{},onViewTeam:()=>{},onOpenMediaStudio:()=>{},following:{teams:[],players:[],orgs:[]},onToggleFollow:()=>{},currentUserId:m.id,onApplyForOrg:Rt,currentUserProfile:m,onCreateUser:async()=>({success:!1})})]}),se==="following"&&t.jsx($g,{onBack:()=>M("home"),fixtures:xt,teams:p,players:Pt,mediaPosts:u,onAddMediaPost:Se,onUpdatePost:gt,onDeletePost:nt,following:b,onToggleFollow:it,onViewTeam:we,onViewPlayer:U=>_e(U.id),userRole:m.role,currentProfile:m,organizations:o,viewingOrgId:null,initialTab:"FOLLOWING"}),se==="my_club"&&Hn&&t.jsx(sc,{organization:Hn,userRole:"Player",onBack:()=>M("home"),onViewTournament:U=>{Re(U),M("tournament_details")},onViewPlayer:U=>_e(U.id),onRequestAddTeam:()=>{},onRequestAddTournament:()=>{const U={id:`trn-${Date.now()}`,name:"New League",format:"T20",status:"Upcoming",orgId:Hn.id,teamIds:[],groups:[],pointsConfig:br,overs:20},F=o.map(J=>J.id===Hn.id?{...J,tournaments:[...J.tournaments,U]}:J);y(F)},players:Pt.filter(U=>U.orgId===Hn.id),onViewTeam:we,isFollowed:b.orgs.includes(Hn.id),onToggleFollow:()=>it("ORG",Hn.id),globalUsers:Tt,onAddMember:()=>{},currentUserProfile:m,onRequestCaptainHub:()=>Os("captain_hub"),onSelectHubTeam:U=>{Te(U),Os("captain_hub")},onUpdateFixture:Ye,onApplyForOrg:Rt,allOrganizations:o,onRemoveTournament:de,onUpdateTournament:Ie,onUpdateOrg:(U,F)=>{const J=o.map(z=>z.id===U?{...z,...F}:z);y(J),Q()},onRemoveTeam:async(U,F)=>{await e0(U,F);const J=o.map(z=>z.id===U?{...z,memberTeams:z.memberTeams.filter(ie=>ie.id!==F)}:z);y(J),Q()}}),se==="tournament_details"&&re&&t.jsx(OI,{tournament:o.flatMap(U=>U.tournaments).find(U=>U.id===re),organization:o.find(U=>U.tournaments.some(F=>F.id===re)),allTeams:p,fixtures:xt,onBack:()=>Os("my_club"),isOrgAdmin:m.role==="Administrator"||((Ga=o.find(U=>U.tournaments.some(F=>F.id===re)))==null?void 0:Ga.members.some(U=>U.userId===m.id&&U.role==="Administrator"&&!U.managedTeamId))||!1,onSelectHubTeam:U=>{Te(U),Os("captain_hub"),Re(null)},onUpdateTournament:U=>{const F=o.map(J=>({...J,tournaments:J.tournaments.map(z=>z.id===re?{...z,...U}:z)}));y(F)},onDeleteTournament:U=>{const F=o.map(J=>({...J,tournaments:J.tournaments.filter(z=>z.id!==U)}));y(F),Re(null),M("home")},onAddTeam:U=>{const F=o.map(J=>({...J,tournaments:J.tournaments.map(z=>z.id===re?{...z,teamIds:[...z.teamIds||[],U]}:z)}));y(F)},onRemoveTeam:U=>{const F=o.map(J=>({...J,tournaments:J.tournaments.map(z=>{var ie;return z.id===re?{...z,teamIds:(ie=z.teamIds)==null?void 0:ie.filter(xe=>xe!==U)}:z})}));y(F)}}),se==="stats"&&t.jsx("div",{className:"max-w-7xl mx-auto p-4",children:t.jsx(Tb,{teams:p,onBack:()=>M("home")})}),se==="setup"&&t.jsx(hS,{teams:p,existingFixture:Ne,onMatchReady:on,onCancel:()=>{ae(null),M("home")},onCreateTeam:ve}),se==="scorer"&&(B?t.jsx(kI,{match:B,teams:p,userRole:m.role,organizations:o,onUpdateOrgs:y,onUpdateMatchState:cn,onComplete:()=>{Z(null),M("home")},onRequestNewMatch:()=>M("setup"),onAddMediaPost:Se,onExit:()=>M("home"),currentUserId:m.id}):t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center pb-20",children:[t.jsx("div",{className:"w-24 h-24 bg-indigo-50 rounded-3xl flex items-center justify-center text-4xl mb-8",children:""}),t.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-2",children:"Cloud Sync Scoring"}),t.jsx("p",{className:"text-slate-500 font-bold mb-8 max-w-sm",children:"Manage live matches with real-time analytics and global sync."}),t.jsxs("div",{className:"flex flex-col gap-4",children:[Ot&&t.jsxs("button",{onClick:()=>Z(Ot),className:"bg-emerald-600 text-white px-12 py-5 rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-emerald-500 transition-all flex items-center gap-3 justify-center",children:[t.jsx("span",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"Resume Ongoing Match"]}),t.jsx("button",{onClick:()=>M("setup"),className:"bg-indigo-600 text-white px-12 py-5 rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-indigo-500 transition-all",children:"Start New Cloud Match"})]})]})),se==="captain_hub"&&(be?t.jsx(Wg,{team:p.find(U=>U.id===be),fixtures:xt.filter(U=>U!=null),allPlayers:Pt,onBack:()=>{Te(null)},onSubmitReport:ct,onLodgeProtest:U=>I([...A,U]),currentUser:m,issues:A,onUpdateFixtureSquad:zt}):ps.length>1?t.jsx(CI,{teams:ps,onSelect:U=>Te(U),onBack:()=>M("home")}):ps.length===1?t.jsx(Wg,{team:ps[0],fixtures:xt.filter(U=>U!=null),allPlayers:Pt,onBack:()=>M("media"),onSubmitReport:ct,onLodgeProtest:U=>I([...A,U]),currentUser:m,issues:A,onUpdateFixtureSquad:zt}):t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-12",children:[t.jsx("div",{className:"w-24 h-24 bg-slate-100 rounded-3xl flex items-center justify-center text-slate-400 text-5xl mb-8",children:""}),t.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-4",children:"No Team Assigned"}),t.jsx("p",{className:"text-slate-500 font-bold max-w-md mb-8",children:"You need to be a member of a team to access the Captain Hub. Join a team or create one to get started."}),t.jsx("button",{onClick:()=>M("team_registry"),className:"bg-indigo-600 text-white px-8 py-4 rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl hover:bg-indigo-500 transition-all",children:"Browse Teams"})]})),se==="media"&&P&&((dn=Ms==null?void 0:Ms.reportSubmission)==null?void 0:dn.status)==="PENDING"&&m.role==="Administrator"?t.jsx(II,{submission:Ms.reportSubmission,fixture:Ms,onApprove:Ws,onReject:Wt,onBack:()=>W(null)}):se==="media"&&t.jsx($g,{onBack:()=>{M("home"),ue(null)},fixtures:xt,teams:p,players:Pt,mediaPosts:u,onAddMediaPost:Se,onUpdatePost:gt,onDeletePost:nt,initialMatchId:P,following:b,onToggleFollow:it,onViewTeam:we,onViewPlayer:U=>_e(U.id),userRole:m.role,currentProfile:m,organizations:o,viewingOrgId:$e}),se==="registry"&&t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsxs("div",{className:"bg-white p-1.5 rounded-2xl border border-slate-200 shadow-lg inline-flex",children:[t.jsx("button",{onClick:()=>M("registry"),className:"px-8 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all bg-white text-indigo-600 shadow-md",children:"Players"}),t.jsx("button",{onClick:()=>M("team_registry"),className:"px-8 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all text-slate-400 hover:text-slate-600",children:"Teams"})]})}),t.jsx(jv,{allPlayers:Pt,allTeams:p,onViewPlayer:U=>_e(U),onBack:()=>M("home")})]}),se==="team_registry"&&t.jsxs("div",{children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsxs("div",{className:"bg-white p-1.5 rounded-2xl border border-slate-200 shadow-lg inline-flex",children:[t.jsx("button",{onClick:()=>M("registry"),className:"px-8 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all text-slate-400 hover:text-slate-600",children:"Players"}),t.jsx("button",{onClick:()=>M("team_registry"),className:"px-8 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all bg-white text-indigo-600 shadow-md",children:"Teams"})]})}),t.jsx(Jg,{allTeams:p,allOrganizations:o,onViewTeam:U=>we(U),onBack:()=>M("home")})]}),se==="transfer_market"&&t.jsx(RI,{onBack:()=>M("home"),onViewPlayer:U=>_e(U),currentOrg:m.role==="Administrator"?o.find(U=>U.createdBy===m.id)||o[0]:null,onSendInvite:pe})]})]}),Ae&&Ot&&t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm animate-in fade-in duration-300",children:t.jsxs("div",{className:"bg-white dark:bg-slate-900 w-full max-w-sm rounded-[3rem] p-8 shadow-2xl border border-slate-100 dark:border-slate-800 text-center relative overflow-hidden",children:[t.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:t.jsx("div",{className:"text-8xl",children:""})}),t.jsx("div",{className:"w-20 h-20 bg-emerald-50 dark:bg-emerald-900/20 rounded-3xl flex items-center justify-center text-4xl mb-6 mx-auto shadow-inner",children:""}),t.jsx("h2",{className:"text-2xl font-black text-slate-900 dark:text-white mb-2 uppercase tracking-tight italic",children:"Resume Live Scoring?"}),t.jsxs("p",{className:"text-slate-500 font-bold mb-8 text-sm",children:["You have an active match in progress: ",t.jsx("br",{}),t.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400",children:[Ot.teamAName," vs ",Ot.teamBName]})]}),t.jsxs("div",{className:"grid gap-3",children:[t.jsx("button",{onClick:()=>{Z(Ot),M("scorer"),De(!1)},className:"w-full bg-emerald-600 text-white py-5 rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl hover:shadow-emerald-500/20 hover:scale-[1.02] transition-all",children:"Resume Game"}),t.jsx("button",{onClick:()=>{localStorage.removeItem("cc_active_match_id"),De(!1)},className:"w-full text-slate-400 font-black uppercase text-[10px] tracking-widest py-3 hover:text-slate-600 transition-colors",children:"Dismiss"})]})]})}),Ot&&se!=="scorer"&&t.jsx("div",{className:"fixed bottom-24 left-4 right-4 z-[60] animate-in slide-in-from-bottom-8 duration-500",children:t.jsxs("div",{onClick:()=>{Z(Ot),M("scorer")},className:"bg-slate-900 dark:bg-indigo-950 text-white p-4 rounded-3xl shadow-2xl flex items-center justify-between cursor-pointer border border-white/10 hover:scale-[1.02] transition-all group",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-10 h-10 bg-emerald-500 rounded-2xl flex items-center justify-center text-xl animate-pulse",children:""}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-black text-[10px] uppercase tracking-widest text-emerald-400 mb-0.5",children:"Live Scoring Active"}),t.jsxs("p",{className:"text-xs font-bold text-white/80",children:[Ot.teamAName," vs ",Ot.teamBName]})]})]}),t.jsx("div",{className:"bg-white/10 px-4 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest group-hover:bg-emerald-600 transition-all",children:"Back to Game"})]})}),_t&&t.jsx(LI,{match:_t,onClose:()=>tt(null),onPin:()=>{_t.status==="Live"&&(W(_t.id),M("media")),tt(null)},allTeams:p}),t.jsx(DI,{isOpen:ze,onClose:()=>Ke(!1),initialMode:Ce,onSuccess:()=>{Ke(!1)}})]})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{var e;const s=(e=window.wpApiSettings)!=null&&e.plugin_url?`${window.wpApiSettings.plugin_url}sw.js`:"./sw.js";navigator.serviceWorker.register(s).then(n=>{console.log("SW registered: ",n)}).catch(n=>{console.log("SW registration failed: ",n)})});const Sv=document.getElementById("root");if(!Sv)throw new Error("Could not find root element to mount to");const PI=Pw.createRoot(Sv);PI.render(t.jsx(Fn.StrictMode,{children:t.jsx(Dk,{children:t.jsx(BI,{})})}));
